import{$a as rt,$e as Zi,Ac as gi,Ba as Ce,Bb as Y,Bc as ge,Bd as N,Be as re,C as Jt,Ca as pt,Cb as Ue,Cc as xi,Cd as D,Ce as Be,Da as Ne,Db as si,Dc as Si,Ec as vi,Ee as Ai,Fa as u,Fb as ri,Fc as A,Fe as _e,Gc as hi,Gd as ut,Ha as d,Hc as bi,He as bt,Ia as ie,Ib as _t,Ic as Ti,Id as oe,Ja as Ee,Jb as _i,Jc as xe,Jd as ae,Ka as w,Kb as ct,Kc as yi,Kd as Pi,L as te,La as f,Lc as ne,Ld as Dt,Le as ce,Ma as be,Mc as Pt,Me as Tt,Na as Ve,Nc as wi,Nd as Se,Ne as yt,O as ei,Oa as P,Oc as Ii,Oe as Wi,Pa as F,Pd as Ae,Pe as Li,Qa as s,Qb as ci,Ra as r,Rc as Ft,Re as Hi,Sa as g,Sb as di,Sc as Bi,T as ti,Ta as $,Tb as mi,Tc as ki,Te as Gi,Ua as y,Uc as Ei,Ue as qi,Va as x,Vd as Fi,Ve as Qi,Wa as l,Wc as Vi,We as Ki,Xc as Mi,Xe as wt,Yc as Oi,Yd as We,Zc as Ri,Zd as Ct,Ze as Xi,_ as ii,_a as st,_b as ui,_c as Ie,_e as Yi,a as ue,ab as b,b as ke,ba as O,bb as h,cb as T,da as X,db as V,ea as ni,fa as lt,fb as Me,fe as Di,ga as z,gb as Oe,hb as Re,he as le,ia as S,ie as J,ja as v,jd as Ke,je as ft,ka as je,kb as K,kd as me,ke as ji,lb as we,le as gt,m as Yt,mb as q,mc as Z,me as $i,nb as Rt,oa as oi,oe as ee,p as Zt,pa as he,pb as ze,pd as W,pe as Le,qa as $e,qb as _,qd as E,qe as xt,rb as m,rc as Ci,rd as H,re as St,sb as k,sc as Q,se as vt,ta as ai,tb as fe,tc as dt,te as pe,u as Ot,ua as li,ub as I,uc as j,v as De,vc as mt,ve as se,wa as p,wd as G,we as ht,xc as fi,xe as Ni,yb as pi,ye as zi,ze as Ui}from"./chunk-EF2J2WJY.js";var jt=(()=>{class t{transform(e){return e}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"asStep",type:t,pure:!0})}return t})();var Xe=(()=>{class t{transform(e,i,n){if(e==null)return[];if(!i?.length)return e;let a=new Set(i);return e.filter(c=>!a.has(c.value)||c.value===n)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"filterOptions",type:t,pure:!0})}return t})();var $t=(()=>{class t{transform(e,i){if(e!=null){let n=Mi[i.inserterTarget][i.inserterCapacity]?.find(a=>a.value.gt(e)||a.id===A.StackInserter);return n==null?null:{id:n.id,value:e.div(n.value)}}return null}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"inserterSpeed",type:t,pure:!0})}return t})();var Nt=(()=>{class t{transform(e){return e==null?"":" ".repeat(4-e.length)+e}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"leftPad",type:t,pure:!0})}return t})();var ve=(()=>{class t{static transform(e,i){if(i==null)return e.toFraction();if(i===-2)return Math.round(e.mul(j(100n)).toNumber()).toString();let a=e.toPrecision(i).toString();if(i>0){let c=j(1,Math.pow(10,i));e.gt(j.zero)&&e.lt(c)&&(a=`<${a}`);let C=a.split(".");if(C.length>1){if(C[1].length<i){let B=i-C[1].length;return a+"0".repeat(B)}}else return e.isInteger()?a+" ".repeat(i+1):a+"."+"0".repeat(i)}return a}transform(e,i){return t.transform(e,i)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"rate",type:t,pure:!0})}return t})();var zt=(()=>{class t{transform(e,i,n){return n===A.Pumpjack?`${ve.transform(e.mul(j(100n)),i!=null?Math.max(i-2,0):i)}%`:ve.transform(e,i)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"machineRate",type:t,pure:!0})}return t})();var Ut=(()=>{class t{transform(e,i){return i!==ge.CaptainOfIndustry||e!==A.MineControlTower}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"machineShowRate",type:t,pure:!0})}return t})();var At=(()=>{class t{transform(e,i){return e==null?!1:i!==ge.DysonSphereProgram||e!==A.MiningMachine}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"machineShow",type:t,pure:!0})}return t})();var Wt=(()=>{class t{transform(e,i,n=!1){if(e==null)return[];let a=e.map(c=>({label:i[c].name,value:c}));return n&&a.unshift({label:"None",value:A.Module}),a}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"options",type:t,pure:!0})}return t})();var Lt=(()=>{class t{transform(e,i,n){switch(n){case Pt.GW:return`${ve.transform(e.div(j(1000000n)),i)} GW`;case Pt.MW:return`${ve.transform(e.div(j(1000n)),i)} MW`;default:return`${ve.transform(e,i)} kW`}}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"power",type:t,pure:!0})}return t})();var Ht=(()=>{class t{routerSvc=O(We);transform(e,i,n){let a=e;if(a.recipeId){let c=n.adjustedRecipe[a.recipeId];c.isTechnology&&c.productivity&&e.items&&(a=ke(ue({},e),{items:e.items.div(c.productivity)}))}return this.routerSvc.stepHref(a,i,n.hash)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"stepHref",type:t,pure:!0})}return t})();var Pe=(()=>{class t{static transform(e){return e.itemId??e.recipeObjectiveId??e.recipeId??e.id}transform(e){return t.transform(e)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=z({name:"stepId",type:t,pure:!0})}return t})();var Te=(()=>{class t{contentSvc=O(Se);pDropdown=O(se,{self:!0});labDropdownBase=he();setAutoFocusFilter=Ue(()=>{let e=this.contentSvc.isMobile();this.pDropdown.autofocusFilter=!e});setStyleClass=Ue(()=>{this.pDropdown.styleClass=this.labDropdownBase()});ngOnInit(){this.pDropdown.appendTo="body",this.pDropdown.filter=!0,this.pDropdown.scrollHeight="40vh",this.pDropdown.panelStyleClass="tooltip"}static \u0275fac=function(i){return new(i||t)};static \u0275dir=lt({type:t,selectors:[["","labDropdownBase",""]],inputs:{labDropdownBase:[1,"labDropdownBase"]}})}return t})();var xn=(t,o)=>o.id;function Sn(t,o){if(t&1&&(s(0,"div",8),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function vn(t,o){if(t&1&&g(0,"lab-tooltip",11),t&2){let e=l().$implicit;d("id",e.value)}}function hn(t,o){if(t&1&&(s(0,"div",9),g(1,"i"),_(2,"iconSmClass"),s(3,"div",10),h(4),r(),u(5,vn,1,1,"ng-template",null,0,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",e.value!=="module"?i:void 0),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function bn(t,o){if(t&1&&g(0,"lab-tooltip",11),t&2){let e=l(2).$implicit;d("id",e.id)}}function Tn(t,o){if(t&1&&u(0,bn,1,1,"lab-tooltip",11),t&2){let e=l().$implicit;f(e.id?0:-1)}}function yn(t,o){if(t&1){let e=y();s(0,"button",12),x("click",function(){S(e);let n=l().$index,a=l();return v(a.removeEntry(n))}),r()}if(t&2){let e=l().$implicit,i=l();d("disabled",e.id===i.ItemId.Module)}}function wn(t,o){if(t&1){let e=y();s(0,"div",2)(1,"lab-input-number",3),x("setValue",function(n){let a=S(e).$index,c=l();return v(c.setCount(a,n))}),r(),s(2,"p-dropdown",4),_(3,"filterOptions"),x("onChange",function(n){let a=S(e).$index,c=l();return v(c.setId(a,n))}),u(4,Sn,3,4,"ng-template",5)(5,hn,7,6,"ng-template",6),r(),u(6,Tn,1,1,"ng-template",null,0,I)(8,yn,1,1,"button",7),r()}if(t&2){let e,i=o.$implicit,n=o.$index,a=b(7),c=l();p(),d("value",(e=i.count)!==null&&e!==void 0?e:c.rational.zero)("maximum",c.maximum()[n])("disabled",i.id===c.ItemId.Module),p(),d("ngModel",i.id)("pTooltip",a)("options",fe(3,7,c.options(),c.exclude(),i.id)),p(6),f(c.entity().modules!==!0?8:-1)}}var it=(()=>{class t{store=O(Z);entity=he.required();modules=he.required();recipeId=he();setValue=oi();data=this.store.selectSignal(E.selectDataset);exclude=Y(()=>this.modules().map(e=>e.id).filter(dt));sum=Y(()=>this.modules().map(e=>e.count).filter(dt).reduce((e,i)=>e.add(i),j.zero));options=Y(()=>me.moduleOptions(this.entity(),this.data(),this.recipeId()));maximum=Y(()=>{let e=this.modules(),i=Q(this.entity().modules,j.zero);if(i===!0)return e.map(()=>null);let n=this.sum(),a=e.find(C=>C.id===A.Module);a&&(n=n.sub(Q(a.count,j.zero)));let c=i.sub(n);return e.map(C=>Q(C.count,j.zero).add(c))});rational=j;ItemId=A;setCount(e,i){let n=this.modules().map((a,c)=>e===c?ke(ue({},a),{count:i}):a);this.updateEmpty(n),this.setValue.emit(n)}setId(e,i){i.originalEvent.stopPropagation();let n=i.value,a=this.modules().map((c,C)=>e===C?ke(ue({},c),{id:n}):c);this.setValue.emit(a)}removeEntry(e){let i=this.modules().filter((n,a)=>e!==a);this.updateEmpty(i),this.setValue.emit(i)}updateEmpty(e){let i=this.entity().modules;if(i===!0||i==null)return;let n=e.map(a=>a.count).filter(dt).reduce((a,c)=>a.add(c),j.zero);if(n.lt(i)){let a=i.sub(n),c=e.find(C=>C.id===A.Module);c?c.count=Q(c.count,j.zero).add(a):e.push({id:A.Module,count:a})}else if(n.gt(i)){let a=n.sub(i),c=e.find(C=>C.id===A.Module);c&&(c.count=Q(c.count,j.zero).sub(a),c.count.isZero()&&e.splice(e.indexOf(c),1))}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["lab-modules"]],inputs:{entity:[1,"entity"],modules:[1,"modules"],recipeId:[1,"recipeId"]},outputs:{setValue:"setValue"},decls:3,vars:0,consts:[["tooltip",""],[1,"d-flex","flex-column"],[1,"p-inputgroup"],["width","3rem",3,"setValue","value","maximum","disabled"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"disabled"],[1,"d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","module",3,"id"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"click","disabled"]],template:function(i,n){i&1&&(s(0,"div",1),P(1,wn,9,11,"div",2,xn),r()),i&2&&(p(),F(n.modules()))},dependencies:[oe,ae,le,pe,ee,se,J,Be,ce,Te,_e,Xe],encapsulation:2,changeDetection:0})}return t})();function Bn(t,o){if(t&1){let e=y();s(0,"lab-input-number",10),_(1,"translate"),x("setValue",function(n){S(e);let a=l().$index,c=l();return v(c.setTotal(a,n))}),r()}if(t&2){let e=l().$implicit;d("pTooltip",m(1,2,"beaconsOverlay.totalTooltip"))("value",e.total)}}function kn(t,o){if(t&1&&(s(0,"div",4),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function En(t,o){if(t&1&&g(0,"lab-tooltip",19),t&2){let e=l().$implicit;d("id",e.value)}}function Vn(t,o){if(t&1&&(s(0,"div",17),g(1,"i"),_(2,"iconSmClass"),s(3,"div",18),h(4),r(),u(5,En,1,1,"ng-template",null,0,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Mn(t,o){if(t&1&&g(0,"lab-tooltip",19),t&2){let e=l(2).$implicit;d("id",e.id)}}function On(t,o){if(t&1&&u(0,Mn,1,1,"lab-tooltip",19),t&2){let e=l().$implicit;f(e.id?0:-1)}}function Rn(t,o){if(t&1){let e=y();s(0,"lab-modules",20),x("setValue",function(n){S(e);let a=l().$index,c=l();return v(c.setModules(a,n))}),r()}if(t&2){let e=l().$implicit,i=l();d("entity",i.data().beaconEntities[e.id])("modules",e.modules)("recipeId",i.recipeId())}}function Pn(t,o){if(t&1){let e=y();s(0,"div",3)(1,"div",9)(2,"lab-input-number",10),_(3,"translate"),x("setValue",function(n){let a=S(e).$index,c=l();return v(c.setCount(a,n))}),r(),u(4,Bn,2,4,"lab-input-number",11),s(5,"p-dropdown",12),x("onChange",function(n){let a=S(e).$index,c=l();return v(c.setId(a,n))}),u(6,kn,3,4,"ng-template",13)(7,Vn,7,6,"ng-template",14),r(),u(8,On,1,1,"ng-template",null,0,I),s(10,"button",15),x("click",function(){let n=S(e).$index,a=l();return v(a.removeEntry(n))}),r()(),u(11,Rn,1,3,"lab-modules",16),r()}if(t&2){let e,i=o.$implicit,n=b(9),a=l();p(2),d("pTooltip",m(3,8,"beaconsOverlay.eachTooltip"))("value",(e=i.count)!==null&&e!==void 0?e:a.rational.zero),p(2),f(i.total?4:-1),p(),d("ngModel",i.id)("pTooltip",n)("options",a.options().beacons),p(5),d("disabled",a.beacons().length===1),p(),f(i.id&&i.modules?11:-1)}}var ot=(()=>{class t extends gt{store=O(Z);setValue=new $e;data=this.store.selectSignal(E.selectDataset);options=this.store.selectSignal(E.selectOptions);beacons=Ce([]);recipeId=Ce(void 0);rational=j;show(e,i,n){this.beacons.set(i.map(a=>ke(ue({},a),{modules:a.modules?.map(c=>ue({},c))}))),this.recipeId.set(n),this._show(e)}setCount(e,i){this.beacons.update(n=>(n[e].count=i,n))}setId(e,i){i.originalEvent.stopPropagation(),this.beacons.update(n=>(n[e].id=i.value,n))}setModules(e,i){this.beacons.update(n=>(n[e].modules=i,n))}setTotal(e,i){this.beacons.update(n=>(n[e].total=i,n))}removeEntry(e){this.beacons.update(i=>i.filter((n,a)=>a!==e))}addEntry(){this.beacons.update(e=>{let i=this.options().beacons[0].value,n=this.data().beaconEntities[i].modules,a=[{id:A.Module,count:n}];return e.push({id:i,count:j.zero,modules:a}),e})}save(){let e=this.beacons().map(i=>Oi(i,{modules:i.modules?.filter(n=>n.count?.nonzero())}));this.setValue.emit(e)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=je(t)))(n||t)}})();static \u0275cmp=X({type:t,selectors:[["lab-beacons-overlay"]],outputs:{setValue:"setValue"},features:[Ne],decls:12,vars:9,consts:[["tooltip",""],["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","flex-column"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"click","label"],[1,"p-inputgroup"],["width","3rem","tooltipPosition","top",3,"setValue","pTooltip","value"],["width","3rem","tooltipPosition","top",3,"pTooltip","value"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"click","disabled"],[3,"entity","modules","recipeId"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","beacon",3,"id"],[3,"setValue","entity","modules","recipeId"]],template:function(i,n){i&1&&(s(0,"p-overlayPanel",1),x("onHide",function(){return n.onHide()}),s(1,"div",2),P(2,Pn,12,10,"div",3,be),s(4,"div",4)(5,"button",5),_(6,"translate"),x("click",function(){return n.addEntry()}),r()(),s(7,"div",6)(8,"button",7),_(9,"translate"),x("click",function(){return n.hide()}),r(),s(10,"button",8),_(11,"translate"),x("click",function(){return n.hide(!0)}),r()()()()),i&2&&(p(2),F(n.beacons()),p(3),d("label",m(6,3,"beaconsOverlay.addBeacons")),p(3),d("label",m(9,5,"ok")),p(2),d("label",m(11,7,"cancel")))},dependencies:[oe,ae,le,pe,ee,se,ft,J,Be,ce,it,Te,_e,re],encapsulation:2,changeDetection:0})}return t})();function Fn(t,o){if(t&1){let e=y();s(0,"lab-modules",6),x("setValue",function(n){S(e);let a=l();return v(a.modules.set(n))}),r()}if(t&2){let e=l();d("entity",o)("modules",e.modules())}}var at=(()=>{class t extends gt{store=O(Z);setValue=new $e;machine=Ce(void 0);modules=Ce([]);recipeId=Ce(void 0);show(e,i,n,a){this.machine.set(n),this.modules.set(i.map(c=>ue({},c))),this.recipeId.set(a),this._show(e)}save(){let e=this.modules();this.machine()?.modules!==!0&&(e=e.filter(i=>i.count?.nonzero())),this.setValue.emit(e)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=je(t)))(n||t)}})();static \u0275cmp=X({type:t,selectors:[["lab-modules-overlay"]],outputs:{setValue:"setValue"},features:[Ne],decls:8,vars:7,consts:[["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[3,"entity","modules"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"click","label"],[3,"setValue","entity","modules"]],template:function(i,n){if(i&1&&(s(0,"p-overlayPanel",0),x("onHide",function(){return n.onHide()}),s(1,"div",1),u(2,Fn,1,2,"lab-modules",2),s(3,"div",3)(4,"button",4),_(5,"translate"),x("click",function(){return n.hide()}),r(),s(6,"button",5),_(7,"translate"),x("click",function(){return n.hide(!0)}),r()()()()),i&2){let a;p(2),f((a=n.machine())?2:-1,a),p(2),d("label",m(5,3,"ok")),p(2),d("label",m(7,5,"cancel"))}},dependencies:[ee,ft,J,it,re],encapsulation:2,changeDetection:0})}return t})();var Fe=(()=>{class t{onMousedown(e){e.stopPropagation()}onTouchStart(e){e.stopPropagation()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=lt({type:t,selectors:[["","labNoDrag",""]],hostBindings:function(i,n){i&1&&x("mousedown",function(c){return n.onMousedown(c)})("touchstart",function(c){return n.onTouchStart(c)})}})}return t})();var $n=["stepsTable"],kt=(t,o)=>o.id,ye=(t,o)=>o.key,Nn=()=>[25,50,100,1e3],an=()=>[],zn=(t,o,e,i,n,a,c,C,B,M,R,U,de)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:B,recipeObjectiveId:M,percent:R,percentOnDest:!0,destId:U,inputs:de}),Un=(t,o,e,i,n,a,c,C,B,M,R,U,de,Mt)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:B,recipeObjectiveId:M,percent:R,destId:U,destRecipeObjectiveId:de,destIsRecipe:!0,outputs:Mt}),Et=(t,o)=>({step:t,percent:o}),An=(t,o)=>({items:t,itemId:o}),Wn=(t,o,e,i,n,a,c,C,B,M,R,U,de)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:B,recipeObjectiveId:M,percent:R,destId:U,destRecipeObjectiveId:de,destIsRecipe:!0}),Ln=(t,o,e,i,n,a,c,C,B)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,percent:c,destId:C,destRecipeObjectiveId:B,destIsRecipe:!0}),Hn=(t,o,e,i,n,a,c,C,B,M,R,U,de)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:B,recipeObjectiveId:M,percent:R,percentOnDest:!0,destId:U,destRecipeObjectiveId:de}),qe=(t,o)=>({value:t,itemId:o}),Gn=(t,o)=>({columnSettings:t,totals:o,type:"belt"}),qn=(t,o)=>({columnSettings:t,totals:o}),Qn=(t,o,e)=>({columnSettings:t,totals:o,modulesTotals:e,type:"machine"}),Kn=(t,o,e)=>({columnSettings:t,totals:o,modulesTotals:e,type:"beacon"});function Xn(t,o){if(t&1){let e=y();s(0,"button",33),_(1,"translate"),x("click",function(){S(e);let n=l(2);return v(n.exportSvc.stepsToCsv(n.steps()))}),r()}t&2&&d("label",m(1,1,"steps.downloadAsCsv"))}function Yn(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(){S(e);let n=l(3);return v(n.resetChecked())}),r()}t&2&&d("pTooltip",m(1,1,"steps.checkedUndoTooltip"))}function Zn(t,o){if(t&1&&(s(0,"th")(1,"div",34),g(2,"i",35),u(3,Yn,2,3,"button",25),r()()),t&2){let e=l(2);p(3),f(e.itemsModified().checked||e.recipesModified().checked?3:-1)}}function Jn(t,o){t&1&&(s(0,"th"),h(1),_(2,"translate"),r()),t&2&&(p(),T(m(2,1,"options.column.tree")))}function eo(t,o){t&1&&g(0,"p-sortIcon",24)}function to(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(n){return S(e),l(2).resetExcluded(),v(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.itemsUndoTooltip"))}function io(t,o){t&1&&g(0,"p-sortIcon",37)}function no(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(n){return S(e),l(3).resetBelts(),v(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.beltsUndoTooltip"))}function oo(t,o){if(t&1&&(s(0,"th",26)(1,"div",23)(2,"span"),h(3),_(4,"translate"),r(),u(5,io,1,0,"p-sortIcon",37)(6,no,2,3,"button",25),r()()),t&2){let e=l(2);p(3),T(m(4,3,"options.column.belts")),p(2),f(e.focus()?-1:5),p(),f(e.itemsModified().belts?6:-1)}}function ao(t,o){t&1&&g(0,"p-sortIcon",38)}function lo(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(n){return S(e),l(3).resetWagons(),v(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.wagonsUndoTooltip"))}function po(t,o){if(t&1&&(s(0,"th",27)(1,"div",23)(2,"span"),h(3),_(4,"translate"),r(),u(5,ao,1,0,"p-sortIcon",38)(6,lo,2,3,"button",25),r()()),t&2){let e=l(2);p(3),T(m(4,3,e.dispRateInfo().wagonsLabel)),p(2),f(e.focus()?-1:5),p(),f(e.itemsModified().wagons?6:-1)}}function so(t,o){t&1&&g(0,"p-sortIcon",29)}function ro(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(n){return S(e),l(2).resetMachines(),v(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.machinesUndoTooltip"))}function _o(t,o){if(t&1){let e=y();s(0,"button",36),_(1,"translate"),x("click",function(){S(e);let n=l(3);return v(n.resetBeacons())}),r()}t&2&&d("pTooltip",m(1,1,"steps.beaconsUndoTooltip"))}function co(t,o){if(t&1&&(s(0,"th",30)(1,"div",23)(2,"span"),h(3),_(4,"translate"),r(),u(5,_o,2,3,"button",25),r()()),t&2){let e=l(2);p(3),T(m(4,2,"options.column.beacons")),p(2),f(e.recipesModified().beacons?5:-1)}}function mo(t,o){t&1&&g(0,"p-sortIcon",40)}function uo(t,o){if(t&1&&(s(0,"th",31)(1,"div",39)(2,"span"),h(3),_(4,"translate"),r(),u(5,mo,1,0,"p-sortIcon",40),r()()),t&2){let e=l(2);p(3),T(m(4,2,"options.column.power")),p(2),f(e.focus()?-1:5)}}function Co(t,o){t&1&&g(0,"p-sortIcon",41)}function fo(t,o){if(t&1&&(s(0,"th",32)(1,"div",39)(2,"span"),h(3),_(4,"translate"),r(),u(5,Co,1,0,"p-sortIcon",41),r()()),t&2){let e=l(2);p(3),T(m(4,2,e.dispRateInfo().pollutionLabel)),p(2),f(e.focus()?-1:5)}}function go(t,o){t&1&&g(0,"th")}function xo(t,o){if(t&1){let e=y();s(0,"tr")(1,"td",17)(2,"div",18)(3,"button",19),_(4,"translate"),x("click",function(){S(e);let n=l();return v(n.contentSvc.showColumns$.next())}),r(),u(5,Xn,2,3,"button",20),r()()(),s(6,"tr",21),g(7,"th"),u(8,Zn,4,1,"th")(9,Jn,3,3,"th"),s(10,"th",22)(11,"div",23)(12,"span"),h(13),_(14,"translate"),r(),u(15,eo,1,0,"p-sortIcon",24)(16,to,2,3,"button",25),r()(),u(17,oo,7,5,"th",26)(18,po,7,5,"th",27),s(19,"th",28)(20,"div",23)(21,"span"),h(22),_(23,"translate"),r(),u(24,so,1,0,"p-sortIcon",29)(25,ro,2,3,"button",25),r()(),u(26,co,6,4,"th",30)(27,uo,6,4,"th",31)(28,fo,6,4,"th",32)(29,go,1,0,"th"),r()}if(t&2){let e=l();p(3),d("label",m(4,16,"steps.columnSettings")),p(2),f(e.steps().length?5:-1),p(3),f(!e.focus()&&e.columnsState().checkbox.show?8:-1),p(),f(!e.focus()&&e.columnsState().tree.show?9:-1),p(4),T(m(14,18,e.dispRateInfo().itemsLabel)),p(2),f(e.focus()?-1:15),p(),f(e.itemsModified().excluded?16:-1),p(),f(e.columnsState().belts.show?17:-1),p(),f(e.columnsState().wagons.show?18:-1),p(4),T(m(23,20,"options.column.machines")),p(2),f(e.focus()?-1:24),p(),f(e.recipesModified().machines?25:-1),p(),f(e.columnsState().beacons.show?26:-1),p(),f(e.columnsState().power.show?27:-1),p(),f(e.columnsState().pollution.show?28:-1),p(),f(e.columnsState().link.show?29:-1)}}function So(t,o){if(t&1&&g(0,"div",43),t&2){let e=o.$implicit,i=l();d("id","step_"+i.id+"_"+e.label)}}function vo(t,o){if(t&1){let e=y();s(0,"td",46)(1,"div",51)(2,"p-checkbox",52),x("onChange",function(n){S(e);let a=l(),c=l(2);return v(c.changeStepChecked(a,n.checked))}),r()()()}if(t&2){let e=l();p(2),d("binary",!0)("ngModel",e.checked)}}function ho(t,o){if(t&1&&g(0,"div",59),t&2){let e=o.$implicit,i=o.$index,n=o.$count;ie("trail",e)("last",i===n-1)}}function bo(t,o){if(t&1&&(P(0,ho,1,4,"div",58,be),g(2,"div",54)),t&2){let e=l(2),i=l(2);F(i.stepTree()[e.id])}}function To(t,o){if(t&1&&g(0,"lab-tooltip",62),t&2){let e=l(3);d("id",e.itemId)}}function yo(t,o){if(t&1){let e=y();s(0,"button",60),_(1,"iconSmClass"),x("click",function(){S(e);let n=l(2),a=l(2);return v(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),g(2,"i",61),u(3,To,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(2),n=l(2);ie("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function wo(t,o){if(t&1&&(s(0,"span"),h(1),r()),t&2){let e=l(3);p(),V("#",e.recipeObjectiveId,"")}}function Io(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l(4);d("id",e.recipeId)}}function Bo(t,o){if(t&1&&u(0,Io,1,1,"lab-tooltip",64),t&2){let e=l(3);f(e.recipeId?0:-1)}}function ko(t,o){if(t&1&&(s(0,"i",63),_(1,"iconSmClass"),u(2,wo,2,1,"span")(3,Bo,1,1,"ng-template",null,4,I),r()),t&2){let e=b(4),i=l(2);w(k(1,4,i.recipeId,"recipe")),d("pTooltip",e),p(2),f(i.recipeObjectiveId!=null?2:-1)}}function Eo(t,o){if(t&1&&(s(0,"td",47)(1,"div",53),u(2,bo,3,0,"div",54),s(3,"div",55),u(4,yo,5,6,"button",56)(5,ko,5,7,"i",57),r()()()),t&2){let e,i=l(),n=l(2),a=b(1);p(2),f(!a.sortField&&((e=n.stepTree()[i.id])!=null&&e.length)?2:-1),p(2),f(i.itemId&&i.recipeObjectiveId==null?4:5)}}function Vo(t,o){if(t&1&&(s(0,"span",66),h(1),_(2,"rate"),r()),t&2){let e=l(2),i=l(2);p(),V("(+",k(2,1,e.surplus,i.columnsState().items.precision),") ")}}function Mo(t,o){if(t&1&&g(0,"lab-tooltip",62),t&2){let e=l(3);d("id",e.itemId)}}function Oo(t,o){if(t&1){let e=y();s(0,"button",60),_(1,"iconSmClass"),x("click",function(){S(e);let n=l(2),a=l(2);return v(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),g(2,"i",61),u(3,Mo,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(2),n=l(2);ie("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function Ro(t,o){if(t&1&&(s(0,"td",65),u(1,Vo,3,4,"span",66),s(2,"span",66),h(3),_(4,"rate"),r()(),s(5,"td",67)(6,"div",23)(7,"span",68),h(8),r(),u(9,Oo,5,6,"button",56),r()()),t&2){let e,i=l(),n=l(2);p(),f(i.surplus&&i.surplus.nonzero()?1:-1),p(2),T(k(4,4,i.items.sub((e=i.surplus)!==null&&e!==void 0?e:n.rational.zero),n.columnsState().items.precision)),p(5),T(n.data().itemEntities[i.itemId].name),p(),f(!n.preferences().hideDuplicateIcons||!n.columnsState().tree.show?9:-1)}}function Po(t,o){t&1&&g(0,"td",30)}function Fo(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),w(m(2,2,e.value))}}function Do(t,o){if(t&1&&u(0,Fo,3,4,"div",44),t&2){let e=o.$implicit;f(e?0:-1)}}function jo(t,o){if(t&1&&g(0,"lab-tooltip",75),t&2){let e=l().$implicit;d("id",e.value)}}function $o(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,jo,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function No(t,o){if(t&1&&g(0,"lab-tooltip",75),t&2){let e=l(2);d("id",e)}}function zo(t,o){if(t&1){let e=y();s(0,"p-dropdown",70),x("onChange",function(n){let a=S(e),c=l(4),C=l(2);return v(C.setBelt(c.itemId,n.value,a))}),u(1,Do,1,1,"ng-template",71)(2,$o,7,6,"ng-template",72)(3,No,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().belts)}}function Uo(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function Ao(t,o){if(t&1&&g(0,"lab-tooltip",76),t&2){let e=l().$implicit;d("id",e.value)}}function Wo(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,Ao,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Lo(t,o){if(t&1&&g(0,"lab-tooltip",76),t&2){let e=l(3);d("id",e)}}function Ho(t,o){if(t&1){let e=y();s(0,"p-dropdown",70),x("onChange",function(n){let a=S(e),c=l(5),C=l(2);return v(C.setBelt(c.itemId,n.value,a))}),u(1,Uo,3,4,"ng-template",71)(2,Wo,7,6,"ng-template",72)(3,Lo,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(2),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().pipes)}}function Go(t,o){if(t&1&&g(0,"lab-tooltip",76),t&2){let e=l(3);d("id",e)}}function qo(t,o){if(t&1&&(s(0,"i",63),_(1,"iconClass"),u(2,Go,1,1,"ng-template",null,4,I),r()),t&2){let e=b(3),i=l(2);w(m(1,3,i)),d("pTooltip",e)}}function Qo(t,o){if(t&1&&u(0,Ho,5,3,"p-dropdown",69)(1,qo,4,5,"i",57),t&2){let e,i=l(),n=l(5);f((e=n.data().pipeIds.indexOf(i)!==-1&&n.settings().pipeId)?0:1,e)}}function Ko(t,o){if(t&1&&(s(0,"td",65)(1,"span",66),h(2),_(3,"rate"),r()(),s(4,"td",67)(5,"div",23),u(6,zo,5,3,"p-dropdown",69)(7,Qo,2,1),r()()),t&2){let e,i=l(3),n=l(2);p(2),T(k(3,2,i.belts,n.columnsState().belts.precision)),p(4),f((e=n.data().beltIds.indexOf(o)!==-1&&n.settings().beltId)?6:7,e)}}function Xo(t,o){if(t&1&&u(0,Ko,8,5),t&2){let e,i=l(2),n=l(2);f((e=n.itemsState()[i.itemId].beltId)?0:-1,e)}}function Yo(t,o){t&1&&g(0,"td",30)}function Zo(t,o){if(t&1&&u(0,Xo,1,1)(1,Yo,1,0,"td",30),t&2){let e=l();f(e.itemId&&e.belts?0:1)}}function Jo(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),w(m(2,2,e.value))}}function ea(t,o){if(t&1&&u(0,Jo,3,4,"div",44),t&2){let e=o.$implicit;f(e?0:-1)}}function ta(t,o){if(t&1&&g(0,"lab-tooltip",77),t&2){let e=l().$implicit;d("id",e.value)}}function ia(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,ta,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function na(t,o){if(t&1&&g(0,"lab-tooltip",77),t&2){let e=l(2);d("id",e)}}function oa(t,o){if(t&1){let e=y();s(0,"p-dropdown",70),x("onChange",function(n){let a=S(e),c=l(4),C=l(2);return v(C.setWagon(c.itemId,n.value,a))}),u(1,ea,1,1,"ng-template",71)(2,ia,7,6,"ng-template",72)(3,na,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().cargoWagons)}}function aa(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),w(m(2,2,e.value))}}function la(t,o){if(t&1&&u(0,aa,3,4,"div",44),t&2){let e=o.$implicit;f(e?0:-1)}}function pa(t,o){if(t&1&&g(0,"lab-tooltip",78),t&2){let e=l().$implicit;d("id",e.value)}}function sa(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r()(),u(5,pa,1,1,"ng-template",null,4,I)),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function ra(t,o){if(t&1&&g(0,"lab-tooltip",78),t&2){let e=l(3);d("id",e)}}function _a(t,o){if(t&1){let e=y();s(0,"p-dropdown",70),x("onChange",function(n){let a=S(e),c=l(5),C=l(2);return v(C.setWagon(c.itemId,n.value,a))}),u(1,la,1,1,"ng-template",71)(2,sa,7,6,"ng-template",72)(3,ra,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(4),i=l(2),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().fluidWagons)}}function ca(t,o){if(t&1&&u(0,_a,5,3,"p-dropdown",69),t&2){let e,i=l(),n=l(5);f((e=n.data().fluidWagonIds.indexOf(i)!==-1&&n.settings().fluidWagonId)?0:-1,e)}}function da(t,o){if(t&1&&(s(0,"td",65)(1,"span",66),h(2),_(3,"rate"),r()(),s(4,"td",67)(5,"div",23),u(6,oa,5,3,"p-dropdown",69)(7,ca,1,1),r()()),t&2){let e,i=l(3),n=l(2);p(2),T(k(3,2,i.wagons,n.columnsState().wagons.precision)),p(4),f((e=n.data().cargoWagonIds.indexOf(o)!==-1&&n.settings().cargoWagonId)?6:7,e)}}function ma(t,o){if(t&1&&u(0,da,8,5),t&2){let e,i=l(2),n=l(2);f((e=n.itemsState()[i.itemId].wagonId)?0:-1,e)}}function ua(t,o){t&1&&g(0,"td",30)}function Ca(t,o){if(t&1&&u(0,ma,1,1)(1,ua,1,0,"td",30),t&2){let e=l();f(e.itemId&&e.wagons?0:1)}}function fa(t,o){if(t&1&&(s(0,"span",66),h(1),_(2,"machineRate"),r()),t&2){let e=l(),i=l(),n=l(2);p(),T(fe(2,1,i.machines,n.columnsState().machines.precision,e))}}function ga(t,o){if(t&1&&(s(0,"span"),h(1),r()),t&2){let e=l(4);p(),V("#",e.recipeObjectiveId,"")}}function xa(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l(4);d("id",e.recipeId)}}function Sa(t,o){if(t&1){let e=y();s(0,"button",82),x("click",function(){S(e);let n=l(3),a=l(2);return v(a.addObjective({targetId:n.recipeId,unit:a.ObjectiveUnit.Machines}))}),s(1,"span",83),_(2,"iconSmClass"),u(3,ga,2,1,"span"),r(),g(4,"i",84),u(5,xa,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(6),i=l(3);d("pTooltip",e),p(),w(k(2,4,i.recipeId,"recipe")),p(2),f(i.recipeObjectiveId?3:-1)}}function va(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),w(m(2,2,e.value))}}function ha(t,o){if(t&1&&u(0,va,3,4,"div",44),t&2){let e=o.$implicit;f(e?0:-1)}}function ba(t,o){if(t&1&&g(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e.value)}}function Ta(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,ba,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function ya(t,o){if(t&1&&g(0,"lab-tooltip",86),t&2){let e=l(3);d("id",e)}}function wa(t,o){if(t&1){let e=y();s(0,"p-dropdown",85),_(1,"options"),x("onChange",function(n){S(e);let a=l(3),c=l(2);return v(c.changeRecipeField(a,n.value,"machine"))}),u(2,ha,1,1,"ng-template",71)(3,Ta,7,6,"ng-template",72)(4,ya,1,1,"ng-template",null,4,I),r()}if(t&2){let e=b(5),i=l(2),n=l(),a=l(2);d("pTooltip",e)("options",k(1,3,n.recipe.producers,a.data().itemEntities))("ngModel",i)}}function Ia(t,o){if(t&1){let e=y();s(0,"p-inputNumber",87,5),_(2,"translate"),x("onBlur",function(){let n;S(e);let a=b(1),c=l(3),C=l(2);return v(C.changeRecipeField(c,(n=a.value)!==null&&n!==void 0?n:100,"overclock"))}),r()}if(t&2){let e=l(3);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",m(2,7,"steps.overclockTooltip"))("ngModel",e.recipeSettings.overclock)}}function Ba(t,o){if(t&1&&g(0,"lab-tooltip",89),t&2){let e=l(2);d("id",e)}}function ka(t,o){if(t&1&&(s(0,"div",23)(1,"i",88),_(2,"iconSmClass"),u(3,Ba,1,1,"ng-template",null,4,I),r()()),t&2){let e=b(4),i=l();p(),w(m(2,3,i)),d("pTooltip",e)}}function Ea(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function Va(t,o){if(t&1&&g(0,"lab-tooltip",89),t&2){let e=l().$implicit;d("id",e.value)}}function Ma(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,Va,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Oa(t,o){if(t&1&&g(0,"lab-tooltip",89),t&2){let e=l(2);d("id",e)}}function Ra(t,o){if(t&1){let e=y();s(0,"p-dropdown",70),x("onChange",function(n){S(e);let a=l(4),c=l(2);return v(c.changeRecipeField(a,n.value,"fuel"))}),u(1,Ea,3,4,"ng-template",71)(2,Ma,7,6,"ng-template",72)(3,Oa,1,1,"ng-template",null,4,I),r()}if(t&2){let e,i=b(4),n=l(),a=l(3);d("pTooltip",i)("ngModel",n)("options",(e=a.recipeSettings.fuelOptions)!==null&&e!==void 0?e:K(3,an))}}function Pa(t,o){if(t&1&&u(0,ka,5,5,"div",23)(1,Ra,5,4,"p-dropdown",69),t&2){let e=l(3);f(e.recipe.isBurn?0:e.recipeSettings.machineId?1:-1)}}function Fa(t,o){if(t&1&&(s(0,"div",44),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function Da(t,o){if(t&1&&g(0,"lab-tooltip",92),t&2){let e=l().$implicit;d("id",e.value)}}function ja(t,o){if(t&1&&(s(0,"div",73),g(1,"i"),_(2,"iconSmClass"),s(3,"div",74),h(4),r(),u(5,Da,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",e.value!=="module"?i:void 0),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function $a(t,o){if(t&1){let e=y();s(0,"p-dropdown",91),_(1,"translate"),x("onChange",function(n){S(e);let a=l(5),c=l(2);return v(c.changeRecipeField(a,[{id:n.value,count:c.rational.one}],"modules"))}),u(2,Fa,3,4,"ng-template",71)(3,ja,7,6,"ng-template",72),r()}if(t&2){let e,i=l(2),n=l(3);d("pTooltip",m(1,3,"settings.modifierTooltip"))("ngModel",i[0].id)("options",(e=n.recipeSettings.moduleOptions)!==null&&e!==void 0?e:K(5,an))}}function Na(t,o){if(t&1&&(s(0,"i",83),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=o.$implicit;w(m(1,3,e.id)),p(3),T(e.count)}}function za(t,o){if(t&1&&g(0,"lab-tooltip",92),t&2){let e=l().$implicit;d("id",e.id)}}function Ua(t,o){if(t&1&&u(0,za,1,1,"lab-tooltip",92),t&2){let e=o.$implicit;f(e.id?0:-1)}}function Aa(t,o){if(t&1&&P(0,Ua,1,1,null,null,kt),t&2){let e=l(3);F(e)}}function Wa(t,o){if(t&1){let e=y();s(0,"button",93),x("click",function(n){S(e);let a=b(5),c=l(),C=l(),B=l(3);return v(a.show(n,C,c,B.recipeId))}),P(1,Na,4,5,"i",94,kt),g(3,"i",95),r(),s(4,"lab-modules-overlay",96,6),x("setValue",function(n){S(e);let a=l(5),c=l(2);return v(c.changeRecipeField(a,n,"modules"))}),r(),u(6,Aa,2,0,"ng-template",null,4,I)}if(t&2){let e=b(7),i=l(2);d("pTooltip",e),p(),F(i)}}function La(t,o){if(t&1&&u(0,$a,4,6,"p-dropdown",90)(1,Wa,8,1),t&2){let e=o;f(e.modules!==!0&&(e.modules!=null&&e.modules.isOne())?0:e.modules!=null?1:-1)}}function Ha(t,o){if(t&1&&u(0,La,2,1),t&2){let e,i=l(2),n=l(3);f((e=n.data().machineEntities[i])?0:-1,e)}}function Ga(t,o){if(t&1&&(s(0,"div",23)(1,"span",68),h(2),r(),u(3,Sa,7,7,"button",79)(4,wa,6,6,"p-dropdown",80),_(5,"machineShow"),u(6,Ia,3,9,"p-inputNumber",81)(7,Pa,2,1)(8,Ha,1,1),r()),t&2){let e,i,n=l(),a=l(),c=l(2);p(2),T(a.recipe.name),p(),f(!c.preferences().hideDuplicateIcons||a.itemId!=null&&a.itemId!==a.recipeId?3:-1),p(),f(k(5,6,n,c.data().game)?4:-1),p(2),f(c.data().game===c.Game.Satisfactory?6:-1),p(),f((e=a.recipeSettings==null?null:a.recipeSettings.fuelId)?7:-1,e),p(),f((i=a.recipeSettings==null?null:a.recipeSettings.modules)?8:-1,i)}}function qa(t,o){if(t&1&&(s(0,"td",65),u(1,fa,3,5,"span",66),_(2,"machineShowRate"),r(),s(3,"td",67),u(4,Ga,9,9,"div",23),r()),t&2){let e=l(),i=l(2);p(),f(e.machines&&e.machines.nonzero()&&k(2,2,o,i.data().game)?1:-1),p(3),f(e.recipeId&&e.recipe&&e.recipeSettings?4:-1)}}function Qa(t,o){t&1&&g(0,"td",30)}function Ka(t,o){if(t&1&&(s(0,"i",99),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=l().$implicit;w(m(1,3,e.id)),p(3),T(e.total)}}function Xa(t,o){if(t&1&&(s(0,"i",83),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=o.$implicit;w(m(1,3,e.id)),p(3),T(e.count)}}function Ya(t,o){if(t&1&&(s(0,"div",44)(1,"i",83),_(2,"iconSmClass"),s(3,"span"),h(4),r()(),u(5,Ka,4,5,"i",98),P(6,Xa,4,5,"i",94,kt),r()),t&2){let e=o.$implicit;p(),w(m(2,4,e.id)),p(3),T(e.count),p(),f(e.total?5:-1),p(),F(e.modules)}}function Za(t,o){t&1&&g(0,"lab-tooltip",100),t&2&&d("id",o)}function Ja(t,o){if(t&1&&u(0,Za,1,1,"lab-tooltip",100),t&2){let e,i=l(3);f((e=i.recipeSettings.beacons==null||i.recipeSettings.beacons[0]==null?null:i.recipeSettings.beacons[0].id)?0:-1,e)}}function el(t,o){if(t&1){let e=y();s(0,"button",97),x("click",function(n){S(e);let a=b(5),c=l(2);return v(a.show(n,c.recipeSettings.beacons))}),P(1,Ya,8,6,"div",44,be),g(3,"i",95),r(),s(4,"lab-beacons-overlay",96,7),x("setValue",function(n){S(e);let a=l(2),c=l(2);return v(c.changeRecipeField(a,n,"beacons"))}),r(),u(6,Ja,1,1,"ng-template",null,4,I)}if(t&2){let e=b(7),i=l(2);d("pTooltip",e),p(),F(i.recipeSettings.beacons)}}function tl(t,o){if(t&1&&(s(0,"td",48),u(1,el,8,1),r()),t&2){let e=l();p(),f(e.recipeId&&e.recipeSettings&&e.recipeSettings.beacons?1:-1)}}function il(t,o){if(t&1&&(s(0,"span",66),h(1),_(2,"power"),r()),t&2){let e=l(2),i=l(2);p(),T(fe(2,1,e.power,i.columnsState().power.precision,i.effectivePowerUnit()))}}function nl(t,o){if(t&1&&(s(0,"td",49),u(1,il,3,5,"span",66),r()),t&2){let e=l();p(),f(e.power&&e.power.nonzero()?1:-1)}}function ol(t,o){if(t&1&&(s(0,"span",66),h(1),_(2,"rate"),r()),t&2){let e=l(2),i=l(2);p(),T(k(2,1,e.pollution,i.columnsState().pollution.precision))}}function al(t,o){if(t&1&&(s(0,"td",49),u(1,ol,3,4,"span",66),r()),t&2){let e=l();p(),f(e.pollution&&e.pollution.nonzero()?1:-1)}}function ll(t,o){if(t&1){let e=y();s(0,"button",104),_(1,"translate"),x("click",function(){S(e);let n=l(2),a=l(2);return v(a.resetStep(n))}),r()}t&2&&d("pTooltip",m(1,1,"steps.stepUndoTooltip"))}function pl(t,o){if(t&1&&(s(0,"td",50)(1,"div",44)(2,"a",101),_(3,"stepHref"),g(4,"button",102),_(5,"translate"),r(),u(6,ll,2,3,"button",103),r()()),t&2){let e=l(),i=l(2);p(2),d("href",fe(3,3,e,i.routerSvc.zipConfig(),i.data()),li),p(2),d("pTooltip",m(5,7,"steps.openNewTabTooltip")),p(2),f(e.recipeId&&i.stepsModified().recipes[e.recipeId]||e.itemId&&i.stepsModified().items[e.itemId]||e.recipeObjectiveId&&i.stepsModified().objectives[e.recipeObjectiveId]?6:-1)}}function sl(t,o){if(t&1){let e=y();s(0,"tr")(1,"td",42),g(2,"div",43),P(3,So,1,1,"div",43,kt),s(5,"div",44)(6,"button",45),_(7,"translate"),x("click",function(){let n=S(e),a=l().expanded,c=l();return v(c.expandRow(n,a))}),r()()(),u(8,vo,3,2,"td",46)(9,Eo,6,2,"td",47)(10,Ro,10,7)(11,Po,1,0,"td",30)(12,Zo,2,1)(13,Ca,2,1)(14,qa,5,5)(15,Qa,1,0,"td",30)(16,tl,2,1,"td",48)(17,nl,2,1,"td",49)(18,al,2,1,"td",49)(19,pl,7,9,"td",50),r()}if(t&2){let e,i=o,n=l().expanded,a=l();p(2),d("id","step_"+i.id),p(),F(a.stepDetails()[i.id].tabs),p(3),ie("fa-rotate-90",n),d("pTooltip",m(7,15,n?"steps.hideDetails":"steps.showDetails"))("pRowToggler",i),p(2),f(!a.focus()&&a.columnsState().checkbox.show?8:-1),p(),f(!a.focus()&&a.columnsState().tree.show?9:-1),p(),f(i.itemId&&i.items?10:11),p(2),f(a.columnsState().belts.show?12:-1),p(),f(a.columnsState().wagons.show?13:-1),p(),f((e=i.recipeSettings==null?null:i.recipeSettings.machineId)?14:15,e),p(2),f(a.columnsState().beacons.show?16:-1),p(),f(a.columnsState().power.show?17:-1),p(),f(a.columnsState().pollution.show?18:-1),p(),f(a.columnsState().link.show?19:-1)}}function rl(t,o){if(t&1&&(u(0,sl,20,17,"tr"),_(1,"asStep")),t&2){let e,i=o.$implicit;f((e=m(1,1,i))?0:-1,e)}}function _l(t,o){if(t&1&&(s(0,"a",110),g(1,"span",111),s(2,"span",112),h(3),_(4,"translate"),r()()),t&2){let e=o.$implicit,i=l(3);d("id",e.id),p(),w(i.stepDetailIcon[e.label]),p(2),T(m(4,4,"options.stepDetailTab."+e.label))}}function cl(t,o){t&1&&$(0)}function dl(t,o){if(t&1&&(s(0,"tr",105),u(1,cl,1,0,"ng-container",113),s(2,"td",114),h(3),_(4,"translate"),r()()),t&2){l(4);let e=b(9);p(),d("ngTemplateOutlet",e),p(2),V(" ",m(4,2,"steps.sources")," ")}}function ml(t,o){t&1&&$(0)}function ul(t,o){if(t&1&&u(0,ml,1,0,"ng-container",115),t&2){let e=l().$implicit,i=l(2),n=l(2),a=b(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",ze(2,zn,[i.items==null?null:i.items.mul(e.value),i.itemId,i.belts==null?null:i.belts.mul(e.value),n.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(e.value),n.itemsState()[i.itemId].wagonId,e.step==null?null:e.step.machines,e.step==null||e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step==null?null:e.step.recipeId,e.step==null?null:e.step.recipeObjectiveId,e.value,i.itemId,e.inputs]))}}function Cl(t,o){if(t&1&&u(0,ul,1,16,"ng-container"),t&2){let e=l(2);f(e.itemId?0:-1)}}function fl(t,o){t&1&&$(0)}function gl(t,o){if(t&1&&(s(0,"tr",105),u(1,fl,1,0,"ng-container",113),s(2,"td",114),h(3),_(4,"translate"),r()()),t&2){l(4);let e=b(9);p(),d("ngTemplateOutlet",e),p(2),V(" ",m(4,2,"steps.destinations")," ")}}function xl(t,o){t&1&&$(0)}function Sl(t,o){if(t&1&&u(0,xl,1,0,"ng-container",115),t&2){let e,i=l().$implicit,n=l(2),a=l(2),c=b(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",ze(2,Un,[n.items==null?null:n.items.mul(i.value),n.itemId,n.belts==null?null:n.belts.mul(i.value),a.itemsState()[n.itemId].beltId,n.wagons==null?null:n.wagons.mul(i.value),a.itemsState()[n.itemId].wagonId,a.stepDetails()[n.id].outputs.length===1?n.machines==null?null:n.machines.mul(i.value):null,a.stepDetails()[n.id].outputs.length===1?n.recipeSettings==null?null:n.recipeSettings.machineId:null,n.recipeId,n.recipeObjectiveId,i.value,(e=a.stepById()[i.key])==null?null:e.recipeId,(e=a.stepById()[i.key])==null?null:e.recipeObjectiveId,i.key===""]))}}function vl(t,o){if(t&1&&u(0,Sl,1,17,"ng-container"),t&2){let e=l(2);f(e.itemId?0:-1)}}function hl(t,o){if(t&1&&(u(0,dl,5,4,"tr",105),P(1,Cl,1,1,null,null,be),u(3,gl,5,4,"tr",105),P(4,vl,1,1,null,null,ye),_(6,"keyvalue")),t&2){let e=l(),i=l(2);f(i.stepDetails()[e.id].outputs.length?0:-1),p(),F(i.stepDetails()[e.id].outputs),p(2),f(e.parents?3:-1),p(),F(k(6,2,e.parents,i.trackSvc.sortByValue))}}function bl(t,o){t&1&&$(0)}function Tl(t,o){t&1&&$(0)}function yl(t,o){if(t&1&&u(0,Tl,1,0,"ng-container",115),t&2){let e=l(),i=l().$implicit,n=l(4);l(2);let a=b(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",q(2,An,e.step.items.mul(e.percent).div(n.recipe.productivity),i.key))}}function wl(t,o){if(t&1&&u(0,yl,1,5,"ng-container"),t&2){let e=o;f(e.step&&e.percent&&e.step.items?0:-1)}}function Il(t,o){if(t&1&&u(0,wl,1,1),t&2){let e,i=o.$implicit,n=l(4),a=l(2);f((e=q(1,Et,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,e)}}function Bl(t,o){if(t&1&&(s(0,"tr",105),u(1,bl,1,0,"ng-container",113),s(2,"td",114),h(3),_(4,"translate"),r()(),P(5,Il,1,4,null,null,ye),_(7,"keyvalue")),t&2){let e=l(3),i=l(2),n=b(9);p(),d("ngTemplateOutlet",n),p(2),V(" ",m(4,2,"steps.depletion")," "),p(2),F(k(7,4,e.outputs,i.trackSvc.sortByValue))}}function kl(t,o){t&1&&$(0)}function El(t,o){t&1&&$(0)}function Vl(t,o){if(t&1&&u(0,El,1,0,"ng-container",115),t&2){let e=o,i=l(2),n=l().$implicit,a=l(4),c=l(2),C=b(11);d("ngTemplateOutlet",C)("ngTemplateOutletContext",ze(2,Wn,[i.step.items==null?null:i.step.items.mul(i.percent),n.key,i.step.belts==null?null:i.step.belts.mul(i.percent),c.itemsState()[i.step.itemId].beltId,i.step.wagons==null?null:i.step.wagons.mul(i.percent),c.itemsState()[i.step.itemId].wagonId,e.step==null?null:e.step.machines,e.step==null||e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step==null?null:e.step.recipeId,e.step==null?null:e.step.recipeObjectiveId,i.percent,a.recipeId,a.recipeObjectiveId]))}}function Ml(t,o){t&1&&$(0)}function Ol(t,o){if(t&1&&u(0,Ml,1,0,"ng-container",115),t&2){let e=l(2),i=l().$implicit,n=l(4),a=l(2),c=b(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",ze(2,Ln,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,e.percent,n.recipeId,n.recipeObjectiveId]))}}function Rl(t,o){if(t&1&&u(0,Vl,1,16,"ng-container")(1,Ol,1,12,"ng-container"),t&2){let e,i=l(),n=l(7);f((e=n.stepDetails()[i.step.id].outputs.length===1&&n.stepDetails()[i.step.id].outputs[0])?0:1,e)}}function Pl(t,o){if(t&1&&u(0,Rl,2,1),t&2){let e=o;f(e.step.itemId&&e.percent?0:-1)}}function Fl(t,o){if(t&1&&u(0,Pl,1,1),t&2){let e,i=o.$implicit,n=l(4),a=l(2);f((e=q(1,Et,a.stepByItemEntities()[i.key],(e=a.stepByItemEntities()[i.key].parents)==null?null:e[n.id]))?0:-1,e)}}function Dl(t,o){if(t&1&&(s(0,"tr",105),u(1,kl,1,0,"ng-container",113),s(2,"td",114),h(3),_(4,"translate"),r()(),P(5,Fl,1,4,null,null,ye),_(7,"keyvalue")),t&2){let e=l(3),i=l(2),n=b(9);p(),d("ngTemplateOutlet",n),p(2),V(" ",m(4,2,"steps.inputs")," "),p(2),F(k(7,4,e.recipe.in,i.trackSvc.sortByValue))}}function jl(t,o){t&1&&$(0)}function $l(t,o){t&1&&$(0)}function Nl(t,o){t&1&&$(0)}function zl(t,o){t&1&&$(0)}function Ul(t,o){if(t&1&&u(0,zl,1,0,"ng-container",115),t&2){let e=l(),i=l().$implicit,n=l(3),a=l(2),c=b(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",ze(2,Hn,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,n.machines,n.recipeSettings==null?null:n.recipeSettings.machineId,n.recipeId,n.recipeObjectiveId,e.percent,i.key,n.recipeObjectiveId]))}}function Al(t,o){if(t&1&&u(0,Ul,1,16,"ng-container"),t&2){let e=o;f(e.step.itemId&&e.percent?0:-1)}}function Wl(t,o){if(t&1&&u(0,Al,1,1),t&2){let e,i=o.$implicit,n=l(3),a=l(2);f((e=q(1,Et,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,e)}}function Ll(t,o){if(t&1&&(u(0,Bl,8,7)(1,Dl,8,7),_(2,"keyvalue"),s(3,"tr",105),u(4,jl,1,0,"ng-container",113),s(5,"td",114),h(6),_(7,"translate"),r()(),s(8,"tr",105),u(9,$l,1,0,"ng-container",113),s(10,"td",116)(11,"span",66),h(12),_(13,"rate"),r()(),s(14,"td",117)(15,"div",44),g(16,"i",118),r()(),g(17,"td",17),r(),s(18,"tr",105),u(19,Nl,1,0,"ng-container",113),s(20,"td",114),h(21),_(22,"translate"),r()(),P(23,Wl,1,4,null,null,ye),_(25,"keyvalue")),t&2){let e=l(2),i=l(2),n=b(9);f(i.data().game===i.Game.Factorio&&e.recipe.isMining?0:-1),p(),f(m(2,8,e.recipe.in).length?1:-1),p(3),d("ngTemplateOutlet",n),p(2),V(" ",m(7,10,"steps.time")," "),p(3),d("ngTemplateOutlet",n),p(3),T(k(13,12,e.recipe.time,i.columnsState().items.precision)),p(7),d("ngTemplateOutlet",n),p(2),V(" ",m(22,15,"steps.outputs")," "),p(2),F(k(25,17,e.recipe.out,i.trackSvc.sortByValue))}}function Hl(t,o){if(t&1&&u(0,Ll,26,20),t&2){let e=l();f(e.recipe?0:-1)}}function Gl(t,o){t&1&&$(0)}function ql(t,o){if(t&1&&(u(0,Gl,1,0,"ng-container",115),_(1,"rate")),t&2){let e=l(2),i=l().$implicit;l();let n=b(27),a=l(2),c=l(2);d("ngTemplateOutlet",n)("ngTemplateOutletContext",q(5,qe,k(1,2,e.step.items.mul(e.percent).div(a.machines),c.columnsState().items.precision),i.key))}}function Ql(t,o){t&1&&$(0)}function Kl(t,o){if(t&1&&(u(0,Ql,1,0,"ng-container",115),_(1,"rate")),t&2){let e=l(4);l(2);let i=b(27),n=l(2),a=l(2);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,qe,k(1,2,e.step.belts.mul(e.percent).div(n.machines),a.columnsState().belts.precision),o))}}function Xl(t,o){if(t&1&&u(0,Kl,2,8,"ng-container"),t&2){let e,i=l(4).$implicit,n=l(5);f((e=n.itemsState()[i.key].beltId)?0:-1,e)}}function Yl(t,o){if(t&1&&(s(0,"td"),u(1,Xl,1,1),r()),t&2){let e=l(2);p(),f(e.step.belts?1:-1)}}function Zl(t,o){t&1&&$(0)}function Jl(t,o){if(t&1&&(u(0,Zl,1,0,"ng-container",115),_(1,"rate")),t&2){let e=o;l(6);let i=b(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,qe,k(1,2,e.value,1),e.id))}}function ep(t,o){if(t&1&&(u(0,Jl,2,8,"ng-container"),_(1,"inserterSpeed")),t&2){let e,i=l(3),n=l(4),a=l(2);f((e=k(1,1,i.step.items.mul(i.percent).div(n.machines).div(a.dispRateInfo().value),a.settings()))?0:-1,e)}}function tp(t,o){if(t&1&&(s(0,"td"),u(1,ep,2,4),r()),t&2){let e=l(2),i=l().$implicit,n=l(5);p(),f(n.itemsState()[i.key].beltId!==n.ItemId.Pipe&&e.step.items?1:-1)}}function ip(t,o){if(t&1&&(s(0,"tr")(1,"td"),u(2,ql,2,8,"ng-container"),r(),u(3,Yl,2,1,"td")(4,tp,2,1,"td"),r()),t&2){let e=l(),i=l(6);p(2),f(e.step.items?2:-1),p(),f(i.columnsState().belts.show?3:-1),p(),f(i.data().game===i.Game.Factorio?4:-1)}}function np(t,o){t&1&&u(0,ip,5,3,"tr"),t&2&&f(o.percent?0:-1)}function op(t,o){if(t&1&&u(0,np,1,1),t&2){let e,i=o.$implicit,n=l(3),a=l(2);f((e=q(1,Et,a.stepByItemEntities()[i.key],(e=a.stepByItemEntities()[i.key].parents)==null?null:e[n.id]))?0:-1,e)}}function ap(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l(4);d("id",e.recipeId)}}function lp(t,o){if(t&1&&g(0,"lab-tooltip",86),t&2){let e=l();d("id",e)}}function pp(t,o){if(t&1&&(s(0,"div",23)(1,"i",63),_(2,"iconClass"),u(3,ap,1,1,"ng-template",null,4,I),r(),s(5,"i",63),_(6,"iconClass"),u(7,lp,1,1,"ng-template",null,4,I),r()()),t&2){let e=b(4),i=l(3);p(),w(k(2,6,i.recipeId,"recipe")),d("pTooltip",e),p(4),w(m(6,9,o)),d("pTooltip",e)}}function sp(t,o){t&1&&$(0)}function rp(t,o){if(t&1&&(u(0,sp,1,0,"ng-container",115),_(1,"rate")),t&2){let e=o;l(5);let i=b(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,qe,k(1,2,e.value,1),e.id))}}function _p(t,o){if(t&1&&(u(0,rp,2,8,"ng-container"),_(1,"inserterSpeed")),t&2){let e,i=l(2),n=l(6);f((e=k(1,1,i,n.settings()))?0:-1,e)}}function cp(t,o){if(t&1&&(s(0,"td"),u(1,_p,2,4),r()),t&2){let e=l(2).$implicit,i=l(5);p(),f(i.itemsState()[e.key].beltId!==i.ItemId.Pipe?1:-1)}}function dp(t,o){t&1&&$(0)}function mp(t,o){if(t&1&&(u(0,dp,1,0,"ng-container",115),_(1,"rate")),t&2){let e=o,i=l(2);l(2);let n=b(27),a=l(4);d("ngTemplateOutlet",n)("ngTemplateOutletContext",q(5,qe,k(1,2,i.div(a.beltSpeed()[e]),a.columnsState().belts.precision),e))}}function up(t,o){if(t&1&&(s(0,"td"),u(1,mp,2,8,"ng-container"),r()),t&2){let e,i=l(2).$implicit,n=l(5);p(),f((e=n.itemsState()[i.key].beltId)?1:-1,e)}}function Cp(t,o){t&1&&$(0)}function fp(t,o){if(t&1&&(s(0,"tr"),u(1,cp,2,1,"td")(2,up,2,1,"td"),s(3,"td"),u(4,Cp,1,0,"ng-container",115),_(5,"rate"),r()()),t&2){let e=l().$implicit;l();let i=b(27),n=l(4);p(),f(n.data().game===n.Game.Factorio?1:-1),p(),f(n.columnsState().belts.show?2:-1),p(2),d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(7,qe,k(5,4,o.mul(n.dispRateInfo().value),n.columnsState().items.precision),e.key))}}function gp(t,o){if(t&1&&u(0,fp,6,10,"tr"),t&2){let e,i=o.$implicit,n=l(3);f((e=i.value.div(n.recipe.time))?0:-1,e)}}function xp(t,o){if(t&1&&g(0,"lab-tooltip",62),t&2){let e=l().itemId;d("id",e)}}function Sp(t,o){if(t&1&&(s(0,"div",39)(1,"span",66),h(2),r(),s(3,"i",63),_(4,"iconClass"),u(5,xp,1,1,"ng-template",null,4,I),r()()),t&2){let e=o.value,i=o.itemId,n=b(6);p(2),T(e),p(),w(m(4,4,i)),d("pTooltip",n)}}function vp(t,o){if(t&1&&(s(0,"div",23)(1,"table",120),P(2,op,1,4,null,null,ye),_(4,"keyvalue"),r(),g(5,"i",121),s(6,"table",120)(7,"tr")(8,"td",116)(9,"span",66),h(10),_(11,"rate"),r()(),s(12,"td"),u(13,pp,9,11,"div",23),r()(),s(14,"tr")(15,"td",116)(16,"span",66),h(17),_(18,"rate"),r()(),s(19,"td"),g(20,"i",118),r()()(),g(21,"i",121),s(22,"table",120),P(23,gp,1,1,null,null,ye),_(25,"keyvalue"),r(),u(26,Sp,7,6,"ng-template",null,9,I),r()),t&2){let e,i=l(2),n=l(2);p(2),F(k(4,3,i.recipe.in,n.trackSvc.sortByValue)),p(8),T(k(11,6,n.rational.one,n.columnsState().machines.precision)),p(3),f((e=i.recipeSettings==null?null:i.recipeSettings.machineId)?13:-1,e),p(4),T(k(18,9,n.dispRateInfo().value,n.columnsState().machines.precision)),p(6),F(k(25,12,i.recipe.out,n.trackSvc.sortByValue))}}function hp(t,o){t&1&&(g(0,"small",119),_(1,"translate")),t&2&&d("innerHTML",m(1,1,"steps.inserterCountInfo"),ai)}function bp(t,o){if(t&1&&(s(0,"tr",105),g(1,"td"),s(2,"td",17),u(3,vp,28,15,"div",23)(4,hp,2,3,"small",119),r()()),t&2){let e=l(),i=l(2);p(3),f(e.recipeId&&e.recipe&&e.machines?3:-1),p(),f(i.data().game===i.Game.Factorio?4:-1)}}function Tp(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l().$implicit;d("id",e)}}function yp(t,o){if(t&1){let e=y();s(0,"button",127),_(1,"iconSmClass"),x("click",function(){let n=S(e).$implicit,a=l(5);return v(a.toggleRecipe(n,a.recipesState(),a.data()))}),g(2,"i",61),u(3,Tp,1,1,"ng-template",null,4,I),r()}if(t&2){let e=o.$implicit,i=b(4),n=l(5);ie("hover-active",n.recipesState()[e].excluded),d("icon",k(1,4,e,"recipe"))("pTooltip",i)}}function wp(t,o){if(t&1){let e=y();s(0,"tr",105),g(1,"td"),s(2,"td",17)(3,"div")(4,"div",122),h(5),_(6,"translate"),r(),s(7,"div",123)(8,"small"),h(9),_(10,"translate"),r()(),s(11,"p-checkbox",124),_(12,"translate"),x("onChange",function(){let n=S(e),a=l(4);return v(a.toggleRecipes(n.recipeIds,n.allRecipesIncluded,a.data()))}),r()()()(),s(13,"tr",105),g(14,"td"),s(15,"td",17)(16,"div",125),P(17,yp,5,7,"button",126,Ve),r()()()}if(t&2){let e=o;p(5),V(" ",m(6,5,"steps.includedRecipes")," "),p(4),T(m(10,7,"steps.includedRecipesInfo")),p(2),d("ngModel",e.allRecipesIncluded)("binary",!0)("label",m(12,9,"picker.includeAll")),p(6),F(e.recipeIds)}}function Ip(t,o){if(t&1&&u(0,wp,19,11),t&2){let e,i=l(),n=l(2);f((e=i.itemId&&n.stepDetails()[i.id])?0:-1,e)}}function Bp(t,o){if(t&1){let e=y();s(0,"tr",105)(1,"td",106)(2,"a",107),g(3,"button",108),r()(),s(4,"td",17)(5,"p-tabMenu",109,8),_(7,"stepId"),x("activeItemChange",function(n){let a=S(e),c=l(2);return v(c.setActiveItem(a,n))}),u(8,_l,5,6,"ng-template",72),r()()(),u(9,hl,7,5)(10,Hl,1,1)(11,bp,5,2,"tr",105)(12,Ip,1,1)}if(t&2){let e,i=o,n=b(6),a=l(2);p(2),d("relativeTo",a.route)("fragment",i.id),p(3),d("model",a.stepDetails()[i.id].tabs)("activeItem",a.activeItem[m(7,5,i)]),p(4),f((e=n.activeItem==null?null:n.activeItem.label)===a.StepDetailTab.Item?9:e===a.StepDetailTab.Recipe?10:e===a.StepDetailTab.Machine?11:e===a.StepDetailTab.Recipes?12:-1)}}function kp(t,o){if(t&1&&(u(0,Bp,13,7),_(1,"asStep")),t&2){let e,i=o.$implicit;f((e=m(1,1,i))?0:-1,e)}}function Ep(t,o){t&1&&(s(0,"tr")(1,"td",17)(2,"div",51)(3,"span"),h(4),_(5,"translate"),r()()()()),t&2&&(p(4),T(m(5,1,"steps.emptyMessage")))}function Vp(t,o){if(t&1&&u(0,Ep,6,3,"tr"),t&2){let e=l();f(e.focus()?0:-1)}}function Mp(t,o){t&1&&g(0,"td",30)}function Op(t,o){t&1&&g(0,"td")}function Rp(t,o){t&1&&g(0,"td")}function Pp(t,o){if(t&1&&u(0,Op,1,0,"td")(1,Rp,1,0,"td"),t&2){let e=l(2);f(e.columnsState().checkbox.show?0:-1),p(),f(e.columnsState().tree.show?1:-1)}}function Fp(t,o){if(t&1&&(g(0,"td"),u(1,Pp,2,2)),t&2){let e=l();p(),f(e.focus()?-1:1)}}function Dp(t,o){t&1&&$(0)}function jp(t,o){if(t&1&&g(0,"lab-tooltip",62),t&2){let e=l(2).itemId;d("id",e)}}function $p(t,o){if(t&1&&g(0,"lab-tooltip",75),t&2){let e=l(3).beltId;d("id",e)}}function Np(t,o){if(t&1&&(s(0,"td",116)(1,"span",66),h(2),_(3,"rate"),r()(),s(4,"td",117)(5,"div",44)(6,"i",63),_(7,"iconClass"),u(8,$p,1,1,"ng-template",null,4,I),r()()()),t&2){let e=b(9),i=l(2),n=i.belts,a=i.beltId,c=l();p(2),T(k(3,4,n,c.columnsState().belts.precision)),p(4),w(m(7,7,a)),d("pTooltip",e)}}function zp(t,o){if(t&1&&g(0,"lab-tooltip",77),t&2){let e=l(4).wagonId;d("id",e)}}function Up(t,o){if(t&1&&(s(0,"i",63),_(1,"iconClass"),u(2,zp,1,1,"ng-template",null,4,I),r()),t&2){let e=b(3),i=l(3).wagonId;w(m(1,3,i)),d("pTooltip",e)}}function Ap(t,o){if(t&1&&g(0,"lab-tooltip",78),t&2){let e=l(4).wagonId;d("id",e)}}function Wp(t,o){if(t&1&&(s(0,"i",63),_(1,"iconClass"),u(2,Ap,1,1,"ng-template",null,4,I),r()),t&2){let e=b(3),i=l(3).wagonId;w(m(1,3,i)),d("pTooltip",e)}}function Lp(t,o){if(t&1&&(s(0,"td",116)(1,"span",66),h(2),_(3,"rate"),r()(),s(4,"td",117)(5,"div",44),u(6,Up,4,5,"i",57)(7,Wp,4,5,"i",57),r()()),t&2){let e=l(2),i=e.wagons,n=e.wagonId,a=l();p(2),T(k(3,2,i,a.columnsState().wagons.precision)),p(4),f(a.data().cargoWagonIds.indexOf(n)!==-1?6:7)}}function Hp(t,o){if(t&1&&(s(0,"span",66),h(1),_(2,"machineRate"),r()),t&2){let e=l(2),i=e.machines,n=e.machineId,a=l();p(),T(fe(2,1,i,a.columnsState().machines.precision,n))}}function Gp(t,o){t&1&&(s(0,"div",129),h(1),_(2,"translate"),r()),t&2&&(p(),V(" ",m(2,1,"steps.inputs")," "))}function qp(t,o){if(t&1&&(s(0,"span"),h(1),r()),t&2){let e=l(3).recipeObjectiveId;p(),V("#",e,"")}}function Qp(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l(3).recipeId;d("id",e)}}function Kp(t,o){if(t&1&&g(0,"lab-tooltip",86),t&2){let e=l(3).machineId;d("id",e)}}function Xp(t,o){if(t&1&&(s(0,"i",63),_(1,"iconClass"),u(2,qp,2,1,"span")(3,Qp,1,1,"ng-template",null,4,I),r(),s(5,"i",63),_(6,"iconClass"),u(7,Kp,1,1,"ng-template",null,4,I),r()),t&2){let e=b(4),i=l(2),n=i.machineId,a=i.recipeId,c=i.recipeObjectiveId;w(k(1,7,a,"recipe")),d("pTooltip",e),p(2),f(c?2:-1),p(3),w(m(6,10,n)),d("pTooltip",e)}}function Yp(t,o){t&1&&(s(0,"div",130),g(1,"i",131),r(),s(2,"div",130),g(3,"i",131),r())}function Zp(t,o){t&1&&g(0,"i",132)}function Jp(t,o){t&1&&g(0,"i",132)}function es(t,o){if(t&1&&(s(0,"span"),h(1),r()),t&2){let e=l(4).destRecipeObjectiveId;p(),V("#",e,"")}}function ts(t,o){if(t&1&&g(0,"lab-tooltip",133),t&2){let e=l(4),i=e.destId,n=e.destIsRecipe;d("id",i)("type",n?"recipe":"item")}}function is(t,o){if(t&1&&(s(0,"i",63),_(1,"iconClass"),u(2,es,2,1,"span")(3,ts,1,2,"ng-template",null,4,I),r()),t&2){let e=b(4),i=l(3),n=i.destId,a=i.destRecipeObjectiveId,c=i.destIsRecipe;w(k(1,4,n,c?"recipe":"item")),d("pTooltip",e),p(2),f(a?2:-1)}}function ns(t,o){t&1&&(s(0,"span"),h(1),_(2,"translate"),r()),t&2&&(p(),V(" ",m(2,1,"steps.outputs")," "))}function os(t,o){if(t&1&&(u(0,Zp,1,0,"i",132),s(1,"span",66),h(2),_(3,"rate"),_(4,"leftPad"),r(),u(5,Jp,1,0,"i",132)(6,is,5,7,"i",57)(7,ns,3,3,"span")),t&2){let e=l(2),i=e.percent,n=e.percentOnDest,a=e.destId,c=e.outputs;f(n?0:-1),p(2),V("",m(4,8,k(3,5,i,-2)),"%"),p(3),f(n?-1:5),p(),f(a?6:-1),p(),f(c?7:-1)}}function as(t,o){if(t&1&&(u(0,Dp,1,0,"ng-container",113),s(1,"td",116)(2,"span",66),h(3),_(4,"rate"),r()(),s(5,"td",117)(6,"div",44)(7,"i",63),_(8,"iconClass"),u(9,jp,1,1,"ng-template",null,4,I),r()()(),u(11,Np,10,9)(12,Lp,8,5),s(13,"td",116),u(14,Hp,3,5,"span",66),_(15,"machineShowRate"),r(),s(16,"td",128)(17,"div",23),u(18,Gp,3,3,"div",129)(19,Xp,9,12),_(20,"machineShow"),u(21,Yp,4,0)(22,os,8,10),r()()),t&2){let e=b(10),i=l(),n=i.items,a=i.itemId,c=i.belts,C=i.beltId,B=i.wagons,M=i.wagonId,R=i.machines,U=i.machineId,de=i.percent,Mt=i.inputs,Qe=l(),ln=b(9);d("ngTemplateOutlet",ln),p(3),T(k(4,11,n,Qe.columnsState().items.precision)),p(4),w(m(8,14,a)),d("pTooltip",e),p(4),f(Qe.columnsState().belts.show&&c&&C?11:-1),p(),f(Qe.columnsState().wagons.show&&B&&M?12:-1),p(2),f(R&&R.nonzero()&&k(15,16,U,Qe.data().game)?14:-1),p(4),f(Mt?18:-1),p(),f(k(20,19,U,Qe.data().game)?19:21),p(3),f(de?22:-1)}}function ls(t,o){if(t&1&&(s(0,"tr",105),u(1,as,23,22),r()),t&2){let e=o.itemId;p(),f(e?1:-1)}}function ps(t,o){t&1&&g(0,"td")}function ss(t,o){t&1&&g(0,"td")}function rs(t,o){t&1&&$(0)}function _s(t,o){t&1&&$(0)}function cs(t,o){t&1&&$(0)}function ds(t,o){t&1&&$(0)}function ms(t,o){if(t&1&&(s(0,"td",134)(1,"span",66),h(2),_(3,"power"),r()()),t&2){let e=l(3);p(2),T(fe(3,1,e.totals().power,e.columnsState().power.precision,e.effectivePowerUnit()))}}function us(t,o){if(t&1&&(s(0,"td",134)(1,"span",66),h(2),_(3,"rate"),r()()),t&2){let e=l(3);p(2),T(k(3,1,e.totals().pollution,e.columnsState().pollution.precision))}}function Cs(t,o){t&1&&g(0,"td")}function fs(t,o){if(t&1&&(s(0,"tr"),g(1,"td"),u(2,ps,1,0,"td")(3,ss,1,0,"td"),s(4,"td",30),h(5),_(6,"translate"),r(),u(7,rs,1,0,"ng-container",115)(8,_s,1,0,"ng-container",115)(9,cs,1,0,"ng-container",115)(10,ds,1,0,"ng-container",115)(11,ms,4,5,"td",134)(12,us,4,4,"td",134)(13,Cs,1,0,"td"),r()),t&2){l();let e=b(2),i=l();p(2),f(i.columnsState().checkbox.show?2:-1),p(),f(i.columnsState().tree.show?3:-1),p(2),V(" ",m(6,14,"steps.total")," "),p(2),d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(16,Gn,i.columnsState().belts,i.totals().belts)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(19,qn,i.columnsState().wagons,i.totals().wagons)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Rt(22,Qn,i.columnsState().machines,i.totals().machines,i.totals().modules)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Rt(26,Kn,i.columnsState().beacons,i.totals().beacons,i.totals().beaconModules)),p(),f(i.columnsState().power.show?11:-1),p(),f(i.columnsState().pollution.show?12:-1),p(),f(i.columnsState().link.show?13:-1)}}function gs(t,o){if(t&1&&(s(0,"div",136)(1,"span",66),h(2),_(3,"rate"),r()()),t&2){let e=o.$implicit,i=l(2).columnSettings;p(2),T(k(3,1,e.value,i.precision))}}function xs(t,o){if(t&1&&g(0,"lab-tooltip",133),t&2){let e=l(2).$implicit,i=l(2).type;d("id",e.key)("type",i)}}function Ss(t,o){if(t&1&&(s(0,"i",141),_(1,"iconClass"),u(2,xs,1,2,"ng-template",null,4,I),r()),t&2){let e=b(3),i=l().$implicit;w(m(1,3,i.key)),d("pTooltip",e)}}function vs(t,o){if(t&1&&g(0,"lab-tooltip",64),t&2){let e=l(2).$implicit;d("id",e.key)}}function hs(t,o){if(t&1&&(s(0,"i",141),_(1,"iconClass"),u(2,vs,1,1,"ng-template",null,4,I),r()),t&2){let e=b(3),i=l().$implicit;w(k(1,3,i.key,"recipe")),d("pTooltip",e)}}function bs(t,o){if(t&1&&u(0,Ss,4,5,"i",140)(1,hs,4,6,"i",140),t&2){let e=o.$implicit,i=l(4);f(i.data().itemEntities[e.key]?0:1)}}function Ts(t,o){if(t&1&&g(0,"lab-tooltip",92),t&2){let e=l().$implicit;d("id",e.key)}}function ys(t,o){if(t&1&&(s(0,"div",142)(1,"span",66),h(2),r()(),s(3,"i",141),_(4,"iconClass"),u(5,Ts,1,1,"ng-template",null,4,I),r()),t&2){let e=o.$implicit,i=b(6);p(2),T(e.value),p(),w(k(4,4,e.key,"item")),d("pTooltip",e.key!=="module"?i:void 0)}}function ws(t,o){if(t&1&&(s(0,"td",135),P(1,gs,4,4,"div",136,ye),_(3,"keyvalue"),r(),s(4,"td",137)(5,"div",44)(6,"div",138),P(7,bs,2,1,null,null,ye),_(9,"keyvalue"),r(),s(10,"div",139),P(11,ys,7,7,null,null,ye),_(13,"keyvalue"),r()()()),t&2){let e=l(),i=e.totals,n=e.modulesTotals,a=l(2);p(),F(k(3,0,i,a.trackSvc.sortByValue)),p(6),F(k(9,3,i,a.trackSvc.sortByValue)),p(4),F(k(13,6,n,a.trackSvc.sortByValue))}}function Is(t,o){if(t&1&&u(0,ws,14,9),t&2){let e=o.columnSettings;f(e.show?0:-1)}}function Bs(t,o){if(t&1&&u(0,fs,14,30,"tr")(1,Is,1,1,"ng-template",null,10,I),t&2){let e=l();f(e.focus()?-1:0)}}var ks=(()=>{class t{document=O(si);route=O(ci);ref=O(pi);contentSvc=O(Se);trackSvc=O(Ct);store=O(Z);exportSvc=O(Fi);routerSvc=O(We);focus=he(!1);selectedId=he();steps=Y(()=>{let e=[...this.store.selectSignal(D.selectSteps)()];if(!this.focus())return e;let n=this.selectedId();return e.filter(a=>a.id===n)});activeItemsEffect=Ue(()=>{let e=this.steps(),i=this.store.selectSignal(D.selectStepDetails)();this.setActiveItems(e,i)});toggleEffect=Ue(()=>{let e=this.focus(),i=this.steps()[0];e&&i&&(this.stepsTable().toggleRow(i),this.expandRow(i,!1))});machinesState=this.store.selectSignal(G.selectMachinesState);itemsState=this.store.selectSignal(H.selectItemsState);itemsModified=this.store.selectSignal(H.selectItemsModified);stepsModified=this.store.selectSignal(D.selectStepsModified);totals=this.store.selectSignal(D.selectTotals);stepDetails=this.store.selectSignal(D.selectStepDetails);stepById=this.store.selectSignal(D.selectStepById);stepByItemEntities=this.store.selectSignal(D.selectStepByItemEntities);stepTree=this.store.selectSignal(D.selectStepTree);effectivePowerUnit=this.store.selectSignal(D.selectEffectivePowerUnit);recipesState=this.store.selectSignal(N.selectRecipesState);recipesModified=this.store.selectSignal(D.selectRecipesModified);data=this.store.selectSignal(N.selectAdjustedDataset);columnsState=this.store.selectSignal(E.selectColumnsState);settings=this.store.selectSignal(E.selectSettings);dispRateInfo=this.store.selectSignal(E.selectDisplayRateInfo);options=this.store.selectSignal(E.selectOptions);beltSpeed=this.store.selectSignal(E.selectBeltSpeed);preferences=this.store.selectSignal(W.preferencesState);sortSteps$=new Yt(null);stepsTable=pt.required("stepsTable");activeItem={};fragmentId;stepDetailIcon=ki;ItemId=A;StepDetailTab=Bi;Game=ge;EnergyType=fi;ObjectiveUnit=ne;rational=j;constructor(){De([this.sortSteps$.pipe(ei()),this.store.select(D.selectSteps)]).pipe(ui()).subscribe(([[e,i],n])=>{this.sortSteps(e,i,n)})}ngOnInit(){this.route.fragment.pipe(te(),Jt(e=>e!=null)).subscribe(e=>{this.fragmentId=e})}ngAfterViewInit(){try{if(this.fragmentId){let[e,i,n]=this.fragmentId.split("_");De({steps:this.store.select(D.selectSteps),stepDetails:this.store.select(D.selectStepDetails)}).pipe(te()).subscribe(({steps:a,stepDetails:c})=>{let C=a.find(B=>B.id===i);C&&c[C.id].tabs.length&&this.stepsTable&&(this.stepsTable().toggleRow(C),setTimeout(()=>{if(n){let M=this.document.querySelector("#"+this.fragmentId);M&&M.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(e,i,n){if(i==null||i.order==null||i.field==null)return;let a=i.order,c=i.field;if(e!=null&&e.field===c&&e.order!==a&&a===-1&&this.stepsTable!=null)return i.data?.sort((C,B)=>n.indexOf(C)-n.indexOf(B)),this.stepsTable().sortOrder=0,this.stepsTable().sortField="",this.stepsTable().reset(),this.sortSteps$.next(null);i.data?.sort((C,B)=>(C[c]??j.zero).sub(B[c]??j.zero).toNumber()*a)}setActiveItems(e,i){e.forEach(n=>this._updateActiveItem(n,i,!1))}expandRow(e,i){i||this._updateActiveItem(e,this.stepDetails(),!0)}_updateActiveItem(e,i,n){let a=Pe.transform(e),c=this._getActiveItem(e,a,i,n);if(c){let C=Pe.transform(e);this.activeItem[C]=c}}_getActiveItem(e,i,n,a){let c=this.activeItem[i],C=n[e.id];if(C==null)return null;if(c!=null){let M=C.tabs.find(R=>R.label===c.label);if(M!=null)return M}if(c==null&&!a)return null;let B=Ie.stepDetailTab;if(B){let M=C.tabs.find(R=>R.label===B);if(M!=null)return M}return C.tabs[0]}setActiveItem(e,i){if(i==null)return;let n=Pe.transform(e);this.activeItem[n]=i,Ie.stepDetailTab=i.label}resetStep(e){e.itemId&&this.resetItem(e.itemId),e.recipeObjectiveId?this.resetRecipeObjective(e.recipeObjectiveId):e.recipeId&&this.resetRecipe(e.recipeId)}toggleRecipes(e,i,n){let a=e.map(c=>({id:c,value:i,def:Q(n.defaults?.excludedRecipeIds,[]).includes(c)}));this.setRecipeExcludedBatch(a)}toggleRecipe(e,i,n){let a=!i[e].excluded,c=Q(n.defaults?.excludedRecipeIds,[]).some(C=>C===e);this.setRecipeExcluded(e,a,c)}changeRecipeField(e,i,n){if(e.recipeId==null)return;let a=e.recipeSettings;if(a?.machineId==null)return;let c=e.recipeObjectiveId??e.recipeId,C=e.recipeObjectiveId!=null,B=this.machinesState(),M=B.entities[a.machineId];switch(n){case"machine":{if(typeof i!="string")return;let R=this.data();this.setMachine(c,i,me.bestMatch(R.recipeEntities[e.recipeId].producers,B.ids),C);break}case"fuel":{if(typeof i!="string")return;this.setFuel(c,i,M.fuelId,C);break}case"modules":{if(!Array.isArray(i))return;i=i;let R=this.data().machineEntities[a.machineId];this.setModules(c,me.dehydrateModules(i,Q(a.moduleOptions,[]),B.moduleRankIds,R.modules,M.modules),C);break}case"beacons":{if(!Array.isArray(i))return;i=i;let R=M.beacons;this.setBeacons(c,me.dehydrateBeacons(i,R),C);break}case"overclock":{if(typeof i!="number")return;let R=M.overclock;this.setOverclock(c,j(i),R,C);break}}}changeStepChecked(e,i){e.itemId!=null?this.setItemChecked(e.itemId,i):e.recipeObjectiveId!=null?this.setRecipeChecked(e.recipeObjectiveId,i,!0):e.recipeId!=null&&this.setRecipeChecked(e.recipeId,i)}setRows(e){this.store.dispatch(W.setRows({rows:e}))}setItemExcluded(e,i){this.store.dispatch(H.setExcluded({id:e,value:i}))}setItemChecked(e,i){this.store.dispatch(H.setChecked({id:e,value:i}))}setBelt(e,i,n){this.store.dispatch(H.setBelt({id:e,value:i,def:n}))}setWagon(e,i,n){this.store.dispatch(H.setWagon({id:e,value:i,def:n}))}setRecipeExcluded(e,i,n){this.store.dispatch(N.setExcluded({id:e,value:i,def:n}))}setRecipeExcludedBatch(e){this.store.dispatch(N.setExcludedBatch({values:e}))}addObjective(e){this.store.dispatch(D.add({objective:e}))}setMachine(e,i,n,a=!1){let c=a?D.setMachine:N.setMachine;this.store.dispatch(c({id:e,value:i,def:n}))}setFuel(e,i,n,a=!1){let c=a?D.setFuel:N.setFuel;this.store.dispatch(c({id:e,value:i,def:n}))}setModules(e,i,n=!1){let a=n?D.setModules:N.setModules;this.store.dispatch(a({id:e,value:i}))}setBeacons(e,i,n=!1){let a=n?D.setBeacons:N.setBeacons;this.store.dispatch(a({id:e,value:i}))}setOverclock(e,i,n,a=!1){let c=a?D.setOverclock:N.setOverclock;this.store.dispatch(c({id:e,value:i,def:n}))}setRecipeChecked(e,i,n=!1){let a=n?D.setChecked:N.setChecked;this.store.dispatch(a({id:e,value:i}))}resetItem(e){this.store.dispatch(H.resetItem({id:e}))}resetRecipe(e){this.store.dispatch(N.resetRecipe({id:e}))}resetRecipeObjective(e){this.store.dispatch(D.resetObjective({id:e}))}resetChecked(){this.store.dispatch(H.resetChecked())}resetExcluded(){this.store.dispatch(H.resetExcluded())}resetBelts(){this.store.dispatch(H.resetBelts())}resetWagons(){this.store.dispatch(H.resetWagons())}resetMachines(){this.store.dispatch(N.resetMachines())}resetBeacons(){this.store.dispatch(N.resetBeacons())}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["lab-steps"]],viewQuery:function(i,n){i&1&&st(n.stepsTable,$n,5),i&2&&rt()},inputs:{focus:[1,"focus"],selectedId:[1,"selectedId"]},decls:13,vars:10,consts:[["stepsTable",""],["emptyCol2",""],["leftPad",""],["detailRow",""],["tooltip",""],["overclockInput",""],["modulePicker",""],["beaconsOverlay",""],["expandTabMenu",""],["machineValueCell",""],["totalCell",""],["dataKey","id","styleClass","p-datatable-sm",3,"rowsChange","sortFunction","rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["pTemplate","footer"],["colspan","100"],[1,"d-flex","gap-2","py-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"label"],[1,"column-header-row"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["colspan","2"],["pSortableColumn","power"],["pSortableColumn","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"click","label"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"click","pTooltip"],["field","belts"],["field","wagons"],[1,"d-flex","align-items-center","justify-content-end"],["field","power"],["field","pollution"],[1,"w-0","px-0","px-sm-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"click","pTooltip","pRowToggler"],[1,"px-0","px-sm-2"],[1,"overflow-hidden","px-0","px-sm-1","py-0"],["colspan","2",1,"px-0","px-sm-2"],[1,"px-0","px-sm-2","text-end"],[1,"w-0","px-0","ps-sm-1"],[1,"d-flex","justify-content-center"],[3,"onChange","binary","ngModel"],[1,"d-flex","align-items-center","links"],[1,"indent"],[1,"icon"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"hover-active","icon","pTooltip"],[3,"class","pTooltip"],[1,"connect",3,"trail","last"],[1,"connect"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","icon","pTooltip"],[1,"hover-icon","fa-solid","fa-eye-slash"],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","px-0","px-sm-2","text-end"],[1,"monospace"],[1,"px-0","pe-sm-2"],[1,"find-text"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","pTooltip"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"onChange","pTooltip","options","ngModel"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","size","pTooltip","ngModel"],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","labNoDrag","",3,"pTooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"onChange","pTooltip","ngModel","options"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","modules","p-button-text",3,"click","pTooltip"],[1,"p-button-icon",3,"class"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click","pTooltip"],[1,"p-button-icon","sum",3,"class"],[1,"p-button-icon","sum"],["type","beacon",3,"id"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"click","pTooltip"],[1,"detail"],[1,"px-1"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],[3,"activeItemChange","model","activeItem"],[1,"p-menuitem-link",3,"id"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-0","text-end"],[1,"ps-0"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],[1,"fw-bold"],[1,"mb-2"],[3,"onChange","ngModel","binary","label"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"hover-active","icon","pTooltip"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"click","icon","pTooltip"],["colspan","100",1,"p-0"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"py-2","icon-height"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],[1,"p-2","icon-height","text-end"]],template:function(i,n){if(i&1){let a=y();s(0,"p-table",11,0),x("rowsChange",function(C){return S(a),v(n.setRows(C))})("sortFunction",function(C){return S(a),v(n.sortSteps$.next(C))}),u(2,xo,30,22,"ng-template",12)(3,rl,2,3,"ng-template",13)(4,kp,2,3,"ng-template",14)(5,Vp,1,1,"ng-template",15)(6,Mp,1,0,"ng-template",null,1,I)(8,Fp,2,1,"ng-template",null,2,I)(10,ls,2,1,"ng-template",null,3,I)(12,Bs,3,1,"ng-template",16),r()}i&2&&d("rowTrackBy",n.trackSvc.trackStep)("value",n.steps())("customSort",!0)("rowExpandMode",n.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!n.focus()&&!n.preferences().disablePaginator)("rows",n.preferences().rows)("rowsPerPageOptions",K(9,Nn))("showCurrentPageReport",!0)},dependencies:[oe,ae,_t,le,mi,pe,ee,Le,se,vt,J,ht,Ni,Ui,zi,Xi,ce,ot,at,Te,Fe,ct,Ai,_e,re,jt,$t,Nt,zt,Ut,At,Wt,Lt,ve,Ht,Pe],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;margin-left:16px;height:100vh}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:is(:hover,   :focus,   .ng-invalid)), [_nghost-%COMP%]     .p-inputtext:not(:is(:hover,   :focus,   .ng-invalid)){border-color:transparent;background-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{min-height:32px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}.column-header-row[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:48px}"],changeDetection:0})}return t})();function Os(t,o){if(t&1&&(s(0,"span",26),h(1),r()),t&2){let e=l(2).$implicit,i=l();p(),T(i.data().recipeEntities[e.targetId].name)}}function Rs(t,o){if(t&1){let e=y();s(0,"button",24),_(1,"translate"),x("click",function(){S(e);let n=b(8),a=l().$implicit,c=l();return v(n.clickOpen("recipe",c.recipeIds(),a.targetId))}),s(2,"i",25),_(3,"iconSmClass"),s(4,"span"),h(5),r()(),u(6,Os,2,1,"span",26),r(),s(7,"lab-picker",17,4),_(9,"translate"),x("selectId",function(n){S(e);let a=l().$implicit,c=l();return v(c.setTarget(a.id,n))}),r()}if(t&2){let e=l().$implicit,i=l();d("pTooltip",m(1,6,"objectives.selectARecipe")),p(2),w(k(3,8,e.targetId,"recipe")),p(3),V("#",e.id,""),p(),f(i.contentSvc.isMobile()?-1:6),p(),d("header",m(9,11,"objectives.selectARecipe"))}}function Ps(t,o){if(t&1){let e=y();s(0,"button",27),_(1,"iconSmClass"),_(2,"translate"),x("click",function(){S(e);let n=b(4),a=l().$implicit,c=l();return v(n.clickOpen("item",c.itemIds(),a.targetId))}),r(),s(3,"lab-picker",17,5),_(5,"translate"),x("selectId",function(n){S(e);let a=l().$implicit,c=l();return v(c.setTarget(a.id,n))}),r()}if(t&2){let e=l().$implicit,i=l();d("icon",m(1,4,e.targetId))("label",i.contentSvc.isMobile()?"":i.data().itemEntities[e.targetId].name)("pTooltip",m(2,6,"objectives.selectAnItem")),p(3),d("header",m(5,8,"objectives.selectAnItem"))}}function Fs(t,o){if(t&1){let e=y();s(0,"p-dropdown",22),_(1,"translate"),x("onChange",function(n){S(e);let a=l().$implicit,c=l(),C=b(23),B=b(26);return v(c.changeUnit(a,n.value,C,B))}),r()}if(t&2){let e=l().$implicit,i=l();d("pTooltip",m(1,3,"objectives.unitTooltip"))("options",i.rateUnitOptions())("ngModel",e.unit)}}function Ds(t,o){if(t&1){let e=y();s(0,"div",18),g(1,"button",19),u(2,Rs,10,13)(3,Ps,6,10),s(4,"lab-input-number",20),_(5,"translate"),_(6,"translate"),_(7,"translate"),x("setValue",function(n){let a=S(e).$implicit,c=l();return v(c.setValue(a.id,n))}),r(),u(8,Fs,2,5,"p-dropdown",21),s(9,"p-dropdown",22),_(10,"translate"),x("onChange",function(n){let a=S(e).$implicit,c=l();return v(c.setType(a.id,n.value))}),r(),s(11,"button",23),_(12,"translate"),x("click",function(){let n=S(e).$implicit,a=l();return v(a.removeObjective(n.id))}),r()()}if(t&2){let e=o.$implicit,i=l();p(2),f(e.unit===i.ObjectiveUnit.Machines?2:3),p(2),d("pTooltip",e.type===i.ObjectiveType.Maximize?i.maximizeType()===i.MaximizeType.Weight?m(5,9,"objectives.valueWeightTooltip"):m(6,11,"objectives.valueRatioTooltip"):m(7,13,"objectives.valueTooltip"))("hideButtons",i.contentSvc.isMobile())("value",e.value),p(4),f(e.type!==i.ObjectiveType.Maximize?8:-1),p(),d("pTooltip",m(10,15,"objectives.typeTooltip"))("options",i.objectiveTypeOptions)("ngModel",e.type),p(2),d("pTooltip",m(12,17,"objectives.removeTooltip"))}}function js(t,o){if(t&1&&g(0,"lab-tooltip",34),t&2){let e=l(2);d("id",e)}}function $s(t,o){if(t&1){let e=y();s(0,"div")(1,"div",29)(2,"span",30),h(3),_(4,"translate"),r(),g(5,"i",31),_(6,"iconSmClass"),s(7,"span",32),h(8),r(),u(9,js,1,1,"ng-template",null,6,I),r(),s(11,"button",33),_(12,"translate"),x("click",function(){S(e);let n=l(),a=l();return v(a.addRecipeLimit(n))}),r()()}if(t&2){let e=b(10),i=l(),n=l();p(3),T(m(4,6,"objectives.errorSimplexUnboundedRecipe")),p(2),w(k(6,8,i,"recipe")),d("pTooltip",e),p(3),T(n.data().recipeEntities[i].name),p(3),d("label",m(12,11,"objectives.errorSimplexUnboundedAddRecipeLimit"))}}function Ns(t,o){t&1&&(s(0,"p-messages",16),u(1,$s,13,13,"ng-template",28),r())}function zs(t,o){if(t&1&&g(0,"p-messages",35),t&2){let e=l();d("value",e)("closable",!1)("escape",!1)}}function Us(t,o){t&1&&u(0,zs,1,3,"p-messages",35),t&2&&f(o.length?0:-1)}function As(t,o){if(t&1&&(u(0,Us,1,1),_(1,"async")),t&2){let e,i=l();f((e=m(1,1,i.messages$))?0:-1,e)}}var Ws=(()=>{class t{store=O(Z);translateSvc=O(Ae);contentSvc=O(Se);trackSvc=O(Ct);_objectives=this.store.selectSignal(D.selectObjectives);result=this.store.selectSignal(D.selectMatrixResult);itemsState=this.store.selectSignal(H.selectItemsState);itemIds=this.store.selectSignal(N.selectAvailableItems);data=this.store.selectSignal(N.selectAdjustedDataset);maximizeType=this.store.selectSignal(E.selectMaximizeType);beltSpeed=this.store.selectSignal(E.selectBeltSpeed);dispRateInfo=this.store.selectSignal(E.selectDisplayRateInfo);rateUnitOptions=this.store.selectSignal(E.selectObjectiveUnitOptions);recipeIds=this.store.selectSignal(E.selectAvailableRecipes);paused=this.store.selectSignal(W.selectPaused);convertObjectiveValues=this.store.selectSignal(W.selectConvertObjectiveValues);objectives=Y(()=>[...this._objectives()]);messages$=De({objectives:this.store.select(D.selectObjectives),matrixResult:this.store.select(D.selectMatrixResult),itemsState:this.store.select(H.selectItemsState),recipesState:this.store.select(N.selectRecipesState)}).pipe(ti(({objectives:e,matrixResult:i,itemsState:n,recipesState:a})=>this.getMessages(e,i,n,a)));objectiveTypeOptions=yi;displayRateOptions=mt;MaximizeType=bi;ObjectiveUnit=ne;ObjectiveType=xe;getMessages(e,i,n,a){if(i.resultType===Ft.Paused)return this.translateSvc.get("objectives.pausedMessage").pipe(Ot(c=>[{severity:"info",detail:c}]));if(i.resultType!==Ft.Failed)return Zt;if(i.simplexStatus==="unbounded"){let c=e.filter(C=>C.type===xe.Maximize);return c.length&&e.every(C=>C.type!==xe.Limit)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorNoLimits",i):c.some(C=>C.unit===ne.Machines?a[C.targetId].excluded:n[C.targetId].excluded)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorMaximizeExcluded",i):this.buildErrorMessages("objectives.errorUnbounded","objectives.errorUnboundedDetail",i)}else return i.simplexStatus==="no_feasible"?this.buildErrorMessages("objectives.errorInfeasible","objectives.errorInfeasibleDetail",i):this.buildErrorMessages("objectives.error","objectives.errorDetail",i)}buildErrorMessages(e,i,n){return De([this.translateSvc.get(e),this.translateSvc.get(i),this.translateSvc.get("objectives.errorSimplexInfo",{returnCode:n.returnCode??"unknown",simplexStatus:n.simplexStatus??"unknown"})]).pipe(Ot(([a,c,C])=>[{severity:"error",summary:a,detail:`${c} ${C}`}]))}setObjectiveOrder(e){this.setOrder(e.map(i=>i.id))}changeUnit(e,i,n,a){let c=this.data();if(i===ne.Machines){if(e.unit!==ne.Machines){let C=c.itemRecipeIds[e.targetId],B=M=>this.convertItemsToMachines(e,M,c);C.length===1?B(C[0]):(a.selectId.pipe(te()).subscribe(M=>B(M)),a.clickOpen("recipe",C))}}else if(e.unit===ne.Machines){let C=Array.from(c.adjustedRecipe[e.targetId].produces),B=M=>this.convertMachinesToItems(e,M,i,c);C.length===1?B(C[0]):(n.selectId.pipe(te()).subscribe(M=>B(M)),n.clickOpen("item",C))}else this.convertItemsToItems(e,e.targetId,i,c)}convertItemsToMachines(e,i,n){if(this.setUnit(e.id,{targetId:i,unit:ne.Machines}),!this.convertObjectiveValues()||e.type===xe.Maximize)return;let a=this.itemsState(),c=this.beltSpeed(),C=this.dispRateInfo(),B=Ke.objectiveNormalizedRate(e,a,c,C,n),M=n.adjustedRecipe[i],R=B.div(M.output[e.targetId]);this.setValue(e.id,R)}convertMachinesToItems(e,i,n,a){if(this.setUnit(e.id,{targetId:i,unit:n}),!this.convertObjectiveValues()||e.type===xe.Maximize||e.recipe==null)return;let c=this.itemsState(),C=this.beltSpeed(),B=this.dispRateInfo(),M=Ke.objectiveNormalizedRate({id:"",targetId:i,value:j.one,unit:n,type:xe.Output},c,C,B,a),U=e.value.mul(e.recipe.output[i]).div(M);this.setValue(e.id,U)}convertItemsToItems(e,i,n,a){if(this.setUnit(e.id,{targetId:i,unit:n}),!this.convertObjectiveValues()||e.type===xe.Maximize)return;let c=this.itemsState(),C=this.beltSpeed(),B=this.dispRateInfo(),M=Ke.objectiveNormalizedRate(e,c,C,B,a),R=Ke.objectiveNormalizedRate({id:"",targetId:i,value:j.one,unit:n,type:xe.Output},c,C,B,a),U=M.div(R);this.setValue(e.id,U)}addItemObjective(e){this.addObjective({targetId:e,unit:ne.Items})}addRecipeObjective(e){this.addObjective({targetId:e,unit:ne.Machines})}addRecipeLimit(e){this.addObjective({targetId:e,unit:ne.Machines,type:xe.Limit})}removeObjective(e){this.store.dispatch(D.remove({id:e}))}setOrder(e){this.store.dispatch(D.setOrder({ids:e}))}setTarget(e,i){this.store.dispatch(D.setTarget({id:e,value:i}))}setValue(e,i){this.store.dispatch(D.setValue({id:e,value:i}))}setUnit(e,i){this.store.dispatch(D.setUnit({id:e,objective:i}))}setType(e,i){this.store.dispatch(D.setType({id:e,value:i}))}addObjective(e){this.store.dispatch(D.add({objective:e}))}setDisplayRate(e,i){this.store.dispatch(E.setDisplayRate({displayRate:e,previous:i}))}setPaused(e){this.store.dispatch(W.setPaused({paused:e}))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["lab-objectives"]],decls:28,vars:35,consts:[["addItemPicker",""],["addRecipePicker",""],["chooseItemPicker",""],["chooseRecipePicker",""],["editRecipePicker",""],["editItemPicker",""],["tooltip",""],[3,"header"],[1,"objectives-content"],[3,"onReorder","value","dragdrop","trackBy"],["pTemplate","item"],[1,"objectives-buttons","d-flex","flex-wrap","mt-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["labDropdownTranslate","","styleClass","h-100",3,"onChange","pTooltip","ngModel","options"],["offIcon","fa-solid fa-pause",3,"onChange","ngModel","onIcon","pTooltip"],["severity","warn","styleClass","mt-2"],[3,"selectId","header"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","border-end-0","cursor-grab"],["labNoDrag","","tooltipPosition","top",3,"setValue","pTooltip","hideButtons","value"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"pTooltip","options","ngModel"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"onChange","pTooltip","options","ngModel"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark","tooltipPosition","left",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","labNoDrag","","type","button","tooltipPosition","top",1,"p-button-outlined","lab-button-icon-only","text-truncate",3,"click","pTooltip"],[1,"p-button-icon"],[1,"p-button-label"],["labNoDrag","","pButton","","pRipple","","type","button","tooltipPosition","top",1,"p-button-outlined","text-truncate",3,"click","icon","label","pTooltip"],["pTemplate",""],[1,"d-flex","align-items-center"],[1,"me-3"],[3,"pTooltip"],[1,"ms-3"],["type","button","pButton","","pRipple","","icon","fa-solid fa-plus",1,"mt-2","p-button-rounded",3,"click","label"],["type","recipe",3,"id"],["styleClass","mt-2",3,"value","closable","escape"]],template:function(i,n){if(i&1){let a=y();s(0,"p-card",7),_(1,"translate"),s(2,"div",8)(3,"p-orderList",9),x("onReorder",function(){return S(a),v(n.setObjectiveOrder(n.objectives()))}),u(4,Ds,13,19,"ng-template",10),r(),s(5,"div",11)(6,"button",12),_(7,"translate"),x("click",function(){S(a);let C=b(17);return v(C.clickOpen("item",n.itemIds()))}),r(),s(8,"button",13),_(9,"translate"),x("click",function(){S(a);let C=b(20);return v(C.clickOpen("recipe",n.recipeIds()))}),r(),s(10,"p-dropdown",14),_(11,"translate"),x("onChange",function(C){return S(a),v(n.setDisplayRate(C.value,n.dispRateInfo().option))}),r(),s(12,"p-toggleButton",15),_(13,"translate"),x("onChange",function(C){let B;return S(a),v(n.setPaused((B=C.checked)!==null&&B!==void 0?B:!1))}),r()(),u(14,Ns,2,0,"p-messages",16)(15,As,2,3),r(),s(16,"lab-picker",17,0),_(18,"translate"),x("selectId",function(C){return S(a),v(n.addItemObjective(C))}),r(),s(19,"lab-picker",17,1),_(21,"translate"),x("selectId",function(C){return S(a),v(n.addRecipeObjective(C))}),r(),g(22,"lab-picker",7,2),_(24,"translate"),g(25,"lab-picker",7,3),_(27,"translate"),r()}if(i&2){let a;d("header",m(1,17,"objectives.title")),p(3),d("value",n.objectives())("dragdrop",!0)("trackBy",n.trackSvc.trackById),p(3),d("label",m(7,19,"objectives.addItems")),p(2),d("label",m(9,21,"objectives.addMachines")),p(2),d("pTooltip",m(11,23,"objectives.selectDisplayRate"))("ngModel",n.dispRateInfo().option)("options",n.displayRateOptions),p(2),d("ngModel",n.paused())("onIcon","fa-solid fa-play")("pTooltip",m(13,25,"objectives.pauseTooltip")),p(2),f((a=n.result().unboundedRecipeId)?14:15,a),p(2),d("header",m(18,27,"objectives.selectAnItem")),p(3),d("header",m(21,29,"objectives.selectARecipe")),p(3),d("header",m(24,31,"objectives.selectAnItem")),p(3),d("header",m(27,33,"objectives.selectARecipe"))}},dependencies:[oe,ae,le,pe,ee,Hi,se,Qi,wt,J,Yi,Be,Tt,ce,yt,Fe,_i,_e,re],styles:[".objectives-content[_ngcontent-%COMP%]{max-width:1000px}.objectives-buttons[_ngcontent-%COMP%]{gap:.25rem}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown.icon[_ngcontent-%COMP%]{flex:0 0 36px}@media (min-width: 576px){button.text-truncate[_ngcontent-%COMP%], .p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 25%}}@media (max-width: 575.98px){.p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 15%}}@media (max-width: 575.98px){[_nghost-%COMP%]     button.lab-button-icon-only{justify-content:center;padding:.5rem 0;width:2.571rem}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-icon{margin:0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-label{flex:0 0 auto;visibility:hidden;width:0}}"],changeDetection:0})}return t})();var qs=["filterInput"],Qs=()=>({minHeight:"528px",height:"80vh",width:"50vw"}),Ks=()=>({"768px":"80vw","576px":"100vw"}),Xs=()=>({width:"30vw"}),Ys=()=>({"768px":"50vw","576px":"90vw"}),Zs=()=>({height:"calc(80vh - 165px)",minHeight:"363px"}),Js=t=>({title:"techPicker.available",ids:t,class:"p-button-text"}),er=t=>({title:"techPicker.locked",ids:t,class:"p-button-danger"}),tr=t=>({title:"techPicker.researched",ids:t,class:"p-button-success"}),ir=(t,o)=>({id:t,class:o});function nr(t,o){if(t&1){let e=y();s(0,"div",15)(1,"span",7),h(2),_(3,"translate"),r(),s(4,"button",19),_(5,"translate"),x("click",function(){S(e);let n=l();return v(n.copyScriptToClipboard())}),r(),g(6,"a",20),_(7,"translate"),r()}t&2&&(p(2),T(m(3,3,"techPicker.exportFromFactorio")),p(2),d("label",m(5,5,"techPicker.exportCopyScript")),p(2),d("label",m(7,7,"techPicker.exportUseMod")))}function or(t,o){if(t&1){let e=y();s(0,"button",21),_(1,"translate"),x("click",function(){S(e);let n=l();return v(n.importTechs())}),r(),s(2,"button",22),_(3,"translate"),x("click",function(){S(e);let n=l();return v(n.importVisible=!1)}),r()}t&2&&(d("label",m(1,2,"ok")),p(2),d("label",m(3,4,"cancel")))}function ar(t,o){t&1&&$(0)}function lr(t,o){t&1&&$(0)}function pr(t,o){t&1&&$(0)}function sr(t,o){t&1&&(s(0,"i"),h(1),_(2,"translate"),r()),t&2&&(p(),T(m(2,1,"none")))}function rr(t,o){t&1&&$(0)}function _r(t,o){if(t&1&&u(0,rr,1,0,"ng-container",23),t&2){let e=o.$implicit,i=l().class;l();let n=b(7);d("ngTemplateOutlet",n)("ngTemplateOutletContext",q(2,ir,e,i))}}function cr(t,o){if(t&1&&(s(0,"h3"),h(1),_(2,"translate"),r(),s(3,"div",24),u(4,sr,3,3,"i"),P(5,_r,1,5,"ng-container",null,Ve),r()),t&2){let e=o.title,i=o.ids;p(),T(m(2,2,e)),p(3),f(i.length===0?4:-1),p(),F(i)}}function dr(t,o){if(t&1&&g(0,"lab-tooltip",26),t&2){let e=l().id;d("id",e)}}function mr(t,o){if(t&1){let e=y();s(0,"button",25),_(1,"iconSmClass"),x("click",function(){let n=S(e).id,a=l(2);return v(a.clickId(n))}),u(2,dr,1,1,"ng-template",null,4,I),r()}if(t&2){let e,i=o.id,n=o.class,a=b(3),c=l(2);w(n),ie("hover-active",c.selection().indexOf(i)===-1),d("label",c.showTechLabels()&&((e=c.data().itemEntities[i])==null?null:e.name)||"")("icon",m(1,7,i))("pTooltip",a)}}function ur(t,o){if(t&1&&(s(0,"p-scrollPanel"),u(1,ar,1,0,"ng-container",23)(2,lr,1,0,"ng-container",23)(3,pr,1,0,"ng-container",23)(4,cr,7,4,"ng-template",null,2,I)(6,mr,4,9,"ng-template",null,3,I),r()),t&2){let e=b(5),i=l();Ee(K(8,Zs)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",we(9,Js,i.status().available)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",we(11,er,i.status().locked)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",we(13,tr,i.status().researched))}}function Cr(t,o){if(t&1){let e=y();s(0,"button",21),_(1,"translate"),x("click",function(){S(e);let n=l();return v(n.hide())}),r(),s(2,"button",22),_(3,"translate"),x("click",function(){S(e);let n=l();return v(n.hide(!0))}),r()}t&2&&(d("label",m(1,2,"ok")),p(2),d("label",m(3,4,"cancel")))}var Kt=(()=>{class t extends ji{filterSvc=O(Di);translateSvc=O(Ae);store=O(Z);contentSvc=O(Se);filterInput=pt.required("filterInput");selectIds=new $e;data=this.store.selectSignal(N.selectAdjustedDataset);showTechLabels=this.store.selectSignal(W.selectShowTechLabels);filter=Ce("");selection=Ce([]);allSelected=Y(()=>this.selection().length===this.data().technologyIds.length);status=Y(()=>{let e=this.data(),i=this.filter(),n=this.selection(),a=new Set(n),c=[],C=[],B=e.technologyIds;if(i){let R=B.map(U=>e.itemEntities[U]);B=this.filterSvc.filter(R,["name"],i,"contains").map(U=>U.id),n=n.filter(U=>B.includes(U))}let M=n;for(let R of B)if(!a.has(R)){let U=e.technologyEntities[R];U.prerequisites==null||U.prerequisites.every(de=>a.has(de))?c.push(R):C.push(R)}return{available:c,locked:C,researched:M}});importVisible=!1;importValue="";Game=ge;clickOpen(e){e=[...e??this.data().technologyIds],this.selection.set(e),this.show(),this.contentSvc.isMobile()||setTimeout(()=>{this.filterInput().nativeElement.focus()})}selectAll(e){this.selection.set(e?[...this.data().technologyIds]:[])}openImport(e){this.importVisible=!0,this.importValue="",setTimeout(()=>e.focus())}copyScriptToClipboard(){window.navigator.clipboard.writeText(`/c local list = {}
for _, tech in pairs(game.player.force.technologies) do
    if tech.researched then
        list[#list + 1] = tech.name
    end
end
game.write_file("techs.txt", table.concat(list, ","))
`),this.translateSvc.get("techPicker.exportScriptCopied").pipe(te()).subscribe(i=>{this.contentSvc.showToast$.next({severity:"success",detail:i,contentStyleClass:"detail-only"})})}importTechs(){let e=this.importValue.split(",").map(n=>n.trim()).map(n=>{if(!n)return"";let a=`${n}-technology`;return this.data().technologyIds.includes(a)?a:this.data().technologyIds.includes(n)?n:""}).filter(n=>!!n),i=new Set(e);this.addPrerequisites(i),this.selection.set(Array.from(i)),this.importValue="",this.importVisible=!1}clickId(e){let i=new Set(this.selection());if(i.has(e)){i.delete(e);let n;do{n=new Set;for(let a of i)this.data().technologyEntities[a].prerequisites?.some(C=>!i.has(C))&&n.add(a);n.forEach(a=>i.delete(a))}while(n.size)}else i.add(e),this.addPrerequisites(i);this.selection.set(Array.from(i))}addPrerequisites(e){let i;do{i=new Set;for(let n of e)this.data().technologyEntities[n].prerequisites?.filter(c=>!e.has(c)).forEach(c=>i.add(c));i.forEach(n=>e.add(n))}while(i.size)}save(){let e=this.selection(),i=this.data();e.length===i.technologyIds.length&&this.selectIds.emit(null);let n=e.filter(a=>!e.some(c=>{let C=i.technologyEntities[c];return C.prerequisites&&C.prerequisites.indexOf(a)!==-1}));this.selectIds.emit(n)}setShowTechLabels(e){this.store.dispatch(W.setShowTechLabels({showTechLabels:e}))}static \u0275fac=(()=>{let e;return function(n){return(e||(e=je(t)))(n||t)}})();static \u0275cmp=X({type:t,selectors:[["lab-tech-picker"]],viewQuery:function(i,n){i&1&&st(n.filterInput,qs,5),i&2&&rt()},outputs:{selectIds:"selectIds"},features:[Ne],decls:28,vars:50,consts:[["filterInput",""],["importInput",""],["techSet",""],["techButton",""],["tooltip",""],["styleClass","picker-dialog","appendTo","body",3,"visibleChange","onHide","visible","modal","dismissableMask","draggable","resizable","focusOnShow","header","breakpoints"],[1,"d-flex","w-100","my-1","p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-magnifying-glass"],["pInputText","","type","text",1,"w-100",3,"input","ngModel"],[1,"p-inputgroup-addon","flex-shrink-0"],["labelStyleClass","text-nowrap",3,"onChange","binary","label","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-import",1,"flex-shrink-0",3,"click","label","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],[1,"d-flex","flex-column"],[1,"p-inputgroup","mb-3"],["rows","10","pInputTextarea","",1,"mt-2","w-100",3,"ngModelChange","keydown.enter","ngModel"],["pTemplate","footer"],[3,"style"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click","label"],["href","https://mods.factorio.com/mod/export-researched-technologies","target","_blank","pButton","","pRipple","","icon","fa-solid fa-link",1,"text-decoration-none","p-inputgroup-addon","p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-secondary",3,"click","label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","invert"],["pButton","","pRipple","","type","button","tooltipPosition","bottom",1,"me-1","mb-1",3,"click","label","icon","pTooltip"],["type","technology",3,"id"]],template:function(i,n){if(i&1){let a=y();s(0,"p-dialog",5),_(1,"translate"),Re("visibleChange",function(C){return S(a),Oe(n.visible,C)||(n.visible=C),v(C)}),x("onHide",function(){return S(a),v(n.onHide())}),s(2,"div",6)(3,"span",7),g(4,"i",8),r(),s(5,"input",9,0),x("input",function(){S(a);let C=b(6);return v(n.filter.set(C.value))}),r(),s(7,"span",10)(8,"p-checkbox",11),_(9,"translate"),x("onChange",function(C){return S(a),v(n.selectAll(C.checked))}),r()(),s(10,"span",10)(11,"p-checkbox",11),_(12,"translate"),x("onChange",function(C){return S(a),v(n.setShowTechLabels(C.checked))}),r()(),s(13,"button",12),_(14,"translate"),_(15,"translate"),x("click",function(){S(a);let C=b(24);return v(n.openImport(C))}),r(),s(16,"p-dialog",13),_(17,"translate"),Re("visibleChange",function(C){return S(a),Oe(n.importVisible,C)||(n.importVisible=C),v(C)}),s(18,"div",14),u(19,nr,8,9,"div",15),s(20,"div"),h(21),_(22,"translate"),r(),s(23,"textarea",16,1),Re("ngModelChange",function(C){return S(a),Oe(n.importValue,C)||(n.importValue=C),v(C)}),x("keydown.enter",function(){return S(a),v(n.importTechs())}),r()(),u(25,or,4,6,"ng-template",17),r()(),u(26,ur,8,15,"p-scrollPanel",18)(27,Cr,4,6,"ng-template",17),r()}i&2&&(Ee(K(46,Qs)),Me("visible",n.visible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("focusOnShow",!1)("header",m(1,32,"techPicker.header"))("breakpoints",K(47,Ks)),p(5),d("ngModel",n.filter()),p(3),d("binary",!0)("label",m(9,34,"techPicker.unlockAll"))("ngModel",n.allSelected()),p(3),d("binary",!0)("label",m(12,36,"techPicker.showLabels"))("ngModel",n.showTechLabels()),p(2),d("label",m(14,38,"techPicker.import"))("pTooltip",m(15,40,"techPicker.importTooltip")),p(3),Ee(K(48,Xs)),Me("visible",n.importVisible),d("modal",!0)("dismissableMask",!0)("draggable",!0)("resizable",!1)("breakpoints",K(49,Ys))("header",m(17,42,"techPicker.importHeader")),p(3),f(n.data().game===n.Game.Factorio?19:-1),p(2),T(m(22,44,"techPicker.importInstructions")),p(2),Me("ngModel",n.importValue),p(3),f(n.visible?26:-1))},dependencies:[ut,oe,ae,_t,le,pe,ee,Le,xt,Gi,St,J,bt,ce,_e,re],encapsulation:2,changeDetection:0})}return t})();var gr=(t,o)=>o.key,Vt=(t,o)=>o.id,xr=()=>({height:"100%"}),Xt=t=>({count:t}),Sr=()=>({width:"400px",maxHeight:"500px"}),vr=()=>({"400px":"100vw"}),hr=()=>[];function br(t,o){if(t&1&&(s(0,"div"),h(1),r()),t&2){let e=l(2);p(),T(e.state)}}function Tr(t,o){if(t&1&&(s(0,"div",62)(1,"div"),h(2),_(3,"translate"),r(),u(4,br,2,1,"div"),r()),t&2){let e=l();p(2),T(m(3,2,"settings.savedStates")),p(2),f(e.state?4:-1)}}function yr(t,o){if(t&1){let e=y();s(0,"div",23)(1,"button",63),x("click",function(){S(e);let n=b(3),a=l();return v(a.setSearch(n.value))}),r(),g(2,"input",64,4),s(4,"button",65),x("click",function(){S(e);let n=b(3),a=l();return v(a.copySearchToClipboard(n.value))}),r()()}if(t&2){let e=l();p(2),d("ngModel",e.BrowserUtility.search)}}function wr(t,o){if(t&1){let e=y();s(0,"div",23)(1,"input",66,5),_(3,"translate"),_(4,"translate"),Re("ngModelChange",function(n){S(e);let a=l();return Oe(a.editValue,n)||(a.editValue=n),v(n)}),x("keydown.enter",function(){S(e);let n=l();return v(n.clickSaveState(n.data().game))}),r(),s(5,"button",67),_(6,"translate"),x("click",function(){S(e);let n=l();return v(n.clickSaveState(n.data().game))}),r(),s(7,"button",68),_(8,"translate"),x("click",function(){S(e);let n=l();return v(n.editState=null)}),r()()}if(t&2){let e=b(2),i=l();p(),d("autofocus",!0)("placeholder",m(3,7,"settings.nameSavedState"))("pTooltip",m(4,9,"settings.nameSavedState")),Me("ngModel",i.editValue),p(4),d("pTooltip",m(6,11,"settings.saveState"))("disabled",e.invalid),p(2),d("pTooltip",m(8,13,"cancel"))}}function Ir(t,o){if(t&1&&(s(0,"a",74),g(1,"span",75),s(2,"span",76),h(3),_(4,"translate"),r()()),t&2){let e=o.$implicit;p(),d("ngClass",e.icon),p(2),T(m(4,2,e.label))}}function Br(t,o){if(t&1){let e=y();s(0,"button",72),x("click",function(n){S(e);let a=b(2);return v(a.toggle(n))}),s(1,"p-menu",73,6),u(3,Ir,5,4,"ng-template",44),r()()}if(t&2){let e=l(2);p(),d("popup",!0)("model",e.editStateMenu)}}function kr(t,o){if(t&1){let e=y();s(0,"button",77),_(1,"translate"),x("click",function(){S(e);let n=l(2);return v(n.openCreateState())}),r()}t&2&&d("pTooltip",m(1,1,"settings.createSavedState"))}function Er(t,o){if(t&1){let e=y();s(0,"div",24)(1,"p-dropdown",69),_(2,"translate"),_(3,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setState(n.value,a.gameStates()))}),r(),u(4,Br,4,2,"button",70)(5,kr,2,3,"button",71),r()}if(t&2){let e=l();p(),d("placeholder",m(2,5,"settings.selectSavedState"))("pTooltip",m(3,7,"settings.selectSavedState"))("ngModel",e.state)("options",e.savedStates()),p(3),f(e.state?4:5)}}function Vr(t,o){if(t&1){let e=y();s(0,"button",78),_(1,"translate"),x("click",function(){S(e);let n=l();return v(n.openCreateState())}),r()}t&2&&d("label",m(1,1,"settings.createSavedState"))}function Mr(t,o){if(t&1&&(s(0,"div",62)(1,"div"),h(2),_(3,"translate"),r(),s(4,"div"),h(5),r()()),t&2){let e,i=l();p(2),T(m(3,2,"settings.game")),p(3),T((e=i.modRecord()[i.settings().modId])==null?null:e.id)}}function Or(t,o){if(t&1&&(s(0,"small",52),h(1),r()),t&2){let e=o.$implicit;p(),V(" ",e.value," ")}}function Rr(t,o){if(t&1&&(P(0,Or,2,1,"small",52,gr),_(2,"keyvalue")),t&2){let e=l();F(m(2,0,e.data().version))}}function Pr(t,o){t&1&&(s(0,"tr")(1,"th"),h(2),_(3,"translate"),r(),s(4,"th"),h(5),_(6,"translate"),r()()),t&2&&(p(2),T(m(3,2,"settings.mod")),p(3),T(m(6,4,"settings.version")))}function Fr(t,o){if(t&1&&(s(0,"tr")(1,"td"),h(2),r(),s(3,"td"),h(4),r()()),t&2){let e=o.$implicit;p(2),T(e.key),p(2),T(e.value)}}function Dr(t,o){if(t&1){let e=y();s(0,"button",88),_(1,"translate"),x("click",function(){S(e);let n=l(2);return v(n.versionsVisible=!1)}),r()}t&2&&d("label",m(1,1,"ok"))}function jr(t,o){if(t&1){let e=y();s(0,"div",31)(1,"label",79),h(2),_(3,"translate"),r(),s(4,"small",80)(5,"a",81),h(6),_(7,"translate"),r()(),s(8,"span",24)(9,"p-dropdown",82),_(10,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setMod(n.value))}),r(),s(11,"button",83),_(12,"translate"),x("click",function(){S(e);let n=l();return v(n.versionsVisible=!0)}),s(13,"p-dialog",84),_(14,"translate"),Re("visibleChange",function(n){S(e);let a=l();return Oe(a.versionsVisible,n)||(a.versionsVisible=n),v(n)}),s(15,"p-table",85),_(16,"keyvalue"),u(17,Pr,7,6,"ng-template",22)(18,Fr,5,2,"ng-template",86),r(),u(19,Dr,2,3,"ng-template",87),r()()()()}if(t&2){let e=l();p(2),T(m(3,18,"settings.modSet")),p(4),T(m(7,20,"settings.requestMod")),p(3),d("filter",!0)("autofocusFilter",!e.contentSvc.isMobile())("pTooltip",m(10,22,"settings.modSetTooltip"))("ngModel",e.settings().modId)("options",e.modOptions()),p(2),d("pTooltip",m(12,24,"settings.modVersions")),p(2),Ee(K(30,Sr)),Me("visible",e.versionsVisible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("breakpoints",K(31,vr))("header",m(14,26,"settings.modVersions")),p(2),d("value",m(16,28,e.data().version))}}function $r(t,o){t&1&&(s(0,"div"),h(1),_(2,"translate"),r()),t&2&&(p(),T(m(2,1,o)))}function Nr(t,o){if(t&1&&(s(0,"div",62)(1,"div"),h(2),_(3,"translate"),r(),u(4,$r,3,3,"div"),r()),t&2){let e;l();let i=b(58);p(2),T(m(3,2,"settings.factory")),p(2),f((e=i.label())?4:-1,e)}}function zr(t,o){if(t&1&&(g(0,"i",94),_(1,"iconSmClass")),t&2){let e=o.$implicit;w(m(1,2,e))}}function Ur(t,o){if(t&1&&(s(0,"div",92),P(1,zr,2,4,"i",93,Ve),r()),t&2){let e=o.$implicit;p(),F(e)}}function Ar(t,o){if(t&1&&g(0,"lab-tooltip",97),t&2){let e=l().$implicit;d("id",e.value)}}function Wr(t,o){if(t&1&&(s(0,"div",95),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,Ar,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Lr(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-multiSelect",89),_(3,"translate"),x("onChange",function(n){let a;S(e);let c=l();return v(c.setModuleRank(n.value,(a=c.data().defaults)==null?null:a.moduleRankIds))}),u(4,Ur,3,0,"ng-template",90)(5,Wr,7,6,"ng-template",44),r(),s(6,"label",91),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.modifierRankTooltip"))("ngModel",e.machinesState().moduleRankIds)("options",e.options().modules),p(5),T(m(8,6,"settings.modifierRank"))}}function Hr(t,o){if(t&1&&(g(0,"i",94),_(1,"iconSmClass")),t&2){let e=o.$implicit;w(m(1,2,e))}}function Gr(t,o){if(t&1&&(s(0,"div",92),P(1,Hr,2,4,"i",93,Ve),r()),t&2){let e=o.$implicit;p(),F(e)}}function qr(t,o){if(t&1&&g(0,"lab-tooltip",97),t&2){let e=l().$implicit;d("id",e.value)}}function Qr(t,o){if(t&1&&(s(0,"div",95),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,qr,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Kr(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-multiSelect",98),_(3,"translate"),x("onChange",function(n){let a;S(e);let c=l();return v(c.setFuelRank(n.value,(a=c.data().defaults)==null?null:a.fuelRankIds))}),u(4,Gr,3,0,"ng-template",90)(5,Qr,7,6,"ng-template",44),r(),s(6,"label",99),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.fuelRankTooltip"))("ngModel",e.machinesState().fuelRankIds)("options",e.options().fuels),p(5),T(m(8,6,"settings.fuelRank"))}}function Xr(t,o){t&1&&(s(0,"div",107),g(1,"i",108),r())}function Yr(t,o){if(t&1&&g(0,"lab-tooltip",110),t&2){let e=l().$implicit;d("id",e.value)}}function Zr(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,Yr,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Jr(t,o){if(t&1){let e=y();s(0,"p-inputNumber",111,8),_(2,"translate"),x("onBlur",function(){let n;S(e);let a=b(1),c=l(2);return v(c.setDefaultOverclock(c.rational((n=a.value)!==null&&n!==void 0?n:100)))}),r()}if(t&2){let e,i=l(2);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",(e=i.machinesState().overclock)==null?null:e.toNumber())}}function e_(t,o){if(t&1&&(s(0,"i",115),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=o.$implicit;w(m(1,3,e.id)),p(3),T(e.count)}}function t_(t,o){if(t&1&&(s(0,"div",92)(1,"i",115),_(2,"iconSmClass"),s(3,"span"),h(4),r()(),P(5,e_,4,5,"i",116,Vt),r()),t&2){let e=o.$implicit;p(),w(m(2,3,e.id)),p(3),T(e.count),p(),F(e.modules)}}function i_(t,o){t&1&&g(0,"lab-tooltip",117),t&2&&d("id",o)}function n_(t,o){if(t&1&&u(0,i_,1,1,"lab-tooltip",117),t&2){let e,i=l();f((e=i==null||i[0]==null?null:i[0].id)?0:-1,e)}}function o_(t,o){if(t&1){let e=y();s(0,"button",112),x("click",function(n){let a=S(e),c=b(5);return v(c.show(n,a))}),P(1,t_,7,5,"div",92,be),g(3,"i",113),r(),s(4,"lab-beacons-overlay",114,9),x("setValue",function(n){S(e);let a=l(2);return v(a.changeDefaultBeacons(n))}),r(),u(6,n_,1,1,"ng-template",null,7,I)}if(t&2){let e=b(7);d("pTooltip",e),p(),F(o)}}function a_(t,o){if(t&1&&(s(0,"div",92),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),w(m(2,2,e.value))}}function l_(t,o){if(t&1&&(s(0,"div"),h(1),r()),t&2){let e=l(4).$implicit;p(),T(e)}}function p_(t,o){if(t&1&&u(0,a_,3,4,"div",92)(1,l_,2,1,"div"),t&2){let e=o.$implicit;f(e?0:1)}}function s_(t,o){if(t&1&&g(0,"lab-tooltip",110),t&2){let e=l().$implicit;d("id",e.value)}}function r_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,s_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function __(t,o){if(t&1&&(s(0,"div",92),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function c_(t,o){if(t&1&&g(0,"lab-tooltip",97),t&2){let e=l().$implicit;d("id",e.value)}}function d_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,c_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function m_(t,o){if(t&1){let e=y();s(0,"p-dropdown",120),_(1,"translate"),x("onChange",function(n){S(e);let a=l(2),c=l().$implicit,C=l(2);return v(C.changeFuel(c,n.value,a,C.machinesState().fuelRankIds))}),u(2,__,3,4,"ng-template",43)(3,d_,7,6,"ng-template",44),r()}if(t&2){let e=l(2);d("pTooltip",m(1,3,"settings.fuelTooltip"))("ngModel",e.fuelId)("options",e.fuelOptions)}}function u_(t,o){if(t&1&&(s(0,"div",92),g(1,"i"),_(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),w(m(2,2,e.value))}}function C_(t,o){if(t&1&&g(0,"lab-tooltip",123),t&2){let e=l().$implicit;d("id",e.value)}}function f_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,C_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",e.value!=="module"?i:void 0),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function g_(t,o){if(t&1){let e=y();s(0,"p-dropdown",120),_(1,"translate"),x("onChange",function(n){S(e);let a=l(4).$implicit,c=l(2);return v(c.changeModules(a,[{id:n.value,count:c.rational.one}]))}),u(2,u_,3,4,"ng-template",43)(3,f_,7,6,"ng-template",44),r()}if(t&2){let e,i=l(3);d("pTooltip",m(1,3,"settings.modifierTooltip"))("ngModel",i.modules[0].id)("options",(e=i.moduleOptions)!==null&&e!==void 0?e:K(5,hr))}}function x_(t,o){if(t&1&&(s(0,"i",115),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=o.$implicit;w(m(1,3,e.id)),p(3),T(e.count)}}function S_(t,o){if(t&1&&g(0,"lab-tooltip",123),t&2){let e=l().$implicit;d("id",e.id)}}function v_(t,o){if(t&1&&u(0,S_,1,1,"lab-tooltip",123),t&2){let e=o.$implicit;f(e.id?0:-1)}}function h_(t,o){if(t&1&&P(0,v_,1,1,null,null,Vt),t&2){let e=l(4);F(e.modules)}}function b_(t,o){if(t&1){let e=y();s(0,"button",124),x("click",function(n){S(e);let a=b(5),c=l(2),C=l();return v(a.show(n,C.modules,c))}),P(1,x_,4,5,"i",116,Vt),g(3,"i",113),r(),s(4,"lab-modules-overlay",114,10),x("setValue",function(n){S(e);let a=l(4).$implicit,c=l(2);return v(c.changeModules(a,n))}),r(),u(6,h_,2,0,"ng-template",null,7,I)}if(t&2){let e=b(7),i=l(3);d("pTooltip",e),p(),F(i.modules)}}function T_(t,o){if(t&1&&u(0,g_,4,6,"p-dropdown",121)(1,b_,8,1),t&2){let e=l();f(e.modules!==!0&&(e.modules!=null&&e.modules.isOne())?0:1)}}function y_(t,o){if(t&1){let e=y();s(0,"p-inputNumber",111,8),_(2,"translate"),x("onBlur",function(){let n;S(e);let a=b(1),c=l(3).$implicit,C=l(2);return v(C.setOverclock(c,C.rational((n=a.value)!==null&&n!==void 0?n:100),c?C.machinesState().entities[""].overclock:C.rational(100)))}),r()}if(t&2){let e=l(2);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",e.overclock==null?null:e.overclock.toNumber())}}function w_(t,o){if(t&1&&(s(0,"i",115),_(1,"iconSmClass"),s(2,"span"),h(3),r()()),t&2){let e=o.$implicit;w(m(1,3,e.id)),p(3),T(e.count)}}function I_(t,o){if(t&1&&(s(0,"div",92)(1,"i",115),_(2,"iconSmClass"),s(3,"span"),h(4),r()(),P(5,w_,4,5,"i",116,Vt),r()),t&2){let e=o.$implicit;p(),w(m(2,3,e.id)),p(3),T(e.count),p(),F(e.modules)}}function B_(t,o){t&1&&g(0,"lab-tooltip",117),t&2&&d("id",o)}function k_(t,o){if(t&1&&u(0,B_,1,1,"lab-tooltip",117),t&2){let e,i=l(3);f((e=i.beacons==null||i.beacons[0]==null?null:i.beacons[0].id)?0:-1,e)}}function E_(t,o){if(t&1){let e=y();s(0,"button",112),x("click",function(n){S(e);let a=b(5),c=l(2);return v(a.show(n,c.beacons))}),P(1,I_,7,5,"div",92,be),g(3,"i",113),r(),s(4,"lab-beacons-overlay",114,9),x("setValue",function(n){S(e);let a=l(3).$implicit,c=l(2);return v(c.changeBeacons(a,n))}),r(),u(6,k_,1,1,"ng-template",null,7,I)}if(t&2){let e=b(7),i=l(2);d("pTooltip",e),p(),F(i.beacons)}}function V_(t,o){if(t&1){let e=y();s(0,"div",118),g(1,"button",119),s(2,"p-dropdown",120),_(3,"translate"),_(4,"filterOptions"),x("onChange",function(n){let a;S(e);let c=l(2).$implicit,C=l(2);return v(C.setMachine(c,n.value,(a=C.data().defaults)==null?null:a.machineRankIds))}),u(5,p_,2,1,"ng-template",43)(6,r_,7,6,"ng-template",44),r(),u(7,m_,4,5,"p-dropdown",121)(8,T_,2,1)(9,y_,3,9,"p-inputNumber",104)(10,E_,8,1),s(11,"button",122),_(12,"translate"),x("click",function(){let n;S(e);let a=l(2).$implicit,c=l(2);return v(c.removeMachine(a,(n=c.data().defaults)==null?null:n.machineRankIds))}),r()()}if(t&2){let e=l(),i=l().$implicit,n=l(2);p(2),d("pTooltip",m(3,10,"settings.machineTooltip"))("ngModel",i)("options",fe(4,12,n.options().machines,n.machineIds(),i)),p(5),f(e.fuelId?7:-1),p(),f(e.modules&&o.modules?8:-1),p(),f(n.data().game===n.Game.Satisfactory?9:-1),p(),f(e.beacons&&e.beacons.length?10:-1),p(),ie("invisible",i===""),d("pTooltip",m(12,16,"settings.removeMachinePreference"))}}function M_(t,o){if(t&1&&u(0,V_,13,18,"div",118),t&2){let e,i=l().$implicit,n=l(2);f((e=n.data().machineEntities[i])?0:-1,e)}}function O_(t,o){if(t&1&&u(0,M_,1,1),t&2){let e,i=o.$implicit,n=l(2);f((e=n.machinesState().entities[i])?0:-1,e)}}function R_(t,o){if(t&1){let e=y();s(0,"div",100)(1,"span",101),_(2,"translate"),g(3,"i",102),r(),s(4,"p-dropdown",103),_(5,"translate"),_(6,"filterOptions"),x("onChange",function(n){let a;S(e);let c=l();return v(c.addMachine(n.value,(a=c.data().defaults)==null?null:a.machineRankIds))}),u(7,Xr,2,0,"ng-template",43)(8,Zr,7,6,"ng-template",44),r(),u(9,Jr,3,9,"p-inputNumber",104)(10,o_,8,1),r(),s(11,"p-orderList",105),x("onReorder",function(){let n;S(e);let a=l();return v(a.setMachineRank(a.machineIds(),(n=a.data().defaults)==null?null:n.machineRankIds))}),u(12,O_,1,1,"ng-template",44),r(),g(13,"div",106)}if(t&2){let e,i,n=l();p(),d("pTooltip",m(2,10,"settings.machineDefaults")),p(3),ie("invisible",!n.options().machines.length),d("ngModel",(e=n.options().machines[0])==null?null:e.value)("pTooltip",m(5,12,"settings.addMachineTooltip"))("options",k(6,14,n.options().machines,n.machineIds())),p(5),f(n.data().game===n.Game.Satisfactory?9:-1),p(),f((i=n.data().game===n.Game.Factorio&&n.machinesState().beacons)?10:-1,i),p(),d("value",n.machineIds())("dragdrop",!0)}}function P_(t,o){if(t&1){let e=y();s(0,"div",35)(1,"p-checkbox",125),_(2,"translate"),_(3,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.toggleBeaconReceivers(n.checked))}),r()()}if(t&2){let e=l();p(),d("ngModel",e.settings().beaconReceivers!=null)("binary",!0)("label",m(2,4,"settings.estimateBeaconPowerUsage"))("pTooltip",m(3,6,"settings.estimateBeaconPowerUsageTooltip"))}}function F_(t,o){if(t&1){let e=y();s(0,"div",35)(1,"label",126),h(2),_(3,"translate"),r(),s(4,"lab-input-number",127),_(5,"translate"),x("setValue",function(n){S(e);let a=l();return v(a.setBeaconReceivers(n))}),r()()}t&2&&(p(2),T(m(3,3,"settings.averageBeaconReceivers")),p(2),d("pTooltip",m(5,5,"settings.averageBeaconReceiversTooltip"))("value",o))}function D_(t,o){if(t&1&&(s(0,"div",130),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r()()),t&2){let e=o.$implicit;p(),w(m(2,3,e.value)),p(3),V(" ",e.label," ")}}function j_(t,o){if(t&1&&g(0,"lab-tooltip",123),t&2){let e=l().$implicit;d("id",e.value)}}function $_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,j_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",e.value!=="module"?i:void 0),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function N_(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",128),_(3,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setProliferatorSpray(n.value))}),u(4,D_,5,5,"ng-template",43)(5,$_,7,6,"ng-template",44),r(),s(6,"label",129),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("autoDisplayFirst",!1)("pTooltip",m(3,5,"settings.proliferatorSelfSprayTooltip"))("ngModel",e.settings().proliferatorSprayId)("options",e.options().proliferatorModules),p(5),T(m(8,7,"settings.proliferatorSelfSpray"))}}function z_(t,o){if(t&1&&(s(0,"div",130),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r()()),t&2){let e=l().$implicit;p(),w(m(2,3,e.value)),p(3),V(" ",e.label," ")}}function U_(t,o){if(t&1&&u(0,z_,5,5,"div",130),t&2){let e=o.$implicit;f(e?0:-1)}}function A_(t,o){if(t&1&&g(0,"lab-tooltip",131),t&2){let e=l().$implicit;d("id",e.value)}}function W_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,A_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function L_(t,o){if(t&1&&(s(0,"div",130),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r()()),t&2){let e=o.$implicit;p(),w(m(2,3,e.value)),p(3),V(" ",e.label," ")}}function H_(t,o){if(t&1&&g(0,"lab-tooltip",134),t&2){let e=l().$implicit;d("id",e.value)}}function G_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,H_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function q_(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",132),_(3,"translate"),x("onChange",function(n){let a;S(e);let c=l();return v(c.setPipe(n.value,(a=c.data().defaults)==null?null:a.pipeId))}),u(4,L_,5,5,"ng-template",43)(5,G_,7,6,"ng-template",44),r(),s(6,"label",133),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.defaultPipeTooltip"))("ngModel",e.settings().pipeId)("options",e.options().pipes),p(5),T(m(8,6,"settings.defaultPipe"))}}function Q_(t,o){if(t&1&&(s(0,"div",130),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r()()),t&2){let e=o.$implicit;p(),w(m(2,3,e.value)),p(3),V(" ",e.label," ")}}function K_(t,o){if(t&1&&g(0,"lab-tooltip",137),t&2){let e=l().$implicit;d("id",e.value)}}function X_(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,K_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function Y_(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",135),_(3,"translate"),x("onChange",function(n){let a;S(e);let c=l();return v(c.setCargoWagon(n.value,(a=c.data().defaults)==null?null:a.cargoWagonId))}),u(4,Q_,5,5,"ng-template",43)(5,X_,7,6,"ng-template",44),r(),s(6,"label",136),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.defaultCargoWagonTooltip"))("ngModel",e.settings().cargoWagonId)("options",e.options().cargoWagons),p(5),T(m(8,6,"settings.defaultCargoWagon"))}}function Z_(t,o){if(t&1&&(s(0,"div",130),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r()()),t&2){let e=o.$implicit;p(),w(m(2,3,e.value)),p(3),V(" ",e.label," ")}}function J_(t,o){if(t&1&&g(0,"lab-tooltip",140),t&2){let e=l().$implicit;d("id",e.value)}}function ec(t,o){if(t&1&&(s(0,"div",109),g(1,"i"),_(2,"iconSmClass"),s(3,"div",96),h(4),r(),u(5,J_,1,1,"ng-template",null,7,I),r()),t&2){let e=o.$implicit,i=b(6);d("pTooltip",i),p(),w(m(2,4,e.value)),p(3),V(" ",e.label," ")}}function tc(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",138),_(3,"translate"),x("onChange",function(n){let a;S(e);let c=l();return v(c.setFluidWagon(n.value,(a=c.data().defaults)==null?null:a.fluidWagonId))}),u(4,Z_,5,5,"ng-template",43)(5,ec,7,6,"ng-template",44),r(),s(6,"label",139),h(7),_(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.defaultFluidWagonTooltip"))("ngModel",e.settings().fluidWagonId)("options",e.options().fluidWagons),p(5),T(m(8,6,"settings.defaultFluidWagon"))}}function ic(t,o){if(t&1){let e=y();s(0,"div",32)(1,"div",28)(2,"p-inputNumber",141,11),_(4,"translate"),_(5,"translate"),x("onBlur",function(){let n;S(e);let a=b(3),c=l();return v(c.setFlowRate(c.rational((n=a.value)!==null&&n!==void 0?n:1500)))}),r(),s(6,"label",142),h(7),_(8,"translate"),r(),s(9,"small",52)(10,"a",143),h(11),_(12,"translate"),r()()()(),s(13,"div",27)(14,"div",28)(15,"p-dropdown",144),_(16,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setInserterTarget(n.value))}),r(),s(17,"label",145),h(18),_(19,"translate"),r()()()}if(t&2){let e=l();p(2),d("suffix"," "+m(4,12,"settings.flowRateUnit"))("min",1)("step",100)("showButtons",!0)("pTooltip",m(5,14,"settings.pipeFlowRateTooltip"))("ngModel",e.settings().flowRate.toNumber()),p(5),T(m(8,16,"settings.pipeFlowRate")),p(4),T(m(12,18,"settings.wiki")),p(4),d("pTooltip",m(16,20,"settings.inserterTargetTooltip"))("ngModel",e.settings().inserterTarget)("options",e.inserterTargetOptions),p(3),T(m(19,22,"settings.inserterTarget"))}}function nc(t,o){if(t&1){let e=y();s(0,"div",27)(1,"div",28)(2,"p-inputNumber",146,12),_(4,"translate"),x("onBlur",function(){let n;S(e);let a=b(3),c=l();return v(c.setMiningBonus(c.rational(((n=a.value)!==null&&n!==void 0?n:100)-100)))}),r(),s(5,"label",147),h(6),_(7,"translate"),r()()()}if(t&2){let e=l();p(2),d("min",100)("step",10)("showButtons",!0)("pTooltip",m(4,6,"settings.miningSpeedTooltip"))("ngModel",e.settings().miningBonus.add(e.rational(100)).toNumber()),p(4),T(m(7,8,"settings.miningSpeed"))}}function oc(t,o){if(t&1){let e=y();s(0,"p-accordionTab",46),_(1,"translate"),s(2,"div",26)(3,"div",32)(4,"div",28)(5,"p-inputNumber",148,13),_(7,"translate"),x("onBlur",function(){let n;S(e);let a=b(6),c=l();return v(c.setMiningBonus(c.rational((n=a.value)!==null&&n!==void 0?n:0)))}),r(),s(8,"label",149),h(9),_(10,"translate"),r()()(),s(11,"div",32)(12,"div",28)(13,"p-dropdown",150),_(14,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setResearchSpeed(n.value))}),r(),s(15,"label",151),h(16),_(17,"translate"),r()()(),s(18,"div",27)(19,"div",28)(20,"p-dropdown",152),_(21,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setInserterCapacity(n.value))}),r(),s(22,"label",153),h(23),_(24,"translate"),r()()()()()}if(t&2){let e=l();d("header",m(1,15,"settings.bonuses")),p(5),d("min",0)("step",10)("showButtons",!0)("pTooltip",m(7,17,"settings.miningProductivityTooltip"))("ngModel",e.settings().miningBonus.toNumber()),p(4),T(m(10,19,"settings.miningProductivity")),p(4),d("pTooltip",m(14,21,"settings.researchSpeedTooltip"))("ngModel",e.settings().researchBonus)("options",e.researchSpeedOptions),p(3),T(m(17,23,"settings.researchSpeed")),p(4),d("pTooltip",m(21,25,"settings.inserterCapacityTooltip"))("ngModel",e.settings().inserterCapacity)("options",e.inserterCapacityOptions),p(3),T(m(24,27,"settings.inserterCapacity"))}}function ac(t,o){if(t&1){let e=y();s(0,"div",32)(1,"span",28)(2,"p-dropdown",154),_(3,"translate"),x("onChange",function(n){S(e);let a=l();return v(a.setPowerUnit(n.value))}),r(),s(4,"label",155),h(5),_(6,"translate"),r()()()}if(t&2){let e=l();p(2),d("pTooltip",m(3,4,"settings.powerUnitTooltip"))("ngModel",e.preferences().powerUnit)("options",e.powerUnitOptions),p(3),T(m(6,6,"settings.powerUnit"))}}var lc=(()=>{class t{contentSvc=O(Se);router=O(di);store=O(Z);translateSvc=O(Ae);routerSvc=O(We);active=!1;hidden=!1;itemsState=this.store.selectSignal(H.selectItemsState);excludedItemIds=this.store.selectSignal(H.selectExcludedItemIds);recipesState=this.store.selectSignal(N.selectRecipesState);excludedRecipeIds=this.store.selectSignal(N.selectExcludedRecipeIds);itemIds=this.store.selectSignal(N.selectAvailableItems);data=this.store.selectSignal(N.selectAdjustedDataset);machinesState=this.store.selectSignal(G.selectMachinesState);settings=this.store.selectSignal(E.selectSettings);columnsState=this.store.selectSignal(E.selectColumnsState);options=this.store.selectSignal(E.selectOptions);modOptions=this.store.selectSignal(E.selectModOptions);presetOptions=this.store.selectSignal(E.selectPresetOptions);researchedTechnologyIds=this.store.selectSignal(E.selectAllResearchedTechnologyIds);recipeIds=this.store.selectSignal(E.selectAvailableRecipes);gameStates=this.store.selectSignal(E.selectGameStates);savedStates=this.store.selectSignal(E.selectSavedStates);preferences=this.store.selectSignal(W.preferencesState);modRecord=this.store.selectSignal(Ri.selectModEntities);machineIds=Y(()=>[...Q(this.store.selectSignal(G.selectMachinesState)().ids,[])]);defaults=this.store.selectSignal(E.selectDefaults);state="";editValue="";editState=null;editStateMenu=[{label:"settings.createSavedState",icon:"fa-solid fa-plus",command:()=>this.openCreateState()},{label:"settings.saveSavedState",icon:"fa-solid fa-floppy-disk",command:()=>this.overwriteState()},{label:"settings.editSavedState",icon:"fa-solid fa-pencil",command:()=>this.openEditState()},{label:"settings.deleteSavedState",icon:"fa-solid fa-trash",command:()=>this.clickDeleteState()}];versionsVisible=!1;displayRateOptions=mt;gameOptions=xi;inserterCapacityOptions=Si;inserterTargetOptions=vi;languageOptions=hi;powerUnitOptions=wi;researchSpeedOptions=Ii;themeOptions=Ei;maximizeTypeOptions=Ti;FuelType=gi;Game=ge;ItemId=A;BrowserUtility=Ie;rational=j;ngOnInit(){this.store.select(E.selectGameStates).pipe(te()).subscribe(e=>{this.state=Q(Object.keys(e).find(i=>e[i]===Ie.search),"")})}clickResetSettings(){this.translateSvc.multi(["settings.reset","settings.resetWarning","yes","cancel"]).pipe(te()).subscribe(([e,i,n,a])=>{this.contentSvc.confirm({icon:"fa-solid fa-exclamation-triangle",header:e,message:i,acceptLabel:n,rejectLabel:a,accept:()=>{localStorage.clear(),this.resetSettings()}})})}setSearch(e){let i=this.router.parseUrl(this.router.url);new URLSearchParams(e).forEach((a,c)=>i.queryParams[c]=a),this.router.navigateByUrl(i)}copySearchToClipboard(e){navigator.clipboard.writeText(e)}setState(e,i){let n=i[e];if(n){let a=this.routerSvc.getParams(n);this.state=e,this.router.navigate([],{queryParams:a})}}clickSaveState(e){!this.editValue||!this.editState||(this.saveState(e,this.editValue,Ie.search),this.editState==="edit"&&this.state&&this.removeState(e,this.state),this.editState=null,this.state=this.editValue)}openCreateState(){this.editValue="",this.editState="create"}overwriteState(){this.store.select(E.selectGame).pipe(te()).subscribe(e=>{this.saveState(e,this.state,Ie.search)})}openEditState(){this.editValue=this.state,this.editState="edit"}clickDeleteState(){this.store.select(E.selectGame).pipe(te()).subscribe(e=>{this.removeState(e,this.state),this.state=""})}setGame(e){this.setMod(Vi[e].modId)}setExcludedRecipes(e,i,n){let a=[];for(let c of n.recipeIds){let C=e.some(B=>B===c);if(C!==i[c].excluded){let B=Q(n.defaults?.excludedRecipeIds,[]).some(M=>M===c);a.push({id:c,value:C,def:B})}}this.setRecipeExcludedBatch(a)}setExcludedItems(e,i,n){let a=[];for(let c of n.itemIds){let C=e.some(B=>B===c);C!==i[c].excluded&&a.push({id:c,value:C})}this.setItemExcludedBatch(a)}changeFuel(e,i,n,a){let c=me.bestMatch(Q(n.fuelOptions?.map(C=>C.value),[]),a);this.setFuel(e,i,c)}changeModules(e,i){let n=this.machinesState(),a=this.data().machineEntities[e];this.setModules(e,me.dehydrateModules(i,Q(n.entities[e].moduleOptions,[]),n.moduleRankIds,a.modules))}changeBeacons(e,i){let n=this.machinesState().beacons;this.setBeacons(e,me.dehydrateBeacons(i,n))}changeDefaultBeacons(e){let i=this.defaults()?.beacons;this.setDefaultBeacons(me.dehydrateBeacons(e,i))}toggleBeaconReceivers(e){this.setBeaconReceivers(e?j.one:null)}resetSettings(){this.store.dispatch(Ci.reset())}saveState(e,i,n){this.store.dispatch(W.saveState({key:e,id:i,value:n}))}removeState(e,i){this.store.dispatch(W.removeState({key:e,id:i}))}setMod(e){this.store.dispatch(E.setMod({modId:e}))}setResearchedTechnologies(e){this.store.dispatch(E.setResearchedTechnologies({researchedTechnologyIds:e}))}setRecipeExcludedBatch(e){this.store.dispatch(N.setExcludedBatch({values:e}))}setItemExcludedBatch(e){this.store.dispatch(H.setExcludedBatch({values:e}))}setPreset(e){this.store.dispatch(E.setPreset({preset:e}))}setFuelRank(e,i){this.store.dispatch(G.setFuelRank({value:e,def:i}))}setModuleRank(e,i){this.store.dispatch(G.setModuleRank({value:e,def:i}))}addMachine(e,i){this.store.dispatch(G.add({id:e,def:i}))}setDefaultBeacons(e){this.store.dispatch(G.setDefaultBeacons({beacons:e}))}setDefaultOverclock(e){this.store.dispatch(G.setDefaultOverclock({overclock:e}))}setMachineRank(e,i){this.store.dispatch(G.setRank({value:e,def:i}))}setMachine(e,i,n){this.store.dispatch(G.setMachine({id:e,value:i,def:n}))}setFuel(e,i,n){this.store.dispatch(G.setFuel({id:e,value:i,def:n}))}setModules(e,i){this.store.dispatch(G.setModules({id:e,value:i}))}setBeacons(e,i){this.store.dispatch(G.setBeacons({id:e,value:i}))}setOverclock(e,i,n){this.store.dispatch(G.setOverclock({id:e,value:i,def:n}))}removeMachine(e,i){this.store.dispatch(G.remove({id:e,def:i}))}setBeaconReceivers(e){this.store.dispatch(E.setBeaconReceivers({beaconReceivers:e}))}setProliferatorSpray(e){this.store.dispatch(E.setProliferatorSpray({proliferatorSprayId:e}))}setBelt(e,i){this.store.dispatch(E.setBelt({id:e,def:i}))}setPipe(e,i){this.store.dispatch(E.setPipe({id:e,def:i}))}setCargoWagon(e,i){this.store.dispatch(E.setCargoWagon({id:e,def:i}))}setFluidWagon(e,i){this.store.dispatch(E.setFluidWagon({id:e,def:i}))}setFlowRate(e){this.store.dispatch(E.setFlowRate({flowRate:e}))}setInserterTarget(e){this.store.dispatch(E.setInserterTarget({inserterTarget:e}))}setMiningBonus(e){this.store.dispatch(E.setMiningBonus({miningBonus:e}))}setResearchSpeed(e){this.store.dispatch(E.setResearchBonus({researchBonus:e}))}setInserterCapacity(e){this.store.dispatch(E.setInserterCapacity({inserterCapacity:e}))}setDisplayRate(e,i){this.store.dispatch(E.setDisplayRate({displayRate:e,previous:i}))}setPowerUnit(e){this.store.dispatch(W.setPowerUnit({powerUnit:e}))}setLanguage(e){this.store.dispatch(W.setLanguage({language:e}))}setTheme(e){this.store.dispatch(W.setTheme({theme:e}))}setBypassLanding(e){this.store.dispatch(W.setBypassLanding({bypassLanding:e}))}setHideDuplicateIcons(e){this.store.dispatch(W.setHideDuplicateIcons({hideDuplicateIcons:e}))}setDisablePaginator(e){this.store.dispatch(W.setDisablePaginator({disablePaginator:e}))}setMaximizeType(e){this.store.dispatch(E.setMaximizeType({maximizeType:e}))}setNetProductionOnly(e){this.store.dispatch(E.setNetProductionOnly({netProductionOnly:e}))}setSurplusMachinesOutput(e){this.store.dispatch(E.setSurplusMachinesOutput({surplusMachinesOutput:e}))}setConvertObjectiveValues(e){this.store.dispatch(W.setConvertObjectiveValues({convertObjectiveValues:e}))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=X({type:t,selectors:[["lab-settings"]],hostVars:4,hostBindings:function(i,n){i&2&&ie("active",n.active)("hidden",n.hidden)},inputs:{active:"active",hidden:"hidden"},decls:147,vars:172,consts:[["techPicker",""],["recipesPicker",""],["itemsPicker",""],["presetDropdown",""],["search",""],["nameCtrl","ngModel"],["stateMenu",""],["tooltip",""],["overclockInput",""],["beaconsOverlay",""],["modulesOverlay",""],["flowRateInput",""],["miningBonusInput",""],["miningProdInput",""],[1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","type","button","icon","fa-solid fa-trash","tooltipPosition","bottom",1,"p-button-rounded","p-button-text",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-none","d-xl-inline-flex",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-sm-none",3,"click"],[1,"flex-grow-1","overflow-hidden"],["styleClass","mb-5"],[3,"multiple"],["pTemplate","header"],[1,"p-inputgroup","mb-2"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"label"],[1,"p-fluid"],[1,"mt-3"],[1,"p-float-label"],["labDropdownTranslate","","inputId","game",3,"onChange","pTooltip","ngModel","options"],["for","game"],[1,"position-relative"],[1,"mt-3","pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-microchip",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds"],[1,"pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-flask-vial",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds","header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-boxes-stacked",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selected"],["labDropdownTranslate","","inputId","preset",3,"onChange","pTooltip","ngModel","options"],["for","preset"],["labDropdownBase","","inputId","default-transport-belt",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],["for","default-transport-belt"],[3,"header"],["labDropdownTranslate","","inputId","display-rate",3,"onChange","pTooltip","ngModel","options"],["for","display-rate"],[1,"text-end"],["labDropdownTranslate","","inputId","language",3,"onChange","pTooltip","ngModel","options"],["for","language"],[1,"position-absolute","end-0","bottom-100","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab","target","_blank"],["labDropdownTranslate","","inputId","theme",3,"onChange","pTooltip","ngModel","options"],["for","theme"],[3,"onChange","binary","label","ngModel"],[3,"onChange","ngModel","binary","label"],["labDropdownTranslate","","inputId","maximize-type",3,"onChange","pTooltip","ngModel","options"],["for","maximize-type"],["tooltipPosition","top",3,"onChange","ngModel","binary","label","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-dollar-sign",1,"p-button-rounded","p-button-outlined","mb-4",3,"click","label"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square",1,"p-button-outlined",3,"click"],["pInputText","","type","text",3,"ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click"],["pInputText","","pAutoFocus","","type","text","tooltipPosition","top","required","",3,"ngModelChange","keydown.enter","autofocus","placeholder","pTooltip","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk","tooltipPosition","top",1,"p-button-outlined",3,"click","pTooltip","disabled"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined",3,"click","pTooltip"],["tooltipPosition","top",3,"onChange","placeholder","pTooltip","ngModel","options"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined",3,"click"],["appendTo","body",3,"popup","model"],["pRipple","",1,"p-menuitem-link"],[1,"p-menuitem-icon",3,"ngClass"],[1,"p-menuitem-text"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"click","label"],[1,"p-static-label"],[1,"position-absolute","end-0","top-0","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=","target","_blank"],["inputId","mod","styleClass","w-100",3,"onChange","filter","autofocusFilter","pTooltip","ngModel","options"],["pButton","","pRipple","","icon","fa-solid fa-info",1,"p-button-outlined",3,"click","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],["inputId","modifier-rank","styleClass","icons","appendTo","body","scrollHeight","40vh","panelStyleClass","tooltip",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItems"],["for","modifier-rank"],[1,"d-flex"],[1,"mx-2",3,"class"],[1,"mx-2"],[1,"d-flex","align-items-center","p-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","fuel",3,"id"],["inputId","fuel-rank","styleClass","icons","appendTo","body","scrollHeight","40vh","panelStyleClass","tooltip",3,"onChange","pTooltip","ngModel","options"],["for","fuel-rank"],[1,"p-inputgroup","flex-wrap","machine-preference","mb-1"],[1,"p-inputgroup-addon",3,"pTooltip"],[1,"fa-solid","fa-industry"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],[3,"onReorder","value","dragdrop"],[1,"pt-2"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"fa-solid","fa-plus"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],["type","machine",3,"id"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click","pTooltip"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],[1,"p-button-icon"],[1,"p-button-icon",3,"class"],["type","beacon",3,"id"],[1,"p-inputgroup","flex-wrap","machine-preference"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab"],["labDropdownBase","icon","labNoDrag","",3,"onChange","pTooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"pTooltip","ngModel","options"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","ms-auto",3,"click","pTooltip"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text",3,"click","pTooltip"],["tooltipPosition","bottom",3,"onChange","ngModel","binary","label","pTooltip"],["for","beacon-receivers",1,"p-static-label"],["inputId","beacon-receivers",1,"w-100",3,"setValue","pTooltip","value"],["labDropdownBase","","inputId","proliferator-self-spray",3,"onChange","autoDisplayFirst","pTooltip","ngModel","options"],["for","proliferator-self-spray"],[1,"d-flex","align-items-center","h-100"],["type","belt",3,"id"],["labDropdownBase","","inputId","default-pipe",3,"onChange","pTooltip","ngModel","options"],["for","default-pipe"],["type","pipe",3,"id"],["labDropdownBase","","inputId","default-cargo-wagon",3,"onChange","pTooltip","ngModel","options"],["for","default-cargo-wagon"],["type","cargo-wagon",3,"id"],["labDropdownBase","","inputId","default-fluid-wagon",3,"onChange","pTooltip","ngModel","options"],["for","default-fluid-wagon"],["type","fluid-wagon",3,"id"],["inputId","pipe-flow-rate","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","suffix","min","step","showButtons","pTooltip","ngModel"],["for","pipe-flow-rate"],["href","https://wiki.factorio.com/Fluid_system#Pipelines","target","_blank"],["labDropdownTranslate","","inputId","inserter-target",3,"onChange","pTooltip","ngModel","options"],["for","inserter-target"],["inputId","mining-speed","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-speed"],["inputId","mining-productivity","prefix","+","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-productivity"],["labDropdownTranslate","","inputId","research-bonus",3,"onChange","pTooltip","ngModel","options"],["for","research-speed"],["labDropdownTranslate","","inputId","inserter-capacity",3,"onChange","pTooltip","ngModel","options"],["for","inserter-capacity"],["labDropdownTranslate","","inputId","power-unit",3,"onChange","pTooltip","ngModel","options"],["for","power-unit"]],template:function(i,n){if(i&1){let a=y();s(0,"div",14)(1,"div",15)(2,"h2"),h(3),_(4,"translate"),r(),s(5,"div")(6,"button",16),_(7,"translate"),x("click",function(){return S(a),v(n.clickResetSettings())}),r(),s(8,"button",17),x("click",function(){return S(a),v(n.contentSvc.toggleSettingsXl())}),r(),s(9,"button",18),x("click",function(){return S(a),v(n.contentSvc.toggleSettings())}),r()()()(),s(10,"div",19)(11,"p-scrollPanel",20)(12,"p-accordion",21)(13,"p-accordionTab"),u(14,Tr,5,4,"ng-template",22)(15,yr,5,1,"div",23)(16,wr,9,15,"div",23)(17,Er,6,9,"div",24)(18,Vr,2,3,"button",25),r(),s(19,"p-accordionTab"),u(20,Mr,6,4,"ng-template",22),s(21,"div",26)(22,"div",27)(23,"span",28)(24,"p-dropdown",29),_(25,"translate"),x("onChange",function(C){return S(a),v(n.setGame(C.value))}),r(),s(26,"label",30),h(27),_(28,"translate"),r(),u(29,Rr,3,2),r()(),u(30,jr,20,32,"div",31),s(31,"div",32)(32,"button",33),_(33,"translate"),_(34,"translate"),_(35,"translate"),x("click",function(){S(a);let C=b(37);return v(C.clickOpen(n.researchedTechnologyIds()))}),r(),s(36,"lab-tech-picker",34,0),x("selectIds",function(C){return S(a),v(n.setResearchedTechnologies(C))}),r()(),s(38,"div",35)(39,"button",36),_(40,"translate"),_(41,"translate"),x("click",function(){S(a);let C=b(43);return v(C.clickOpen("recipe",n.recipeIds(),n.excludedRecipeIds()))}),r(),s(42,"lab-picker",37,1),_(44,"translate"),x("selectIds",function(C){return S(a),v(n.setExcludedRecipes(C,n.recipesState(),n.data()))}),r()(),s(45,"div")(46,"button",38),_(47,"translate"),_(48,"translate"),x("click",function(){S(a);let C=b(50);return v(C.clickOpen("item",n.itemIds(),n.excludedItemIds()))}),r(),s(49,"lab-picker",37,2),_(51,"translate"),x("selectIds",function(C){return S(a),v(n.setExcludedItems(C,n.itemsState(),n.data()))}),r()()()(),s(52,"p-accordionTab",39),u(53,Nr,5,4,"ng-template",22),s(54,"div",26)(55,"div",32)(56,"span",28)(57,"p-dropdown",40,3),_(59,"translate"),x("onChange",function(C){return S(a),v(n.setPreset(C.value))}),r(),s(60,"label",41),h(61),_(62,"translate"),r()()(),u(63,Lr,9,8,"div",32)(64,Kr,9,8,"div",32)(65,R_,14,17)(66,P_,4,8,"div",35)(67,F_,6,7,"div",35)(68,N_,9,9,"div",32),s(69,"div",32)(70,"div",28)(71,"p-dropdown",42),_(72,"translate"),x("onChange",function(C){let B;return S(a),v(n.setBelt(C.value,(B=n.data().defaults)==null?null:B.beltId))}),u(73,U_,1,1,"ng-template",43)(74,W_,7,6,"ng-template",44),r(),s(75,"label",45),h(76),_(77,"translate"),r()()(),u(78,q_,9,8,"div",32)(79,Y_,9,8,"div",32)(80,tc,9,8,"div",32)(81,ic,20,24)(82,nc,8,10,"div",27),r()(),u(83,oc,25,29,"p-accordionTab",46),s(84,"p-accordionTab",46),_(85,"translate"),s(86,"div",26)(87,"div",32)(88,"span",28)(89,"p-dropdown",47),_(90,"translate"),x("onChange",function(C){return S(a),v(n.setDisplayRate(C.value,n.settings().displayRate))}),r(),s(91,"label",48),h(92),_(93,"translate"),r()()(),u(94,ac,7,8,"div",32),s(95,"div",32),g(96,"div",49),s(97,"div",28)(98,"p-dropdown",50),_(99,"translate"),x("onChange",function(C){return S(a),v(n.setLanguage(C.value))}),r(),s(100,"label",51),h(101),_(102,"translate"),r(),s(103,"small",52)(104,"a",53),h(105),_(106,"translate"),r()()()(),s(107,"div",32)(108,"div",28)(109,"p-dropdown",54),_(110,"translate"),x("onChange",function(C){return S(a),v(n.setTheme(C.value))}),r(),s(111,"label",55),h(112),_(113,"translate"),r()()(),s(114,"div",35)(115,"p-checkbox",56),_(116,"translate"),x("onChange",function(C){return S(a),v(n.setBypassLanding(C.checked))}),r()(),s(117,"div",35)(118,"p-checkbox",57),_(119,"translate"),x("onChange",function(C){return S(a),v(n.setHideDuplicateIcons(C.checked))}),r()(),s(120,"div")(121,"p-checkbox",57),_(122,"translate"),x("onChange",function(C){return S(a),v(n.setDisablePaginator(C.checked))}),r()()()(),s(123,"p-accordionTab",46),_(124,"translate"),s(125,"div",26)(126,"div",32)(127,"span",28)(128,"p-dropdown",58),_(129,"translate"),x("onChange",function(C){return S(a),v(n.setMaximizeType(C.value))}),r(),s(130,"label",59),h(131),_(132,"translate"),r()()(),s(133,"div",35)(134,"p-checkbox",60),_(135,"translate"),_(136,"translate"),x("onChange",function(C){return S(a),v(n.setNetProductionOnly(C.checked))}),r()(),s(137,"div",35)(138,"p-checkbox",60),_(139,"translate"),_(140,"translate"),x("onChange",function(C){return S(a),v(n.setSurplusMachinesOutput(C.checked))}),r()(),s(141,"div",35)(142,"p-checkbox",60),_(143,"translate"),_(144,"translate"),x("onChange",function(C){return S(a),v(n.setConvertObjectiveValues(C.checked))}),r()(),s(145,"button",61),_(146,"translate"),x("click",function(){return S(a),v(n.contentSvc.showCosts$.next())}),r()()()()()()}if(i&2){let a;p(3),T(m(4,86,"settings.header")),p(3),d("pTooltip",m(7,88,"settings.reset")),p(5),Ee(K(165,xr)),p(),d("multiple",!0),p(3),f(n.BrowserUtility.isStandalone?15:-1),p(),f(n.editState?16:n.savedStates().length?17:18),p(6),ie("pb-3",n.data().game===n.Game.Factorio),p(2),d("pTooltip",m(25,90,"settings.gameTooltip"))("ngModel",n.data().game)("options",n.gameOptions),p(3),T(m(28,92,"settings.game")),p(2),f(n.data().game!==n.Game.Factorio?29:-1),p(),f(n.data().game===n.Game.Factorio?30:-1),p(2),d("pTooltip",m(33,94,"settings.techsTooltip"))("label",n.researchedTechnologyIds()?k(34,96,"settings.techsResearched",we(166,Xt,n.researchedTechnologyIds().length)):m(35,99,"settings.allTechsResearched")),p(7),d("pTooltip",m(40,101,"settings.recipesTooltip"))("label",k(41,103,"settings.recipesExcluded",we(168,Xt,n.excludedRecipeIds().length))),p(3),d("header",m(44,106,"settings.recipesHeader")),p(4),d("pTooltip",m(47,108,"settings.itemsTooltip"))("label",k(48,110,"settings.itemsExcluded",we(170,Xt,n.excludedItemIds().length))),p(3),d("header",m(51,113,"settings.itemsHeader")),p(3),d("selected",!0),p(5),d("pTooltip",m(59,115,"settings.presetTooltip"))("ngModel",n.settings().preset)("options",n.presetOptions()),p(4),T(m(62,117,"settings.preset")),p(2),f(n.data().moduleIds.length>1?63:-1),p(),f(n.data().fuelIds.length&&n.data().game!==n.Game.Satisfactory?64:-1),p(),f(n.data().game!==n.Game.CaptainOfIndustry?65:-1),p(),f(n.data().game===n.Game.Factorio?66:-1),p(),f((a=n.settings().beaconReceivers)?67:-1,a),p(),f(n.data().game===n.Game.DysonSphereProgram?68:-1),p(3),d("pTooltip",m(72,119,"settings.defaultTransportBeltTooltip"))("ngModel",n.settings().beltId)("options",n.options().belts),p(5),T(m(77,121,"settings.defaultTransportBelt")),p(2),f(n.data().pipeIds.length>1?78:-1),p(),f(n.data().cargoWagonIds.length>1?79:-1),p(),f(n.data().fluidWagonIds.length>1?80:-1),p(),f(n.data().game===n.Game.Factorio?81:-1),p(),f(n.data().game===n.Game.DysonSphereProgram?82:-1),p(),f(n.data().game===n.Game.Factorio?83:-1),p(),d("header",m(85,123,"settings.display")),p(5),d("pTooltip",m(90,125,"settings.displayRateTooltip"))("ngModel",n.settings().displayRate)("options",n.displayRateOptions),p(3),T(m(93,127,"settings.displayRate")),p(2),f(n.columnsState().power.show?94:-1),p(4),d("pTooltip",m(99,129,"settings.languageTooltip"))("ngModel",n.preferences().language)("options",n.languageOptions),p(3),T(m(102,131,"settings.language")),p(4),T(m(106,133,"settings.helpTranslate")),p(4),d("pTooltip",m(110,135,"settings.themeTooltip"))("ngModel",n.preferences().theme)("options",n.themeOptions),p(3),T(m(113,137,"settings.theme")),p(3),d("binary",!0)("label",m(116,139,"settings.bypassLanding"))("ngModel",n.preferences().bypassLanding),p(3),d("ngModel",n.preferences().hideDuplicateIcons)("binary",!0)("label",m(119,141,"settings.hideDuplicateIcons")),p(3),d("ngModel",n.preferences().disablePaginator)("binary",!0)("label",m(122,143,"settings.disablePaginator")),p(2),d("header",m(124,145,"settings.advanced")),p(5),d("pTooltip",m(129,147,"settings.maximizeTypeTooltip"))("ngModel",n.settings().maximizeType)("options",n.maximizeTypeOptions),p(3),T(m(132,149,"settings.maximizeType")),p(3),d("ngModel",n.settings().netProductionOnly)("binary",!0)("label",m(135,151,"settings.netProductionOnly"))("pTooltip",m(136,153,"settings.netProductionOnlyTooltip")),p(4),d("ngModel",n.settings().surplusMachinesOutput)("binary",!0)("label",m(139,155,"settings.surplusMachinesOutput"))("pTooltip",m(140,157,"settings.surplusMachinesOutputTooltip")),p(4),d("ngModel",n.preferences().convertObjectiveValues)("binary",!0)("label",m(143,159,"settings.convertObjectiveValues"))("pTooltip",m(144,161,"settings.convertObjectiveValuesTooltip")),p(3),d("label",m(146,163,"settings.openCosts"))}},dependencies:[ut,oe,Pi,ae,ri,Li,Wi,le,$i,pe,ee,Le,xt,se,vt,St,qi,Ki,wt,J,bt,ht,Be,Tt,ce,yt,ot,at,Kt,Te,Fe,ct,_e,re,Xe],styles:["[_nghost-%COMP%]{display:flex;position:fixed;top:0;left:0;flex-direction:column;transition:transform .4s cubic-bezier(.05,.74,.2,.99);z-index:4;background-color:var(--surface-overlay);width:322px;height:100%}@media (max-width: 1199.98px){[_nghost-%COMP%]{transform:translate(-100%)}.active[_nghost-%COMP%]{transform:translate(0)}}@media (min-width: 1200px){.hidden[_nghost-%COMP%]{transform:translate(-100%)}}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-content{overflow-y:scroll}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-bar-x{visibility:hidden}[_nghost-%COMP%]     .p-accordion{width:323px}"],changeDetection:0})}return t})();var Pd=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=ni({type:t});static \u0275inj=ii({imports:[Dt,Zi,Dt]})}return t})();export{Ws as a,lc as b,ks as c,Pd as d};

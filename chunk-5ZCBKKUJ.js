import{$,$a as G,$d as Mt,Aa as u,Ab as tt,Ad as O,Bb as Wt,Ca as d,Da as K,Db as Qe,Dc as mt,Ea as wt,Eb as Ke,Fa as y,Fb as Xe,Ga as g,Gb as Je,Ha as Z,Hb as ot,Hd as vi,I as it,Ia as L,Ib as Ye,Ic as Bt,Ja as H,Jb as Ze,Jc as ut,Jd as Et,Ka as _,Kb as ti,L as $e,La as s,Lb as J,Ld as qt,Ma as h,Mb as ei,Md as St,Na as D,Nb as ii,Nd as ht,Oa as I,Ob as st,Od as kt,Pa as x,Pb as ni,Pc as gi,Pd as Qt,Qa as l,Qb as et,Qd as Kt,Ra as Le,Rb as se,Rc as Ct,Rd as Xt,Sa as He,Sb as oi,Sd as bi,Ta as We,Tb as at,Td as vt,Ua as v,Ub as ai,Uc as Gt,V as Ft,Va as S,Vd as bt,Wa as w,Wb as li,Wc as gt,Wd as Jt,Xa as M,Xb as _e,Xc as ft,Xd as Ti,Y as je,Yb as pi,Yc as fi,Yd as wi,Zb as si,Zc as ce,Zd as Ii,_b as _i,_c as lt,a as Ve,aa as Pt,ab as ct,ac as ri,ad as xi,b as Fe,ba as rt,bb as q,bc as ci,bd as Si,be as yi,ca as Ae,cb as Dt,cc as re,cd as jt,ce as Tt,da as zt,db as $t,ea as U,eb as r,ed as hi,ee as Yt,fa as b,fb as m,ga as T,gb as k,hb as dt,ib as B,ie as Rt,j as Pe,je as Zt,kc as di,ke as te,lb as Ge,le as Bi,ma as Ne,mc as mi,md as At,me as Ei,na as Ue,nc as ui,nd as xt,oe as ki,pd as z,qa as nt,qb as yt,qe as Mi,ra as pe,rd as R,re as Ri,s as le,sb as Ht,sc as Ci,sd as W,se as Oi,ta as p,tb as qe,td as X,te as Vi,ue as ee,va as Lt,wa as It,we as Fi,xa as ze,xe as Pi,ye as Di,z as De,zd as j}from"./chunk-CECAKMAJ.js";var Ot=(()=>{let n=class n{static transform(i){return i.itemId??i.recipeObjectiveId??i.recipeId??i.id}transform(i){return n.transform(i)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"stepId",type:n,pure:!0});let t=n;return t})();var Nt=(()=>{let n=class n{constructor(){this.contentSvc=$(lt),this.pDropdown=$(bt,{self:!0}),this.labDropdownBase=Ft(),this.setAutoFocusFilter=It(()=>{let i=this.contentSvc.isMobile();this.pDropdown.autofocusFilter=!i}),this.setStyleClass=It(()=>{this.pDropdown.styleClass=this.labDropdownBase()})}ngOnInit(){this.pDropdown.appendTo="body",this.pDropdown.filter=!0,this.pDropdown.scrollHeight="40vh",this.pDropdown.panelStyleClass="tooltip"}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=zt({type:n,selectors:[["","labDropdownBase",""]],inputs:{labDropdownBase:[Pt.SignalBased,"labDropdownBase"]}});let t=n;return t})();var de=(()=>{let n=class n{transform(i){return i}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"asStep",type:n,pure:!0});let t=n;return t})();var me=(()=>{let n=class n{transform(i,o){if(i!=null){let a=ci[o.inserterTarget][o.inserterCapacity]?.find(c=>c.value.gt(i)||c.id===J.StackInserter);return a==null?null:{id:a.id,value:i.div(a.value)}}return null}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"inserterSpeed",type:n,pure:!0});let t=n;return t})();var ue=(()=>{let n=class n{transform(i){return i==null?"":" ".repeat(4-i.length)+i}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"leftPad",type:n,pure:!0});let t=n;return t})();var pt=(()=>{let n=class n{static transform(i,o){if(o==null)return i.toFraction();if(o===-2)return Math.round(i.mul(tt.hundred).toNumber()).toString();let c=i.toPrecision(o).toString();if(o>0){let C=tt.from(1,Math.pow(10,o));i.gt(tt.zero)&&i.lt(C)&&(c=`<${c}`);let f=c.split(".");if(f.length>1){if(f[1].length<o){let E=o-f[1].length;return c+"0".repeat(E)}}else return i.isInteger()?c+" ".repeat(o+1):c+"."+"0".repeat(o)}return c}transform(i,o){return n.transform(i,o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"rate",type:n,pure:!0});let t=n;return t})();var Ce=(()=>{let n=class n{transform(i,o,a){return a===J.Pumpjack?`${pt.transform(i.mul(tt.hundred),o!=null?Math.max(o-2,0):o)}%`:pt.transform(i,o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"machineRate",type:n,pure:!0});let t=n;return t})();var ge=(()=>{let n=class n{transform(i,o){return o!==ot.CaptainOfIndustry||i!==J.MineControlTower}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"machineShowRate",type:n,pure:!0});let t=n;return t})();var fe=(()=>{let n=class n{transform(i,o){return i==null?!1:o!==ot.DysonSphereProgram||i!==J.MiningMachine}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"machineShow",type:n,pure:!0});let t=n;return t})();var xe=(()=>{let n=class n{transform(i,o,a=!1){if(i==null)return[];let c=i.map(C=>({label:o[C].name,value:C}));return a&&c.unshift({label:"None",value:J.Module}),c}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"options",type:n,pure:!0});let t=n;return t})();var Se=(()=>{let n=class n{transform(i,o,a){switch(a){case se.GW:return`${pt.transform(i.div(tt.million),o)} GW`;case se.MW:return`${pt.transform(i.div(tt.thousand),o)} MW`;default:return`${pt.transform(i,o)} kW`}}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"power",type:n,pure:!0});let t=n;return t})();var he=(()=>{let n=class n{constructor(){this.routerSvc=$(Et)}transform(i,o,a){let c=i;if(c.recipeId){let C=a.recipeR[c.recipeId];C.isTechnology&&C.productivity&&i.items&&(c=Fe(Ve({},i),{items:i.items.div(C.productivity)}))}return this.routerSvc.stepHref(c,o,a.hash)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"stepHref",type:n,pure:!0});let t=n;return t})();var an=["stepsTable"];function ln(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(){b(e);let o=l(3);return T(o.resetChecked())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.checkedUndoTooltip"))}function pn(t,n){if(t&1&&(_(0,"th")(1,"div",24),h(2,"i",25),u(3,ln,2,3,"button",15),s()()),t&2){let e=l(2);p(3),g(3,e.itemsModified().checked||e.recipesModified().checked?3:-1)}}function sn(t,n){t&1&&(_(0,"th"),S(1),r(2,"translate"),s()),t&2&&(p(),w(m(2,1,"options.column.tree")))}function _n(t,n){t&1&&h(0,"p-sortIcon",14)}function rn(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(o){return b(e),l(2).resetExcluded(),T(o.stopImmediatePropagation())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.itemsUndoTooltip"))}function cn(t,n){t&1&&h(0,"p-sortIcon",27)}function dn(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(o){return b(e),l(3).resetBelts(),T(o.stopImmediatePropagation())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.beltsUndoTooltip"))}function mn(t,n){if(t&1&&(_(0,"th",16)(1,"div",13)(2,"span"),S(3),r(4,"translate"),s(),u(5,cn,1,0,"p-sortIcon",27)(6,dn,2,3,"button",15),s()()),t&2){let e=l(2);p(3),w(m(4,3,"options.column.belts")),p(2),g(5,e.focus()?-1:5),p(),g(6,e.itemsModified().belts?6:-1)}}function un(t,n){t&1&&h(0,"p-sortIcon",28)}function Cn(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(o){return b(e),l(3).resetWagons(),T(o.stopImmediatePropagation())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.wagonsUndoTooltip"))}function gn(t,n){if(t&1&&(_(0,"th",17)(1,"div",13)(2,"span"),S(3),r(4,"translate"),s(),u(5,un,1,0,"p-sortIcon",28)(6,Cn,2,3,"button",15),s()()),t&2){let e=l(2);p(3),w(m(4,3,e.dispRateInfo().wagonsLabel)),p(2),g(5,e.focus()?-1:5),p(),g(6,e.itemsModified().wagons?6:-1)}}function fn(t,n){t&1&&h(0,"p-sortIcon",19)}function xn(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(o){return b(e),l(2).resetMachines(),T(o.stopImmediatePropagation())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.machinesUndoTooltip"))}function Sn(t,n){if(t&1){let e=I();_(0,"button",26),x("click",function(){b(e);let o=l(3);return T(o.resetBeacons())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.beaconsUndoTooltip"))}function hn(t,n){if(t&1&&(_(0,"th",20)(1,"div",13)(2,"span"),S(3),r(4,"translate"),s(),u(5,Sn,2,3,"button",15),s()()),t&2){let e=l(2);p(3),w(m(4,2,"options.column.beacons")),p(2),g(5,e.recipesModified().beacons?5:-1)}}function vn(t,n){t&1&&h(0,"p-sortIcon",29)}function bn(t,n){if(t&1&&(_(0,"th",21)(1,"div",13)(2,"span"),S(3),r(4,"translate"),s(),u(5,vn,1,0,"p-sortIcon",29),s()()),t&2){let e=l(2);p(3),w(m(4,2,"options.column.power")),p(2),g(5,e.focus()?-1:5)}}function Tn(t,n){t&1&&h(0,"p-sortIcon",30)}function wn(t,n){if(t&1&&(_(0,"th",22)(1,"div",13)(2,"span"),S(3),r(4,"translate"),s(),u(5,Tn,1,0,"p-sortIcon",30),s()()),t&2){let e=l(2);p(3),w(m(4,2,e.dispRateInfo().pollutionLabel)),p(2),g(5,e.focus()?-1:5)}}function In(t,n){if(t&1){let e=I();_(0,"th",10)(1,"button",31),x("click",function(){b(e);let o=l(2);return T(o.export(o.steps(),o.itemsState(),o.recipesState(),o.columnsState(),o.data()))}),r(2,"translate"),s()()}t&2&&(p(),d("pTooltip",m(2,1,"steps.downloadTooltip")))}function yn(t,n){if(t&1){let e=I();_(0,"tr")(1,"th",10)(2,"button",11),x("click",function(){b(e);let o=l();return T(o.contentSvc.showColumns$.next())}),r(3,"translate"),s()(),u(4,pn,4,1,"th")(5,sn,3,3,"th"),_(6,"th",12)(7,"div",13)(8,"span"),S(9),r(10,"translate"),s(),u(11,_n,1,0,"p-sortIcon",14)(12,rn,2,3,"button",15),s()(),u(13,mn,7,5,"th",16)(14,gn,7,5,"th",17),_(15,"th",18)(16,"div",13)(17,"span"),S(18),r(19,"translate"),s(),u(20,fn,1,0,"p-sortIcon",19)(21,xn,2,3,"button",15),s()(),u(22,hn,6,4,"th",20)(23,bn,6,4,"th",21)(24,wn,6,4,"th",22)(25,In,3,3,"th",23),s()}if(t&2){let e=l();p(2),d("pTooltip",m(3,15,"steps.openColumnSettings")),p(2),g(4,!e.focus()&&e.columnsState().checkbox.show?4:-1),p(),g(5,!e.focus()&&e.columnsState().tree.show?5:-1),p(4),w(m(10,17,e.dispRateInfo().itemsLabel)),p(2),g(11,e.focus()?-1:11),p(),g(12,e.itemsModified().excluded?12:-1),p(),g(13,e.columnsState().belts.show?13:-1),p(),g(14,e.columnsState().wagons.show?14:-1),p(4),w(m(19,19,"options.column.machines")),p(2),g(20,e.focus()?-1:20),p(),g(21,e.recipesModified().machines?21:-1),p(),g(22,e.columnsState().beacons.show?22:-1),p(),g(23,e.columnsState().power.show?23:-1),p(),g(24,e.columnsState().pollution.show?24:-1),p(),g(25,e.columnsState().link.show?25:-1)}}var Bn=(t,n)=>n.id;function En(t,n){if(t&1&&h(0,"div",33),t&2){let e=n.$implicit,i=l();d("id","step_"+i.id+"_"+e.label)}}function kn(t,n){if(t&1){let e=I();_(0,"td")(1,"div",38)(2,"p-checkbox",39),x("onChange",function(o){b(e);let a=l(),c=l(2);return T(c.changeStepChecked(a,o.checked))}),s()()()}if(t&2){let e=l();p(2),d("binary",!0)("ngModel",e.checked)}}function Mn(t,n){if(t&1&&h(0,"div",46),t&2){let e=n.$implicit,i=n.$index,o=n.$count;K("trail",e)("last",i===o-1)}}function Rn(t,n){if(t&1&&(L(0,Mn,1,4,"div",47,Z),h(2,"div",45)),t&2){let e=l(2),i=l(2);H(i.stepTree()[e.id])}}function On(t,n){if(t&1&&h(0,"lab-tooltip",51),t&2){let e=l(3);d("id",e.itemId)}}function Vn(t,n){if(t&1){let e=I();_(0,"button",48),x("click",function(){b(e);let o=l(2),a=l(2);return T(a.setItemExcluded(o.itemId,!a.itemsState()[o.itemId].excluded))}),r(1,"iconSmClass"),h(2,"i",49),u(3,On,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(2),o=l(2);K("hover-active",o.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function Fn(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(3);p(),M("#",e.recipeObjectiveId,"")}}function Pn(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l(4);d("id",e.recipeId)}}function Dn(t,n){if(t&1&&u(0,Pn,1,1,"lab-tooltip",53),t&2){let e=l(3);g(0,e.recipeId?0:-1)}}function $n(t,n){if(t&1&&(_(0,"i",52),r(1,"iconSmClass"),u(2,Fn,2,1,"span")(3,Dn,1,1,"ng-template",null,50,B),s()),t&2){let e=v(4),i=l(2);y(k(1,4,i.recipeId,"recipe")),d("pTooltip",e),p(2),g(2,i.recipeObjectiveId!=null?2:-1)}}function jn(t,n){if(t&1&&(_(0,"td",40)(1,"div",41),u(2,Rn,3,0,"div",42),_(3,"div",43),u(4,Vn,5,6,"button",44)(5,$n,5,7),s()()()),t&2){let e=l(),i=l(2),o=v(1);p(2),g(2,!o.sortField&&(i.stepTree()[e.id]!=null&&i.stepTree()[e.id].length)?2:-1),p(2),g(4,e.itemId&&e.recipeObjectiveId==null?4:5)}}function An(t,n){if(t&1&&(_(0,"span",56),S(1),r(2,"rate"),s()),t&2){let e=l(2),i=l(2);p(),M("(+",k(2,1,e.surplus,i.columnsState().items.precision),") ")}}function Nn(t,n){if(t&1&&h(0,"lab-tooltip",51),t&2){let e=l(3);d("id",e.itemId)}}function Un(t,n){if(t&1){let e=I();_(0,"button",48),x("click",function(){b(e);let o=l(2),a=l(2);return T(a.setItemExcluded(o.itemId,!a.itemsState()[o.itemId].excluded))}),r(1,"iconSmClass"),h(2,"i",49),u(3,Nn,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(2),o=l(2);K("hover-active",o.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function zn(t,n){if(t&1&&(_(0,"td",54),u(1,An,3,4,"span",55),_(2,"span",56),S(3),r(4,"rate"),s()(),_(5,"td",57)(6,"div",13)(7,"span",58),S(8),s(),u(9,Un,5,6,"button",44),s()()),t&2){let e=l(),i=l(2);p(),g(1,e.surplus&&e.surplus.nonzero()?1:-1),p(2),w(k(4,4,e.items.sub(e.surplus||i.Rational.zero),i.columnsState().items.precision)),p(5),w(i.data().itemEntities[e.itemId].name),p(),g(9,!i.preferences().hideDuplicateIcons||!i.columnsState().tree.show?9:-1)}}function Ln(t,n){t&1&&h(0,"td",20)}function Hn(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Wn(t,n){if(t&1&&u(0,Hn,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function Gn(t,n){if(t&1&&h(0,"lab-tooltip",66),t&2){let e=l().$implicit;d("id",e.value)}}function qn(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,Gn,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Qn(t,n){if(t&1&&h(0,"lab-tooltip",66),t&2){let e=l();d("id",e)}}function Kn(t,n){if(t&1){let e=I();_(0,"p-dropdown",60),x("onChange",function(o){let c=b(e),C=l(4),f=l(2);return T(f.setBelt(C.itemId,o.value,c))}),u(1,Wn,1,1,"ng-template",61)(2,qn,7,6,"ng-template",62)(3,Qn,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(6);d("pTooltip",e)("ngModel",n)("options",i.options().belts)}}function Xn(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=n.$implicit;p(),y(m(2,2,e.value))}}function Jn(t,n){if(t&1&&h(0,"lab-tooltip",67),t&2){let e=l().$implicit;d("id",e.value)}}function Yn(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,Jn,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Zn(t,n){if(t&1&&h(0,"lab-tooltip",67),t&2){let e=l(3);d("id",e)}}function to(t,n){if(t&1){let e=I();_(0,"p-dropdown",60),x("onChange",function(o){let c=b(e),C=l(5),f=l(2);return T(f.setBelt(C.itemId,o.value,c))}),u(1,Xn,3,4,"ng-template",61)(2,Yn,7,6,"ng-template",62)(3,Zn,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(2),o=l(5);d("pTooltip",e)("ngModel",i)("options",o.options().pipes)}}function eo(t,n){if(t&1&&h(0,"lab-tooltip",67),t&2){let e=l(3);d("id",e)}}function io(t,n){if(t&1&&(_(0,"i",52),r(1,"iconClass"),u(2,eo,1,1,"ng-template",null,50,B),s()),t&2){let e=v(3),i=l(2);y(m(1,3,i)),d("pTooltip",e)}}function no(t,n){if(t&1&&u(0,to,5,3,"p-dropdown",59)(1,io,4,5),t&2){let e=l(),i=l(5),o;g(0,(o=i.data().pipeIds.indexOf(e)!==-1&&i.settings().pipeId)?0:1,o)}}function oo(t,n){if(t&1&&(_(0,"td",54)(1,"span",56),S(2),r(3,"rate"),s()(),_(4,"td",57)(5,"div",13),u(6,Kn,5,3,"p-dropdown",59)(7,no,2,1),s()()),t&2){let e=l(3),i=l(2),o;p(2),w(k(3,2,e.belts,i.columnsState().belts.precision)),p(4),g(6,(o=i.data().beltIds.indexOf(n)!==-1&&i.settings().beltId)?6:7,o)}}function ao(t,n){if(t&1&&u(0,oo,8,5),t&2){let e=l(2),i=l(2),o;g(0,(o=i.itemsState()[e.itemId].beltId)?0:-1,o)}}function lo(t,n){t&1&&h(0,"td",20)}function po(t,n){if(t&1&&u(0,ao,1,1)(1,lo,1,0),t&2){let e=l();g(0,e.itemId&&e.belts?0:1)}}function so(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function _o(t,n){if(t&1&&u(0,so,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function ro(t,n){if(t&1&&h(0,"lab-tooltip",68),t&2){let e=l().$implicit;d("id",e.value)}}function co(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,ro,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function mo(t,n){if(t&1&&h(0,"lab-tooltip",68),t&2){let e=l(2);d("id",e)}}function uo(t,n){if(t&1){let e=I();_(0,"p-dropdown",60),x("onChange",function(o){let c=b(e),C=l(4),f=l(2);return T(f.setWagon(C.itemId,o.value,c))}),u(1,_o,1,1,"ng-template",61)(2,co,7,6,"ng-template",62)(3,mo,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(),o=l(5);d("pTooltip",e)("ngModel",i)("options",o.options().cargoWagons)}}function Co(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function go(t,n){if(t&1&&u(0,Co,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function fo(t,n){if(t&1&&h(0,"lab-tooltip",69),t&2){let e=l().$implicit;d("id",e.value)}}function xo(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s()(),u(5,fo,1,1,"ng-template",null,50,B)),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function So(t,n){if(t&1&&h(0,"lab-tooltip",69),t&2){let e=l(3);d("id",e)}}function ho(t,n){if(t&1){let e=I();_(0,"p-dropdown",60),x("onChange",function(o){let c=b(e),C=l(5),f=l(2);return T(f.setWagon(C.itemId,o.value,c))}),u(1,go,1,1,"ng-template",61)(2,xo,7,6,"ng-template",62)(3,So,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(2),o=l(5);d("pTooltip",e)("ngModel",i)("options",o.options().fluidWagons)}}function vo(t,n){if(t&1&&u(0,ho,5,3,"p-dropdown",59),t&2){let e=l(),i=l(5),o;g(0,(o=i.data().fluidWagonIds.indexOf(e)!==-1&&i.settings().fluidWagonId)?0:-1,o)}}function bo(t,n){if(t&1&&(_(0,"td",54)(1,"span",56),S(2),r(3,"rate"),s()(),_(4,"td",57)(5,"div",13),u(6,uo,5,3,"p-dropdown",59)(7,vo,1,1),s()()),t&2){let e=l(3),i=l(2),o;p(2),w(k(3,2,e.wagons,i.columnsState().wagons.precision)),p(4),g(6,(o=i.data().cargoWagonIds.indexOf(n)!==-1&&i.settings().cargoWagonId)?6:7,o)}}function To(t,n){if(t&1&&u(0,bo,8,5),t&2){let e=l(2),i=l(2),o;g(0,(o=i.itemsState()[e.itemId].wagonId)?0:-1,o)}}function wo(t,n){t&1&&h(0,"td",20)}function Io(t,n){if(t&1&&u(0,To,1,1)(1,wo,1,0),t&2){let e=l();g(0,e.itemId&&e.wagons?0:1)}}function yo(t,n){if(t&1&&(_(0,"span",56),S(1),r(2,"machineRate"),s()),t&2){let e=l(),i=l(),o=l(2);p(),w(dt(2,1,i.machines,o.columnsState().machines.precision,e))}}function Bo(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(4);p(),M("#",e.recipeObjectiveId,"")}}function Eo(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l(4);d("id",e.recipeId)}}function ko(t,n){if(t&1){let e=I();_(0,"button",75),x("click",function(){b(e);let o=l(3),a=l(2);return T(a.addObjective({targetId:o.recipeId,unit:a.ObjectiveUnit.Machines}))}),_(1,"span",76),r(2,"iconSmClass"),u(3,Bo,2,1,"span"),s(),h(4,"i",77),u(5,Eo,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(6),i=l(3);d("pTooltip",e),p(),y(k(2,4,i.recipeId,"recipe")),p(2),g(3,i.recipeObjectiveId?3:-1)}}function Mo(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Ro(t,n){if(t&1&&u(0,Mo,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function Oo(t,n){if(t&1&&h(0,"lab-tooltip",79),t&2){let e=l().$implicit;d("id",e.value)}}function Vo(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,Oo,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Fo(t,n){if(t&1&&h(0,"lab-tooltip",79),t&2){let e=l(3);d("id",e)}}function Po(t,n){if(t&1){let e=I();_(0,"p-dropdown",78),x("onChange",function(o){b(e);let a=l(3),c=l(2);return T(c.changeRecipeField(a,o.value,c.machinesState(),c.data(),c.RecipeField.Machine))}),r(1,"options"),u(2,Ro,1,1,"ng-template",61)(3,Vo,7,6,"ng-template",62)(4,Fo,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(5),i=l(2),o=l(),a=l(2);d("pTooltip",e)("options",k(1,3,o.recipe.producers,a.data().itemEntities))("ngModel",i)}}function Do(t,n){if(t&1){let e=I();_(0,"p-inputNumber",80,81),x("onBlur",function(){b(e);let o=v(1),a=l(3),c=l(2),C;return T(c.changeRecipeField(a,(C=o.value)!==null&&C!==void 0?C:100,c.machinesState(),c.data(),c.RecipeField.Overclock))}),r(2,"translate"),s()}if(t&2){let e=l(3);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",m(2,7,"steps.overclockTooltip"))("ngModel",e.recipeSettings.overclock)}}function $o(t,n){if(t&1){let e=I();_(0,"p-inputNumber",82,83),x("onBlur",function(){b(e);let o=v(1),a=l(3),c=l(2),C;return T(c.changeRecipeField(a,(C=o.value)!==null&&C!==void 0?C:0,c.machinesState(),c.data(),c.RecipeField.Overclock))}),r(2,"translate"),s()}if(t&2){let e=l(3);d("min",0)("step",1)("maxFractionDigits",0)("showButtons",!0)("size",3)("pTooltip",m(2,7,"steps.modifierCountTooltip"))("ngModel",e.recipeSettings.overclock)}}function jo(t,n){if(t&1&&h(0,"lab-tooltip",85),t&2){let e=l(2);d("id",e)}}function Ao(t,n){if(t&1&&(_(0,"div",13)(1,"i",84),r(2,"iconSmClass"),u(3,jo,1,1,"ng-template",null,50,B),s()()),t&2){let e=v(4),i=l();p(),y(m(2,3,i)),d("pTooltip",e)}}function No(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=n.$implicit;p(),y(m(2,2,e.value))}}function Uo(t,n){if(t&1&&h(0,"lab-tooltip",85),t&2){let e=l().$implicit;d("id",e.value)}}function zo(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,Uo,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Lo(t,n){if(t&1&&h(0,"lab-tooltip",85),t&2){let e=l(2);d("id",e)}}var Ee=()=>[];function Ho(t,n){if(t&1){let e=I();_(0,"p-dropdown",60),x("onChange",function(o){b(e);let a=l(4),c=l(2);return T(c.changeRecipeField(a,o.value,c.machinesState(),c.data(),c.RecipeField.Fuel))}),u(1,No,3,4,"ng-template",61)(2,zo,7,6,"ng-template",62)(3,Lo,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l(),o=l(3),a;d("pTooltip",e)("ngModel",i)("options",(a=o.recipeSettings.fuelOptions)!==null&&a!==void 0?a:G(3,Ee))}}function Wo(t,n){if(t&1&&u(0,Ao,5,5,"div",70)(1,Ho,5,4),t&2){let e=l(3);g(0,e.recipe.isBurn?0:1)}}function Go(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function qo(t,n){if(t&1&&u(0,Go,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function Qo(t,n){if(t&1&&h(0,"lab-tooltip",87),t&2){let e=l().$implicit;d("id",e.value)}}function Ko(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,Qo,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Xo(t,n){if(t&1&&h(0,"lab-tooltip",87),t&2){let e=l().$implicit;d("id",e)}}function Jo(t,n){if(t&1){let e=I();_(0,"p-dropdown",86),x("onChange",function(o){let c=b(e).$index,C=l(4),f=l(2);return T(f.changeRecipeField(C,o.value,f.machinesState(),f.data(),f.RecipeField.MachineModules,c))}),u(1,qo,1,1,"ng-template",61)(2,Ko,7,6,"ng-template",62)(3,Xo,1,1,"ng-template",null,50,B),s()}if(t&2){let e=n.$implicit,i=n.$index,o=n.$count,a=v(4),c=l(4),C;K("last",i===o-1),d("pTooltip",e!=="module"?a:void 0)("options",(C=c.recipeSettings.machineModuleOptions)!==null&&C!==void 0?C:G(5,Ee))("ngModel",e)}}function Yo(t,n){t&1&&L(0,Jo,5,6,"p-dropdown",88,Z),t&2&&H(n)}function Zo(t,n){if(t&1&&(_(0,"div",13)(1,"span",58),S(2),s(),u(3,ko,7,7,"button",71)(4,Po,6,6,"p-dropdown",72),r(5,"machineShow"),u(6,Do,3,9,"p-inputNumber",73)(7,$o,3,9,"p-inputNumber",74)(8,Wo,2,1)(9,Yo,2,0),s()),t&2){let e=l(),i=l(),o=l(2),a;p(2),w(i.recipe.name),p(),g(3,!o.preferences().hideDuplicateIcons||i.itemId!=null&&i.itemId!==i.recipeId?3:-1),p(),g(4,k(5,7,e,o.data().game)?4:-1),p(2),g(6,o.data().game===o.Game.Satisfactory?6:-1),p(),g(7,o.data().game===o.Game.FinalFactory?7:-1),p(),g(8,(a=i.recipeSettings==null?null:i.recipeSettings.fuelId)?8:-1,a),p(),g(9,(a=i.recipeSettings==null?null:i.recipeSettings.machineModuleIds)?9:-1,a)}}function ta(t,n){if(t&1&&(_(0,"td",54),u(1,yo,3,5,"span",55),r(2,"machineShowRate"),s(),_(3,"td",57),u(4,Zo,10,10,"div",70),s()),t&2){let e=l(),i=l(2);p(),g(1,e.machines&&e.machines.nonzero()&&k(2,2,n,i.data().game)?1:-1),p(3),g(4,e.recipeId&&e.recipe&&e.recipeSettings?4:-1)}}function ea(t,n){t&1&&h(0,"td",20)}function ia(t,n){if(t&1){let e=I();_(0,"button",92),x("click",function(){b(e);let o=l(4),a=l(2),c;return T(a.addBeacon((c=o.recipeObjectiveId)!==null&&c!==void 0?c:o.recipeId,o.recipeObjectiveId!=null))}),s()}}function na(t,n){if(t&1){let e=I();_(0,"button",93),x("click",function(){b(e);let o=l().$index,a=l(3),c=l(2),C;return T(c.removeBeacon((C=a.recipeObjectiveId)!==null&&C!==void 0?C:a.recipeId,o,a.recipeObjectiveId!=null))}),s()}}function oa(t,n){if(t&1){let e=I();_(0,"lab-input-number",94),x("setValue",function(o){b(e);let a=l().$index,c=l(3),C=l(2);return T(C.changeRecipeField(c,o,C.machinesState(),C.data(),C.RecipeField.BeaconCount,a))}),r(1,"translate"),s()}if(t&2){let e=l().$implicit;d("pTooltip",m(1,3,"steps.beaconEachTooltip"))("value",e.count.toString())("textButtons",!0)}}function aa(t,n){if(t&1&&(_(0,"div",34),u(1,ia,1,0,"button",90)(2,na,1,0)(3,oa,2,5,"lab-input-number",91),s()),t&2){let e=n.$implicit,i=n.$index;p(),g(1,i===0?1:2),p(2),g(3,e.count?3:-1)}}function la(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function pa(t,n){if(t&1&&u(0,la,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function sa(t,n){if(t&1&&h(0,"lab-tooltip",96),t&2){let e=l().$implicit;d("id",e.value)}}function _a(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,sa,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ra(t,n){if(t&1&&h(0,"lab-tooltip",96),t&2){let e=l(2).$implicit;d("id",e.id)}}function ca(t,n){if(t&1){let e=I();_(0,"p-dropdown",78),x("onChange",function(o){b(e);let a=l().$index,c=l(3),C=l(2);return T(C.changeRecipeField(c,o.value,C.machinesState(),C.data(),C.RecipeField.Beacon,a))}),u(1,pa,1,1,"ng-template",61)(2,_a,7,6,"ng-template",62)(3,ra,1,1,"ng-template",null,50,B),s()}if(t&2){let e=v(4),i=l().$implicit,o=l(5);d("pTooltip",e)("options",o.options().beacons)("ngModel",i.id)}}function da(t,n){if(t&1&&(_(0,"div",34)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function ma(t,n){if(t&1&&u(0,da,3,4,"div",63),t&2){let e=n.$implicit;g(0,e?0:-1)}}function ua(t,n){if(t&1&&h(0,"lab-tooltip",87),t&2){let e=l().$implicit;d("id",e.value)}}function Ca(t,n){if(t&1&&(_(0,"div",64)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",65),S(4),s(),u(5,ua,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ga(t,n){if(t&1&&h(0,"lab-tooltip",87),t&2){let e=l().$implicit;d("id",e)}}function fa(t,n){if(t&1){let e=I();_(0,"p-dropdown",86),x("onChange",function(o){let c=b(e).$index,C=l().$index,f=l(3),E=l(2);return T(E.changeRecipeField(f,o.value,E.machinesState(),E.data(),E.RecipeField.BeaconModules,C,c))}),u(1,ma,1,1,"ng-template",61)(2,Ca,7,6,"ng-template",62)(3,ga,1,1,"ng-template",null,50,B),s()}if(t&2){let e=n.$implicit,i=n.$index,o=n.$count,a=v(4),c=l().$implicit,C;K("last",i===o-1),d("pTooltip",e!=="module"?a:void 0)("options",(C=c.moduleOptions)!==null&&C!==void 0?C:G(5,Ee))("ngModel",e)}}function xa(t,n){if(t&1){let e=I();_(0,"lab-input-number",97),x("setValue",function(o){b(e);let a=l().$index,c=l(3),C=l(2);return T(C.changeRecipeField(c,o,C.machinesState(),C.data(),C.RecipeField.BeaconTotal,a))}),r(1,"translate"),s()}if(t&2){let e=l().$implicit;d("pTooltip",m(1,3,"steps.beaconTotalTooltip"))("value",e.total.toString())("textButtons",!0)}}function Sa(t,n){if(t&1&&(_(0,"div",34),u(1,ca,5,3,"p-dropdown",72),L(2,fa,5,6,"p-dropdown",88,Z),u(4,xa,2,5,"lab-input-number",95),s()),t&2){let e=n.$implicit;p(),g(1,e.id?1:-1),p(),H(e.moduleIds),p(2),g(4,e.total?4:-1)}}function ha(t,n){if(t&1&&(_(0,"td",89),L(1,aa,4,2,"div",63,Z),s(),_(3,"td",57),L(4,Sa,5,2,"div",63,Z),s()),t&2){let e=l(2);p(),H(e.recipeSettings.beacons),p(3),H(e.recipeSettings.beacons)}}function va(t,n){t&1&&h(0,"tr",20)}function ba(t,n){if(t&1&&u(0,ha,6,0)(1,va,1,0),t&2){let e=l();g(0,e.recipeId&&e.recipeSettings?0:1)}}function Ta(t,n){if(t&1&&(_(0,"span",56),S(1),r(2,"power"),s()),t&2){let e=l(2),i=l(2);p(),w(dt(2,1,e.power,i.columnsState().power.precision,i.effectivePowerUnit()))}}function wa(t,n){if(t&1&&(_(0,"td",98),u(1,Ta,3,5,"span",55),s()),t&2){let e=l();p(),g(1,e.power&&e.power.nonzero()?1:-1)}}function Ia(t,n){if(t&1&&(_(0,"span",56),S(1),r(2,"rate"),s()),t&2){let e=l(2),i=l(2);p(),w(k(2,1,e.pollution,i.columnsState().pollution.precision))}}function ya(t,n){if(t&1&&(_(0,"td",98),u(1,Ia,3,4,"span",55),s()),t&2){let e=l();p(),g(1,e.pollution&&e.pollution.nonzero()?1:-1)}}function Ba(t,n){if(t&1){let e=I();_(0,"button",102),x("click",function(){b(e);let o=l(2),a=l(2);return T(a.resetStep(o))}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"steps.stepUndoTooltip"))}function Ea(t,n){if(t&1&&(_(0,"td",10)(1,"div",34)(2,"a",99),r(3,"stepHref"),h(4,"button",100),r(5,"translate"),s(),u(6,Ba,2,3,"button",101),s()()),t&2){let e=l(),i=l(2);p(2),d("href",dt(3,3,e,i.routerSvc.zipConfig(),i.data()),Ue),p(2),d("pTooltip",m(5,7,"steps.openNewTabTooltip")),p(2),g(6,e.recipeId&&i.stepsModified().recipes[e.recipeId]||e.itemId&&i.stepsModified().items[e.itemId]||e.recipeObjectiveId&&i.stepsModified().objectives[e.recipeObjectiveId]?6:-1)}}function ka(t,n){if(t&1&&(_(0,"tr")(1,"td",32),h(2,"div",33),L(3,En,1,1,"div",103,Bn),_(5,"div",34),h(6,"button",35),r(7,"translate"),s()(),u(8,kn,3,2,"td")(9,jn,6,2,"td",36)(10,zn,10,7)(11,Ln,1,0)(12,po,2,1)(13,Io,2,1)(14,ta,5,5)(15,ea,1,0)(16,ba,2,1)(17,wa,2,1,"td",37)(18,ya,2,1,"td",37)(19,Ea,7,9,"td",23),s()),t&2){let e=l().expanded,i=l(),o;p(2),d("id","step_"+n.id),p(),H(i.stepDetails()[n.id].tabs),p(3),K("fa-rotate-90",e),d("pTooltip",m(7,15,e?"steps.hideDetails":"steps.showDetails"))("pRowToggler",n),p(2),g(8,!i.focus()&&i.columnsState().checkbox.show?8:-1),p(),g(9,!i.focus()&&i.columnsState().tree.show?9:-1),p(),g(10,n.itemId&&n.items?10:11),p(2),g(12,i.columnsState().belts.show?12:-1),p(),g(13,i.columnsState().wagons.show?13:-1),p(),g(14,(o=n.recipeSettings==null?null:n.recipeSettings.machineId)?14:15,o),p(2),g(16,i.columnsState().beacons.show?16:-1),p(),g(17,i.columnsState().power.show?17:-1),p(),g(18,i.columnsState().pollution.show?18:-1),p(),g(19,i.columnsState().link.show?19:-1)}}function Ma(t,n){if(t&1&&(u(0,ka,20,17,"tr"),r(1,"asStep")),t&2){let e=n.$implicit,i;g(0,(i=m(1,1,e))?0:-1,i)}}function Ra(t,n){if(t&1&&(_(0,"a",110),h(1,"span",111),_(2,"span",112),S(3),r(4,"translate"),s()()),t&2){let e=n.$implicit,i=l(3);p(),y(i.stepDetailIcon[e.label]),p(2),w(m(4,3,"options.stepDetailTab."+e.label))}}var _t=(t,n)=>n.key;function Oa(t,n){t&1&&D(0)}function Va(t,n){if(t&1&&(_(0,"tr",104),u(1,Oa,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()()),t&2){l(4);let e=v(9);p(),d("ngTemplateOutlet",e),p(2),M(" ",m(4,2,"steps.sources")," ")}}function Fa(t,n){t&1&&D(0)}var Pa=(t,n,e,i,o,a,c,C,f,E,V,P,F)=>({items:t,itemId:n,belts:e,beltId:i,wagons:o,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:V,percentOnDest:!0,destId:P,inputs:F});function Da(t,n){if(t&1&&u(0,Fa,1,0,"ng-container",116),t&2){let e=l().$implicit,i=l(2),o=l(2),a=v(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",$t(2,Pa,[i.items==null?null:i.items.mul(e.value),i.itemId,i.belts==null?null:i.belts.mul(e.value),o.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(e.value),o.itemsState()[i.itemId].wagonId,e.machines,e.recipeId&&o.recipesState()[e.recipeId].machineId,e.recipeId,e.recipeObjectiveId,e.value,i.itemId,e.inputs]))}}function $a(t,n){if(t&1&&u(0,Da,1,16,"ng-container"),t&2){let e=l(2);g(0,e.itemId?0:-1)}}function ja(t,n){t&1&&D(0)}function Aa(t,n){if(t&1&&(_(0,"tr",104),u(1,ja,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()()),t&2){l(4);let e=v(9);p(),d("ngTemplateOutlet",e),p(2),M(" ",m(4,2,"steps.destinations")," ")}}function Na(t,n){t&1&&D(0)}var Ua=(t,n,e,i,o,a,c,C,f,E,V,P,F,N)=>({items:t,itemId:n,belts:e,beltId:i,wagons:o,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:V,destId:P,destRecipeObjectiveId:F,destIsRecipe:!0,outputs:N});function za(t,n){if(t&1&&u(0,Na,1,0,"ng-container",116),t&2){let e=l().$implicit,i=l(2),o=l(2),a=v(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",$t(2,Ua,[i.items==null?null:i.items.mul(e.value),i.itemId,i.belts==null?null:i.belts.mul(e.value),o.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(e.value),o.itemsState()[i.itemId].wagonId,o.stepDetails()[i.id].outputs.length===1?i.machines==null?null:i.machines.mul(e.value):null,o.stepDetails()[i.id].outputs.length===1?i.recipeSettings==null?null:i.recipeSettings.machineId:null,i.recipeId,i.recipeObjectiveId,e.value,o.stepById()[e.key]==null?null:o.stepById()[e.key].recipeId,o.stepById()[e.key]==null?null:o.stepById()[e.key].recipeObjectiveId,e.key===""]))}}function La(t,n){if(t&1&&u(0,za,1,17,"ng-container"),t&2){let e=l(2);g(0,e.itemId?0:-1)}}function Ha(t,n){if(t&1&&(u(0,Va,5,4,"tr",113),L(1,$a,1,1,null,null,Z),u(3,Aa,5,4,"tr",113),L(4,La,1,1,null,null,_t),r(6,"keyvalue")),t&2){let e=l(),i=l(2);g(0,i.stepDetails()[e.id].outputs.length?0:-1),p(),H(i.stepDetails()[e.id].outputs),p(2),g(3,e.parents?3:-1),p(),H(k(6,2,e.parents,i.trackSvc.sortByValue))}}function Wa(t,n){t&1&&D(0)}function Ga(t,n){t&1&&D(0)}var qa=(t,n)=>({items:t,itemId:n});function Qa(t,n){if(t&1&&u(0,Ga,1,0,"ng-container",116),t&2){let e=l(),i=l().$implicit,o=l(4);l(2);let a=v(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",q(2,qa,e.step.items.mul(e.percent).div(o.recipe.productivity),i.key))}}function Ka(t,n){t&1&&u(0,Qa,1,5,"ng-container"),t&2&&g(0,n.step&&n.percent&&n.step.items?0:-1)}var ie=(t,n)=>({step:t,percent:n});function Xa(t,n){if(t&1&&u(0,Ka,1,1),t&2){let e=n.$implicit,i=l(4),o=l(2),a;g(0,(a=q(1,ie,o.stepByItemEntities()[e.key],i.outputs==null?null:i.outputs[e.key]))?0:-1,a)}}function Ja(t,n){if(t&1&&(_(0,"tr",104),u(1,Wa,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()(),L(5,Xa,1,4,null,null,_t),r(7,"keyvalue")),t&2){let e=l(3),i=l(2),o=v(9);p(),d("ngTemplateOutlet",o),p(2),M(" ",m(4,2,"steps.depletion")," "),p(2),H(k(7,4,e.outputs,i.trackSvc.sortByValue))}}function Ya(t,n){t&1&&D(0)}function Za(t,n){t&1&&D(0)}var tl=(t,n,e,i,o,a,c,C,f,E,V,P,F)=>({items:t,itemId:n,belts:e,beltId:i,wagons:o,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:V,destId:P,destRecipeObjectiveId:F,destIsRecipe:!0});function el(t,n){if(t&1&&u(0,Za,1,0,"ng-container",116),t&2){let e=l(),i=l().$implicit,o=l(4),a=l(2),c=v(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",$t(2,tl,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,e.step.machines==null?null:e.step.machines.mul(e.percent),e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step.recipeId,e.step.recipeObjectiveId,e.percent,o.recipeId,o.recipeObjectiveId]))}}function il(t,n){t&1&&u(0,el,1,16,"ng-container"),t&2&&g(0,n.step.itemId&&n.percent?0:-1)}function nl(t,n){if(t&1&&u(0,il,1,1),t&2){let e=n.$implicit,i=l(4),o=l(2),a;g(0,(a=q(1,ie,o.stepByItemEntities()[e.key],o.stepByItemEntities()[e.key].parents==null?null:o.stepByItemEntities()[e.key].parents[i.id]))?0:-1,a)}}function ol(t,n){if(t&1&&(_(0,"tr",104),u(1,Ya,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()(),L(5,nl,1,4,null,null,_t),r(7,"keyvalue")),t&2){let e=l(3),i=l(2),o=v(9);p(),d("ngTemplateOutlet",o),p(2),M(" ",m(4,2,"steps.inputs")," "),p(2),H(k(7,4,e.recipe.in,i.trackSvc.sortByValue))}}function al(t,n){t&1&&D(0)}function ll(t,n){t&1&&D(0)}function pl(t,n){t&1&&D(0)}function sl(t,n){t&1&&D(0)}var _l=(t,n,e,i,o,a,c,C,f,E,V,P,F)=>({items:t,itemId:n,belts:e,beltId:i,wagons:o,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:V,percentOnDest:!0,destId:P,destRecipeObjectiveId:F,destIsRecipe:!0});function rl(t,n){if(t&1&&u(0,sl,1,0,"ng-container",116),t&2){let e=l(),i=l().$implicit,o=l(3),a=l(2),c=v(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",$t(2,_l,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,e.step.machines==null?null:e.step.machines.mul(e.percent),e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step.recipeId,e.step.recipeObjectiveId,e.percent,o.recipeId,o.recipeObjectiveId]))}}function cl(t,n){t&1&&u(0,rl,1,16,"ng-container"),t&2&&g(0,n.step.itemId&&n.percent?0:-1)}function dl(t,n){if(t&1&&u(0,cl,1,1),t&2){let e=n.$implicit,i=l(3),o=l(2),a;g(0,(a=q(1,ie,o.stepByItemEntities()[e.key],i.outputs==null?null:i.outputs[e.key]))?0:-1,a)}}function ml(t,n){if(t&1&&(u(0,Ja,8,7)(1,ol,8,7),r(2,"keyvalue"),_(3,"tr",104),u(4,al,1,0,"ng-container",114),_(5,"td",115),S(6),r(7,"translate"),s()(),_(8,"tr",104),u(9,ll,1,0,"ng-container",114),_(10,"td",54)(11,"span",56),S(12),r(13,"rate"),s()(),_(14,"td",57)(15,"div",34),h(16,"i",117),s()(),h(17,"td",107),s(),_(18,"tr",104),u(19,pl,1,0,"ng-container",114),_(20,"td",115),S(21),r(22,"translate"),s()(),L(23,dl,1,4,null,null,_t),r(25,"keyvalue")),t&2){let e=l(2),i=l(2),o=v(9);g(0,i.data().game===i.Game.Factorio&&e.recipe.isMining?0:-1),p(),g(1,e.recipe&&m(2,8,e.recipe.in).length?1:-1),p(3),d("ngTemplateOutlet",o),p(2),M(" ",m(7,10,"steps.time")," "),p(3),d("ngTemplateOutlet",o),p(3),w(k(13,12,e.recipe.time,i.columnsState().items.precision)),p(7),d("ngTemplateOutlet",o),p(2),M(" ",m(22,15,"steps.outputs")," "),p(2),H(k(25,17,e.recipe.out,i.trackSvc.sortByValue))}}function ul(t,n){if(t&1&&u(0,ml,26,20),t&2){let e=l();g(0,e.recipe?0:-1)}}function Cl(t,n){t&1&&D(0)}var Vt=(t,n)=>({value:t,itemId:n});function gl(t,n){if(t&1&&(u(0,Cl,1,0,"ng-container",116),r(1,"rate")),t&2){let e=l(2),i=l().$implicit;l();let o=v(27),a=l(2),c=l(2);d("ngTemplateOutlet",o)("ngTemplateOutletContext",q(5,Vt,k(1,2,e.step.items.mul(e.percent).div(a.machines),c.columnsState().items.precision),i.key))}}function fl(t,n){t&1&&D(0)}function xl(t,n){if(t&1&&(u(0,fl,1,0,"ng-container",116),r(1,"rate")),t&2){let e=l(4);l(2);let i=v(27),o=l(2),a=l(2);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,Vt,k(1,2,e.step.belts.mul(e.percent).div(o.machines),a.columnsState().belts.precision),n))}}function Sl(t,n){if(t&1&&u(0,xl,2,8,"ng-container"),t&2){let e=l(4).$implicit,i=l(5),o;g(0,(o=i.itemsState()[e.key].beltId)?0:-1,o)}}function hl(t,n){if(t&1&&(_(0,"td"),u(1,Sl,1,1),s()),t&2){let e=l(2);p(),g(1,e.step.belts?1:-1)}}function vl(t,n){t&1&&D(0)}function bl(t,n){if(t&1&&(u(0,vl,1,0,"ng-container",116),r(1,"rate")),t&2){l(6);let e=v(27);d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(5,Vt,k(1,2,n.value,1),n.id))}}function Tl(t,n){if(t&1&&(u(0,bl,2,8,"ng-container"),r(1,"inserterSpeed")),t&2){let e=l(3),i=l(4),o=l(2),a;g(0,(a=k(1,1,e.step.items.mul(e.percent).div(i.machines).div(o.dispRateInfo().value),o.settings()))?0:-1,a)}}function wl(t,n){if(t&1&&(_(0,"td"),u(1,Tl,2,4),s()),t&2){let e=l(2),i=l().$implicit,o=l(5);p(),g(1,o.itemsState()[i.key].beltId!==o.ItemId.Pipe&&e.step.items?1:-1)}}function Il(t,n){if(t&1&&(_(0,"tr")(1,"td"),u(2,gl,2,8,"ng-container"),s(),u(3,hl,2,1,"td")(4,wl,2,1,"td"),s()),t&2){let e=l(),i=l(6);p(2),g(2,e.step.items?2:-1),p(),g(3,i.columnsState().belts.show?3:-1),p(),g(4,i.data().game===i.Game.Factorio?4:-1)}}function yl(t,n){t&1&&u(0,Il,5,3,"tr"),t&2&&g(0,n.percent?0:-1)}function Bl(t,n){if(t&1&&u(0,yl,1,1),t&2){let e=n.$implicit,i=l(3),o=l(2),a;g(0,(a=q(1,ie,o.stepByItemEntities()[e.key],o.stepByItemEntities()[e.key].parents==null?null:o.stepByItemEntities()[e.key].parents[i.id]))?0:-1,a)}}function El(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l(4);d("id",e.recipeId)}}function kl(t,n){if(t&1&&h(0,"lab-tooltip",79),t&2){let e=l();d("id",e)}}function Ml(t,n){if(t&1&&(_(0,"div",13)(1,"i",52),r(2,"iconClass"),u(3,El,1,1,"ng-template",null,50,B),s(),_(5,"i",52),r(6,"iconClass"),u(7,kl,1,1,"ng-template",null,50,B),s()()),t&2){let e=v(4),i=l(3);p(),y(k(2,6,i.recipeId,"recipe")),d("pTooltip",e),p(4),y(m(6,9,n)),d("pTooltip",e)}}function Rl(t,n){t&1&&D(0)}function Ol(t,n){if(t&1&&(u(0,Rl,1,0,"ng-container",116),r(1,"rate")),t&2){l(5);let e=v(27);d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(5,Vt,k(1,2,n.value,1),n.id))}}function Vl(t,n){if(t&1&&(u(0,Ol,2,8,"ng-container"),r(1,"inserterSpeed")),t&2){let e=l(2),i=l(6),o;g(0,(o=k(1,1,e,i.settings()))?0:-1,o)}}function Fl(t,n){if(t&1&&(_(0,"td"),u(1,Vl,2,4),s()),t&2){let e=l(2).$implicit,i=l(5);p(),g(1,i.itemsState()[e.key].beltId!==i.ItemId.Pipe?1:-1)}}function Pl(t,n){t&1&&D(0)}function Dl(t,n){if(t&1&&(u(0,Pl,1,0,"ng-container",116),r(1,"rate")),t&2){let e=l(2);l(2);let i=v(27),o=l(4);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,Vt,k(1,2,e.div(o.beltSpeed()[n]),o.columnsState().belts.precision),n))}}function $l(t,n){if(t&1&&(_(0,"td"),u(1,Dl,2,8,"ng-container"),s()),t&2){let e=l(2).$implicit,i=l(5),o;p(),g(1,(o=i.itemsState()[e.key].beltId)?1:-1,o)}}function jl(t,n){t&1&&D(0)}function Al(t,n){if(t&1&&(_(0,"tr"),u(1,Fl,2,1,"td")(2,$l,2,1,"td"),_(3,"td"),u(4,jl,1,0,"ng-container",116),r(5,"rate"),s()()),t&2){let e=l().$implicit;l();let i=v(27),o=l(4);p(),g(1,o.data().game===o.Game.Factorio?1:-1),p(),g(2,o.columnsState().belts.show?2:-1),p(2),d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(7,Vt,k(5,4,n.mul(o.dispRateInfo().value),o.columnsState().items.precision),e.key))}}function Nl(t,n){if(t&1&&u(0,Al,6,10,"tr"),t&2){let e=n.$implicit,i=l(3),o;g(0,(o=e.value.div(i.recipe.time))?0:-1,o)}}function Ul(t,n){if(t&1&&h(0,"lab-tooltip",51),t&2){let e=l().itemId;d("id",e)}}function zl(t,n){if(t&1&&(_(0,"div",122)(1,"span",56),S(2),s(),_(3,"i",52),r(4,"iconClass"),u(5,Ul,1,1,"ng-template",null,50,B),s()()),t&2){let e=n.value,i=n.itemId,o=v(6);p(2),w(e),p(),y(m(4,4,i)),d("pTooltip",o)}}function Ll(t,n){if(t&1&&(_(0,"div",13)(1,"table",119),L(2,Bl,1,4,null,null,_t),r(4,"keyvalue"),s(),h(5,"i",120),_(6,"table",119)(7,"tr")(8,"td",54)(9,"span",56),S(10),r(11,"rate"),s()(),_(12,"td"),u(13,Ml,9,11,"div",70),s()(),_(14,"tr")(15,"td",54)(16,"span",56),S(17),r(18,"rate"),s()(),_(19,"td"),h(20,"i",117),s()()(),h(21,"i",120),_(22,"table",119),L(23,Nl,1,1,null,null,_t),r(25,"keyvalue"),s(),u(26,zl,7,6,"ng-template",null,121,B),s()),t&2){let e=l(2),i=l(2),o;p(2),H(k(4,3,e.recipe.in,i.trackSvc.sortByValue)),p(8),w(k(11,6,i.Rational.one,i.columnsState().machines.precision)),p(3),g(13,(o=e.recipeSettings==null?null:e.recipeSettings.machineId)?13:-1,o),p(4),w(k(18,9,i.dispRateInfo().value,i.columnsState().machines.precision)),p(6),H(k(25,12,e.recipe.out,i.trackSvc.sortByValue))}}function Hl(t,n){t&1&&(h(0,"small",118),r(1,"translate")),t&2&&d("innerHTML",m(1,1,"steps.inserterCountInfo"),Ne)}function Wl(t,n){if(t&1&&(_(0,"tr",104),h(1,"td"),_(2,"td",107),u(3,Ll,28,15,"div",70)(4,Hl,2,3,"small",118),s()()),t&2){let e=l(),i=l(2);p(3),g(3,e.recipeId&&e.recipe&&e.machines?3:-1),p(),g(4,i.data().game===i.Game.Factorio?4:-1)}}function Gl(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l().$implicit;d("id",e)}}function ql(t,n){if(t&1){let e=I();_(0,"button",127),x("click",function(){let a=b(e).$implicit,c=l(5);return T(c.toggleRecipe(a,c.recipesState(),c.data()))}),r(1,"iconSmClass"),h(2,"i",49),u(3,Gl,1,1,"ng-template",null,50,B),s()}if(t&2){let e=n.$implicit,i=v(4),o=l(5);K("hover-active",o.recipesState()[e].excluded),d("icon",k(1,4,e,"recipe"))("pTooltip",i)}}function Ql(t,n){if(t&1){let e=I();_(0,"tr",104),h(1,"td"),_(2,"td",107)(3,"div")(4,"div",123),S(5),r(6,"translate"),s(),_(7,"div",124)(8,"small"),S(9),r(10,"translate"),s()(),_(11,"p-checkbox",125),x("onChange",function(){let a=b(e),c=l(4);return T(c.toggleRecipes(a.recipeIds,a.allRecipesIncluded,c.data()))}),r(12,"translate"),s()()()(),_(13,"tr",104),h(14,"td"),_(15,"td",107)(16,"div",126),L(17,ql,5,7,"button",128,Z),s()()()}t&2&&(p(5),M(" ",m(6,5,"steps.includedRecipes")," "),p(4),w(m(10,7,"steps.includedRecipesInfo")),p(2),d("ngModel",n.allRecipesIncluded)("binary",!0)("label",m(12,9,"picker.includeAll")),p(6),H(n.recipeIds))}function Kl(t,n){if(t&1&&u(0,Ql,19,11),t&2){let e=l(),i=l(2),o;g(0,(o=e.itemId&&i.stepDetails()[e.id])?0:-1,o)}}function Xl(t,n){if(t&1){let e=I();_(0,"tr",104)(1,"td")(2,"a",105),h(3,"button",106),s()(),_(4,"td",107)(5,"p-tabMenu",108,109),x("activeItemChange",function(o){let c=b(e),C=l(2);return T(C.setActiveItem(c,o))}),r(7,"stepId"),u(8,Ra,5,5,"ng-template",62),s()()(),u(9,Ha,7,5)(10,ul,1,1)(11,Wl,5,2)(12,Kl,1,1)}if(t&2){let e=v(6),i=l(2),o;p(2),d("relativeTo",i.route)("fragment",n.id),p(3),d("model",i.stepDetails()[n.id].tabs)("activeItem",i.activeItem[m(7,5,n)]),p(4),g(9,(o=e.activeItem==null?null:e.activeItem.label)===i.StepDetailTab.Item?9:o===i.StepDetailTab.Recipe?10:o===i.StepDetailTab.Machine?11:o===i.StepDetailTab.Recipes?12:-1)}}function Jl(t,n){if(t&1&&(u(0,Xl,13,7),r(1,"asStep")),t&2){let e=n.$implicit,i;g(0,(i=m(1,1,e))?0:-1,i)}}function Yl(t,n){t&1&&(_(0,"tr")(1,"td",107)(2,"div",38)(3,"span"),S(4),r(5,"translate"),s()()()()),t&2&&(p(4),w(m(5,1,"steps.emptyMessage")))}function Zl(t,n){if(t&1&&u(0,Yl,6,3,"tr"),t&2){let e=l();g(0,e.focus()?0:-1)}}function tp(t,n){t&1&&h(0,"td",20)}function ep(t,n){t&1&&h(0,"td")}function ip(t,n){t&1&&h(0,"td")}function np(t,n){if(t&1&&u(0,ep,1,0,"td")(1,ip,1,0,"td"),t&2){let e=l(2);g(0,e.columnsState().checkbox.show?0:-1),p(),g(1,e.columnsState().tree.show?1:-1)}}function op(t,n){if(t&1&&(h(0,"td"),u(1,np,2,2)),t&2){let e=l();p(),g(1,e.focus()?-1:1)}}function ap(t,n){t&1&&D(0)}function lp(t,n){if(t&1&&h(0,"lab-tooltip",51),t&2){let e=l(2).itemId;d("id",e)}}function pp(t,n){if(t&1&&h(0,"lab-tooltip",66),t&2){let e=l(3).beltId;d("id",e)}}function sp(t,n){if(t&1&&(_(0,"td",54)(1,"span",56),S(2),r(3,"rate"),s()(),_(4,"td",57)(5,"div",34)(6,"i",52),r(7,"iconClass"),u(8,pp,1,1,"ng-template",null,50,B),s()()()),t&2){let e=v(9),i=l(2),o=i.belts,a=i.beltId,c=l();p(2),w(k(3,4,o,c.columnsState().belts.precision)),p(4),y(m(7,7,a)),d("pTooltip",e)}}function _p(t,n){if(t&1&&h(0,"lab-tooltip",68),t&2){let e=l(4).wagonId;d("id",e)}}function rp(t,n){if(t&1&&(_(0,"i",52),r(1,"iconClass"),u(2,_p,1,1,"ng-template",null,50,B),s()),t&2){let e=v(3),i=l(3).wagonId;y(m(1,3,i)),d("pTooltip",e)}}function cp(t,n){if(t&1&&h(0,"lab-tooltip",69),t&2){let e=l(4).wagonId;d("id",e)}}function dp(t,n){if(t&1&&(_(0,"i",52),r(1,"iconClass"),u(2,cp,1,1,"ng-template",null,50,B),s()),t&2){let e=v(3),i=l(3).wagonId;y(m(1,3,i)),d("pTooltip",e)}}function mp(t,n){if(t&1&&(_(0,"td",54)(1,"span",56),S(2),r(3,"rate"),s()(),_(4,"td",57)(5,"div",34),u(6,rp,4,5,"i",131)(7,dp,4,5),s()()),t&2){let e=l(2),i=e.wagons,o=e.wagonId,a=l();p(2),w(k(3,2,i,a.columnsState().wagons.precision)),p(4),g(6,a.data().cargoWagonIds.indexOf(o)!==-1?6:7)}}function up(t,n){if(t&1&&(_(0,"span",56),S(1),r(2,"machineRate"),s()),t&2){let e=l(2),i=e.machines,o=e.machineId,a=l();p(),w(dt(2,1,i,a.columnsState().machines.precision,o))}}function Cp(t,n){t&1&&(_(0,"div",132),S(1),r(2,"translate"),s()),t&2&&(p(),M(" ",m(2,1,"steps.inputs")," "))}function gp(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(3).recipeObjectiveId;p(),M("#",e,"")}}function fp(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l(3).recipeId;d("id",e)}}function xp(t,n){if(t&1&&h(0,"lab-tooltip",79),t&2){let e=l(3).machineId;d("id",e)}}function Sp(t,n){if(t&1&&(_(0,"i",52),r(1,"iconClass"),u(2,gp,2,1,"span")(3,fp,1,1,"ng-template",null,50,B),s(),_(5,"i",52),r(6,"iconClass"),u(7,xp,1,1,"ng-template",null,50,B),s()),t&2){let e=v(4),i=l(2),o=i.recipeId,a=i.recipeObjectiveId,c=i.machineId;y(k(1,7,o,"recipe")),d("pTooltip",e),p(2),g(2,a?2:-1),p(3),y(m(6,10,c)),d("pTooltip",e)}}function hp(t,n){t&1&&(_(0,"div",133),h(1,"i",134),s(),_(2,"div",133),h(3,"i",134),s())}function vp(t,n){t&1&&h(0,"i",136)}function bp(t,n){t&1&&h(0,"i",136)}function Tp(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(4).destRecipeObjectiveId;p(),M("#",e,"")}}function wp(t,n){if(t&1&&h(0,"lab-tooltip",137),t&2){let e=l(4),i=e.destId,o=e.destIsRecipe;d("id",i)("type",o?"recipe":"item")}}function Ip(t,n){if(t&1&&(_(0,"i",52),r(1,"iconClass"),u(2,Tp,2,1,"span")(3,wp,1,2,"ng-template",null,50,B),s()),t&2){let e=v(4),i=l(3),o=i.destId,a=i.destIsRecipe,c=i.destRecipeObjectiveId;y(k(1,4,o,a?"recipe":"item")),d("pTooltip",e),p(2),g(2,c?2:-1)}}function yp(t,n){t&1&&(_(0,"span"),S(1),r(2,"translate"),s()),t&2&&(p(),M(" ",m(2,1,"steps.outputs")," "))}function Bp(t,n){if(t&1&&(u(0,vp,1,0,"i",135),_(1,"span",56),S(2),r(3,"leftPad"),r(4,"rate"),s(),u(5,bp,1,0,"i",135)(6,Ip,5,7,"i",131)(7,yp,3,3,"span")),t&2){let e=l(2),i=e.percentOnDest,o=e.percent,a=e.destId,c=e.outputs;g(0,i?0:-1),p(2),M("",m(3,5,k(4,7,o,-2)),"%"),p(3),g(5,i?-1:5),p(),g(6,a?6:-1),p(),g(7,c?7:-1)}}function Ep(t,n){if(t&1&&(u(0,ap,1,0,"ng-container",114),_(1,"td",54)(2,"span",56),S(3),r(4,"rate"),s()(),_(5,"td",57)(6,"div",34)(7,"i",52),r(8,"iconClass"),u(9,lp,1,1,"ng-template",null,50,B),s()()(),u(11,sp,10,9)(12,mp,8,5),_(13,"td",54),u(14,up,3,5,"span",55),r(15,"machineShowRate"),s(),_(16,"td",129)(17,"div",13),u(18,Cp,3,3,"div",130)(19,Sp,9,12),r(20,"machineShow"),u(21,hp,4,0)(22,Bp,8,10),s()()),t&2){let e=v(10),i=l(),o=i.items,a=i.itemId,c=i.belts,C=i.beltId,f=i.wagons,E=i.wagonId,V=i.machines,P=i.machineId,F=i.inputs,N=i.percent,A=l(),Y=v(9);d("ngTemplateOutlet",Y),p(3),w(k(4,11,o,A.columnsState().items.precision)),p(4),y(m(8,14,a)),d("pTooltip",e),p(4),g(11,A.columnsState().belts.show&&c&&C?11:-1),p(),g(12,A.columnsState().wagons.show&&f&&E?12:-1),p(2),g(14,V&&V.nonzero()&&k(15,16,P,A.data().game)?14:-1),p(4),g(18,F?18:-1),p(),g(19,k(20,19,P,A.data().game)?19:21),p(3),g(22,N?22:-1)}}function kp(t,n){if(t&1&&(_(0,"tr",104),u(1,Ep,23,22),s()),t&2){let e=n.itemId;p(),g(1,e?1:-1)}}function Mp(t,n){t&1&&h(0,"td")}function Rp(t,n){t&1&&h(0,"td")}function Op(t,n){t&1&&D(0)}function Vp(t,n){t&1&&D(0)}function Fp(t,n){t&1&&D(0)}function Pp(t,n){t&1&&D(0)}function Dp(t,n){if(t&1&&(_(0,"td",140)(1,"span",56),S(2),r(3,"power"),s()()),t&2){let e=l(3);p(2),w(dt(3,1,e.totals().power,e.columnsState().power.precision,e.effectivePowerUnit()))}}function $p(t,n){if(t&1&&(_(0,"td",140)(1,"span",56),S(2),r(3,"rate"),s()()),t&2){let e=l(3);p(2),w(k(3,1,e.totals().pollution,e.columnsState().pollution.precision))}}function jp(t,n){t&1&&h(0,"td")}var Ap=(t,n)=>({columnSettings:t,totals:n,type:"belt"}),Np=(t,n)=>({columnSettings:t,totals:n}),Up=(t,n,e)=>({columnSettings:t,totals:n,modulesTotals:e,type:"machine"}),zp=(t,n,e)=>({columnSettings:t,totals:n,modulesTotals:e,type:"beacon"});function Lp(t,n){if(t&1&&(_(0,"tr"),h(1,"td"),u(2,Mp,1,0,"td")(3,Rp,1,0,"td"),_(4,"td",20),S(5),r(6,"translate"),s(),u(7,Op,1,0,"ng-container",116)(8,Vp,1,0,"ng-container",116)(9,Fp,1,0,"ng-container",116)(10,Pp,1,0,"ng-container",116)(11,Dp,4,5,"td",139)(12,$p,4,4,"td",139)(13,jp,1,0,"td"),s()),t&2){l();let e=v(2),i=l();p(2),g(2,i.columnsState().checkbox.show?2:-1),p(),g(3,i.columnsState().tree.show?3:-1),p(2),M(" ",m(6,14,"steps.total")," "),p(2),d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(16,Ap,i.columnsState().belts,i.totals().belts)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(19,Np,i.columnsState().wagons,i.totals().wagons)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Dt(22,Up,i.columnsState().machines,i.totals().machines,i.totals().machineModules)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Dt(26,zp,i.columnsState().beacons,i.totals().beacons,i.totals().beaconModules)),p(),g(11,i.columnsState().power.show?11:-1),p(),g(12,i.columnsState().pollution.show?12:-1),p(),g(13,i.columnsState().link.show?13:-1)}}function Hp(t,n){if(t&1&&(_(0,"div",145)(1,"span",56),S(2),r(3,"rate"),s()()),t&2){let e=n.$implicit,i=l(2).columnSettings;p(2),w(k(3,1,e.value,i.precision))}}function Wp(t,n){if(t&1&&h(0,"lab-tooltip",137),t&2){let e=l(2).$implicit,i=l(2).type;d("id",e.key)("type",i)}}function Gp(t,n){if(t&1&&(_(0,"i",147),r(1,"iconClass"),u(2,Wp,1,2,"ng-template",null,50,B),s()),t&2){let e=v(3),i=l().$implicit;y(m(1,3,i.key)),d("pTooltip",e)}}function qp(t,n){if(t&1&&h(0,"lab-tooltip",53),t&2){let e=l(2).$implicit;d("id",e.key)}}function Qp(t,n){if(t&1&&(_(0,"i",147),r(1,"iconClass"),u(2,qp,1,1,"ng-template",null,50,B),s()),t&2){let e=v(3),i=l().$implicit;y(k(1,3,i.key,"recipe")),d("pTooltip",e)}}function Kp(t,n){if(t&1&&u(0,Gp,4,5,"i",146)(1,Qp,4,6),t&2){let e=n.$implicit,i=l(4);g(0,i.data().itemEntities[e.key]?0:1)}}function Xp(t,n){if(t&1&&h(0,"lab-tooltip",87),t&2){let e=l().$implicit;d("id",e.key)}}function Jp(t,n){if(t&1&&(_(0,"div",145)(1,"span",56),S(2),s()(),_(3,"i",147),r(4,"iconClass"),u(5,Xp,1,1,"ng-template",null,50,B),s()),t&2){let e=n.$implicit,i=v(6);p(2),w(e.value),p(),y(k(4,4,e.key,"item")),d("pTooltip",e.key!=="module"?i:void 0)}}function Yp(t,n){if(t&1&&(_(0,"td",141),L(1,Hp,4,4,"div",148,_t),r(3,"keyvalue"),s(),_(4,"td",142)(5,"div",34)(6,"div",143),L(7,Kp,2,1,null,null,_t),r(9,"keyvalue"),s(),_(10,"div",144),L(11,Jp,7,7,null,null,_t),r(13,"keyvalue"),s()()()),t&2){let e=l(),i=e.totals,o=e.modulesTotals,a=l(2);p(),H(k(3,0,i,a.trackSvc.sortByValue)),p(6),H(k(9,3,i,a.trackSvc.sortByValue)),p(4),H(k(13,6,o,a.trackSvc.sortByValue))}}function Zp(t,n){if(t&1&&u(0,Yp,14,9),t&2){let e=n.columnSettings;g(0,e.show?0:-1)}}function ts(t,n){if(t&1&&u(0,Lp,14,30,"tr")(1,Zp,1,1,"ng-template",null,138,B),t&2){let e=l();g(0,e.focus()?-1:0)}}var es=()=>[25,50,100,1e3],is=(()=>{let n=class n{constructor(){this.document=$(Ge),this.route=$(di),this.ref=$(Lt),this.contentSvc=$(lt),this.trackSvc=$(qt),this.store=$(mt),this.exportSvc=$(vi),this.routerSvc=$(Et),this.focus=Ft(!1),this.selectedId=Ft(),this.steps=nt(()=>{let i=[...this.store.selectSignal(O.getSteps)()];if(!this.focus())return i;let a=this.selectedId();return i.filter(c=>c.id===a)}),this.activeItemsEffect=It(()=>{let i=this.steps(),o=this.store.selectSignal(O.getStepDetails)();this.setActiveItems(i,o)}),this.toggleEffect=It(()=>{let i=this.focus(),o=this.steps();i&&this.stepsTable?.toggleRow(o[0])}),this.machinesState=this.store.selectSignal(X.getMachinesState),this.itemsState=this.store.selectSignal(W.getItemsState),this.itemsModified=this.store.selectSignal(W.getItemsModified),this.stepsModified=this.store.selectSignal(O.getStepsModified),this.totals=this.store.selectSignal(O.getTotals),this.stepDetails=this.store.selectSignal(O.getStepDetails),this.stepById=this.store.selectSignal(O.getStepById),this.stepByItemEntities=this.store.selectSignal(O.getStepByItemEntities),this.stepTree=this.store.selectSignal(O.getStepTree),this.effectivePowerUnit=this.store.selectSignal(O.getEffectivePowerUnit),this.recipesState=this.store.selectSignal(j.getRecipesState),this.recipesModified=this.store.selectSignal(O.getRecipesModified),this.data=this.store.selectSignal(j.getAdjustedDataset),this.columnsState=this.store.selectSignal(R.getColumnsState),this.settings=this.store.selectSignal(R.getSettings),this.dispRateInfo=this.store.selectSignal(R.getDisplayRateInfo),this.options=this.store.selectSignal(R.getOptions),this.beltSpeed=this.store.selectSignal(R.getBeltSpeed),this.preferences=this.store.selectSignal(z.preferencesState),this.sortSteps$=new Pe(null),this.activeItem={},this.stepDetailIcon=si,this.ItemId=J,this.StepDetailTab=pi,this.Game=ot,this.RecipeField=at,this.EnergyType=Qe,this.ObjectiveUnit=et,this.Rational=tt,le([this.sortSteps$.pipe($e()),this.store.select(O.getSteps)]).pipe(Ci()).subscribe(([[i,o],a])=>{this.sortSteps(i,o,a)})}ngOnInit(){this.route.fragment.pipe(it(),De(i=>i!=null)).subscribe(i=>{this.fragmentId=i})}ngAfterViewInit(){try{if(this.fragmentId){let[i,o,a]=this.fragmentId.split("_");le([this.store.select(O.getSteps),this.store.select(O.getStepDetails)]).pipe(it()).subscribe(([c,C])=>{let f=c.find(E=>E.id===o);f&&C[f.id].tabs.length&&this.stepsTable&&(this.stepsTable.toggleRow(f),setTimeout(()=>{if(a){let V=this.document.querySelector("#"+this.fragmentId);V&&V.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(i,o,a){if(o==null||o.order==null||o.field==null)return;let c=o.order,C=o.field;if(i!=null&&i.field===C&&i.order!==c&&c===-1&&this.stepsTable!=null)return o.data?.sort((f,E)=>a.indexOf(f)-a.indexOf(E)),this.stepsTable.sortOrder=0,this.stepsTable.sortField="",this.stepsTable.reset(),this.sortSteps$.next(null);o.data?.sort((f,E)=>(f[C]??tt.zero).sub(E[C]??tt.zero).toNumber()*c)}setActiveItems(i,o){i.forEach(a=>{let c=Ot.transform(a),C=this.activeItem[c],f=o[a.id];if(f!=null)if(C==null)this.activeItem[c]=f.tabs[0];else{let E=f.tabs.find(V=>V.label===C.label);E==null?this.activeItem[c]=f.tabs[0]:this.activeItem[c]=E}})}setActiveItem(i,o){let a=Ot.transform(i);this.activeItem[a]=o}resetStep(i){i.itemId&&this.resetItem(i.itemId),i.recipeObjectiveId?this.resetRecipeObjective(i.recipeObjectiveId):i.recipeId&&this.resetRecipe(i.recipeId)}export(i,o,a,c,C){this.exportSvc.stepsToCsv(i,c,o,a,C)}toggleRecipes(i,o,a){let c=i.map(C=>({id:C,value:o,def:(a.defaults?.excludedRecipeIds??[]).includes(C)}));this.setRecipeExcludedBatch(c)}toggleRecipe(i,o,a){let c=!o[i].excluded,C=(a.defaults?.excludedRecipeIds??[]).some(f=>f===i);this.setRecipeExcluded(i,c,C)}changeRecipeField(i,o,a,c,C,f,E){if(i.recipeId==null)return;let V=i.recipeObjectiveId??i.recipeId,P=i.recipeObjectiveId!=null,F=i.recipeSettings;if(F?.machineId){let N=a.entities[F.machineId];switch(C){case at.Machine:{typeof o=="string"&&a.ids!=null&&this.setMachine(i.recipeObjectiveId??i.recipeId,o,xt.bestMatch(c.recipeEntities[i.recipeId].producers,a.ids),i.recipeObjectiveId!=null);break}case at.Fuel:{typeof o=="string"&&this.setFuel(i.recipeObjectiveId??i.recipeId,o,N.fuelId,i.recipeObjectiveId!=null);break}case at.MachineModules:{if(N.moduleRankIds!=null&&c!=null&&typeof o=="string"&&f!=null&&F.machineModuleIds!=null){let A=c.machineEntities[F.machineId],Y=F.machineModuleIds.length,ne=xt.moduleOptions(A,i.recipeId,c),oe=xt.defaultModules(ne,N.moduleRankIds,Y),ae=this.generateModules(f,o,F.machineModuleIds);this.setMachineModules(V,ae,oe,P)}break}case at.BeaconCount:{if(typeof o=="string"&&f!=null){let A=N.beaconCount;this.setBeaconCount(V,f,o,A,P)}break}case at.Beacon:{if(typeof o=="string"&&f!=null){let A=N.beaconId;this.setBeacon(V,f,o,A,P)}break}case at.BeaconModules:{if(N.beaconModuleRankIds!=null&&typeof o=="string"&&f!=null&&E!=null){let A=F.beacons?.[f];if(A?.id!=null&&A?.moduleIds!=null){let Y=c.beaconEntities[A.id],ne=A.moduleIds.length,oe=xt.moduleOptions(Y,i.recipeId,c),ae=xt.defaultModules(oe,N.beaconModuleRankIds,ne),Hi=this.generateModules(E,o,A.moduleIds);this.setBeaconModules(V,f,Hi,ae,P)}}break}case at.BeaconTotal:{typeof o=="string"&&f!=null&&this.setBeaconTotal(V,f,o,P);break}case at.Overclock:{if(typeof o=="number"){let A=N.overclock;this.setOverclock(V,o,A,P)}break}}}}generateModules(i,o,a){let c=[...a];for(let C=i;C<c.length;C++)c[C]=o;return c}changeStepChecked(i,o){i.itemId!=null?this.setItemChecked(i.itemId,o):i.recipeObjectiveId!=null?this.setRecipeChecked(i.recipeObjectiveId,o,!0):i.recipeId!=null&&this.setRecipeChecked(i.recipeId,o)}setRows(i){this.store.dispatch(new z.SetRowsAction(i))}setItemExcluded(i,o){this.store.dispatch(new W.SetExcludedAction({id:i,value:o}))}setItemChecked(i,o){this.store.dispatch(new W.SetCheckedAction({id:i,value:o}))}setBelt(i,o,a){this.store.dispatch(new W.SetBeltAction({id:i,value:o,def:a}))}setWagon(i,o,a){this.store.dispatch(new W.SetWagonAction({id:i,value:o,def:a}))}setRecipeExcluded(i,o,a){this.store.dispatch(new j.SetExcludedAction({id:i,value:o,def:a}))}setRecipeExcludedBatch(i){this.store.dispatch(new j.SetExcludedBatchAction(i))}addObjective(i){this.store.dispatch(new O.AddAction(i))}setMachine(i,o,a,c=!1){let C=c?O.SetMachineAction:j.SetMachineAction;this.store.dispatch(new C({id:i,value:o,def:a}))}setFuel(i,o,a,c=!1){let C=c?O.SetFuelAction:j.SetFuelAction;this.store.dispatch(new C({id:i,value:o,def:a}))}setMachineModules(i,o,a,c=!1){let C=c?O.SetMachineModulesAction:j.SetMachineModulesAction;this.store.dispatch(new C({id:i,value:o,def:a}))}addBeacon(i,o=!1){let a=o?O.AddBeaconAction:j.AddBeaconAction;this.store.dispatch(new a(i))}removeBeacon(i,o,a=!1){let c=a?O.RemoveBeaconAction:j.RemoveBeaconAction;this.store.dispatch(new c({id:i,value:o}))}setBeaconCount(i,o,a,c,C=!1){let f=C?O.SetBeaconCountAction:j.SetBeaconCountAction;this.store.dispatch(new f({id:i,index:o,value:a,def:c}))}setBeacon(i,o,a,c,C=!1){let f=C?O.SetBeaconAction:j.SetBeaconAction;this.store.dispatch(new f({id:i,index:o,value:a,def:c}))}setBeaconModules(i,o,a,c,C=!1){let f=C?O.SetBeaconModulesAction:j.SetBeaconModulesAction;this.store.dispatch(new f({id:i,index:o,value:a,def:c}))}setBeaconTotal(i,o,a,c=!1){let C=c?O.SetBeaconTotalAction:j.SetBeaconTotalAction;this.store.dispatch(new C({id:i,index:o,value:a}))}setOverclock(i,o,a,c=!1){let C=c?O.SetOverclockAction:j.SetOverclockAction;this.store.dispatch(new C({id:i,value:o,def:a}))}setRecipeChecked(i,o,a=!1){let c=a?O.SetCheckedAction:j.SetCheckedAction;this.store.dispatch(new c({id:i,value:o}))}resetItem(i){this.store.dispatch(new W.ResetItemAction(i))}resetRecipe(i){this.store.dispatch(new j.ResetRecipeAction(i))}resetRecipeObjective(i){this.store.dispatch(new O.ResetObjectiveAction(i))}resetChecked(){this.store.dispatch(new W.ResetCheckedAction)}resetExcluded(){this.store.dispatch(new W.ResetExcludedAction)}resetBelts(){this.store.dispatch(new W.ResetBeltsAction)}resetWagons(){this.store.dispatch(new W.ResetWagonsAction)}resetMachines(){this.store.dispatch(new j.ResetMachinesAction)}resetBeacons(){this.store.dispatch(new j.ResetBeaconsAction)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=rt({type:n,selectors:[["lab-steps"]],viewQuery:function(o,a){if(o&1&&Le(an,5),o&2){let c;He(c=We())&&(a.stepsTable=c.first)}},inputs:{focus:[Pt.SignalBased,"focus"],selectedId:[Pt.SignalBased,"selectedId"]},decls:13,vars:10,consts:[["dataKey","id","styleClass","p-datatable-sm",3,"rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport","rowsChange","sortFunction"],["stepsTable",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["emptyCol2",""],["leftPad",""],["detailRow",""],["pTemplate","footer"],[1,"w-0","px-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined","p-button-rounded",3,"pTooltip","click"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","class","ms-2 p-button-text p-button-rounded","icon","fa-solid fa-rotate-left",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["colspan","2"],["pSortableColumn","power"],["pSortableColumn","pollution"],["class","w-0 px-1"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip","click"],["field","belts"],["field","wagons"],["field","power"],["field","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down","data-test","lab-list-export","tooltipPosition","left",1,"p-button-outlined","p-button-rounded",3,"pTooltip","click"],[1,"w-0","px-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"pTooltip","pRowToggler"],["class","overflow-hidden px-1 py-0"],["class","text-end"],[1,"d-flex","justify-content-center"],[3,"binary","ngModel","onChange"],[1,"overflow-hidden","px-1","py-0"],[1,"d-flex","align-items-center","links"],["class","indent"],[1,"icon"],["pButton","","pRipple","","type","button","class","hover-action p-button-text",3,"hover-active","icon","pTooltip"],[1,"indent"],[1,"connect"],["class","connect",3,"trail","last"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"icon","pTooltip","click"],[1,"hover-icon","fa-solid","fa-eye-slash"],["tooltip",""],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","text-end"],["class","monospace"],[1,"monospace"],[1,"ps-0"],[1,"find-text"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"pTooltip","ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["class","d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["class","d-flex align-items-center"],["pButton","","pRipple","","type","button","class","hover-action p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["inputStyleClass","text-end","incrementButtonClass","p-button-text","decrementButtonClass","p-button-text",3,"min","step","maxFractionDigits","showButtons","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip","click"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"pTooltip","options","ngModel","onChange"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel","onBlur"],["overclockInput",""],["inputStyleClass","text-end","incrementButtonClass","p-button-text","decrementButtonClass","p-button-text",3,"min","step","maxFractionDigits","showButtons","size","pTooltip","ngModel","onBlur"],["duplicatorsInput",""],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","tooltipPosition","top",1,"module-dropdown",3,"pTooltip","options","ngModel","onChange"],["type","module",3,"id"],["labDropdownBase","icon","class","module-dropdown","tooltipPosition","top",3,"last","pTooltip","options","ngModel"],[1,"w-0","pe-0"],["pButton","","pRipple","","type","button","class","p-button-text p-button-rounded","icon","fa-solid fa-plus"],["tooltipPosition","left","class","text-end","width","2.5rem",3,"pTooltip","value","textButtons"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-text","p-button-rounded",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-text","p-button-rounded",3,"click"],["tooltipPosition","left","width","2.5rem",1,"text-end",3,"pTooltip","value","textButtons","setValue"],["class","text-end","width","3rem",3,"pTooltip","value","textButtons"],["type","beacon",3,"id"],["width","3rem",1,"text-end",3,"pTooltip","value","textButtons","setValue"],[1,"text-end"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","class","p-button-text p-button-rounded","icon","fa-solid fa-rotate-left","tooltipPosition","left",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip","click"],["class","fragment",3,"id"],[1,"detail"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],["colspan","100"],[3,"model","activeItem","activeItemChange"],["expandTabMenu",""],[1,"p-menuitem-link"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],["class","detail"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],["machineValueCell",""],[1,"d-flex","align-items-center","justify-content-end"],[1,"fw-bold"],[1,"mb-2"],[3,"ngModel","binary","label","onChange"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"icon","pTooltip","click"],["pButton","","pRipple","","type","button","class","p-button-text hover-action me-2",3,"hover-active","icon","pTooltip"],["colspan","100",1,"p-0"],["class","position-absolute"],[3,"class","pTooltip"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],["class","m-1 p-2 fa-solid fa-arrow-right"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],["totalCell",""],["class","text-end inherit"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"py-2","icon-height"],["class","d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],["class","py-2 icon-height"]],template:function(o,a){o&1&&(_(0,"p-table",0,1),x("rowsChange",function(C){return a.setRows(C)})("sortFunction",function(C){return a.sortSteps$.next(C)}),u(2,yn,26,21,"ng-template",2)(3,Ma,2,3,"ng-template",3)(4,Jl,2,3,"ng-template",4)(5,Zl,1,1,"ng-template",5)(6,tp,1,0,"ng-template",null,6,B)(8,op,2,1,"ng-template",null,7,B)(10,kp,2,1,"ng-template",null,8,B)(12,ts,3,1,"ng-template",9),s()),o&2&&d("rowTrackBy",a.trackSvc.trackStep)("value",a.steps())("customSort",!0)("rowExpandMode",a.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!a.focus()&&!a.preferences().disablePaginator)("rows",a.preferences().rows)("rowsPerPageOptions",G(9,es))("showCurrentPageReport",!0)},dependencies:[yt,gt,ft,Ct,ui,vt,ht,kt,bt,Xt,St,Jt,Ti,Ii,wi,Fi,Mt,Rt,Nt,Ht,ut,yi,Tt,de,me,ue,Ce,ge,fe,xe,Se,pt,he,Ot],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;height:100vh;margin-left:16px}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:hover):not(:focus):not(.ng-invalid), [_nghost-%COMP%]     .p-inputtext:not(:hover):not(:focus):not(.ng-invalid){border-color:transparent;background-color:transparent}[_nghost-%COMP%]     .module-dropdown:not(.last){margin-right:-.5rem}[_nghost-%COMP%]     .module-dropdown:not(.last) .p-dropdown{border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown .lab-icon.sm{opacity:.3}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown:not(.last) .p-dropdown{border-top-color:var(--primary-color);border-bottom-color:var(--primary-color)}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown.last .p-dropdown{border-color:var(--primary-color);border-left-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{height:32px;margin-top:1px;margin-bottom:1px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}"],changeDetection:0});let t=n;return t})();var Ut=(()=>{let n=class n{onMousedown(i){i.stopPropagation()}onTouchStart(i){i.stopPropagation()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=zt({type:n,selectors:[["","labNoDrag",""]],hostBindings:function(o,a){o&1&&x("mousedown",function(C){return a.onMousedown(C)})("touchstart",function(C){return a.onTouchStart(C)})}});let t=n;return t})();function ls(t,n){if(t&1&&(_(0,"span",26),S(1),s()),t&2){let e=l(2).$implicit,i=l();p(),w(i.data().recipeEntities[e.targetId].name)}}function ps(t,n){if(t&1){let e=I();_(0,"button",22),x("click",function(){b(e);let o=v(8),a=l().$implicit,c=l();return T(o.clickOpen("recipe",c.recipeIds(),a.targetId))}),r(1,"translate"),_(2,"i",23),r(3,"iconSmClass"),_(4,"span"),S(5),s()(),u(6,ls,2,1,"span",24),s(),_(7,"lab-picker",10,25),x("selectId",function(o){b(e);let a=l().$implicit,c=l();return T(c.setTarget(a.id,o))}),r(9,"translate"),s()}if(t&2){let e=l().$implicit,i=l();d("pTooltip",m(1,6,"objectives.selectARecipe")),p(2),y(k(3,8,e.targetId,"recipe")),p(3),M("#",e.id,""),p(),g(6,i.contentSvc.isMobile()?-1:6),p(),d("header",m(9,11,"objectives.selectARecipe"))}}function ss(t,n){if(t&1){let e=I();_(0,"button",27),x("click",function(){b(e);let o=v(4),a=l().$implicit,c=l();return T(o.clickOpen("item",c.itemIds(),a.targetId))}),r(1,"iconSmClass"),r(2,"translate"),s(),_(3,"lab-picker",10,28),x("selectId",function(o){b(e);let a=l().$implicit,c=l();return T(c.setTarget(a.id,o))}),r(5,"translate"),s()}if(t&2){let e=l().$implicit,i=l();d("icon",m(1,4,e.targetId))("label",i.contentSvc.isMobile()?"":i.data().itemEntities[e.targetId].name)("pTooltip",m(2,6,"objectives.selectAnItem")),p(3),d("header",m(5,8,"objectives.selectAnItem"))}}function _s(t,n){}function rs(t,n){if(t&1){let e=I();_(0,"p-dropdown",20),x("onChange",function(o){b(e);let a=l().$implicit,c=l(),C=v(22),f=v(25);return T(c.changeUnit(a,o.value,c.objectiveRationals(),c.itemsState(),c.beltSpeed(),c.dispRateInfo(),c.data(),C,f))}),r(1,"translate"),s()}if(t&2){let e=l().$implicit,i=l();d("tooltip",m(1,3,"objectives.unitTooltip"))("options",i.rateUnitOptions())("ngModel",e.unit)}}function cs(t,n){if(t&1){let e=I();_(0,"div",15),h(1,"button",16),u(2,ps,10,13)(3,ss,6,10)(4,_s,0,0,"ng-template",null,17,B),_(6,"lab-input-number",18),x("setValue",function(o){let c=b(e).$implicit,C=l();return T(C.setValue(c.id,o))}),r(7,"translate"),s(),u(8,rs,2,5,"p-dropdown",19),_(9,"p-dropdown",20),x("onChange",function(o){let c=b(e).$implicit,C=l();return T(C.setType(c.id,o.value))}),r(10,"translate"),s(),_(11,"button",21),x("click",function(){let a=b(e).$implicit,c=l();return T(c.removeObjective(a.id))}),r(12,"translate"),s()()}if(t&2){let e=n.$implicit,i=l();p(2),g(2,e.unit===i.ObjectiveUnit.Machines?2:3),p(4),d("pTooltip",m(7,9,"objectives.valueTooltip"))("hideButtons",i.contentSvc.isMobile())("value",e.value),p(2),g(8,e.type!==i.ObjectiveType.Maximize?8:-1),p(),d("tooltip",m(10,11,"objectives.typeTooltip"))("options",i.objectiveTypeOptions)("ngModel",e.type),p(2),d("pTooltip",m(12,13,"objectives.removeTooltip"))}}function ds(t,n){if(t&1&&h(0,"p-messages",9),t&2){let e=l();d("value",e.messages())("closable",!1)("escape",!1)}}var ms=(()=>{let n=class n{constructor(){this.store=$(mt),this.translateSvc=$(Bt),this.contentSvc=$(lt),this.trackSvc=$(qt),this.messages=nt(()=>{let i=this.store.selectSignal(O.getObjectives),o=this.store.selectSignal(O.getMatrixResult),a=this.store.selectSignal(W.getItemsState),c=this.store.selectSignal(j.getRecipesState);return this.getMessages(i(),o(),a(),c())}),this.objectives=nt(()=>[...this.store.selectSignal(O.getObjectives)()]),this.objectiveRationals=this.store.selectSignal(O.getObjectiveRationals),this.itemsState=this.store.selectSignal(W.getItemsState),this.itemIds=this.store.selectSignal(j.getAvailableItems),this.data=this.store.selectSignal(j.getAdjustedDataset),this.beltSpeed=this.store.selectSignal(R.getBeltSpeed),this.dispRateInfo=this.store.selectSignal(R.getDisplayRateInfo),this.rateUnitOptions=this.store.selectSignal(R.getObjectiveUnitOptions),this.recipeIds=this.store.selectSignal(R.getAvailableRecipes),this.paused=this.store.selectSignal(z.getPaused),this.objectiveTypeOptions=ni,this.displayRateOptions=Wt,this.ObjectiveUnit=et,this.ObjectiveType=st}getMessages(i,o,a,c){if(o.resultType===_e.Paused)return[{severity:"info",detail:this.translateSvc.instant("objectives.pausedMessage")}];if(o.resultType!==_e.Failed)return[];if(o.simplexStatus==="unbounded"){let C=i.filter(f=>f.type===st.Maximize);return C.length&&i.every(f=>f.type!==st.Limit)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorNoLimits",o):C.some(f=>f.unit===et.Machines?c[f.targetId].excluded:a[f.targetId].excluded)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorMaximizeExcluded",o):this.buildErrorMessages("objectives.errorUnbounded","objectives.errorUnboundedDetail",o)}else return o.simplexStatus==="no_feasible"?this.buildErrorMessages("objectives.errorInfeasible","objectives.errorInfeasibleDetail",o):this.buildErrorMessages("objectives.error","objectives.errorDetail",o)}buildErrorMessages(i,o,a){return[{severity:"error",summary:this.translateSvc.instant(i),detail:`${this.translateSvc.instant(o)} ${this.translateSvc.instant("objectives.errorSimplexInfo",{returnCode:a.returnCode??"unknown",simplexStatus:a.simplexStatus??"unknown"})}`}]}setObjectiveOrder(i){this.setOrder(i.map(o=>o.id))}changeUnit(i,o,a,c,C,f,E,V,P){let F=a.find(N=>N.id===i.id);if(F!=null)if(o===et.Machines){if(i.unit!==et.Machines){let N=E.itemRecipeIds[i.targetId],A=Y=>this.convertItemsToMachines(F,Y,c,C,f,E);N.length===1?A(N[0]):(P.selectId.pipe(it()).subscribe(Y=>A(Y)),P.clickOpen("recipe",N))}}else if(i.unit===et.Machines){let N=Array.from(E.recipeR[i.targetId].produces),A=Y=>this.convertMachinesToItems(F,Y,o,c,C,f,E);N.length===1?A(N[0]):(V.selectId.pipe(it()).subscribe(Y=>A(Y)),V.clickOpen("item",N))}else this.convertItemsToItems(F,i.targetId,o,c,C,f,E)}convertItemsToMachines(i,o,a,c,C,f){if(this.setUnit(i.id,{targetId:o,unit:et.Machines}),i.type===st.Maximize)return;let E=At.objectiveNormalizedRate(i,a,c,C,f),V=f.recipeR[o],P=E.div(V.output[i.targetId]);this.setValue(i.id,P.toString())}convertMachinesToItems(i,o,a,c,C,f,E){if(this.setUnit(i.id,{targetId:o,unit:a}),i.type===st.Maximize||i.recipe==null)return;let V=At.objectiveNormalizedRate(new re({id:"",targetId:o,value:"1",unit:a,type:st.Output}),c,C,f,E),F=i.value.mul(i.recipe.output[o]).div(V);this.setValue(i.id,F.toString())}convertItemsToItems(i,o,a,c,C,f,E){if(this.setUnit(i.id,{targetId:o,unit:a}),i.type===st.Maximize)return;let V=At.objectiveNormalizedRate(i,c,C,f,E),P=At.objectiveNormalizedRate(new re({id:"",targetId:o,value:"1",unit:a,type:st.Output}),c,C,f,E),F=V.div(P);this.setValue(i.id,F.toString())}addItemObjective(i){this.addObjective({targetId:i,unit:et.Items})}addRecipeObjective(i){this.addObjective({targetId:i,unit:et.Machines})}removeObjective(i){this.store.dispatch(new O.RemoveAction(i))}setOrder(i){this.store.dispatch(new O.SetOrderAction(i))}setTarget(i,o){this.store.dispatch(new O.SetTargetAction({id:i,value:o}))}setValue(i,o){this.store.dispatch(new O.SetValueAction({id:i,value:o}))}setUnit(i,o){this.store.dispatch(new O.SetUnitAction({id:i,value:o}))}setType(i,o){this.store.dispatch(new O.SetTypeAction({id:i,value:o}))}addObjective(i){this.store.dispatch(new O.AddAction(i))}setDisplayRate(i,o){this.store.dispatch(new R.SetDisplayRateAction({value:i,prev:o}))}setPaused(i){this.store.dispatch(new z.SetPausedAction(i))}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=rt({type:n,selectors:[["lab-objectives"]],decls:27,vars:35,consts:[[3,"header"],[1,"objectives-content"],[3,"value","dragdrop","trackBy","onReorder"],["pTemplate","item"],[1,"objectives-buttons","d-flex","flex-wrap","mt-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"label","click"],["labDropdownTranslate","","styleClass","h-100",3,"tooltip","ngModel","options","onChange"],["offIcon","fa-solid fa-pause",3,"ngModel","onIcon","pTooltip","onChange"],["styleClass","mt-2 w-100",3,"value","closable","escape"],[3,"header","selectId"],["addItemPicker",""],["addRecipePicker",""],["chooseItemPicker",""],["chooseRecipePicker",""],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","border-end-0","cursor-grab"],["itemButton",""],["labNoDrag","","tooltipPosition","top",3,"pTooltip","hideButtons","value","setValue"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"tooltip","options","ngModel"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"tooltip","options","ngModel","onChange"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark","tooltipPosition","left",1,"p-button-outlined",3,"pTooltip","click"],["pButton","","pRipple","","labNoDrag","","type","button","tooltipPosition","top",1,"p-button-outlined","lab-button-icon-only","text-truncate",3,"pTooltip","click"],[1,"p-button-icon"],["class","p-button-label"],["editRecipePicker",""],[1,"p-button-label"],["labNoDrag","","pButton","","pRipple","","type","button","tooltipPosition","top",1,"p-button-outlined","text-truncate",3,"icon","label","pTooltip","click"],["editItemPicker",""]],template:function(o,a){if(o&1){let c=I();_(0,"p-card",0),r(1,"translate"),_(2,"div",1)(3,"p-orderList",2),x("onReorder",function(){return a.setObjectiveOrder(a.objectives())}),u(4,cs,13,15,"ng-template",3),s(),_(5,"div",4)(6,"button",5),x("click",function(){b(c);let f=v(16);return T(f.clickOpen("item",a.itemIds()))}),r(7,"translate"),s(),_(8,"button",6),x("click",function(){b(c);let f=v(19);return T(f.clickOpen("recipe",a.recipeIds()))}),r(9,"translate"),s(),_(10,"p-dropdown",7),x("onChange",function(f){return a.setDisplayRate(f.value,a.dispRateInfo().option)}),r(11,"translate"),s(),_(12,"p-toggleButton",8),x("onChange",function(f){let E;return a.setPaused((E=f.checked)!==null&&E!==void 0?E:!1)}),r(13,"translate"),s()(),u(14,ds,1,3,"p-messages",9),s(),_(15,"lab-picker",10,11),x("selectId",function(f){return a.addItemObjective(f)}),r(17,"translate"),s(),_(18,"lab-picker",10,12),x("selectId",function(f){return a.addRecipeObjective(f)}),r(20,"translate"),s(),h(21,"lab-picker",0,13),r(23,"translate"),h(24,"lab-picker",0,14),r(26,"translate"),s()}o&2&&(d("header",m(1,17,"objectives.title")),p(3),d("value",a.objectives())("dragdrop",!0)("trackBy",a.trackSvc.trackById),p(3),d("label",m(7,19,"objectives.addItems")),p(2),d("label",m(9,21,"objectives.addMachines")),p(2),d("tooltip",m(11,23,"objectives.selectDisplayRate"))("ngModel",a.dispRateInfo().option)("options",a.displayRateOptions),p(2),d("ngModel",a.paused())("onIcon","fa-solid fa-play")("pTooltip",m(13,25,"objectives.pauseTooltip")),p(2),g(14,a.messages().length?14:-1),p(),d("header",m(17,27,"objectives.selectAnItem")),p(3),d("header",m(20,29,"objectives.selectARecipe")),p(3),d("header",m(23,31,"objectives.selectAnItem")),p(3),d("header",m(26,33,"objectives.selectARecipe")))},dependencies:[gt,ft,Ct,vt,ht,ki,bt,Oi,ee,St,Pi,Mt,Zt,te,Ut,ut,Tt],styles:[".objectives-content[_ngcontent-%COMP%]{max-width:1000px}.objectives-buttons[_ngcontent-%COMP%]{gap:.25rem}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown.icon[_ngcontent-%COMP%]{flex:0 0 36px}@media (min-width: 576px){button.text-truncate[_ngcontent-%COMP%], .p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 25%}}@media (max-width: 575.98px){.p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 15%}}@media (max-width: 575.98px){[_nghost-%COMP%]     button.lab-button-icon-only{justify-content:center;width:2.571rem;padding:.5rem 0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-icon{margin:0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-label{flex:0 0 auto;visibility:hidden;width:0}}"],changeDetection:0});let t=n;return t})();function fs(t,n){if(t&1){let e=I();_(0,"div",16)(1,"span",2),S(2),r(3,"translate"),s(),_(4,"button",17),x("click",function(){b(e);let o=l();return T(o.copyScriptToClipboard())}),r(5,"translate"),s(),h(6,"a",18),r(7,"translate"),s()}t&2&&(p(2),w(m(3,3,"techPicker.exportFromFactorio")),p(2),d("label",m(5,5,"techPicker.exportCopyScript")),p(2),d("label",m(7,7,"techPicker.exportUseMod")))}function xs(t,n){if(t&1){let e=I();_(0,"button",19),x("click",function(){b(e);let o=l();return T(o.importTechs())}),r(1,"translate"),s()}t&2&&d("label",m(1,1,"ok"))}function Ss(t,n){t&1&&D(0)}function hs(t,n){t&1&&D(0)}function vs(t,n){t&1&&D(0)}function bs(t,n){t&1&&(_(0,"i"),S(1),r(2,"translate"),s()),t&2&&(p(),w(m(2,1,"none")))}function Ts(t,n){t&1&&D(0)}var ws=(t,n)=>({id:t,class:n});function Is(t,n){if(t&1&&u(0,Ts,1,0,"ng-container",20),t&2){let e=n.$implicit,i=l().class;l();let o=v(7);d("ngTemplateOutlet",o)("ngTemplateOutletContext",q(2,ws,e,i))}}function ys(t,n){if(t&1&&(_(0,"h3"),S(1),r(2,"translate"),s(),_(3,"div",23),u(4,bs,3,3,"i"),L(5,Is,1,5,"ng-container",null,Z),s()),t&2){let e=n.title,i=n.ids;p(),w(m(2,2,e)),p(3),g(4,i.length===0?4:-1),p(),H(i)}}function Bs(t,n){if(t&1&&h(0,"lab-tooltip",26),t&2){let e=l().id;d("id",e)}}function Es(t,n){if(t&1){let e=I();_(0,"button",24),x("click",function(){let a=b(e).id,c=l(2);return T(c.clickId(a))}),r(1,"iconSmClass"),u(2,Bs,1,1,"ng-template",null,25,B),s()}if(t&2){let e=n.id,i=n.class,o=v(3),a=l(2);y(i),K("hover-active",a.selection().indexOf(e)===-1),d("label",a.showTechLabels()&&(a.data().itemEntities[e]==null?null:a.data().itemEntities[e].name)||"")("icon",m(1,7,e))("pTooltip",o)}}var ks=()=>({height:"calc(80vh - 165px)",minHeight:"363px"}),Ms=t=>({title:"techPicker.available",ids:t,class:"p-button-text"}),Rs=t=>({title:"techPicker.locked",ids:t,class:"p-button-danger"}),Os=t=>({title:"techPicker.researched",ids:t,class:"p-button-success"});function Vs(t,n){if(t&1&&(_(0,"p-scrollPanel"),u(1,Ss,1,0,"ng-container",20)(2,hs,1,0,"ng-container",20)(3,vs,1,0,"ng-container",20)(4,ys,7,4,"ng-template",null,21,B)(6,Es,4,9,"ng-template",null,22,B),s()),t&2){let e=v(5),i=l();wt(G(8,ks)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",ct(9,Ms,i.status().available)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",ct(11,Rs,i.status().locked)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",ct(13,Os,i.status().researched))}}var Fs=()=>({minHeight:"528px",height:"80vh",width:"50vw"}),Ps=()=>({"768px":"80vw","576px":"100vw"}),Ds=()=>({width:"30vw"}),$s=()=>({"768px":"50vw","576px":"90vw"}),ke=(()=>{let n=class n{constructor(){this.ref=$(Lt),this.filterSvc=$(gi),this.translateSvc=$(Bt),this.store=$(mt),this.contentSvc=$(lt),this.selectIds=new ze,this.data=this.store.selectSignal(j.getAdjustedDataset),this.showTechLabels=this.store.selectSignal(z.getShowTechLabels),this.filter=pe(""),this.selection=pe([]),this.allSelected=nt(()=>this.selection().length===this.data().technologyIds.length),this.status=nt(()=>{let i=this.data(),o=this.filter(),a=this.selection(),c=new Set(a),C=[],f=[],E=i.technologyIds;if(o){let P=E.map(F=>i.itemEntities[F]);E=this.filterSvc.filter(P,["name"],o,"contains").map(F=>F.id),a=a.filter(F=>E.includes(F))}let V=a;for(let P of E)if(!c.has(P)){let F=i.technologyEntities[P];F.prerequisites==null||F.prerequisites.every(N=>c.has(N))?C.push(P):f.push(P)}return{available:C,locked:f,researched:V}}),this.visible=!1,this.importVisible=!1,this.importValue="",this.Game=ot}clickOpen(i){i=[...i??this.data().technologyIds],this.selection.set(i),this.visible=!0,this.ref.markForCheck()}selectAll(i){this.selection.set(i?[...this.data().technologyIds]:[])}openImport(i){this.importVisible=!0,setTimeout(()=>i.focus())}copyScriptToClipboard(){window.navigator.clipboard.writeText(`/c local list = {}
for _, tech in pairs(game.player.force.technologies) do
    if tech.researched then
        list[#list + 1] = tech.name
    end
end
game.write_file("techs.txt", table.concat(list, ","))
`),this.contentSvc.showToast$.next({severity:"success",detail:this.translateSvc.instant("techPicker.exportScriptCopied"),life:1e5,contentStyleClass:"detail-only"})}importTechs(){let i=this.importValue.split(",").map(a=>a.trim()).map(a=>{if(!a)return"";let c=`${a}-technology`;return this.data().technologyIds.includes(c)?c:this.data().technologyIds.includes(a)?a:""}).filter(a=>!!a),o=new Set(i);this.addPrerequisites(o),this.selection.set(Array.from(o)),this.importValue="",this.importVisible=!1}clickId(i){let o=new Set(this.selection());if(o.has(i)){o.delete(i);let a;do{a=new Set;for(let c of o)this.data().technologyEntities[c].prerequisites?.some(f=>!o.has(f))&&a.add(c);a.forEach(c=>o.delete(c))}while(a.size)}else o.add(i),this.addPrerequisites(o);this.selection.set(Array.from(o))}addPrerequisites(i){let o;do{o=new Set;for(let a of i)this.data().technologyEntities[a].prerequisites?.filter(C=>!i.has(C)).forEach(C=>o.add(C));o.forEach(a=>i.add(a))}while(o.size)}onHide(){let i=this.selection(),o=this.data();i.length===o.technologyIds.length&&this.selectIds.emit(null);let a=i.filter(c=>!i.some(C=>{let f=o.technologyEntities[C];return f.prerequisites&&f.prerequisites.indexOf(c)!==-1}));this.selectIds.emit(a)}setShowTechLabels(i){this.store.dispatch(new z.SetShowTechLabelsAction(i))}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=rt({type:n,selectors:[["lab-tech-picker"]],outputs:{selectIds:"selectIds"},decls:27,vars:49,consts:[["styleClass","picker-dialog","appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","header","breakpoints","visibleChange","onHide"],[1,"d-flex","w-100","my-1","p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-magnifying-glass"],["pInputText","","type","text",1,"w-100",3,"ngModel","input"],["filterInput",""],[1,"p-inputgroup-addon","flex-shrink-0"],["labelStyleClass","text-nowrap",3,"binary","label","ngModel","onChange"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-import",1,"flex-shrink-0",3,"label","pTooltip","click"],["appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","breakpoints","header","visibleChange"],[1,"d-flex","flex-column"],["class","p-inputgroup mb-3"],["rows","10","pInputTextarea","",1,"mt-2","w-100",3,"ngModel","ngModelChange","keydown.enter"],["importInput",""],["pTemplate","footer"],[3,"style"],[1,"p-inputgroup","mb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"label","click"],["href","https://mods.factorio.com/mod/export-researched-technologies","target","_blank","pButton","","pRipple","","icon","fa-solid fa-link",1,"text-decoration-none","p-inputgroup-addon","p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-text",3,"label","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["techSet",""],["techButton",""],[1,"d-flex","flex-wrap","invert"],["pButton","","pRipple","","type","button","tooltipPosition","bottom",1,"me-1","mb-1",3,"label","icon","pTooltip","click"],["tooltip",""],["type","technology",3,"id"]],template:function(o,a){if(o&1){let c=I();_(0,"p-dialog",0),x("visibleChange",function(f){return a.visible=f})("onHide",function(){return a.onHide()}),r(1,"translate"),_(2,"div",1)(3,"span",2),h(4,"i",3),s(),_(5,"input",4,5),x("input",function(){b(c);let f=v(6);return T(a.filter.set(f.value))}),s(),_(7,"span",6)(8,"p-checkbox",7),x("onChange",function(f){return a.selectAll(f.checked)}),r(9,"translate"),s()(),_(10,"span",6)(11,"p-checkbox",7),x("onChange",function(f){return a.setShowTechLabels(f.checked)}),r(12,"translate"),s()(),_(13,"button",8),x("click",function(){b(c);let f=v(24);return T(a.openImport(f))}),r(14,"translate"),r(15,"translate"),s(),_(16,"p-dialog",9),x("visibleChange",function(f){return a.importVisible=f}),r(17,"translate"),_(18,"div",10),u(19,fs,8,9,"div",11),_(20,"div"),S(21),r(22,"translate"),s(),_(23,"textarea",12,13),x("ngModelChange",function(f){return a.importValue=f})("keydown.enter",function(){return a.importVisible=!1}),s()(),u(25,xs,2,3,"ng-template",14),s()(),u(26,Vs,8,15,"p-scrollPanel",15),s()}o&2&&(wt(G(45,Fs)),d("visible",a.visible)("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("header",m(1,31,"techPicker.header"))("breakpoints",G(46,Ps)),p(5),d("ngModel",a.filter()),p(3),d("binary",!0)("label",m(9,33,"techPicker.unlockAll"))("ngModel",a.allSelected()),p(3),d("binary",!0)("label",m(12,35,"techPicker.showLabels"))("ngModel",a.showTechLabels()),p(2),d("label",m(14,37,"techPicker.import"))("pTooltip",m(15,39,"techPicker.importTooltip")),p(3),wt(G(47,Ds)),d("visible",a.importVisible)("modal",!0)("dismissableMask",!0)("draggable",!0)("resizable",!1)("breakpoints",G(48,$s))("header",m(17,41,"techPicker.importHeader")),p(3),g(19,a.data().game===a.Game.Factorio?19:-1),p(2),w(m(22,43,"techPicker.importInstructions")),p(2),d("ngModel",a.importValue),p(3),g(26,a.visible?26:-1))},dependencies:[yt,Gt,gt,ft,Ct,vt,ht,kt,Qt,Mi,Kt,St,Yt,Rt,ut,Tt],styles:[".picker-dialog .p-dialog-header{padding:.75rem 1rem}  .picker-dialog .p-dialog-content{padding:0 1rem 1rem}  .picker-dialog .p-tabview-panels{padding:0}  .picker-dialog .p-scrollpanel-content{padding-top:.5rem;padding-left:1px}  .picker-dialog .p-tabview-nav-link{max-width:10rem}  .picker-dialog p-scrollpanel .p-button-label{margin-left:1rem}"],changeDetection:0});let t=n;return t})();var Me=(()=>{let n=class n{transform(i,o,a){if(i==null)return[];if(!o?.length)return i;let c=new Set(o);return i.filter(C=>!c.has(C.value)||C.value===a)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=U({name:"filterOptions",type:n,pure:!0});let t=n;return t})();function Ns(t,n){if(t&1&&(_(0,"div"),S(1),s()),t&2){let e=l(2);p(),w(e.state)}}function Us(t,n){if(t&1&&(_(0,"div",60)(1,"div"),S(2),r(3,"translate"),s(),u(4,Ns,2,1,"div"),s()),t&2){let e=l();p(2),w(m(3,2,"settings.savedStates")),p(2),g(4,e.state?4:-1)}}function zs(t,n){if(t&1){let e=I();_(0,"div",61)(1,"button",62),x("click",function(){b(e);let o=v(3),a=l();return T(a.setSearch(o.value))}),s(),h(2,"input",63,64),_(4,"button",65),x("click",function(){b(e);let o=v(3),a=l();return T(a.copySearchToClipboard(o.value))}),s()()}if(t&2){let e=l();p(2),d("ngModel",e.BrowserUtility.search)}}function Ls(t,n){if(t&1){let e=I();_(0,"div",61)(1,"input",66,67),x("ngModelChange",function(o){b(e);let a=l();return T(a.editValue=o)})("keydown.enter",function(){b(e);let o=l();return T(o.clickSaveState(o.data().game))}),r(3,"translate"),r(4,"translate"),s(),_(5,"button",68),x("click",function(){b(e);let o=l();return T(o.clickSaveState(o.data().game))}),r(6,"translate"),s(),_(7,"button",69),x("click",function(){b(e);let o=l();return T(o.editState=null)}),r(8,"translate"),s()()}if(t&2){let e=v(2),i=l();p(),d("autofocus",!0)("placeholder",m(3,7,"settings.nameSavedState"))("pTooltip",m(4,9,"settings.nameSavedState"))("ngModel",i.editValue),p(4),d("pTooltip",m(6,11,"settings.saveState"))("disabled",e.invalid),p(2),d("pTooltip",m(8,13,"cancel"))}}function Hs(t,n){if(t&1){let e=I();_(0,"button",73),x("click",function(o){b(e);let a=v(2);return T(a.toggle(o))}),h(1,"p-menu",74,75),s()}if(t&2){let e=l(2);p(),d("popup",!0)("model",e.editStateMenu)}}function Ws(t,n){if(t&1){let e=I();_(0,"button",76),x("click",function(){b(e);let o=l(2);return T(o.openCreateState())}),r(1,"translate"),s()}t&2&&d("pTooltip",m(1,1,"settings.createSavedState"))}function Gs(t,n){if(t&1){let e=I();_(0,"div",70)(1,"p-dropdown",71),x("onChange",function(o){b(e);let a=l();return T(a.setState(o.value,a.gameStates()))}),r(2,"translate"),r(3,"translate"),s(),u(4,Hs,3,2,"button",72)(5,Ws,2,3),s()}if(t&2){let e=l();p(),d("placeholder",m(2,5,"settings.selectSavedState"))("tooltip",m(3,7,"settings.selectSavedState"))("ngModel",e.state)("options",e.savedStates()),p(3),g(4,e.state?4:5)}}function qs(t,n){if(t&1){let e=I();_(0,"button",77),x("click",function(){b(e);let o=l();return T(o.openCreateState())}),r(1,"translate"),s()}t&2&&d("label",m(1,1,"settings.createSavedState"))}function Qs(t,n){if(t&1&&(_(0,"div",60)(1,"div"),S(2),r(3,"translate"),s(),_(4,"div"),S(5),s()()),t&2){let e=l();p(2),w(m(3,2,"settings.game")),p(3),w(e.modRecord()[e.settings().modId]==null?null:e.modRecord()[e.settings().modId].id)}}function Ks(t,n){if(t&1&&(_(0,"small",46),S(1),s()),t&2){let e=n.$implicit;p(),M(" ",e.value," ")}}function Xs(t,n){if(t&1&&(L(0,Ks,2,1,"small",78,Z),r(2,"keyvalue")),t&2){let e=l();H(m(2,0,e.data().version))}}function Js(t,n){t&1&&(_(0,"tr")(1,"th"),S(2),r(3,"translate"),s(),_(4,"th"),S(5),r(6,"translate"),s()()),t&2&&(p(2),w(m(3,2,"settings.mod")),p(3),w(m(6,4,"settings.version")))}function Ys(t,n){if(t&1&&(_(0,"tr")(1,"td"),S(2),s(),_(3,"td"),S(4),s()()),t&2){let e=n.$implicit;p(2),w(e.key),p(2),w(e.value)}}function Zs(t,n){if(t&1){let e=I();_(0,"button",89),x("click",function(){b(e);let o=l(2);return T(o.versionsVisible=!1)}),r(1,"translate"),s()}t&2&&d("label",m(1,1,"ok"))}var t_=()=>({width:"400px",maxHeight:"500px"}),e_=()=>({"400px":"100vw"});function i_(t,n){if(t&1){let e=I();_(0,"div",79)(1,"label",80),S(2),r(3,"translate"),s(),_(4,"small",81)(5,"a",82),S(6),r(7,"translate"),s()(),_(8,"span",70)(9,"p-dropdown",83),x("onChange",function(o){b(e);let a=l();return T(a.setMod(o.value))}),r(10,"translate"),s(),_(11,"button",84),x("click",function(){b(e);let o=l();return T(o.versionsVisible=!0)}),r(12,"translate"),_(13,"p-dialog",85),x("visibleChange",function(o){b(e);let a=l();return T(a.versionsVisible=o)}),r(14,"translate"),_(15,"p-table",86),r(16,"keyvalue"),u(17,Js,7,6,"ng-template",8)(18,Ys,5,2,"ng-template",87),s(),u(19,Zs,2,3,"ng-template",88),s()()()()}if(t&2){let e=l();p(2),w(m(3,18,"settings.modSet")),p(4),w(m(7,20,"settings.requestMod")),p(3),d("filter",!0)("autofocusFilter",!e.contentSvc.isMobile())("tooltip",m(10,22,"settings.modSetTooltip"))("ngModel",e.settings().modId)("options",e.modOptions()),p(2),d("pTooltip",m(12,24,"settings.modVersions")),p(2),wt(G(30,t_)),d("visible",e.versionsVisible)("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("breakpoints",G(31,e_))("header",m(14,26,"settings.modVersions")),p(2),d("value",m(16,28,e.data().version))}}function n_(t,n){t&1&&(_(0,"div"),S(1),r(2,"translate"),s()),t&2&&(p(),w(m(2,1,n)))}function o_(t,n){if(t&1&&(_(0,"div",60)(1,"div"),S(2),r(3,"translate"),s(),u(4,n_,3,3,"div"),s()),t&2){l();let e=v(44),i;p(2),w(m(3,2,"settings.factory")),p(2),g(4,(i=e.label())?4:-1,i)}}function a_(t,n){t&1&&D(0)}function l_(t,n){t&1&&D(0)}var p_=(t,n,e)=>({machineId:t,settings:n,defaults:e});function s_(t,n){if(t&1&&u(0,l_,1,0,"ng-container",90),t&2){let e=n.$implicit;l();let i=v(4),o=l();d("ngTemplateOutlet",i)("ngTemplateOutletContext",Dt(2,p_,e,o.machinesState().entities[e],o.machinesState().entities[""]))}}function __(t,n){if(t&1&&h(0,"button",100),t&2){let e=l(2).machineId;K("invisible",e==="")}}function r_(t,n){t&1&&(_(0,"span",101),r(1,"translate"),h(2,"i",102),s()),t&2&&d("pTooltip",m(1,1,"settings.machineDefaults"))}function c_(t,n){if(t&1&&(_(0,"div",105)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function d_(t,n){if(t&1&&(_(0,"div"),S(1),s()),t&2){let e=l(4).machineId;p(),w(e)}}function m_(t,n){if(t&1&&u(0,c_,3,4,"div",104)(1,d_,2,1),t&2){let e=n.$implicit;g(0,e?0:1)}}function u_(t,n){if(t&1&&h(0,"lab-tooltip",109),t&2){let e=l().$implicit;d("id",e.value)}}function C_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,u_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function g_(t,n){if(t&1){let e=I();_(0,"p-dropdown",103),x("onChange",function(o){b(e);let a=l(2).machineId,c=l(2);return T(c.setMachine(a,o.value,c.data().defaults==null?null:c.data().defaults.machineRankIds))}),r(1,"translate"),r(2,"filterOptions"),u(3,m_,2,1,"ng-template",27)(4,C_,7,6,"ng-template",28),s()}if(t&2){let e=l(2).machineId,i=l(2);d("tooltip",m(1,3,"settings.machineTooltip"))("ngModel",e)("options",dt(2,5,i.options().machines,i.machineIds(),e))}}function f_(t,n){t&1&&(_(0,"div",111),h(1,"i",112),s())}function x_(t,n){if(t&1&&h(0,"lab-tooltip",109),t&2){let e=l().$implicit;d("id",e.value)}}function S_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,x_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function h_(t,n){if(t&1){let e=I();_(0,"p-dropdown",110),x("onChange",function(o){b(e);let a=l(4);return T(a.addMachine(o.value,a.data().defaults==null?null:a.data().defaults.machineRankIds))}),r(1,"translate"),r(2,"filterOptions"),u(3,f_,2,0,"ng-template",27)(4,S_,7,6,"ng-template",28),s()}if(t&2){let e=l(4);d("ngModel",e.options().machines[0]==null?null:e.options().machines[0].value)("tooltip",m(1,3,"settings.addMachineTooltip"))("options",k(2,5,e.options().machines,e.machineIds()))}}function v_(t,n){if(t&1&&(_(0,"div",105)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=n.$implicit;p(),y(m(2,2,e.value))}}function b_(t,n){if(t&1&&h(0,"lab-tooltip",113),t&2){let e=l().$implicit;d("id",e.value)}}function T_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,b_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function w_(t,n){if(t&1){let e=I();_(0,"p-dropdown",103),x("onChange",function(o){b(e);let a=l(2),c=a.machineId,C=a.settings,f=l(2);return T(f.changeFuel(c,o.value,C,C().fuelRankIds))}),r(1,"translate"),u(2,v_,3,4,"ng-template",27)(3,T_,7,6,"ng-template",28),s()}if(t&2){let e=l(2).settings;d("tooltip",m(1,3,"settings.fuelTooltip"))("ngModel",e.fuelId)("options",e.fuelOptions)}}function I_(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(2).$implicit;p(),M("+",e.length-1,"")}}function y_(t,n){if(t&1&&(_(0,"i"),r(1,"iconSmClass"),u(2,I_,2,1,"span"),s()),t&2){let e=l().$implicit;y(m(1,3,e[0])),p(2),g(2,e.length>1?2:-1)}}function B_(t,n){if(t&1&&(_(0,"i"),r(1,"iconSmClass"),s()),t&2){let e=l(7);y(m(1,2,e.ItemId.Module))}}function E_(t,n){if(t&1&&(_(0,"div",105),u(1,y_,3,5,"i",117)(2,B_,2,4),s()),t&2){let e=n.$implicit;p(),g(1,e!=null&&e.length?1:2)}}function k_(t,n){if(t&1&&h(0,"lab-tooltip",118),t&2){let e=l().$implicit;d("id",e.value)}}function M_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,k_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}var Oe=()=>[];function R_(t,n){if(t&1){let e=I();_(0,"p-multiSelect",115),x("onChange",function(o){b(e);let a=l(3),c=a.machineId,C=a.defaults,f=l(2);return T(f.setModuleRank(c,o.value,C==null?null:C.moduleRankIds))}),r(1,"translate"),u(2,E_,3,1,"ng-template",116)(3,M_,7,6,"ng-template",28),s()}if(t&2){let e=l(3).settings,i;d("selectionLimit",2)("tooltip",m(1,4,"settings.modifierTooltip"))("ngModel",e.moduleRankIds)("options",(i=e.moduleOptions)!==null&&i!==void 0?i:G(6,Oe))}}function O_(t,n){if(t&1){let e=I();_(0,"p-inputNumber",120,121),x("onBlur",function(){b(e);let o=v(1),a=l(4).machineId,c=l(2),C;return T(c.setOverclock(a,(C=o.value)!==null&&C!==void 0?C:0,a?c.machinesState().entities[""].overclock:0))}),r(2,"translate"),s()}if(t&2){let e=l(4).settings;d("min",0)("step",1)("maxFractionDigits",0)("showButtons",!0)("pTooltip",m(2,6,"settings.modifierCountTooltip"))("ngModel",e.overclock)}}function V_(t,n){if(t&1&&(_(0,"div",105)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=n.$implicit;p(),y(m(2,2,e.value))}}function F_(t,n){if(t&1&&h(0,"lab-tooltip",118),t&2){let e=l().$implicit;d("id",e.value)}}function P_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,F_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function D_(t,n){if(t&1){let e=I();u(0,O_,3,8,"p-inputNumber",119),_(1,"p-dropdown",103),x("onChange",function(o){b(e);let a=l(3).machineId,c=l(2);return T(c.setModuleRank(a,[o.value],c.data().defaults==null?null:c.data().defaults.moduleRankIds))}),r(2,"translate"),u(3,V_,3,4,"ng-template",27)(4,P_,7,6,"ng-template",28),s()}if(t&2){let e=l(3).settings,i=l(2),o;g(0,i.data().game===i.Game.FinalFactory?0:-1),p(),d("tooltip",m(2,4,"settings.modifierTooltip"))("ngModel",e.moduleRankIds==null?null:e.moduleRankIds[0])("options",(o=e.moduleOptions)!==null&&o!==void 0?o:G(6,Oe))}}function $_(t,n){if(t&1&&u(0,R_,4,7,"p-multiSelect",114)(1,D_,5,7),t&2){let e=l(4);g(0,e.data().game!==e.Game.Satisfactory&&e.data().game!==e.Game.FinalFactory?0:1)}}function j_(t,n){if(t&1){let e=I();_(0,"p-inputNumber",122,123),x("onBlur",function(){b(e);let o=v(1),a=l(2).machineId,c=l(2),C;return T(c.setOverclock(a,(C=o.value)!==null&&C!==void 0?C:0,a?c.machinesState().entities[""].overclock:100))}),r(2,"translate"),s()}if(t&2){let e=l(2).settings;d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",e.overclock)}}function A_(t,n){if(t&1&&(_(0,"div",105)(1,"i"),r(2,"iconSmClass"),s()()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function N_(t,n){if(t&1&&u(0,A_,3,4,"div",104),t&2){let e=n.$implicit;g(0,e?0:-1)}}function U_(t,n){if(t&1&&h(0,"lab-tooltip",126),t&2){let e=l().$implicit;d("id",e.value)}}function z_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,U_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function L_(t,n){if(t&1&&(_(0,"span"),S(1),s()),t&2){let e=l(2).$implicit;p(),M("+",e.length-1,"")}}function H_(t,n){if(t&1&&(_(0,"i"),r(1,"iconSmClass"),u(2,L_,2,1,"span"),s()),t&2){let e=l().$implicit;y(m(1,3,e[0])),p(2),g(2,e.length>1?2:-1)}}function W_(t,n){if(t&1&&(_(0,"i"),r(1,"iconSmClass"),s()),t&2){let e=l(7);y(m(1,2,e.ItemId.Module))}}function G_(t,n){if(t&1&&(_(0,"div",105),u(1,H_,3,5,"i",117)(2,W_,2,4),s()),t&2){let e=n.$implicit;p(),g(1,e!=null&&e.length?1:2)}}function q_(t,n){if(t&1&&h(0,"lab-tooltip",118),t&2){let e=l().$implicit;d("id",e.value)}}function Q_(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,q_,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function K_(t,n){if(t&1){let e=I();_(0,"p-multiSelect",115),x("onChange",function(o){b(e);let a=l(3),c=a.machineId,C=a.defaults,f=l(2);return T(f.changeBeaconModuleRank(c,o.value,C))}),r(1,"translate"),u(2,G_,3,1,"ng-template",116)(3,Q_,7,6,"ng-template",28),s()}if(t&2){let e=l(3).settings,i;d("selectionLimit",2)("tooltip",m(1,4,"settings.beaconModuleTooltip"))("ngModel",e.beaconModuleRankIds)("options",(i=e.beaconModuleOptions)!==null&&i!==void 0?i:G(6,Oe))}}function X_(t,n){if(t&1){let e=I();_(0,"lab-input-number",124),x("setValue",function(o){b(e);let a=l(2),c=a.machineId,C=a.defaults,f=l(2);return T(f.setBeaconCount(c,o,C==null?null:C.beaconCount))}),r(1,"translate"),s(),_(2,"p-dropdown",125),x("onChange",function(o){b(e);let a=l(2),c=a.machineId,C=a.defaults,f=l(2);return T(f.setBeacon(c,o.value,C==null?null:C.beaconId))}),r(3,"translate"),u(4,N_,1,1,"ng-template",27)(5,z_,7,6,"ng-template",28),s(),u(6,K_,4,7,"p-multiSelect",114)}if(t&2){let e=l(2).settings,i=l(2);d("pTooltip",m(1,6,"settings.beaconCountTooltip"))("value",e.beaconCount),p(2),d("tooltip",m(3,8,"settings.beaconTooltip"))("ngModel",e.beaconId)("options",i.options().beacons),p(4),g(6,e.beaconModuleRankIds?6:-1)}}function J_(t,n){if(t&1){let e=I();_(0,"div",95),u(1,__,1,2,"button",96)(2,r_,3,3)(3,g_,5,9,"p-dropdown",97)(4,h_,5,8)(5,w_,4,5,"p-dropdown",97)(6,$_,2,1)(7,j_,3,9,"p-inputNumber",98)(8,X_,7,10),_(9,"button",99),x("click",function(){b(e);let o=l().machineId,a=l(2);return T(a.removeMachine(o,a.data().defaults==null?null:a.data().defaults.machineRankIds))}),r(10,"translate"),s()()}if(t&2){let e=l(),i=e.machineId,o=e.settings,a=l(2);K("mb-1",i===""),p(),g(1,i?1:2),p(2),g(3,i?3:4),p(2),g(5,o.fuelId?5:-1),p(),g(6,o.moduleRankIds?6:-1),p(),g(7,a.data().game===a.Game.Satisfactory?7:-1),p(),g(8,a.data().game===a.Game.Factorio&&o.beaconCount!=null?8:-1),p(),K("invisible",i===""),d("pTooltip",m(10,11,"settings.removeMachinePreference"))}}function Y_(t,n){if(t&1&&u(0,J_,11,13,"div",94),t&2){let e=n.settings;g(0,e?0:-1)}}var Z_=(t,n)=>({machineId:"",settings:t,defaults:n});function tr(t,n){if(t&1){let e=I();u(0,a_,1,0,"ng-container",90),_(1,"p-orderList",91),x("onReorder",function(){b(e);let o=l();return T(o.setMachineRank(o.machineIds(),o.data().defaults==null?null:o.data().defaults.machineRankIds))}),u(2,s_,1,6,"ng-template",28),s(),u(3,Y_,1,1,"ng-template",null,92,B),h(5,"div",93)}if(t&2){let e=v(4),i=l();d("ngTemplateOutlet",e)("ngTemplateOutletContext",q(4,Z_,i.machinesState().entities[""],i.data().defaults)),p(),d("value",i.machineIds())("dragdrop",!0)}}function er(t,n){if(t&1){let e=I();_(0,"div",16)(1,"p-checkbox",38),x("onChange",function(o){b(e);let a=l();return T(a.toggleBeaconReceivers(o.checked))}),r(2,"translate"),r(3,"translate"),s()()}if(t&2){let e=l();p(),d("ngModel",e.settings().beaconReceivers!=null)("binary",!0)("label",m(2,4,"settings.estimateBeaconPowerUsage"))("pTooltip",m(3,6,"settings.estimateBeaconPowerUsageTooltip"))}}function ir(t,n){if(t&1){let e=I();_(0,"div",16)(1,"label",127),S(2),r(3,"translate"),s(),_(4,"lab-input-number",128),x("setValue",function(o){b(e);let a=l();return T(a.setBeaconReceivers(o))}),r(5,"translate"),s()()}t&2&&(p(2),w(m(3,3,"settings.averageBeaconReceivers")),p(2),d("pTooltip",m(5,5,"settings.averageBeaconReceiversTooltip"))("value",n))}function nr(t,n){if(t&1&&(_(0,"div",131)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s()()),t&2){let e=n.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function or(t,n){if(t&1&&h(0,"lab-tooltip",118),t&2){let e=l().$implicit;d("id",e.value)}}function ar(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,or,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function lr(t,n){if(t&1){let e=I();_(0,"div",20)(1,"div",12)(2,"p-dropdown",129),x("onChange",function(o){b(e);let a=l();return T(a.setProliferatorSpray(o.value))}),r(3,"translate"),u(4,nr,5,5,"ng-template",27)(5,ar,7,6,"ng-template",28),s(),_(6,"label",130),S(7),r(8,"translate"),s()()()}if(t&2){let e=l();p(2),d("autoDisplayFirst",!1)("tooltip",m(3,5,"settings.proliferatorSelfSprayTooltip"))("ngModel",e.settings().proliferatorSprayId)("options",e.options().proliferatorModules),p(5),w(m(8,7,"settings.proliferatorSelfSpray"))}}function pr(t,n){if(t&1&&(_(0,"div",131)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s()()),t&2){let e=l().$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function sr(t,n){if(t&1&&u(0,pr,5,5,"div",132),t&2){let e=n.$implicit;g(0,e?0:-1)}}function _r(t,n){if(t&1&&h(0,"lab-tooltip",133),t&2){let e=l().$implicit;d("id",e.value)}}function rr(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,_r,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function cr(t,n){if(t&1&&(_(0,"div",131)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s()()),t&2){let e=n.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function dr(t,n){if(t&1&&h(0,"lab-tooltip",136),t&2){let e=l().$implicit;d("id",e.value)}}function mr(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,dr,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ur(t,n){if(t&1){let e=I();_(0,"div",20)(1,"div",12)(2,"p-dropdown",134),x("onChange",function(o){b(e);let a=l();return T(a.setPipe(o.value,a.data().defaults==null?null:a.data().defaults.pipeId))}),r(3,"translate"),u(4,cr,5,5,"ng-template",27)(5,mr,7,6,"ng-template",28),s(),_(6,"label",135),S(7),r(8,"translate"),s()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultPipeTooltip"))("ngModel",e.settings().pipeId)("options",e.options().pipes),p(5),w(m(8,6,"settings.defaultPipe"))}}function Cr(t,n){if(t&1&&(_(0,"div",131)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s()()),t&2){let e=n.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function gr(t,n){if(t&1&&h(0,"lab-tooltip",139),t&2){let e=l().$implicit;d("id",e.value)}}function fr(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,gr,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function xr(t,n){if(t&1){let e=I();_(0,"div",20)(1,"div",12)(2,"p-dropdown",137),x("onChange",function(o){b(e);let a=l();return T(a.setCargoWagon(o.value,a.data().defaults==null?null:a.data().defaults.cargoWagonId))}),r(3,"translate"),u(4,Cr,5,5,"ng-template",27)(5,fr,7,6,"ng-template",28),s(),_(6,"label",138),S(7),r(8,"translate"),s()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultCargoWagonTooltip"))("ngModel",e.settings().cargoWagonId)("options",e.options().cargoWagons),p(5),w(m(8,6,"settings.defaultCargoWagon"))}}function Sr(t,n){if(t&1&&(_(0,"div",131)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s()()),t&2){let e=n.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function hr(t,n){if(t&1&&h(0,"lab-tooltip",142),t&2){let e=l().$implicit;d("id",e.value)}}function vr(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,hr,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function br(t,n){if(t&1){let e=I();_(0,"div",20)(1,"div",12)(2,"p-dropdown",140),x("onChange",function(o){b(e);let a=l();return T(a.setFluidWagon(o.value,a.data().defaults==null?null:a.data().defaults.fluidWagonId))}),r(3,"translate"),u(4,Sr,5,5,"ng-template",27)(5,vr,7,6,"ng-template",28),s(),_(6,"label",141),S(7),r(8,"translate"),s()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultFluidWagonTooltip"))("ngModel",e.settings().fluidWagonId)("options",e.options().fluidWagons),p(5),w(m(8,6,"settings.defaultFluidWagon"))}}function Tr(t,n){if(t&1&&(_(0,"i"),r(1,"iconSmClass"),s()),t&2){let e=l(4);y(m(1,2,e.ItemId.Module))}}function wr(t,n){if(t&1&&(_(0,"i",146),r(1,"iconSmClass"),s()),t&2){let e=n.$implicit;y(m(1,2,e))}}function Ir(t,n){if(t&1&&L(0,wr,2,4,"i",147,Z),t&2){let e=l().$implicit;H(e)}}function yr(t,n){if(t&1&&(_(0,"div",105),u(1,Tr,2,4,"i",117)(2,Ir,2,0),s()),t&2){let e=n.$implicit;p(),g(1,e!=null&&e.length?2:1)}}function Br(t,n){if(t&1&&h(0,"lab-tooltip",113),t&2){let e=l().$implicit;d("id",e.value)}}function Er(t,n){if(t&1&&(_(0,"div",106)(1,"i"),r(2,"iconSmClass"),s(),_(3,"div",107),S(4),s(),u(5,Br,1,1,"ng-template",null,108,B),s()),t&2){let e=n.$implicit,i=v(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function kr(t,n){if(t&1){let e=I();_(0,"p-multiSelect",145),x("onChange",function(o){let c=b(e),C=l(2);return T(C.setFuels(o.value,c.defaults&&c.defaults.fuelId?[c.defaults.fuelId]:[]))}),r(1,"translate"),u(2,yr,3,1,"ng-template",116)(3,Er,7,6,"ng-template",28),s()}if(t&2){let e=l(2);d("tooltip",m(1,3,"settings.fuelRankTooltip"))("ngModel",e.settings().fuelRankIds)("options",e.options().fuels)}}function Mr(t,n){if(t&1&&(_(0,"div",20)(1,"div",12),u(2,kr,4,5,"p-multiSelect",143),_(3,"label",144),S(4),r(5,"translate"),s()()()),t&2){let e=l(),i;p(2),g(2,(i=e.data())?2:-1,i),p(2),w(m(5,2,"settings.fuelRank"))}}function Rr(t,n){if(t&1){let e=I();_(0,"div",20)(1,"div",12)(2,"p-inputNumber",148,149),x("onBlur",function(){b(e);let o=v(3),a=l(),c;return T(a.setFlowRate((c=o.value)!==null&&c!==void 0?c:1500))}),r(4,"translate"),r(5,"translate"),s(),_(6,"label",150),S(7),r(8,"translate"),s(),_(9,"small",46)(10,"a",151),S(11,"Wiki"),s()()()(),_(12,"div",11)(13,"div",12)(14,"p-dropdown",152),x("onChange",function(o){b(e);let a=l();return T(a.setInserterTarget(o.value))}),r(15,"translate"),s(),_(16,"label",153),S(17),r(18,"translate"),s()()()}if(t&2){let e=l();p(2),d("suffix"," "+m(4,11,"settings.flowRateUnit"))("min",1)("step",100)("showButtons",!0)("pTooltip",m(5,13,"settings.pipeFlowRateTooltip"))("ngModel",e.settings().flowRate),p(5),w(m(8,15,"settings.pipeFlowRate")),p(7),d("tooltip",m(15,17,"settings.inserterTargetTooltip"))("ngModel",e.settings().inserterTarget)("options",e.inserterTargetOptions),p(3),w(m(18,19,"settings.inserterTarget"))}}function Or(t,n){if(t&1){let e=I();_(0,"div",11)(1,"div",12)(2,"p-inputNumber",154,155),x("onBlur",function(){b(e);let o=v(3),a=l(),c;return T(a.setMiningBonus(((c=o.value)!==null&&c!==void 0?c:100)-100))}),r(4,"translate"),s(),_(5,"label",156),S(6),r(7,"translate"),s()()()}if(t&2){let e=l();p(2),d("min",100)("step",10)("showButtons",!0)("pTooltip",m(4,6,"settings.miningSpeedTooltip"))("ngModel",e.settings().miningBonus+100),p(4),w(m(7,8,"settings.miningSpeed"))}}function Vr(t,n){t&1&&(_(0,"div"),S(1),r(2,"translate"),s()),t&2&&(p(),w(m(2,1,n)))}function Fr(t,n){if(t&1&&(_(0,"div",60)(1,"div"),S(2),r(3,"translate"),s(),u(4,Vr,3,3,"div"),s()),t&2){l();let e=v(74),i;p(2),w(m(3,2,"settings.flow")),p(2),g(4,(i=e.label())?4:-1,i)}}function Pr(t,n){if(t&1){let e=I();_(0,"div",20)(1,"span",12)(2,"p-dropdown",157),x("onChange",function(o){b(e);let a=l();return T(a.setSankeyAlign(o.value))}),r(3,"translate"),s(),_(4,"label",158),S(5),r(6,"translate"),s()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.sankeyAlignTooltip"))("ngModel",e.preferences().sankeyAlign)("options",e.sankeyAlignOptions),p(3),w(m(6,6,"settings.sankeyAlign"))}}function Dr(t,n){if(t&1){let e=I();_(0,"p-accordionTab",39),r(1,"translate"),_(2,"div",10)(3,"div",20)(4,"div",12)(5,"p-inputNumber",159,160),x("onBlur",function(){b(e);let o=v(6),a=l(),c;return T(a.setMiningBonus((c=o.value)!==null&&c!==void 0?c:0))}),r(7,"translate"),s(),_(8,"label",161),S(9),r(10,"translate"),s()()(),_(11,"div",20)(12,"div",12)(13,"p-dropdown",162),x("onChange",function(o){b(e);let a=l();return T(a.setResearchSpeed(o.value))}),r(14,"translate"),s(),_(15,"label",163),S(16),r(17,"translate"),s()()(),_(18,"div",11)(19,"div",12)(20,"p-dropdown",164),x("onChange",function(o){b(e);let a=l();return T(a.setInserterCapacity(o.value))}),r(21,"translate"),s(),_(22,"label",165),S(23),r(24,"translate"),s()()()()()}if(t&2){let e=l();d("header",m(1,15,"settings.bonuses")),p(5),d("min",0)("step",10)("showButtons",!0)("pTooltip",m(7,17,"settings.miningProductivityTooltip"))("ngModel",e.settings().miningBonus),p(4),w(m(10,19,"settings.miningProductivity")),p(4),d("pTooltip",m(14,21,"settings.researchSpeedTooltip"))("ngModel",e.settings().researchSpeed)("options",e.researchSpeedOptions),p(3),w(m(17,23,"settings.researchSpeed")),p(4),d("tooltip",m(21,25,"settings.inserterCapacityTooltip"))("ngModel",e.settings().inserterCapacity)("options",e.inserterCapacityOptions),p(3),w(m(24,27,"settings.inserterCapacity"))}}function $r(t,n){if(t&1){let e=I();_(0,"div",20)(1,"span",12)(2,"p-dropdown",166),x("onChange",function(o){b(e);let a=l();return T(a.setPowerUnit(o.value))}),r(3,"translate"),s(),_(4,"label",167),S(5),r(6,"translate"),s()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.powerUnitTooltip"))("ngModel",e.preferences().powerUnit)("options",e.powerUnitOptions),p(3),w(m(6,6,"settings.powerUnit"))}}var jr=()=>({height:"100%"}),Re=t=>({count:t}),Ar=(()=>{let n=class n{constructor(){this.contentSvc=$(lt),this.router=$(mi),this.store=$(mt),this.translateSvc=$(Bt),this.routerSvc=$(Et),this.active=!1,this.hidden=!1,this.itemsState=this.store.selectSignal(W.getItemsState),this.excludedItemIds=this.store.selectSignal(W.getExcludedItemIds),this.recipesState=this.store.selectSignal(j.getRecipesState),this.excludedRecipeIds=this.store.selectSignal(j.getExcludedRecipeIds),this.itemIds=this.store.selectSignal(j.getAvailableItems),this.data=this.store.selectSignal(j.getAdjustedDataset),this.machinesState=this.store.selectSignal(X.getMachinesState),this.settings=this.store.selectSignal(R.getSettings),this.columnsState=this.store.selectSignal(R.getColumnsState),this.options=this.store.selectSignal(R.getOptions),this.modOptions=this.store.selectSignal(R.getModOptions),this.presetOptions=this.store.selectSignal(R.getPresetOptions),this.linkValueOptions=this.store.selectSignal(R.getLinkValueOptions),this.researchedTechnologyIds=this.store.selectSignal(R.getAllResearchedTechnologyIds),this.recipeIds=this.store.selectSignal(R.getAvailableRecipes),this.gameStates=this.store.selectSignal(R.getGameStates),this.savedStates=this.store.selectSignal(R.getSavedStates),this.preferences=this.store.selectSignal(z.preferencesState),this.modRecord=this.store.selectSignal(Si.getModRecord),this.machineIds=nt(()=>[...this.store.selectSignal(X.getMachinesState)().ids]),this.state="",this.editValue="",this.editState=null,this.editStateMenu=[{label:this.translateSvc.instant("settings.createSavedState"),icon:"fa-solid fa-plus",command:()=>this.openCreateState()},{label:this.translateSvc.instant("settings.saveSavedState"),icon:"fa-solid fa-floppy-disk",command:()=>this.overwriteState()},{label:this.translateSvc.instant("settings.editSavedState"),icon:"fa-solid fa-pencil",command:()=>this.openEditState()},{label:this.translateSvc.instant("settings.deleteSavedState"),icon:"fa-solid fa-trash",command:()=>this.clickDeleteState()}],this.versionsVisible=!1,this.displayRateOptions=Wt,this.gameOptions=Ye,this.inserterCapacityOptions=Ze,this.inserterTargetOptions=ti,this.languageOptions=ei,this.powerUnitOptions=oi,this.researchSpeedOptions=ai,this.themeOptions=_i,this.flowDiagramOptions=Xe,this.sankeyAlignOptions=li,this.maximizeTypeOptions=ii,this.FuelType=Je,this.Game=ot,this.ItemId=J,this.FlowDiagram=Ke,this.BrowserUtility=jt}ngOnInit(){this.store.select(R.getGameStates).pipe(it()).subscribe(i=>{this.state=hi(Object.keys(i).find(o=>i[o]===jt.search))})}clickResetSettings(){this.contentSvc.confirm({icon:"fa-solid fa-exclamation-triangle",header:this.translateSvc.instant("settings.reset"),message:this.translateSvc.instant("settings.resetWarning"),acceptLabel:this.translateSvc.instant("yes"),rejectLabel:this.translateSvc.instant("cancel"),accept:()=>{localStorage.clear(),this.resetSettings()}})}setSearch(i){let o=this.router.parseUrl(this.router.url);new URLSearchParams(i).forEach((c,C)=>o.queryParams[C]=c),this.router.navigateByUrl(o)}copySearchToClipboard(i){navigator.clipboard.writeText(i)}setState(i,o){let a=o[i];if(a){let c=this.routerSvc.getParams(a);this.state=i,this.router.navigate([],{queryParams:c})}}clickSaveState(i){!this.editValue||!this.editState||(this.saveState(i,this.editValue,jt.search),this.editState==="edit"&&this.state&&this.removeState(i,this.state),this.editState=null,this.state=this.editValue)}openCreateState(){this.editValue="",this.editState="create"}overwriteState(){this.store.select(R.getGame).pipe(it()).subscribe(i=>{this.saveState(i,this.state,jt.search)})}openEditState(){this.editValue=this.state,this.editState="edit"}clickDeleteState(){this.store.select(R.getGame).pipe(it()).subscribe(i=>{this.removeState(i,this.state),this.state=""})}setGame(i){this.setMod(ri[i].modId)}setExcludedRecipes(i,o,a){let c=[];for(let C of a.recipeIds){let f=i.some(E=>E===C);if(f!==o[C].excluded){let E=(a.defaults?.excludedRecipeIds??[]).some(V=>V===C);c.push({id:C,value:f,def:E})}}this.setRecipeExcludedBatch(c)}setExcludedItems(i,o,a){let c=[];for(let C of a.itemIds){let f=i.some(E=>E===C);f!==o[C].excluded&&c.push({id:C,value:f})}this.setItemExcludedBatch(c)}changeFuel(i,o,a,c){let C=xt.bestMatch(a.fuelOptions?.map(f=>f.value)??[],c);this.setFuel(i,o,C)}changeBeaconModuleRank(i,o,a){i===""?this.setBeaconModuleRank(i,o,[a.beaconModuleId]):this.setBeaconModuleRank(i,o,a.beaconModuleRankIds)}toggleBeaconReceivers(i){this.setBeaconReceivers(i?"1":null)}resetSettings(){this.store.dispatch(new xi.ResetAction)}saveState(i,o,a){this.store.dispatch(new z.SaveStateAction({key:i,id:o,value:a}))}removeState(i,o){this.store.dispatch(new z.RemoveStateAction({key:i,id:o}))}setMod(i){this.store.dispatch(new R.SetModAction(i))}setResearchedTechnologies(i){this.store.dispatch(new R.SetResearchedTechnologiesAction(i))}setItemExcludedBatch(i){this.store.dispatch(new W.SetExcludedBatchAction(i))}setRecipeExcludedBatch(i){this.store.dispatch(new j.SetExcludedBatchAction(i))}setNetProductionOnly(i){this.store.dispatch(new R.SetNetProductionOnlyAction(i))}setSurplusMachinesOutput(i){this.store.dispatch(new R.SetSurplusMachinesOutputAction(i))}setPreset(i){this.store.dispatch(new R.SetPresetAction(i))}addMachine(i,o){this.store.dispatch(new X.AddAction({value:i,def:o}))}removeMachine(i,o){this.store.dispatch(new X.RemoveAction({value:i,def:o}))}setMachineRank(i,o){this.store.dispatch(new X.SetRankAction({value:i,def:o}))}setMachine(i,o,a){this.store.dispatch(new X.SetMachineAction({id:i,value:o,def:a}))}setFuel(i,o,a){this.store.dispatch(new X.SetFuelAction({id:i,value:o,def:a}))}setModuleRank(i,o,a){this.store.dispatch(new X.SetModuleRankAction({id:i,value:o,def:a}))}setOverclock(i,o,a){this.store.dispatch(new X.SetOverclockAction({id:i,value:o,def:a}))}setBeaconCount(i,o,a){this.store.dispatch(new X.SetBeaconCountAction({id:i,value:o,def:a}))}setBeacon(i,o,a){this.store.dispatch(new X.SetBeaconAction({id:i,value:o,def:a}))}setBeaconModuleRank(i,o,a){this.store.dispatch(new X.SetBeaconModuleRankAction({id:i,value:o,def:a}))}setBeaconReceivers(i){this.store.dispatch(new R.SetBeaconReceiversAction(i))}setProliferatorSpray(i){this.store.dispatch(new R.SetProliferatorSprayAction(i))}setBelt(i,o){this.store.dispatch(new R.SetBeltAction({value:i,def:o}))}setPipe(i,o){this.store.dispatch(new R.SetPipeAction({value:i,def:o}))}setCargoWagon(i,o){this.store.dispatch(new R.SetCargoWagonAction({value:i,def:o}))}setFluidWagon(i,o){this.store.dispatch(new R.SetFluidWagonAction({value:i,def:o}))}setFuels(i,o){this.store.dispatch(new R.SetFuelRankAction({value:i,def:o}))}setFlowRate(i){this.store.dispatch(new R.SetFlowRateAction(i))}setInserterTarget(i){this.store.dispatch(new R.SetInserterTargetAction(i))}setMiningBonus(i){this.store.dispatch(new R.SetMiningBonusAction(i))}setResearchSpeed(i){this.store.dispatch(new R.SetResearchSpeedAction(i))}setInserterCapacity(i){this.store.dispatch(new R.SetInserterCapacityAction(i))}setDisplayRate(i,o){this.store.dispatch(new R.SetDisplayRateAction({value:i,prev:o}))}setMaximizeType(i){this.store.dispatch(new R.SetMaximizeTypeAction(i))}setPowerUnit(i){this.store.dispatch(new z.SetPowerUnitAction(i))}setLanguage(i){this.translateSvc.use(i),this.store.dispatch(new z.SetLanguageAction(i))}setTheme(i){this.store.dispatch(new z.SetThemeAction(i))}setBypassLanding(i){this.store.dispatch(new z.SetBypassLandingAction(i))}setHideDuplicateIcons(i){this.store.dispatch(new z.SetHideDuplicateIconsAction(i))}setDisablePaginator(i){this.store.dispatch(new z.SetDisablePaginatorAction(i))}setFlowDiagram(i){this.store.dispatch(new z.SetFlowDiagramAction(i))}setSankeyAlign(i){this.store.dispatch(new z.SetSankeyAlignAction(i))}setLinkSize(i){this.store.dispatch(new z.SetLinkSizeAction(i))}setLinkText(i){this.store.dispatch(new z.SetLinkTextAction(i))}setFlowHideExcluded(i){this.store.dispatch(new z.SetFlowHideExcludedAction(i))}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=rt({type:n,selectors:[["lab-settings"]],hostVars:4,hostBindings:function(o,a){o&2&&K("active",a.active)("hidden",a.hidden)},inputs:{active:"active",hidden:"hidden"},decls:174,vars:201,consts:[[1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","type","button","icon","fa-solid fa-trash","tooltipPosition","bottom",1,"p-button-rounded","p-button-text",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-none","d-xl-inline-flex",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-sm-none",3,"click"],[1,"flex-grow-1","overflow-hidden"],[3,"multiple"],[3,"selected"],["pTemplate","header"],["class","p-inputgroup mb-2"],[1,"p-fluid"],[1,"mt-3"],[1,"p-float-label"],["labDropdownTranslate","","inputId","game",3,"tooltip","ngModel","options","onChange"],["for","game"],["class","position-relative"],[1,"pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-microchip",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],[3,"selectIds"],["techPicker",""],[1,"mt-3","pb-3"],["labDropdownTranslate","","inputId","preset",3,"tooltip","ngModel","options","onChange"],["presetDropdown",""],["for","preset"],["class","pb-3"],["class","mt-3 pb-3"],["labDropdownBase","","inputId","default-transport-belt",3,"tooltip","ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","default-transport-belt"],["class","mt-3"],["labDropdownTranslate","","inputId","flow-diagram",3,"tooltip","ngModel","options","onChange"],["flowDiagramDropdown",""],["for","flow-diagram"],["labDropdownTranslate","","inputId","link-size",3,"tooltip","ngModel","options","onChange"],["for","link-size"],["labDropdownTranslate","","inputId","link-text",3,"tooltip","ngModel","options","onChange"],["for","link-text"],[3,"ngModel","binary","label","pTooltip","onChange"],[3,"header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-rounded","p-button-outlined","mb-2",3,"label","click"],["labDropdownTranslate","","inputId","display-rate",3,"tooltip","ngModel","options","onChange"],["for","display-rate"],[1,"text-end"],["labDropdownTranslate","","inputId","language",3,"tooltip","ngModel","options","onChange"],["for","language"],[1,"position-absolute","end-0","bottom-100","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab","target","_blank"],["labDropdownTranslate","","inputId","theme",3,"tooltip","ngModel","options","onChange"],["for","theme"],[3,"binary","label","ngModel","onChange"],[3,"ngModel","binary","label","onChange"],["labDropdownTranslate","","inputId","maximize-type",3,"tooltip","ngModel","options","onChange"],["for","maximize-type"],["pButton","","pRipple","","type","button","icon","fa-solid fa-boxes-stacked",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],[3,"header","selectIds"],["itemsPicker",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-flask-vial",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],["recipesPicker",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-dollar-sign",1,"p-button-rounded","p-button-outlined","mb-4",3,"label","click"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],[1,"p-inputgroup","mb-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square",1,"p-button-outlined",3,"click"],["pInputText","","type","text",3,"ngModel"],["search",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click"],["pInputText","","pAutoFocus","","type","text","tooltipPosition","top","required","",3,"autofocus","placeholder","pTooltip","ngModel","ngModelChange","keydown.enter"],["nameCtrl","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk","tooltipPosition","top",1,"p-button-outlined",3,"pTooltip","disabled","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined",3,"pTooltip","click"],[1,"p-inputgroup"],["tooltipPosition","top",3,"placeholder","tooltip","ngModel","options","onChange"],["pButton","","pRipple","","type","button","class","p-button-outlined","icon","fa-solid fa-ellipsis-vertical"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined",3,"click"],["appendTo","body",3,"popup","model"],["stateMenu",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk",1,"p-button-outlined","p-button-rounded","w-100",3,"label","click"],["class","position-absolute end-0 bottom-100 me-1 mb-1"],[1,"position-relative"],[1,"p-static-label"],[1,"position-absolute","end-0","top-0","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=","target","_blank"],["inputId","mod","styleClass","w-100",3,"filter","autofocusFilter","tooltip","ngModel","options","onChange"],["pButton","","pRipple","","icon","fa-solid fa-info",1,"p-button-outlined",3,"pTooltip","click"],["appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","breakpoints","header","visibleChange"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-text",3,"label","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value","dragdrop","onReorder"],["machineRow",""],[1,"pt-3"],["class","p-inputgroup flex-wrap machine-preference",3,"mb-1"],[1,"p-inputgroup","flex-wrap","machine-preference"],["pButton","","pRipple","","type","button","class","p-button-outlined cursor-grab","icon","fa-solid fa-grip-lines",3,"invisible"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options"],["labNoDrag","","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","ms-auto",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab"],[1,"p-inputgroup-addon",3,"pTooltip"],[1,"fa-solid","fa-industry"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options","onChange"],["class","d-flex"],[1,"d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["tooltip",""],["type","machine",3,"id"],["labDropdownBase","icon",3,"ngModel","tooltip","options","onChange"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"fa-solid","fa-plus"],["type","fuel",3,"id"],["labNoDrag","","appendTo","body","scrollHeight","40vh","styleClass","icon","panelStyleClass","tooltip","placeholder","unused","tooltipPosition","top",3,"selectionLimit","tooltip","ngModel","options"],["labNoDrag","","appendTo","body","scrollHeight","40vh","styleClass","icon","panelStyleClass","tooltip","placeholder","unused","tooltipPosition","top",3,"selectionLimit","tooltip","ngModel","options","onChange"],["pTemplate","selectedItems"],[3,"class"],["type","module",3,"id"],["labNoDrag","","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["labNoDrag","","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","step","maxFractionDigits","showButtons","pTooltip","ngModel","onBlur"],["duplicatorsInput",""],["labNoDrag","","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel","onBlur"],["overclockInput",""],["labNoDrag","","tooltipPosition","top",3,"pTooltip","value","setValue"],["labDropdownBase","icon","labNoDrag","","tooltipPosition","top",3,"tooltip","ngModel","options","onChange"],["type","beacon",3,"id"],["for","beacon-receivers",1,"p-static-label"],["inputId","beacon-receivers",1,"w-100",3,"pTooltip","value","setValue"],["labDropdownBase","","inputId","proliferator-self-spray",3,"autoDisplayFirst","tooltip","ngModel","options","onChange"],["for","proliferator-self-spray"],[1,"d-flex","align-items-center","h-100"],["class","d-flex align-items-center h-100"],["type","belt",3,"id"],["labDropdownBase","","inputId","default-pipe",3,"tooltip","ngModel","options","onChange"],["for","default-pipe"],["type","pipe",3,"id"],["labDropdownBase","","inputId","default-cargo-wagon",3,"tooltip","ngModel","options","onChange"],["for","default-cargo-wagon"],["type","cargo-wagon",3,"id"],["labDropdownBase","","inputId","default-fluid-wagon",3,"tooltip","ngModel","options","onChange"],["for","default-fluid-wagon"],["type","fluid-wagon",3,"id"],["appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options"],["for","fuel-rank"],["appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options","onChange"],[1,"mx-2"],["class","mx-2",3,"class"],["inputId","pipe-flow-rate","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"suffix","min","step","showButtons","pTooltip","ngModel","onBlur"],["flowRateInput",""],["for","pipe-flow-rate"],["href","https://wiki.factorio.com/Fluid_system#Pipelines","target","_blank"],["labDropdownTranslate","","inputId","inserter-target",3,"tooltip","ngModel","options","onChange"],["for","inserter-target"],["inputId","mining-speed","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"min","step","showButtons","pTooltip","ngModel","onBlur"],["miningBonusInput",""],["for","mining-speed"],["labDropdownTranslate","","inputId","sankey-align",3,"tooltip","ngModel","options","onChange"],["for","sankey-align"],["inputId","mining-productivity","prefix","+","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"min","step","showButtons","pTooltip","ngModel","onBlur"],["miningProdInput",""],["for","mining-productivity"],["labDropdownTranslate","","inputId","research-speed",3,"pTooltip","ngModel","options","onChange"],["for","research-speed"],["labDropdownTranslate","","inputId","inserter-capacity",3,"tooltip","ngModel","options","onChange"],["for","inserter-capacity"],["labDropdownTranslate","","inputId","power-unit",3,"tooltip","ngModel","options","onChange"],["for","power-unit"]],template:function(o,a){if(o&1){let c=I();_(0,"div",0)(1,"div",1)(2,"h2"),S(3),r(4,"translate"),s(),_(5,"div")(6,"button",2),x("click",function(){return a.clickResetSettings()}),r(7,"translate"),s(),_(8,"button",3),x("click",function(){return a.contentSvc.toggleSettingsXl()}),s(),_(9,"button",4),x("click",function(){return a.contentSvc.toggleSettings()}),s()()()(),_(10,"div",5)(11,"p-scrollPanel")(12,"p-accordion",6)(13,"p-accordionTab",7),u(14,Us,5,4,"ng-template",8)(15,zs,5,1,"div",9)(16,Ls,9,15,"div",9)(17,Gs,6,9)(18,qs,2,3),s(),_(19,"p-accordionTab",7),u(20,Qs,6,4,"ng-template",8),_(21,"div",10)(22,"div",11)(23,"span",12)(24,"p-dropdown",13),x("onChange",function(f){return a.setGame(f.value)}),r(25,"translate"),s(),_(26,"label",14),S(27),r(28,"translate"),s(),u(29,Xs,3,2),s()(),u(30,i_,20,32,"div",15),s()(),_(31,"p-accordionTab",7),u(32,o_,5,4,"ng-template",8),_(33,"div",10)(34,"div",16)(35,"button",17),x("click",function(){b(c);let f=v(40);return T(f.clickOpen(a.researchedTechnologyIds()))}),r(36,"translate"),r(37,"translate"),r(38,"translate"),s(),_(39,"lab-tech-picker",18,19),x("selectIds",function(f){return a.setResearchedTechnologies(f)}),s()(),_(41,"div",20)(42,"span",12)(43,"p-dropdown",21,22),x("onChange",function(f){return a.setPreset(f.value)}),r(45,"translate"),s(),_(46,"label",23),S(47),r(48,"translate"),s()()(),u(49,tr,6,7)(50,er,4,8,"div",24)(51,ir,6,7,"div",24)(52,lr,9,9,"div",25),_(53,"div",20)(54,"div",12)(55,"p-dropdown",26),x("onChange",function(f){return a.setBelt(f.value,a.data().defaults==null?null:a.data().defaults.beltId)}),r(56,"translate"),u(57,sr,1,1,"ng-template",27)(58,rr,7,6,"ng-template",28),s(),_(59,"label",29),S(60),r(61,"translate"),s()()(),u(62,ur,9,8,"div",25)(63,xr,9,8,"div",25)(64,br,9,8,"div",25)(65,Mr,6,4,"div",25)(66,Rr,19,21)(67,Or,8,10,"div",30),s()(),_(68,"p-accordionTab"),u(69,Fr,5,4,"ng-template",8),_(70,"div",10)(71,"div",20)(72,"span",12)(73,"p-dropdown",31,32),x("onChange",function(f){return a.setFlowDiagram(f.value)}),r(75,"translate"),s(),_(76,"label",33),S(77),r(78,"translate"),s()()(),u(79,Pr,7,8,"div",25),_(80,"div",20)(81,"span",12)(82,"p-dropdown",34),x("onChange",function(f){return a.setLinkSize(f.value)}),r(83,"translate"),s(),_(84,"label",35),S(85),r(86,"translate"),s()()(),_(87,"div",20)(88,"span",12)(89,"p-dropdown",36),x("onChange",function(f){return a.setLinkText(f.value)}),r(90,"translate"),s(),_(91,"label",37),S(92),r(93,"translate"),s()()(),_(94,"div",16)(95,"p-checkbox",38),x("onChange",function(f){return a.setFlowHideExcluded(f.checked)}),r(96,"translate"),r(97,"translate"),s()()()(),u(98,Dr,25,29,"p-accordionTab",39),_(99,"p-accordionTab",39),r(100,"translate"),_(101,"div",10)(102,"button",40),x("click",function(){return a.contentSvc.showColumns$.next()}),r(103,"translate"),s(),_(104,"div",20)(105,"span",12)(106,"p-dropdown",41),x("onChange",function(f){return a.setDisplayRate(f.value,a.settings().displayRate)}),r(107,"translate"),s(),_(108,"label",42),S(109),r(110,"translate"),s()()(),u(111,$r,7,8,"div",25),_(112,"div",20),h(113,"div",43),_(114,"div",12)(115,"p-dropdown",44),x("onChange",function(f){return a.setLanguage(f.value)}),r(116,"translate"),s(),_(117,"label",45),S(118),r(119,"translate"),s(),_(120,"small",46)(121,"a",47),S(122),r(123,"translate"),s()()()(),_(124,"div",20)(125,"div",12)(126,"p-dropdown",48),x("onChange",function(f){return a.setTheme(f.value)}),r(127,"translate"),s(),_(128,"label",49),S(129),r(130,"translate"),s()()(),_(131,"div",16)(132,"p-checkbox",50),x("onChange",function(f){return a.setBypassLanding(f.checked)}),r(133,"translate"),s()(),_(134,"div",16)(135,"p-checkbox",51),x("onChange",function(f){return a.setHideDuplicateIcons(f.checked)}),r(136,"translate"),s()(),_(137,"div")(138,"p-checkbox",51),x("onChange",function(f){return a.setDisablePaginator(f.checked)}),r(139,"translate"),s()()()(),_(140,"p-accordionTab",39),r(141,"translate"),_(142,"div",10)(143,"div",20)(144,"span",12)(145,"p-dropdown",52),x("onChange",function(f){return a.setMaximizeType(f.value)}),r(146,"translate"),s(),_(147,"label",53),S(148),r(149,"translate"),s()()(),_(150,"div",16)(151,"p-checkbox",38),x("onChange",function(f){return a.setNetProductionOnly(f.checked)}),r(152,"translate"),r(153,"translate"),s()(),_(154,"div",16)(155,"p-checkbox",38),x("onChange",function(f){return a.setSurplusMachinesOutput(f.checked)}),r(156,"translate"),r(157,"translate"),s()(),_(158,"div",16)(159,"button",54),x("click",function(){b(c);let f=v(163);return T(f.clickOpen("item",a.itemIds(),a.excludedItemIds()))}),r(160,"translate"),r(161,"translate"),s(),_(162,"lab-picker",55,56),x("selectIds",function(f){return a.setExcludedItems(f,a.itemsState(),a.data())}),r(164,"translate"),s()(),_(165,"div",16)(166,"button",57),x("click",function(){b(c);let f=v(170);return T(f.clickOpen("recipe",a.recipeIds(),a.excludedRecipeIds()))}),r(167,"translate"),r(168,"translate"),s(),_(169,"lab-picker",55,58),x("selectIds",function(f){return a.setExcludedRecipes(f,a.recipesState(),a.data())}),r(171,"translate"),s()(),_(172,"button",59),x("click",function(){return a.contentSvc.showCosts$.next()}),r(173,"translate"),s()()()()()()}if(o&2){let c;p(3),w(m(4,101,"settings.header")),p(3),d("pTooltip",m(7,103,"settings.reset")),p(5),wt(G(194,jr)),p(),d("multiple",!0),p(),d("selected",!0),p(2),g(15,a.BrowserUtility.isStandalone?15:-1),p(),g(16,a.editState?16:a.savedStates().length?17:18),p(3),d("selected",!0),p(3),K("pb-3",a.data().game===a.Game.Factorio),p(2),d("tooltip",m(25,105,"settings.gameTooltip"))("ngModel",a.data().game)("options",a.gameOptions),p(3),w(m(28,107,"settings.game")),p(2),g(29,a.data().game!==a.Game.Factorio?29:-1),p(),g(30,a.data().game===a.Game.Factorio?30:-1),p(),d("selected",!0),p(4),d("pTooltip",m(36,109,"settings.techsTooltip"))("label",a.researchedTechnologyIds()?k(37,111,"settings.techsResearched",ct(195,Re,a.researchedTechnologyIds().length)):m(38,114,"settings.allTechsResearched")),p(8),d("tooltip",m(45,116,"settings.presetTooltip"))("ngModel",a.settings().preset)("options",a.presetOptions()),p(4),w(m(48,118,"settings.preset")),p(2),g(49,a.data().game!==a.Game.CaptainOfIndustry?49:-1),p(),g(50,a.data().game===a.Game.Factorio?50:-1),p(),g(51,(c=a.settings().beaconReceivers)?51:-1,c),p(),g(52,a.data().game===a.Game.DysonSphereProgram?52:-1),p(3),d("tooltip",m(56,120,"settings.defaultTransportBeltTooltip"))("ngModel",a.settings().beltId)("options",a.options().belts),p(5),w(m(61,122,"settings.defaultTransportBelt")),p(2),g(62,a.data().pipeIds.length>1?62:-1),p(),g(63,a.data().cargoWagonIds.length>1?63:-1),p(),g(64,a.data().fluidWagonIds.length>1?64:-1),p(),g(65,a.data().fuelIds.length&&a.data().game!==a.Game.Satisfactory?65:-1),p(),g(66,a.data().game===a.Game.Factorio?66:-1),p(),g(67,a.data().game===a.Game.DysonSphereProgram?67:-1),p(6),d("tooltip",m(75,124,"settings.flowDiagramTooltip"))("ngModel",a.preferences().flowDiagram)("options",a.flowDiagramOptions),p(4),w(m(78,126,"settings.flowDiagram")),p(2),g(79,a.preferences().flowDiagram===a.FlowDiagram.Sankey?79:-1),p(3),d("tooltip",m(83,128,"settings.linkSizeTooltip"))("ngModel",a.preferences().linkSize)("options",a.linkValueOptions()),p(3),w(m(86,130,"settings.linkSize")),p(4),d("tooltip",m(90,132,"settings.linkTextTooltip"))("ngModel",a.preferences().linkText)("options",a.linkValueOptions()),p(3),w(m(93,134,"settings.linkText")),p(3),d("ngModel",a.preferences().flowHideExcluded)("binary",!0)("label",m(96,136,"settings.flowHideExcluded"))("pTooltip",m(97,138,"settings.flowHideExcludedTooltip")),p(3),g(98,a.data().game===a.Game.Factorio?98:-1),p(),d("header",m(100,140,"settings.display")),p(3),d("label",m(103,142,"settings.openColumnSettings")),p(4),d("tooltip",m(107,144,"settings.displayRateTooltip"))("ngModel",a.settings().displayRate)("options",a.displayRateOptions),p(3),w(m(110,146,"settings.displayRate")),p(2),g(111,a.columnsState().power.show?111:-1),p(4),d("tooltip",m(116,148,"settings.languageTooltip"))("ngModel",a.preferences().language)("options",a.languageOptions),p(3),w(m(119,150,"settings.language")),p(4),w(m(123,152,"settings.helpTranslate")),p(4),d("tooltip",m(127,154,"settings.themeTooltip"))("ngModel",a.preferences().theme)("options",a.themeOptions),p(3),w(m(130,156,"settings.theme")),p(3),d("binary",!0)("label",m(133,158,"settings.bypassLanding"))("ngModel",a.preferences().bypassLanding),p(3),d("ngModel",a.preferences().hideDuplicateIcons)("binary",!0)("label",m(136,160,"settings.hideDuplicateIcons")),p(3),d("ngModel",a.preferences().disablePaginator)("binary",!0)("label",m(139,162,"settings.disablePaginator")),p(2),d("header",m(141,164,"settings.advanced")),p(5),d("tooltip",m(146,166,"settings.maximizeTypeTooltip"))("ngModel",a.settings().maximizeType)("options",a.maximizeTypeOptions),p(3),w(m(149,168,"settings.maximizeType")),p(3),d("ngModel",a.settings().netProductionOnly)("binary",!0)("label",m(152,170,"settings.netProductionOnly"))("pTooltip",m(153,172,"settings.netProductionOnlyTooltip")),p(4),d("ngModel",a.settings().surplusMachinesOutput)("binary",!0)("label",m(156,174,"settings.surplusMachinesOutput"))("pTooltip",m(157,176,"settings.surplusMachinesOutputTooltip")),p(4),d("pTooltip",m(160,178,"settings.itemsTooltip"))("label",k(161,180,"settings.itemsExcluded",ct(197,Re,a.excludedItemIds().length))),p(3),d("header",m(164,183,"settings.itemsHeader")),p(4),d("pTooltip",m(167,185,"settings.recipesTooltip"))("label",k(168,187,"settings.recipesExcluded",ct(199,Re,a.excludedRecipeIds().length))),p(3),d("header",m(171,190,"settings.recipesHeader")),p(3),d("label",m(173,192,"settings.openCosts"))}},dependencies:[yt,Gt,gt,fi,ft,Ei,Bi,Ct,bi,vt,ht,kt,Qt,bt,Xt,Kt,Ri,Vi,ee,St,Yt,Jt,Mt,Zt,Rt,te,ke,Nt,Ut,Ht,ut,Tt,Me],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:fixed;z-index:4;top:0;left:0;transition:transform .4s cubic-bezier(.05,.74,.2,.99);width:322px;height:100%;background-color:var(--surface-overlay)}@media (max-width: 1199.98px){[_nghost-%COMP%]{transform:translate(-100%)}.active[_nghost-%COMP%]{transform:translate(0)}}@media (min-width: 1200px){.hidden[_nghost-%COMP%]{transform:translate(-100%)}}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-content{overflow-y:scroll}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-bar-x{visibility:hidden}[_nghost-%COMP%]     .p-accordion{width:323px}.p-inputgroup.machine-preference[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%], .p-inputgroup.machine-preference[_ngcontent-%COMP%]   p-multiselect[_ngcontent-%COMP%]{flex-basis:36px;flex-grow:0;flex-shrink:0}"],changeDetection:0});let t=n;return t})();var Nc=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=Ae({type:n}),n.\u0275inj=je({imports:[qe,ce,Di,ce]});let t=n;return t})();export{ms as a,Ar as b,is as c,Nc as d};

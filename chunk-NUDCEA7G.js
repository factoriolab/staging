import{$ as V,$b as Ci,$c as wi,$d as Vi,Aa as u,Ae as Hi,Bb as N,Ca as d,Cb as rt,Cd as U,Da as J,Dd as R,Ea as ke,Eb as ei,Fa as I,Fb as ti,Ga as g,Gb as ii,Ha as Y,Hb as ni,I as Ce,Ia as ee,Ib as fe,Ja as F,Jb as oi,Jc as ae,Ka as D,Kb as ai,Kd as Ei,L as Lt,La as r,Lb as li,Ma as s,Mb as L,Md as Ne,Na as S,Nb as pi,Oa as j,Ob as si,Oc as $e,Od as ct,Pa as y,Pb as be,Pc as le,Pd as re,Qa as x,Qb as ri,Qd as Ue,Ra as p,Rb as ue,Rd as dt,Sa as Pe,Sb as yt,Sd as mt,Ta as Fe,Tb as _i,Td as ut,Ua as De,Ub as Qe,Ud as ki,V as Le,Va as T,Vb as ci,Vd as _e,Wa as h,Xa as w,Xb as di,Xc as _t,Xd as ce,Y as Wt,Ya as O,Yb as It,Yd as Ct,Zb as mi,Zc as pe,Zd as Mi,_b as ui,_c as se,_d as Oi,a as Ee,aa as We,ab as X,ad as Bt,b as lt,ba as te,bb as ye,bc as gi,bd as xe,be as Be,ca as Gt,cb as q,cc as fi,da as pt,db as Ge,dd as yi,de as Ri,ea as z,eb as qe,ed as Ii,ee as de,fa as v,fb as _,fd as Ke,ga as b,gb as m,ge as gt,ha as qt,hb as k,hd as Bi,ib as ge,j as zt,jb as B,kc as xi,ke as he,le as ft,ma as Qt,mb as Jt,mc as ne,me as xt,na as Kt,nc as oe,ne as Pi,oc as Ie,oe as Fi,pc as hi,pd as Xe,qa as Z,qc as Si,qd as Ae,qe as Di,ra as ie,rb as je,s as wt,sc as vi,sd as H,se as ji,ta as l,tb as st,tc as bi,te as $i,ub as Yt,ud as M,ue as Ai,va as Xt,vd as G,ve as Ni,wa as Ve,wd as Q,we as ht,xa as Re,yc as Ti,ye as Ui,z as Ht,za as Zt,ze as zi}from"./chunk-KFYW5HLG.js";var ze=(()=>{let o=class o{static transform(i){return i.itemId??i.recipeObjectiveId??i.recipeId??i.id}transform(i){return o.transform(i)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"stepId",type:o,pure:!0});let e=o;return e})();var Te=(()=>{let o=class o{constructor(){this.contentSvc=V(xe),this.pDropdown=V(ce,{self:!0}),this.labDropdownBase=Le(),this.setAutoFocusFilter=Ve(()=>{let i=this.contentSvc.isMobile();this.pDropdown.autofocusFilter=!i}),this.setStyleClass=Ve(()=>{this.pDropdown.styleClass=this.labDropdownBase()})}ngOnInit(){this.pDropdown.appendTo="body",this.pDropdown.filter=!0,this.pDropdown.scrollHeight="40vh",this.pDropdown.panelStyleClass="tooltip"}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=pt({type:o,selectors:[["","labDropdownBase",""]],inputs:{labDropdownBase:[We.SignalBased,"labDropdownBase"]}});let e=o;return e})();var Ze=(()=>{let o=class o{transform(i,n,a){if(i==null)return[];if(!n?.length)return i;let c=new Set(n);return i.filter(C=>!c.has(C.value)||C.value===a)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"filterOptions",type:o,pure:!0});let e=o;return e})();function Zi(e,o){if(e&1&&(r(0,"div",11)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function Ji(e,o){if(e&1&&S(0,"lab-tooltip",15),e&2){let t=p().$implicit;d("id",t.value)}}function Yi(e,o){if(e&1&&(r(0,"div",12)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",13),h(4),s(),u(5,Ji,1,1,"ng-template",null,14,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function en(e,o){if(e&1){let t=y();r(0,"div",5)(1,"lab-input-number",6),x("setValue",function(n){let c=v(t).$index,C=p();return b(C.setCount(n,c))}),s(),r(2,"p-dropdown",7),x("onChange",function(n){let c=v(t).$index,C=p();return b(C.setId(n,c))}),_(3,"filterOptions"),u(4,Zi,3,4,"ng-template",8)(5,Yi,7,6,"ng-template",9),s(),r(6,"button",10),x("click",function(){let a=v(t).$index,c=p();return b(c.removeEntry(a))}),s()()}if(e&2){let t=o.$implicit,i=o.$index,n=p();l(),d("value",t.count)("maximum",n.maximum()[i])("disabled",t.id===n.ItemId.Module),l(),d("ngModel",t.id)("options",ge(3,6,n.options(),n.exclude(),t.id)),l(4),d("disabled",t.id===n.ItemId.Module)}}var Me=(()=>{let o=class o{constructor(){this.store=V(ae),this.setValue=new Re,this.data=this.store.selectSignal(M.getDataset),this.values=ie([]),this.options=ie([]),this.slots=ie(!0),this.cancel=ie(!1),this.exclude=Z(()=>this.values().map(i=>i.id)),this.sum=Z(()=>N.sum(this.values().map(i=>i.count))),this.maximum=Z(()=>{let i=this.values(),n=this.slots();if(n===!0)return i.map(()=>{});let a=N.fromNumber(n),c=this.sum(),C=i.find(E=>E.id===L.Module);C&&(c=c.sub(C.count));let f=a.sub(c);return i.map(E=>E.count.add(f))}),this.ItemId=L}show(i,n,a,c){let C=a.modules;C!=null&&(this.values.set(n),this.options.set(Ae.moduleOptions(a,this.data(),c)),this.slots.set(C),this.cancel.set(!1),this.overlayPanel?.toggle(i))}hide(i){i&&this.cancel.set(i),this.overlayPanel?.hide()}clone(i){return i.map(n=>Ee({},n))}setCount(i,n){this.values.update(a=>(a=this.clone(a),a[n].count=i,this.updateEmpty(a),a))}setId(i,n){i.originalEvent.stopPropagation(),this.values.update(a=>(a=this.clone(a),a[n].id=i.value,a))}removeEntry(i){this.values.update(n=>(n=this.clone(n),n=n.filter((a,c)=>c!==i),this.updateEmpty(n),n))}updateEmpty(i){let n=this.slots();if(n===!0)return;let a=N.fromNumber(n),c=N.sum(i.map(C=>C.count));if(c.lt(a)){let C=a.sub(c),f=i.find(E=>E.id===L.Module);f?f.count=f.count.add(C):i.push({id:L.Module,count:C})}else if(c.gt(a)){let C=c.sub(a),f=i.find(E=>E.id===L.Module);f&&(f.count=f.count.sub(C),f.count.isZero()&&i.splice(i.indexOf(f),1))}}onHide(){this.cancel()||this.setValue.emit(this.values().filter(i=>i.count.nonzero()))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=te({type:o,selectors:[["lab-modules-overlay"]],viewQuery:function(n,a){if(n&1&&Pe(Ie,5),n&2){let c;Fe(c=De())&&(a.overlayPanel=c.first)}},outputs:{setValue:"setValue"},decls:9,vars:6,consts:[["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"label","click"],[1,"p-inputgroup"],["width","3rem",3,"value","maximum","disabled","setValue"],["labDropdownBase","icon",3,"ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"disabled","click"],[1,"d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["tooltip",""],["type","module",3,"id"],["class","p-inputgroup"]],template:function(n,a){n&1&&(r(0,"p-overlayPanel",0),x("onHide",function(){return a.onHide()}),r(1,"div",1),F(2,en,7,10,"div",16,Y),r(4,"div",2)(5,"button",3),x("click",function(){return a.hide()}),_(6,"translate"),s(),r(7,"button",4),x("click",function(){return a.hide(!0)}),_(8,"translate"),s()()()()),n&2&&(l(2),D(a.values()),l(3),d("label",m(6,2,"ok")),l(2),d("label",m(8,4,"cancel")))},dependencies:[pe,se,ne,_e,re,ce,Ie,oe,Be,he,Te,le,de,Ze],changeDetection:0});let e=o;return e})();function tn(e,o){if(e&1){let t=y();r(0,"lab-input-number",8),x("setValue",function(n){v(t);let a=p().$index,c=p();return b(c.setTotal(n,a))}),_(1,"translate"),s()}if(e&2){let t=p().$implicit;d("pTooltip",m(1,2,"beaconsOverlay.totalTooltip"))("value",t.total)}}function nn(e,o){if(e&1&&(r(0,"div",2)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function on(e,o){if(e&1&&S(0,"lab-tooltip",21),e&2){let t=p().$implicit;d("id",t.value)}}function an(e,o){if(e&1&&(r(0,"div",18)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",19),h(4),s(),u(5,on,1,1,"ng-template",null,20,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function ln(e,o){if(e&1&&(r(0,"i",22),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function pn(e,o){if(e&1){let t=y();r(0,"div",7)(1,"lab-input-number",8),x("setValue",function(n){let c=v(t).$index,C=p();return b(C.setCount(n,c))}),_(2,"translate"),s(),u(3,tn,2,4,"lab-input-number",9),r(4,"p-dropdown",10),x("onChange",function(n){let c=v(t).$index,C=p();return b(C.setId(n,c))}),u(5,nn,3,4,"ng-template",11)(6,an,7,6,"ng-template",12),s(),r(7,"button",13),x("click",function(n){let c=v(t).$implicit,C=T(12),f=p();return b(C.show(n,c.modules,f.data().beaconEntities[c.id],f.recipeId()))}),F(8,ln,4,5,"i",23,ee),S(10,"i",14),s(),r(11,"lab-modules-overlay",15,16),x("setValue",function(n){let c=v(t).$index,C=p();return b(C.setModules(n,c))}),s(),r(13,"button",17),x("click",function(){let a=v(t).$index,c=p();return b(c.removeEntry(a))}),s()()}if(e&2){let t=o.$implicit,i=p();l(),d("pTooltip",m(2,5,"beaconsOverlay.eachTooltip"))("value",t.count),l(2),g(3,t.total?3:-1),l(),d("ngModel",t.id)("options",i.options().beacons),l(4),D(t.modules)}}var at=(()=>{let o=class o{constructor(){this.store=V(ae),this.setValue=new Re,this.data=this.store.selectSignal(M.getDataset),this.options=this.store.selectSignal(M.getOptions),this.values=ie([]),this.recipeId=ie(void 0),this.cancel=ie(!1)}show(i,n,a){this.values.set(n.map(c=>lt(Ee({},c),{modules:c.modules.map(C=>Ee({},C))}))),this.recipeId.set(a),this.cancel.set(!1),this.overlayPanel?.toggle(i)}hide(i){i&&this.cancel.set(i),this.overlayPanel?.hide()}setCount(i,n){this.values.update(a=>(a[n].count=i,a))}setTotal(i,n){this.values.update(a=>(a[n].total=i,a))}setId(i,n){i.originalEvent.stopPropagation(),this.values.update(a=>(a[n].id=i.value,a))}setModules(i,n){this.values.update(a=>(a[n].modules=i,a))}removeEntry(i){this.values.update(n=>n.filter((a,c)=>c!==i))}addEntry(){this.values.update(i=>{let n=this.options().beacons[0].value,a=N.fromNumber(this.data().beaconEntities[n].modules),c=[{id:L.Module,count:a}];return i.push({id:n,count:N.zero,modules:c}),i})}onHide(){this.cancel()||this.setValue.emit(this.values().filter(i=>i.count.nonzero()))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=te({type:o,selectors:[["lab-beacons-overlay"]],viewQuery:function(n,a){if(n&1&&Pe(Ie,5),n&2){let c;Fe(c=De())&&(a.overlayPanel=c.first)}},outputs:{setValue:"setValue"},decls:12,vars:9,consts:[["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"label","click"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"label","click"],[1,"p-inputgroup"],["width","3rem","tooltipPosition","top",3,"pTooltip","value","setValue"],["width","3rem","tooltipPosition","top",3,"pTooltip","value"],["labDropdownBase","icon",3,"ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-outlined",3,"click"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["modulesOverlay",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"click"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["tooltip",""],["type","beacon",3,"id"],[1,"p-button-icon"],["class","p-button-icon",3,"class"],["class","p-inputgroup"]],template:function(n,a){n&1&&(r(0,"p-overlayPanel",0),x("onHide",function(){return a.onHide()}),r(1,"div",1),F(2,pn,14,7,"div",24,Y),r(4,"div",2)(5,"button",3),x("click",function(){return a.addEntry()}),_(6,"translate"),s()(),r(7,"div",4)(8,"button",5),x("click",function(){return a.hide()}),_(9,"translate"),s(),r(10,"button",6),x("click",function(){return a.hide(!0)}),_(11,"translate"),s()()()()),n&2&&(l(2),D(a.values()),l(3),d("label",m(6,3,"beaconsOverlay.addBeacons")),l(3),d("label",m(9,5,"ok")),l(2),d("label",m(11,7,"cancel")))},dependencies:[pe,se,ne,_e,re,ce,Ie,oe,Be,he,Me,Te,le,de],changeDetection:0});let e=o;return e})();var Oe=(()=>{let o=class o{onMousedown(i){i.stopPropagation()}onTouchStart(i){i.stopPropagation()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=pt({type:o,selectors:[["","labNoDrag",""]],hostBindings:function(n,a){n&1&&x("mousedown",function(C){return a.onMousedown(C)})("touchstart",function(C){return a.onTouchStart(C)})}});let e=o;return e})();var Ot=(()=>{let o=class o{transform(i){return i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"asStep",type:o,pure:!0});let e=o;return e})();var Vt=(()=>{let o=class o{transform(i,n){if(i!=null){let a=fi[n.inserterTarget][n.inserterCapacity]?.find(c=>c.value.gt(i)||c.id===L.StackInserter);return a==null?null:{id:a.id,value:i.div(a.value)}}return null}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"inserterSpeed",type:o,pure:!0});let e=o;return e})();var Rt=(()=>{let o=class o{transform(i){return i==null?"":" ".repeat(4-i.length)+i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"leftPad",type:o,pure:!0});let e=o;return e})();var Se=(()=>{let o=class o{static transform(i,n){if(n==null)return i.toFraction();if(n===-2)return Math.round(i.mul(N.hundred).toNumber()).toString();let c=i.toPrecision(n).toString();if(n>0){let C=N.from(1,Math.pow(10,n));i.gt(N.zero)&&i.lt(C)&&(c=`<${c}`);let f=c.split(".");if(f.length>1){if(f[1].length<n){let E=n-f[1].length;return c+"0".repeat(E)}}else return i.isInteger()?c+" ".repeat(n+1):c+"."+"0".repeat(n)}return c}transform(i,n){return o.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"rate",type:o,pure:!0});let e=o;return e})();var Pt=(()=>{let o=class o{transform(i,n,a){return a===L.Pumpjack?`${Se.transform(i.mul(N.hundred),n!=null?Math.max(n-2,0):n)}%`:Se.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"machineRate",type:o,pure:!0});let e=o;return e})();var Ft=(()=>{let o=class o{transform(i,n){return n!==fe.CaptainOfIndustry||i!==L.MineControlTower}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"machineShowRate",type:o,pure:!0});let e=o;return e})();var Dt=(()=>{let o=class o{transform(i,n){return i==null?!1:n!==fe.DysonSphereProgram||i!==L.MiningMachine}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"machineShow",type:o,pure:!0});let e=o;return e})();var jt=(()=>{let o=class o{transform(i,n,a=!1){if(i==null)return[];let c=i.map(C=>({label:n[C].name,value:C}));return a&&c.unshift({label:"None",value:L.Module}),c}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"options",type:o,pure:!0});let e=o;return e})();var $t=(()=>{let o=class o{transform(i,n,a){switch(a){case yt.GW:return`${Se.transform(i.div(N.million),n)} GW`;case yt.MW:return`${Se.transform(i.div(N.thousand),n)} MW`;default:return`${Se.transform(i,n)} kW`}}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"power",type:o,pure:!0});let e=o;return e})();var At=(()=>{let o=class o{constructor(){this.routerSvc=V(Ne)}transform(i,n,a){let c=i;if(c.recipeId){let C=a.recipeR[c.recipeId];C.isTechnology&&C.productivity&&i.items&&(c=lt(Ee({},i),{items:i.items.div(C.productivity)}))}return this.routerSvc.stepHref(c,n,a.hash)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=z({name:"stepHref",type:o,pure:!0});let e=o;return e})();var Sn=["stepsTable"];function vn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(){v(t);let n=p(3);return b(n.resetChecked())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.checkedUndoTooltip"))}function bn(e,o){if(e&1&&(r(0,"th")(1,"div",23),S(2,"i",24),u(3,vn,2,3,"button",15),s()()),e&2){let t=p(2);l(3),g(3,t.itemsModified().checked||t.recipesModified().checked?3:-1)}}function Tn(e,o){e&1&&(r(0,"th"),h(1),_(2,"translate"),s()),e&2&&(l(),w(m(2,1,"options.column.tree")))}function wn(e,o){e&1&&S(0,"p-sortIcon",14)}function yn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(n){return v(t),p(2).resetExcluded(),b(n.stopImmediatePropagation())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.itemsUndoTooltip"))}function In(e,o){e&1&&S(0,"p-sortIcon",26)}function Bn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(n){return v(t),p(3).resetBelts(),b(n.stopImmediatePropagation())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.beltsUndoTooltip"))}function En(e,o){if(e&1&&(r(0,"th",16)(1,"div",13)(2,"span"),h(3),_(4,"translate"),s(),u(5,In,1,0,"p-sortIcon",26)(6,Bn,2,3,"button",15),s()()),e&2){let t=p(2);l(3),w(m(4,3,"options.column.belts")),l(2),g(5,t.focus()?-1:5),l(),g(6,t.itemsModified().belts?6:-1)}}function kn(e,o){e&1&&S(0,"p-sortIcon",27)}function Mn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(n){return v(t),p(3).resetWagons(),b(n.stopImmediatePropagation())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.wagonsUndoTooltip"))}function On(e,o){if(e&1&&(r(0,"th",17)(1,"div",13)(2,"span"),h(3),_(4,"translate"),s(),u(5,kn,1,0,"p-sortIcon",27)(6,Mn,2,3,"button",15),s()()),e&2){let t=p(2);l(3),w(m(4,3,t.dispRateInfo().wagonsLabel)),l(2),g(5,t.focus()?-1:5),l(),g(6,t.itemsModified().wagons?6:-1)}}function Vn(e,o){e&1&&S(0,"p-sortIcon",19)}function Rn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(n){return v(t),p(2).resetMachines(),b(n.stopImmediatePropagation())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.machinesUndoTooltip"))}function Pn(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(){v(t);let n=p(3);return b(n.resetBeacons())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.beaconsUndoTooltip"))}function Fn(e,o){if(e&1&&(r(0,"th")(1,"div",13)(2,"span"),h(3),_(4,"translate"),s(),u(5,Pn,2,3,"button",15),s()()),e&2){let t=p(2);l(3),w(m(4,2,"options.column.beacons")),l(2),g(5,t.recipesModified().beacons?5:-1)}}function Dn(e,o){e&1&&S(0,"p-sortIcon",28)}function jn(e,o){if(e&1&&(r(0,"th",20)(1,"div",13)(2,"span"),h(3),_(4,"translate"),s(),u(5,Dn,1,0,"p-sortIcon",28),s()()),e&2){let t=p(2);l(3),w(m(4,2,"options.column.power")),l(2),g(5,t.focus()?-1:5)}}function $n(e,o){e&1&&S(0,"p-sortIcon",29)}function An(e,o){if(e&1&&(r(0,"th",21)(1,"div",13)(2,"span"),h(3),_(4,"translate"),s(),u(5,$n,1,0,"p-sortIcon",29),s()()),e&2){let t=p(2);l(3),w(m(4,2,t.dispRateInfo().pollutionLabel)),l(2),g(5,t.focus()?-1:5)}}function Nn(e,o){if(e&1){let t=y();r(0,"th",10)(1,"button",30),x("click",function(){v(t);let n=p(2);return b(n.export(n.steps(),n.itemsState(),n.recipesState(),n.columnsState(),n.data()))}),_(2,"translate"),s()()}e&2&&(l(),d("pTooltip",m(2,1,"steps.downloadTooltip")))}function Un(e,o){if(e&1){let t=y();r(0,"tr")(1,"th",10)(2,"button",11),x("click",function(){v(t);let n=p();return b(n.contentSvc.showColumns$.next())}),_(3,"translate"),s()(),u(4,bn,4,1,"th")(5,Tn,3,3,"th"),r(6,"th",12)(7,"div",13)(8,"span"),h(9),_(10,"translate"),s(),u(11,wn,1,0,"p-sortIcon",14)(12,yn,2,3,"button",15),s()(),u(13,En,7,5,"th",16)(14,On,7,5,"th",17),r(15,"th",18)(16,"div",13)(17,"span"),h(18),_(19,"translate"),s(),u(20,Vn,1,0,"p-sortIcon",19)(21,Rn,2,3,"button",15),s()(),u(22,Fn,6,4,"th")(23,jn,6,4,"th",20)(24,An,6,4,"th",21)(25,Nn,3,3,"th",22),s()}if(e&2){let t=p();l(2),d("pTooltip",m(3,15,"steps.openColumnSettings")),l(2),g(4,!t.focus()&&t.columnsState().checkbox.show?4:-1),l(),g(5,!t.focus()&&t.columnsState().tree.show?5:-1),l(4),w(m(10,17,t.dispRateInfo().itemsLabel)),l(2),g(11,t.focus()?-1:11),l(),g(12,t.itemsModified().excluded?12:-1),l(),g(13,t.columnsState().belts.show?13:-1),l(),g(14,t.columnsState().wagons.show?14:-1),l(4),w(m(19,19,"options.column.machines")),l(2),g(20,t.focus()?-1:20),l(),g(21,t.recipesModified().machines?21:-1),l(),g(22,t.columnsState().beacons.show?22:-1),l(),g(23,t.columnsState().power.show?23:-1),l(),g(24,t.columnsState().pollution.show?24:-1),l(),g(25,t.columnsState().link.show?25:-1)}}var zn=(e,o)=>o.id;function Hn(e,o){if(e&1&&S(0,"div",32),e&2){let t=o.$implicit,i=p();d("id","step_"+i.id+"_"+t.label)}}function Ln(e,o){if(e&1){let t=y();r(0,"td")(1,"div",37)(2,"p-checkbox",38),x("onChange",function(n){v(t);let a=p(),c=p(2);return b(c.changeStepChecked(a,n.checked))}),s()()()}if(e&2){let t=p();l(2),d("binary",!0)("ngModel",t.checked)}}function Wn(e,o){if(e&1&&S(0,"div",45),e&2){let t=o.$implicit,i=o.$index,n=o.$count;J("trail",t)("last",i===n-1)}}function Gn(e,o){if(e&1&&(F(0,Wn,1,4,"div",46,ee),S(2,"div",44)),e&2){let t=p(2),i=p(2);D(i.stepTree()[t.id])}}function qn(e,o){if(e&1&&S(0,"lab-tooltip",50),e&2){let t=p(3);d("id",t.itemId)}}function Qn(e,o){if(e&1){let t=y();r(0,"button",47),x("click",function(){v(t);let n=p(2),a=p(2);return b(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),_(1,"iconSmClass"),S(2,"i",48),u(3,qn,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(2),n=p(2);J("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",t)}}function Kn(e,o){if(e&1&&(r(0,"span"),h(1),s()),e&2){let t=p(3);l(),O("#",t.recipeObjectiveId,"")}}function Xn(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p(4);d("id",t.recipeId)}}function Zn(e,o){if(e&1&&u(0,Xn,1,1,"lab-tooltip",52),e&2){let t=p(3);g(0,t.recipeId?0:-1)}}function Jn(e,o){if(e&1&&(r(0,"i",51),_(1,"iconSmClass"),u(2,Kn,2,1,"span")(3,Zn,1,1,"ng-template",null,49,B),s()),e&2){let t=T(4),i=p(2);I(k(1,4,i.recipeId,"recipe")),d("pTooltip",t),l(2),g(2,i.recipeObjectiveId!=null?2:-1)}}function Yn(e,o){if(e&1&&(r(0,"td",39)(1,"div",40),u(2,Gn,3,0,"div",41),r(3,"div",42),u(4,Qn,5,6,"button",43)(5,Jn,5,7),s()()()),e&2){let t=p(),i=p(2),n=T(1);l(2),g(2,!n.sortField&&(i.stepTree()[t.id]!=null&&i.stepTree()[t.id].length)?2:-1),l(2),g(4,t.itemId&&t.recipeObjectiveId==null?4:5)}}function eo(e,o){if(e&1&&(r(0,"span",55),h(1),_(2,"rate"),s()),e&2){let t=p(2),i=p(2);l(),O("(+",k(2,1,t.surplus,i.columnsState().items.precision),") ")}}function to(e,o){if(e&1&&S(0,"lab-tooltip",50),e&2){let t=p(3);d("id",t.itemId)}}function io(e,o){if(e&1){let t=y();r(0,"button",47),x("click",function(){v(t);let n=p(2),a=p(2);return b(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),_(1,"iconSmClass"),S(2,"i",48),u(3,to,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(2),n=p(2);J("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",t)}}function no(e,o){if(e&1&&(r(0,"td",53),u(1,eo,3,4,"span",54),r(2,"span",55),h(3),_(4,"rate"),s()(),r(5,"td",56)(6,"div",13)(7,"span",57),h(8),s(),u(9,io,5,6,"button",43),s()()),e&2){let t=p(),i=p(2);l(),g(1,t.surplus&&t.surplus.nonzero()?1:-1),l(2),w(k(4,4,t.items.sub(t.surplus||i.Rational.zero),i.columnsState().items.precision)),l(5),w(i.data().itemEntities[t.itemId].name),l(),g(9,!i.preferences().hideDuplicateIcons||!i.columnsState().tree.show?9:-1)}}function oo(e,o){e&1&&S(0,"td",58)}function ao(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=p().$implicit;l(),I(m(2,2,t.value))}}function lo(e,o){if(e&1&&u(0,ao,3,4,"div",63),e&2){let t=o.$implicit;g(0,t?0:-1)}}function po(e,o){if(e&1&&S(0,"lab-tooltip",66),e&2){let t=p().$implicit;d("id",t.value)}}function so(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,po,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function ro(e,o){if(e&1&&S(0,"lab-tooltip",66),e&2){let t=p();d("id",t)}}function _o(e,o){if(e&1){let t=y();r(0,"p-dropdown",60),x("onChange",function(n){let c=v(t),C=p(4),f=p(2);return b(f.setBelt(C.itemId,n.value,c))}),u(1,lo,1,1,"ng-template",61)(2,so,7,6,"ng-template",62)(3,ro,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(6);d("pTooltip",t)("ngModel",o)("options",i.options().belts)}}function co(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function mo(e,o){if(e&1&&S(0,"lab-tooltip",67),e&2){let t=p().$implicit;d("id",t.value)}}function uo(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,mo,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Co(e,o){if(e&1&&S(0,"lab-tooltip",67),e&2){let t=p(3);d("id",t)}}function go(e,o){if(e&1){let t=y();r(0,"p-dropdown",60),x("onChange",function(n){let c=v(t),C=p(5),f=p(2);return b(f.setBelt(C.itemId,n.value,c))}),u(1,co,3,4,"ng-template",61)(2,uo,7,6,"ng-template",62)(3,Co,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(2),n=p(5);d("pTooltip",t)("ngModel",i)("options",n.options().pipes)}}function fo(e,o){if(e&1&&S(0,"lab-tooltip",67),e&2){let t=p(3);d("id",t)}}function xo(e,o){if(e&1&&(r(0,"i",51),_(1,"iconClass"),u(2,fo,1,1,"ng-template",null,49,B),s()),e&2){let t=T(3),i=p(2);I(m(1,3,i)),d("pTooltip",t)}}function ho(e,o){if(e&1&&u(0,go,5,3,"p-dropdown",59)(1,xo,4,5),e&2){let t=p(),i=p(5),n;g(0,(n=i.data().pipeIds.indexOf(t)!==-1&&i.settings().pipeId)?0:1,n)}}function So(e,o){if(e&1&&(r(0,"td",53)(1,"span",55),h(2),_(3,"rate"),s()(),r(4,"td",56)(5,"div",13),u(6,_o,5,3,"p-dropdown",59)(7,ho,2,1),s()()),e&2){let t=p(3),i=p(2),n;l(2),w(k(3,2,t.belts,i.columnsState().belts.precision)),l(4),g(6,(n=i.data().beltIds.indexOf(o)!==-1&&i.settings().beltId)?6:7,n)}}function vo(e,o){if(e&1&&u(0,So,8,5),e&2){let t=p(2),i=p(2),n;g(0,(n=i.itemsState()[t.itemId].beltId)?0:-1,n)}}function bo(e,o){e&1&&S(0,"td",58)}function To(e,o){if(e&1&&u(0,vo,1,1)(1,bo,1,0),e&2){let t=p();g(0,t.itemId&&t.belts?0:1)}}function wo(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=p().$implicit;l(),I(m(2,2,t.value))}}function yo(e,o){if(e&1&&u(0,wo,3,4,"div",63),e&2){let t=o.$implicit;g(0,t?0:-1)}}function Io(e,o){if(e&1&&S(0,"lab-tooltip",68),e&2){let t=p().$implicit;d("id",t.value)}}function Bo(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,Io,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Eo(e,o){if(e&1&&S(0,"lab-tooltip",68),e&2){let t=p(2);d("id",t)}}function ko(e,o){if(e&1){let t=y();r(0,"p-dropdown",60),x("onChange",function(n){let c=v(t),C=p(4),f=p(2);return b(f.setWagon(C.itemId,n.value,c))}),u(1,yo,1,1,"ng-template",61)(2,Bo,7,6,"ng-template",62)(3,Eo,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(),n=p(5);d("pTooltip",t)("ngModel",i)("options",n.options().cargoWagons)}}function Mo(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=p().$implicit;l(),I(m(2,2,t.value))}}function Oo(e,o){if(e&1&&u(0,Mo,3,4,"div",63),e&2){let t=o.$implicit;g(0,t?0:-1)}}function Vo(e,o){if(e&1&&S(0,"lab-tooltip",69),e&2){let t=p().$implicit;d("id",t.value)}}function Ro(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s()(),u(5,Vo,1,1,"ng-template",null,49,B)),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Po(e,o){if(e&1&&S(0,"lab-tooltip",69),e&2){let t=p(3);d("id",t)}}function Fo(e,o){if(e&1){let t=y();r(0,"p-dropdown",60),x("onChange",function(n){let c=v(t),C=p(5),f=p(2);return b(f.setWagon(C.itemId,n.value,c))}),u(1,Oo,1,1,"ng-template",61)(2,Ro,7,6,"ng-template",62)(3,Po,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(2),n=p(5);d("pTooltip",t)("ngModel",i)("options",n.options().fluidWagons)}}function Do(e,o){if(e&1&&u(0,Fo,5,3,"p-dropdown",59),e&2){let t=p(),i=p(5),n;g(0,(n=i.data().fluidWagonIds.indexOf(t)!==-1&&i.settings().fluidWagonId)?0:-1,n)}}function jo(e,o){if(e&1&&(r(0,"td",53)(1,"span",55),h(2),_(3,"rate"),s()(),r(4,"td",56)(5,"div",13),u(6,ko,5,3,"p-dropdown",59)(7,Do,1,1),s()()),e&2){let t=p(3),i=p(2),n;l(2),w(k(3,2,t.wagons,i.columnsState().wagons.precision)),l(4),g(6,(n=i.data().cargoWagonIds.indexOf(o)!==-1&&i.settings().cargoWagonId)?6:7,n)}}function $o(e,o){if(e&1&&u(0,jo,8,5),e&2){let t=p(2),i=p(2),n;g(0,(n=i.itemsState()[t.itemId].wagonId)?0:-1,n)}}function Ao(e,o){e&1&&S(0,"td",58)}function No(e,o){if(e&1&&u(0,$o,1,1)(1,Ao,1,0),e&2){let t=p();g(0,t.itemId&&t.wagons?0:1)}}function Uo(e,o){if(e&1&&(r(0,"span",55),h(1),_(2,"machineRate"),s()),e&2){let t=p(),i=p(),n=p(2);l(),w(ge(2,1,i.machines,n.columnsState().machines.precision,t))}}function zo(e,o){if(e&1&&(r(0,"span"),h(1),s()),e&2){let t=p(4);l(),O("#",t.recipeObjectiveId,"")}}function Ho(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p(4);d("id",t.recipeId)}}function Lo(e,o){if(e&1){let t=y();r(0,"button",74),x("click",function(){v(t);let n=p(3),a=p(2);return b(a.addObjective({targetId:n.recipeId,unit:a.ObjectiveUnit.Machines}))}),r(1,"span",75),_(2,"iconSmClass"),u(3,zo,2,1,"span"),s(),S(4,"i",76),u(5,Ho,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(6),i=p(3);d("pTooltip",t),l(),I(k(2,4,i.recipeId,"recipe")),l(2),g(3,i.recipeObjectiveId?3:-1)}}function Wo(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=p().$implicit;l(),I(m(2,2,t.value))}}function Go(e,o){if(e&1&&u(0,Wo,3,4,"div",63),e&2){let t=o.$implicit;g(0,t?0:-1)}}function qo(e,o){if(e&1&&S(0,"lab-tooltip",78),e&2){let t=p().$implicit;d("id",t.value)}}function Qo(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,qo,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Ko(e,o){if(e&1&&S(0,"lab-tooltip",78),e&2){let t=p(3);d("id",t)}}function Xo(e,o){if(e&1){let t=y();r(0,"p-dropdown",77),x("onChange",function(n){v(t);let a=p(3),c=p(2);return b(c.changeRecipeField(a,n.value,c.machinesState(),c.data(),c.RecipeField.Machine))}),_(1,"options"),u(2,Go,1,1,"ng-template",61)(3,Qo,7,6,"ng-template",62)(4,Ko,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(5),i=p(2),n=p(),a=p(2);d("pTooltip",t)("options",k(1,3,n.recipe.producers,a.data().itemEntities))("ngModel",i)}}function Zo(e,o){if(e&1){let t=y();r(0,"p-inputNumber",79,80),x("onBlur",function(){v(t);let n=T(1),a=p(3),c=p(2),C;return b(c.changeRecipeField(a,(C=n.value)!==null&&C!==void 0?C:100,c.machinesState(),c.data(),c.RecipeField.Overclock))}),_(2,"translate"),s()}if(e&2){let t=p(3);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",m(2,7,"steps.overclockTooltip"))("ngModel",t.recipeSettings.overclock)}}function Jo(e,o){if(e&1&&S(0,"lab-tooltip",82),e&2){let t=p(2);d("id",t)}}function Yo(e,o){if(e&1&&(r(0,"div",13)(1,"i",81),_(2,"iconSmClass"),u(3,Jo,1,1,"ng-template",null,49,B),s()()),e&2){let t=T(4),i=p();l(),I(m(2,3,i)),d("pTooltip",t)}}function ea(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function ta(e,o){if(e&1&&S(0,"lab-tooltip",82),e&2){let t=p().$implicit;d("id",t.value)}}function ia(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,ta,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function na(e,o){if(e&1&&S(0,"lab-tooltip",82),e&2){let t=p(2);d("id",t)}}var Qi=()=>[];function oa(e,o){if(e&1){let t=y();r(0,"p-dropdown",60),x("onChange",function(n){v(t);let a=p(4),c=p(2);return b(c.changeRecipeField(a,n.value,c.machinesState(),c.data(),c.RecipeField.Fuel))}),u(1,ea,3,4,"ng-template",61)(2,ia,7,6,"ng-template",62)(3,na,1,1,"ng-template",null,49,B),s()}if(e&2){let t=T(4),i=p(),n=p(3),a;d("pTooltip",t)("ngModel",i)("options",(a=n.recipeSettings.fuelOptions)!==null&&a!==void 0?a:X(3,Qi))}}function aa(e,o){if(e&1&&u(0,Yo,5,5,"div",70)(1,oa,5,4),e&2){let t=p(3);g(0,t.recipe.isBurn?0:t.recipeSettings.machineId?1:-1)}}function la(e,o){if(e&1&&(r(0,"div",33)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function pa(e,o){if(e&1&&S(0,"lab-tooltip",85),e&2){let t=p().$implicit;d("id",t.value)}}function sa(e,o){if(e&1&&(r(0,"div",64)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",65),h(4),s(),u(5,pa,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function ra(e,o){if(e&1){let t=y();r(0,"p-dropdown",84),x("onChange",function(n){v(t);let a=p(5),c=p(2);return b(c.setModules(a.recipeId,[{id:n.value,count:c.Rational.one}]))}),_(1,"translate"),u(2,la,3,4,"ng-template",61)(3,sa,7,6,"ng-template",62),s()}if(e&2){let t=p(2),i=p(3),n;d("tooltip",m(1,3,"settings.modifierTooltip"))("ngModel",t[0].id)("options",(n=i.recipeSettings.moduleOptions)!==null&&n!==void 0?n:X(5,Qi))}}function _a(e,o){if(e&1&&(r(0,"i",75),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function ca(e,o){if(e&1){let t=y();r(0,"button",86),x("click",function(n){v(t);let a=T(5),c=p(),C=p(),f=p(3);return b(a.show(n,C,c,f.recipeId))}),F(1,_a,4,5,"i",90,Y),S(3,"i",87),s(),r(4,"lab-modules-overlay",88,89),x("setValue",function(n){v(t);let a=p(5),c=p(2);return b(c.setModules(a.recipeId,n))}),s()}if(e&2){let t=p(2);l(),D(t)}}function da(e,o){e&1&&u(0,ra,4,6,"p-dropdown",83)(1,ca,6,0),e&2&&g(0,o.modules===1?0:o.modules!=null?1:-1)}function ma(e,o){if(e&1&&u(0,da,2,1),e&2){let t=p(2),i=p(3),n;g(0,(n=i.data().machineEntities[t])?0:-1,n)}}function ua(e,o){if(e&1&&(r(0,"div",13)(1,"span",57),h(2),s(),u(3,Lo,7,7,"button",71)(4,Xo,6,6,"p-dropdown",72),_(5,"machineShow"),u(6,Zo,3,9,"p-inputNumber",73)(7,aa,2,1)(8,ma,1,1),s()),e&2){let t=p(),i=p(),n=p(2),a;l(2),w(i.recipe.name),l(),g(3,!n.preferences().hideDuplicateIcons||i.itemId!=null&&i.itemId!==i.recipeId?3:-1),l(),g(4,k(5,6,t,n.data().game)?4:-1),l(2),g(6,n.data().game===n.Game.Satisfactory?6:-1),l(),g(7,(a=i.recipeSettings==null?null:i.recipeSettings.fuelId)?7:-1,a),l(),g(8,(a=i.recipeSettings==null?null:i.recipeSettings.modules)?8:-1,a)}}function Ca(e,o){if(e&1&&(r(0,"td",53),u(1,Uo,3,5,"span",54),_(2,"machineShowRate"),s(),r(3,"td",56),u(4,ua,9,9,"div",70),s()),e&2){let t=p(),i=p(2);l(),g(1,t.machines&&t.machines.nonzero()&&k(2,2,o,i.data().game)?1:-1),l(3),g(4,t.recipeId&&t.recipe&&t.recipeSettings?4:-1)}}function ga(e,o){e&1&&S(0,"td",58)}function fa(e,o){if(e&1&&(r(0,"i",94),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=p().$implicit;I(m(1,3,t.id)),l(3),w(t.total)}}function xa(e,o){if(e&1&&(r(0,"i",75),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function ha(e,o){if(e&1&&(r(0,"div",33)(1,"i",75),_(2,"iconSmClass"),r(3,"span"),h(4),s()(),u(5,fa,4,5,"i",93),F(6,xa,4,5,"i",90,Y),s()),e&2){let t=o.$implicit;l(),I(m(2,4,t.id)),l(3),w(t.count),l(),g(5,t.total?5:-1),l(),D(t.modules)}}function Sa(e,o){if(e&1){let t=y();r(0,"button",91),x("click",function(n){v(t);let a=T(5),c=p(2);return b(a.show(n,c.recipeSettings.beacons))}),F(1,ha,8,6,"div",63,Y),S(3,"i",87),s(),r(4,"lab-beacons-overlay",88,92),x("setValue",function(n){v(t);let a=p(2),c=p(2);return b(c.setBeacons(a.recipeId,n))}),s()}if(e&2){let t=p(2);l(),D(t.recipeSettings.beacons)}}function va(e,o){if(e&1&&(r(0,"td"),u(1,Sa,6,0),s()),e&2){let t=p();l(),g(1,t.recipeId&&t.recipeSettings&&t.recipeSettings.beacons?1:-1)}}function ba(e,o){if(e&1&&(r(0,"span",55),h(1),_(2,"power"),s()),e&2){let t=p(2),i=p(2);l(),w(ge(2,1,t.power,i.columnsState().power.precision,i.effectivePowerUnit()))}}function Ta(e,o){if(e&1&&(r(0,"td",95),u(1,ba,3,5,"span",54),s()),e&2){let t=p();l(),g(1,t.power&&t.power.nonzero()?1:-1)}}function wa(e,o){if(e&1&&(r(0,"span",55),h(1),_(2,"rate"),s()),e&2){let t=p(2),i=p(2);l(),w(k(2,1,t.pollution,i.columnsState().pollution.precision))}}function ya(e,o){if(e&1&&(r(0,"td",95),u(1,wa,3,4,"span",54),s()),e&2){let t=p();l(),g(1,t.pollution&&t.pollution.nonzero()?1:-1)}}function Ia(e,o){if(e&1){let t=y();r(0,"button",99),x("click",function(){v(t);let n=p(2),a=p(2);return b(a.resetStep(n))}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"steps.stepUndoTooltip"))}function Ba(e,o){if(e&1&&(r(0,"td",10)(1,"div",33)(2,"a",96),_(3,"stepHref"),S(4,"button",97),_(5,"translate"),s(),u(6,Ia,2,3,"button",98),s()()),e&2){let t=p(),i=p(2);l(2),d("href",ge(3,3,t,i.routerSvc.zipConfig(),i.data()),Kt),l(2),d("pTooltip",m(5,7,"steps.openNewTabTooltip")),l(2),g(6,t.recipeId&&i.stepsModified().recipes[t.recipeId]||t.itemId&&i.stepsModified().items[t.itemId]||t.recipeObjectiveId&&i.stepsModified().objectives[t.recipeObjectiveId]?6:-1)}}function Ea(e,o){if(e&1&&(r(0,"tr")(1,"td",31),S(2,"div",32),F(3,Hn,1,1,"div",100,zn),r(5,"div",33),S(6,"button",34),_(7,"translate"),s()(),u(8,Ln,3,2,"td")(9,Yn,6,2,"td",35)(10,no,10,7)(11,oo,1,0)(12,To,2,1)(13,No,2,1)(14,Ca,5,5)(15,ga,1,0)(16,va,2,1,"td")(17,Ta,2,1,"td",36)(18,ya,2,1,"td",36)(19,Ba,7,9,"td",22),s()),e&2){let t=p().expanded,i=p(),n;l(2),d("id","step_"+o.id),l(),D(i.stepDetails()[o.id].tabs),l(3),J("fa-rotate-90",t),d("pTooltip",m(7,15,t?"steps.hideDetails":"steps.showDetails"))("pRowToggler",o),l(2),g(8,!i.focus()&&i.columnsState().checkbox.show?8:-1),l(),g(9,!i.focus()&&i.columnsState().tree.show?9:-1),l(),g(10,o.itemId&&o.items?10:11),l(2),g(12,i.columnsState().belts.show?12:-1),l(),g(13,i.columnsState().wagons.show?13:-1),l(),g(14,(n=o.recipeSettings==null?null:o.recipeSettings.machineId)?14:15,n),l(2),g(16,i.columnsState().beacons.show?16:-1),l(),g(17,i.columnsState().power.show?17:-1),l(),g(18,i.columnsState().pollution.show?18:-1),l(),g(19,i.columnsState().link.show?19:-1)}}function ka(e,o){if(e&1&&(u(0,Ea,20,17,"tr"),_(1,"asStep")),e&2){let t=o.$implicit,i;g(0,(i=m(1,1,t))?0:-1,i)}}function Ma(e,o){if(e&1&&(r(0,"a",107),S(1,"span",108),r(2,"span",109),h(3),_(4,"translate"),s()()),e&2){let t=o.$implicit,i=p(3);l(),I(i.stepDetailIcon[t.label]),l(2),w(m(4,3,"options.stepDetailTab."+t.label))}}var we=(e,o)=>o.key;function Oa(e,o){e&1&&j(0)}function Va(e,o){if(e&1&&(r(0,"tr",101),u(1,Oa,1,0,"ng-container",111),r(2,"td",112),h(3),_(4,"translate"),s()()),e&2){p(4);let t=T(9);l(),d("ngTemplateOutlet",t),l(2),O(" ",m(4,2,"steps.sources")," ")}}function Ra(e,o){e&1&&j(0)}var Pa=(e,o,t,i,n,a,c,C,f,E,P,A,$)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:P,percentOnDest:!0,destId:A,inputs:$});function Fa(e,o){if(e&1&&u(0,Ra,1,0,"ng-container",113),e&2){let t=p().$implicit,i=p(2),n=p(2),a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",qe(2,Pa,[i.items==null?null:i.items.mul(t.value),i.itemId,i.belts==null?null:i.belts.mul(t.value),n.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(t.value),n.itemsState()[i.itemId].wagonId,t.machines,t.recipeId&&n.recipesState()[t.recipeId].machineId,t.recipeId,t.recipeObjectiveId,t.value,i.itemId,t.inputs]))}}function Da(e,o){if(e&1&&u(0,Fa,1,16,"ng-container"),e&2){let t=p(2);g(0,t.itemId?0:-1)}}function ja(e,o){e&1&&j(0)}function $a(e,o){if(e&1&&(r(0,"tr",101),u(1,ja,1,0,"ng-container",111),r(2,"td",112),h(3),_(4,"translate"),s()()),e&2){p(4);let t=T(9);l(),d("ngTemplateOutlet",t),l(2),O(" ",m(4,2,"steps.destinations")," ")}}function Aa(e,o){e&1&&j(0)}var Na=(e,o,t,i,n,a,c,C,f,E,P,A,$,K)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:P,destId:A,destRecipeObjectiveId:$,destIsRecipe:!0,outputs:K});function Ua(e,o){if(e&1&&u(0,Aa,1,0,"ng-container",113),e&2){let t=p().$implicit,i=p(2),n=p(2),a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",qe(2,Na,[i.items==null?null:i.items.mul(t.value),i.itemId,i.belts==null?null:i.belts.mul(t.value),n.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(t.value),n.itemsState()[i.itemId].wagonId,n.stepDetails()[i.id].outputs.length===1?i.machines==null?null:i.machines.mul(t.value):null,n.stepDetails()[i.id].outputs.length===1?i.recipeSettings==null?null:i.recipeSettings.machineId:null,i.recipeId,i.recipeObjectiveId,t.value,n.stepById()[t.key]==null?null:n.stepById()[t.key].recipeId,n.stepById()[t.key]==null?null:n.stepById()[t.key].recipeObjectiveId,t.key===""]))}}function za(e,o){if(e&1&&u(0,Ua,1,17,"ng-container"),e&2){let t=p(2);g(0,t.itemId?0:-1)}}function Ha(e,o){if(e&1&&(u(0,Va,5,4,"tr",110),F(1,Da,1,1,null,null,ee),u(3,$a,5,4,"tr",110),F(4,za,1,1,null,null,we),_(6,"keyvalue")),e&2){let t=p(),i=p(2);g(0,i.stepDetails()[t.id].outputs.length?0:-1),l(),D(i.stepDetails()[t.id].outputs),l(2),g(3,t.parents?3:-1),l(),D(k(6,2,t.parents,i.trackSvc.sortByValue))}}function La(e,o){e&1&&j(0)}function Wa(e,o){e&1&&j(0)}var Ga=(e,o)=>({items:e,itemId:o});function qa(e,o){if(e&1&&u(0,Wa,1,0,"ng-container",113),e&2){let t=p(),i=p().$implicit,n=p(4);p(2);let a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",q(2,Ga,t.step.items.mul(t.percent).div(n.recipe.productivity),i.key))}}function Qa(e,o){e&1&&u(0,qa,1,5,"ng-container"),e&2&&g(0,o.step&&o.percent&&o.step.items?0:-1)}var Tt=(e,o)=>({step:e,percent:o});function Ka(e,o){if(e&1&&u(0,Qa,1,1),e&2){let t=o.$implicit,i=p(4),n=p(2),a;g(0,(a=q(1,Tt,n.stepByItemEntities()[t.key],i.outputs==null?null:i.outputs[t.key]))?0:-1,a)}}function Xa(e,o){if(e&1&&(r(0,"tr",101),u(1,La,1,0,"ng-container",111),r(2,"td",112),h(3),_(4,"translate"),s()(),F(5,Ka,1,4,null,null,we),_(7,"keyvalue")),e&2){let t=p(3),i=p(2),n=T(9);l(),d("ngTemplateOutlet",n),l(2),O(" ",m(4,2,"steps.depletion")," "),l(2),D(k(7,4,t.outputs,i.trackSvc.sortByValue))}}function Za(e,o){e&1&&j(0)}function Ja(e,o){e&1&&j(0)}var Ya=(e,o,t,i,n,a,c,C,f,E,P,A,$)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:P,destId:A,destRecipeObjectiveId:$,destIsRecipe:!0});function el(e,o){if(e&1&&u(0,Ja,1,0,"ng-container",113),e&2){let t=p(),i=p().$implicit,n=p(4),a=p(2),c=T(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",qe(2,Ya,[t.step.items==null?null:t.step.items.mul(t.percent),i.key,t.step.belts==null?null:t.step.belts.mul(t.percent),a.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),a.itemsState()[t.step.itemId].wagonId,t.step.machines==null?null:t.step.machines.mul(t.percent),t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step.recipeId,t.step.recipeObjectiveId,t.percent,n.recipeId,n.recipeObjectiveId]))}}function tl(e,o){e&1&&u(0,el,1,16,"ng-container"),e&2&&g(0,o.step.itemId&&o.percent?0:-1)}function il(e,o){if(e&1&&u(0,tl,1,1),e&2){let t=o.$implicit,i=p(4),n=p(2),a;g(0,(a=q(1,Tt,n.stepByItemEntities()[t.key],n.stepByItemEntities()[t.key].parents==null?null:n.stepByItemEntities()[t.key].parents[i.id]))?0:-1,a)}}function nl(e,o){if(e&1&&(r(0,"tr",101),u(1,Za,1,0,"ng-container",111),r(2,"td",112),h(3),_(4,"translate"),s()(),F(5,il,1,4,null,null,we),_(7,"keyvalue")),e&2){let t=p(3),i=p(2),n=T(9);l(),d("ngTemplateOutlet",n),l(2),O(" ",m(4,2,"steps.inputs")," "),l(2),D(k(7,4,t.recipe.in,i.trackSvc.sortByValue))}}function ol(e,o){e&1&&j(0)}function al(e,o){e&1&&j(0)}function ll(e,o){e&1&&j(0)}function pl(e,o){e&1&&j(0)}var sl=(e,o,t,i,n,a,c,C,f,E,P,A,$)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:c,machineId:C,recipeId:f,recipeObjectiveId:E,percent:P,percentOnDest:!0,destId:A,destRecipeObjectiveId:$,destIsRecipe:!0});function rl(e,o){if(e&1&&u(0,pl,1,0,"ng-container",113),e&2){let t=p(),i=p().$implicit,n=p(3),a=p(2),c=T(11);d("ngTemplateOutlet",c)("ngTemplateOutletContext",qe(2,sl,[t.step.items==null?null:t.step.items.mul(t.percent),i.key,t.step.belts==null?null:t.step.belts.mul(t.percent),a.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),a.itemsState()[t.step.itemId].wagonId,t.step.machines==null?null:t.step.machines.mul(t.percent),t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step.recipeId,t.step.recipeObjectiveId,t.percent,n.recipeId,n.recipeObjectiveId]))}}function _l(e,o){e&1&&u(0,rl,1,16,"ng-container"),e&2&&g(0,o.step.itemId&&o.percent?0:-1)}function cl(e,o){if(e&1&&u(0,_l,1,1),e&2){let t=o.$implicit,i=p(3),n=p(2),a;g(0,(a=q(1,Tt,n.stepByItemEntities()[t.key],i.outputs==null?null:i.outputs[t.key]))?0:-1,a)}}function dl(e,o){if(e&1&&(u(0,Xa,8,7)(1,nl,8,7),_(2,"keyvalue"),r(3,"tr",101),u(4,ol,1,0,"ng-container",111),r(5,"td",112),h(6),_(7,"translate"),s()(),r(8,"tr",101),u(9,al,1,0,"ng-container",111),r(10,"td",53)(11,"span",55),h(12),_(13,"rate"),s()(),r(14,"td",56)(15,"div",33),S(16,"i",114),s()(),S(17,"td",104),s(),r(18,"tr",101),u(19,ll,1,0,"ng-container",111),r(20,"td",112),h(21),_(22,"translate"),s()(),F(23,cl,1,4,null,null,we),_(25,"keyvalue")),e&2){let t=p(2),i=p(2),n=T(9);g(0,i.data().game===i.Game.Factorio&&t.recipe.isMining?0:-1),l(),g(1,t.recipe&&m(2,8,t.recipe.in).length?1:-1),l(3),d("ngTemplateOutlet",n),l(2),O(" ",m(7,10,"steps.time")," "),l(3),d("ngTemplateOutlet",n),l(3),w(k(13,12,t.recipe.time,i.columnsState().items.precision)),l(7),d("ngTemplateOutlet",n),l(2),O(" ",m(22,15,"steps.outputs")," "),l(2),D(k(25,17,t.recipe.out,i.trackSvc.sortByValue))}}function ml(e,o){if(e&1&&u(0,dl,26,20),e&2){let t=p();g(0,t.recipe?0:-1)}}function ul(e,o){e&1&&j(0)}var He=(e,o)=>({value:e,itemId:o});function Cl(e,o){if(e&1&&(u(0,ul,1,0,"ng-container",113),_(1,"rate")),e&2){let t=p(2),i=p().$implicit;p();let n=T(27),a=p(2),c=p(2);d("ngTemplateOutlet",n)("ngTemplateOutletContext",q(5,He,k(1,2,t.step.items.mul(t.percent).div(a.machines),c.columnsState().items.precision),i.key))}}function gl(e,o){e&1&&j(0)}function fl(e,o){if(e&1&&(u(0,gl,1,0,"ng-container",113),_(1,"rate")),e&2){let t=p(4);p(2);let i=T(27),n=p(2),a=p(2);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,He,k(1,2,t.step.belts.mul(t.percent).div(n.machines),a.columnsState().belts.precision),o))}}function xl(e,o){if(e&1&&u(0,fl,2,8,"ng-container"),e&2){let t=p(4).$implicit,i=p(5),n;g(0,(n=i.itemsState()[t.key].beltId)?0:-1,n)}}function hl(e,o){if(e&1&&(r(0,"td"),u(1,xl,1,1),s()),e&2){let t=p(2);l(),g(1,t.step.belts?1:-1)}}function Sl(e,o){e&1&&j(0)}function vl(e,o){if(e&1&&(u(0,Sl,1,0,"ng-container",113),_(1,"rate")),e&2){p(6);let t=T(27);d("ngTemplateOutlet",t)("ngTemplateOutletContext",q(5,He,k(1,2,o.value,1),o.id))}}function bl(e,o){if(e&1&&(u(0,vl,2,8,"ng-container"),_(1,"inserterSpeed")),e&2){let t=p(3),i=p(4),n=p(2),a;g(0,(a=k(1,1,t.step.items.mul(t.percent).div(i.machines).div(n.dispRateInfo().value),n.settings()))?0:-1,a)}}function Tl(e,o){if(e&1&&(r(0,"td"),u(1,bl,2,4),s()),e&2){let t=p(2),i=p().$implicit,n=p(5);l(),g(1,n.itemsState()[i.key].beltId!==n.ItemId.Pipe&&t.step.items?1:-1)}}function wl(e,o){if(e&1&&(r(0,"tr")(1,"td"),u(2,Cl,2,8,"ng-container"),s(),u(3,hl,2,1,"td")(4,Tl,2,1,"td"),s()),e&2){let t=p(),i=p(6);l(2),g(2,t.step.items?2:-1),l(),g(3,i.columnsState().belts.show?3:-1),l(),g(4,i.data().game===i.Game.Factorio?4:-1)}}function yl(e,o){e&1&&u(0,wl,5,3,"tr"),e&2&&g(0,o.percent?0:-1)}function Il(e,o){if(e&1&&u(0,yl,1,1),e&2){let t=o.$implicit,i=p(3),n=p(2),a;g(0,(a=q(1,Tt,n.stepByItemEntities()[t.key],n.stepByItemEntities()[t.key].parents==null?null:n.stepByItemEntities()[t.key].parents[i.id]))?0:-1,a)}}function Bl(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p(4);d("id",t.recipeId)}}function El(e,o){if(e&1&&S(0,"lab-tooltip",78),e&2){let t=p();d("id",t)}}function kl(e,o){if(e&1&&(r(0,"div",13)(1,"i",51),_(2,"iconClass"),u(3,Bl,1,1,"ng-template",null,49,B),s(),r(5,"i",51),_(6,"iconClass"),u(7,El,1,1,"ng-template",null,49,B),s()()),e&2){let t=T(4),i=p(3);l(),I(k(2,6,i.recipeId,"recipe")),d("pTooltip",t),l(4),I(m(6,9,o)),d("pTooltip",t)}}function Ml(e,o){e&1&&j(0)}function Ol(e,o){if(e&1&&(u(0,Ml,1,0,"ng-container",113),_(1,"rate")),e&2){p(5);let t=T(27);d("ngTemplateOutlet",t)("ngTemplateOutletContext",q(5,He,k(1,2,o.value,1),o.id))}}function Vl(e,o){if(e&1&&(u(0,Ol,2,8,"ng-container"),_(1,"inserterSpeed")),e&2){let t=p(2),i=p(6),n;g(0,(n=k(1,1,t,i.settings()))?0:-1,n)}}function Rl(e,o){if(e&1&&(r(0,"td"),u(1,Vl,2,4),s()),e&2){let t=p(2).$implicit,i=p(5);l(),g(1,i.itemsState()[t.key].beltId!==i.ItemId.Pipe?1:-1)}}function Pl(e,o){e&1&&j(0)}function Fl(e,o){if(e&1&&(u(0,Pl,1,0,"ng-container",113),_(1,"rate")),e&2){let t=p(2);p(2);let i=T(27),n=p(4);d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(5,He,k(1,2,t.div(n.beltSpeed()[o]),n.columnsState().belts.precision),o))}}function Dl(e,o){if(e&1&&(r(0,"td"),u(1,Fl,2,8,"ng-container"),s()),e&2){let t=p(2).$implicit,i=p(5),n;l(),g(1,(n=i.itemsState()[t.key].beltId)?1:-1,n)}}function jl(e,o){e&1&&j(0)}function $l(e,o){if(e&1&&(r(0,"tr"),u(1,Rl,2,1,"td")(2,Dl,2,1,"td"),r(3,"td"),u(4,jl,1,0,"ng-container",113),_(5,"rate"),s()()),e&2){let t=p().$implicit;p();let i=T(27),n=p(4);l(),g(1,n.data().game===n.Game.Factorio?1:-1),l(),g(2,n.columnsState().belts.show?2:-1),l(2),d("ngTemplateOutlet",i)("ngTemplateOutletContext",q(7,He,k(5,4,o.mul(n.dispRateInfo().value),n.columnsState().items.precision),t.key))}}function Al(e,o){if(e&1&&u(0,$l,6,10,"tr"),e&2){let t=o.$implicit,i=p(3),n;g(0,(n=t.value.div(i.recipe.time))?0:-1,n)}}function Nl(e,o){if(e&1&&S(0,"lab-tooltip",50),e&2){let t=p().itemId;d("id",t)}}function Ul(e,o){if(e&1&&(r(0,"div",119)(1,"span",55),h(2),s(),r(3,"i",51),_(4,"iconClass"),u(5,Nl,1,1,"ng-template",null,49,B),s()()),e&2){let t=o.value,i=o.itemId,n=T(6);l(2),w(t),l(),I(m(4,4,i)),d("pTooltip",n)}}function zl(e,o){if(e&1&&(r(0,"div",13)(1,"table",116),F(2,Il,1,4,null,null,we),_(4,"keyvalue"),s(),S(5,"i",117),r(6,"table",116)(7,"tr")(8,"td",53)(9,"span",55),h(10),_(11,"rate"),s()(),r(12,"td"),u(13,kl,9,11,"div",70),s()(),r(14,"tr")(15,"td",53)(16,"span",55),h(17),_(18,"rate"),s()(),r(19,"td"),S(20,"i",114),s()()(),S(21,"i",117),r(22,"table",116),F(23,Al,1,1,null,null,we),_(25,"keyvalue"),s(),u(26,Ul,7,6,"ng-template",null,118,B),s()),e&2){let t=p(2),i=p(2),n;l(2),D(k(4,3,t.recipe.in,i.trackSvc.sortByValue)),l(8),w(k(11,6,i.Rational.one,i.columnsState().machines.precision)),l(3),g(13,(n=t.recipeSettings==null?null:t.recipeSettings.machineId)?13:-1,n),l(4),w(k(18,9,i.dispRateInfo().value,i.columnsState().machines.precision)),l(6),D(k(25,12,t.recipe.out,i.trackSvc.sortByValue))}}function Hl(e,o){e&1&&(S(0,"small",115),_(1,"translate")),e&2&&d("innerHTML",m(1,1,"steps.inserterCountInfo"),Qt)}function Ll(e,o){if(e&1&&(r(0,"tr",101),S(1,"td"),r(2,"td",104),u(3,zl,28,15,"div",70)(4,Hl,2,3,"small",115),s()()),e&2){let t=p(),i=p(2);l(3),g(3,t.recipeId&&t.recipe&&t.machines?3:-1),l(),g(4,i.data().game===i.Game.Factorio?4:-1)}}function Wl(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p().$implicit;d("id",t)}}function Gl(e,o){if(e&1){let t=y();r(0,"button",124),x("click",function(){let a=v(t).$implicit,c=p(5);return b(c.toggleRecipe(a,c.recipesState(),c.data()))}),_(1,"iconSmClass"),S(2,"i",48),u(3,Wl,1,1,"ng-template",null,49,B),s()}if(e&2){let t=o.$implicit,i=T(4),n=p(5);J("hover-active",n.recipesState()[t].excluded),d("icon",k(1,4,t,"recipe"))("pTooltip",i)}}function ql(e,o){if(e&1){let t=y();r(0,"tr",101),S(1,"td"),r(2,"td",104)(3,"div")(4,"div",120),h(5),_(6,"translate"),s(),r(7,"div",121)(8,"small"),h(9),_(10,"translate"),s()(),r(11,"p-checkbox",122),x("onChange",function(){let a=v(t),c=p(4);return b(c.toggleRecipes(a.recipeIds,a.allRecipesIncluded,c.data()))}),_(12,"translate"),s()()()(),r(13,"tr",101),S(14,"td"),r(15,"td",104)(16,"div",123),F(17,Gl,5,7,"button",125,ee),s()()()}e&2&&(l(5),O(" ",m(6,5,"steps.includedRecipes")," "),l(4),w(m(10,7,"steps.includedRecipesInfo")),l(2),d("ngModel",o.allRecipesIncluded)("binary",!0)("label",m(12,9,"picker.includeAll")),l(6),D(o.recipeIds))}function Ql(e,o){if(e&1&&u(0,ql,19,11),e&2){let t=p(),i=p(2),n;g(0,(n=t.itemId&&i.stepDetails()[t.id])?0:-1,n)}}function Kl(e,o){if(e&1){let t=y();r(0,"tr",101)(1,"td")(2,"a",102),S(3,"button",103),s()(),r(4,"td",104)(5,"p-tabMenu",105,106),x("activeItemChange",function(n){let c=v(t),C=p(2);return b(C.setActiveItem(c,n))}),_(7,"stepId"),u(8,Ma,5,5,"ng-template",62),s()()(),u(9,Ha,7,5)(10,ml,1,1)(11,Ll,5,2)(12,Ql,1,1)}if(e&2){let t=T(6),i=p(2),n;l(2),d("relativeTo",i.route)("fragment",o.id),l(3),d("model",i.stepDetails()[o.id].tabs)("activeItem",i.activeItem[m(7,5,o)]),l(4),g(9,(n=t.activeItem==null?null:t.activeItem.label)===i.StepDetailTab.Item?9:n===i.StepDetailTab.Recipe?10:n===i.StepDetailTab.Machine?11:n===i.StepDetailTab.Recipes?12:-1)}}function Xl(e,o){if(e&1&&(u(0,Kl,13,7),_(1,"asStep")),e&2){let t=o.$implicit,i;g(0,(i=m(1,1,t))?0:-1,i)}}function Zl(e,o){e&1&&(r(0,"tr")(1,"td",104)(2,"div",37)(3,"span"),h(4),_(5,"translate"),s()()()()),e&2&&(l(4),w(m(5,1,"steps.emptyMessage")))}function Jl(e,o){if(e&1&&u(0,Zl,6,3,"tr"),e&2){let t=p();g(0,t.focus()?0:-1)}}function Yl(e,o){e&1&&S(0,"td",58)}function ep(e,o){e&1&&S(0,"td")}function tp(e,o){e&1&&S(0,"td")}function ip(e,o){if(e&1&&u(0,ep,1,0,"td")(1,tp,1,0,"td"),e&2){let t=p(2);g(0,t.columnsState().checkbox.show?0:-1),l(),g(1,t.columnsState().tree.show?1:-1)}}function np(e,o){if(e&1&&(S(0,"td"),u(1,ip,2,2)),e&2){let t=p();l(),g(1,t.focus()?-1:1)}}function op(e,o){e&1&&j(0)}function ap(e,o){if(e&1&&S(0,"lab-tooltip",50),e&2){let t=p(2).itemId;d("id",t)}}function lp(e,o){if(e&1&&S(0,"lab-tooltip",66),e&2){let t=p(3).beltId;d("id",t)}}function pp(e,o){if(e&1&&(r(0,"td",53)(1,"span",55),h(2),_(3,"rate"),s()(),r(4,"td",56)(5,"div",33)(6,"i",51),_(7,"iconClass"),u(8,lp,1,1,"ng-template",null,49,B),s()()()),e&2){let t=T(9),i=p(2),n=i.belts,a=i.beltId,c=p();l(2),w(k(3,4,n,c.columnsState().belts.precision)),l(4),I(m(7,7,a)),d("pTooltip",t)}}function sp(e,o){if(e&1&&S(0,"lab-tooltip",68),e&2){let t=p(4).wagonId;d("id",t)}}function rp(e,o){if(e&1&&(r(0,"i",51),_(1,"iconClass"),u(2,sp,1,1,"ng-template",null,49,B),s()),e&2){let t=T(3),i=p(3).wagonId;I(m(1,3,i)),d("pTooltip",t)}}function _p(e,o){if(e&1&&S(0,"lab-tooltip",69),e&2){let t=p(4).wagonId;d("id",t)}}function cp(e,o){if(e&1&&(r(0,"i",51),_(1,"iconClass"),u(2,_p,1,1,"ng-template",null,49,B),s()),e&2){let t=T(3),i=p(3).wagonId;I(m(1,3,i)),d("pTooltip",t)}}function dp(e,o){if(e&1&&(r(0,"td",53)(1,"span",55),h(2),_(3,"rate"),s()(),r(4,"td",56)(5,"div",33),u(6,rp,4,5,"i",128)(7,cp,4,5),s()()),e&2){let t=p(2),i=t.wagons,n=t.wagonId,a=p();l(2),w(k(3,2,i,a.columnsState().wagons.precision)),l(4),g(6,a.data().cargoWagonIds.indexOf(n)!==-1?6:7)}}function mp(e,o){if(e&1&&(r(0,"span",55),h(1),_(2,"machineRate"),s()),e&2){let t=p(2),i=t.machines,n=t.machineId,a=p();l(),w(ge(2,1,i,a.columnsState().machines.precision,n))}}function up(e,o){e&1&&(r(0,"div",129),h(1),_(2,"translate"),s()),e&2&&(l(),O(" ",m(2,1,"steps.inputs")," "))}function Cp(e,o){if(e&1&&(r(0,"span"),h(1),s()),e&2){let t=p(3).recipeObjectiveId;l(),O("#",t,"")}}function gp(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p(3).recipeId;d("id",t)}}function fp(e,o){if(e&1&&S(0,"lab-tooltip",78),e&2){let t=p(3).machineId;d("id",t)}}function xp(e,o){if(e&1&&(r(0,"i",51),_(1,"iconClass"),u(2,Cp,2,1,"span")(3,gp,1,1,"ng-template",null,49,B),s(),r(5,"i",51),_(6,"iconClass"),u(7,fp,1,1,"ng-template",null,49,B),s()),e&2){let t=T(4),i=p(2),n=i.recipeId,a=i.recipeObjectiveId,c=i.machineId;I(k(1,7,n,"recipe")),d("pTooltip",t),l(2),g(2,a?2:-1),l(3),I(m(6,10,c)),d("pTooltip",t)}}function hp(e,o){e&1&&(r(0,"div",130),S(1,"i",131),s(),r(2,"div",130),S(3,"i",131),s())}function Sp(e,o){e&1&&S(0,"i",133)}function vp(e,o){e&1&&S(0,"i",133)}function bp(e,o){if(e&1&&(r(0,"span"),h(1),s()),e&2){let t=p(4).destRecipeObjectiveId;l(),O("#",t,"")}}function Tp(e,o){if(e&1&&S(0,"lab-tooltip",134),e&2){let t=p(4),i=t.destId,n=t.destIsRecipe;d("id",i)("type",n?"recipe":"item")}}function wp(e,o){if(e&1&&(r(0,"i",51),_(1,"iconClass"),u(2,bp,2,1,"span")(3,Tp,1,2,"ng-template",null,49,B),s()),e&2){let t=T(4),i=p(3),n=i.destId,a=i.destIsRecipe,c=i.destRecipeObjectiveId;I(k(1,4,n,a?"recipe":"item")),d("pTooltip",t),l(2),g(2,c?2:-1)}}function yp(e,o){e&1&&(r(0,"span"),h(1),_(2,"translate"),s()),e&2&&(l(),O(" ",m(2,1,"steps.outputs")," "))}function Ip(e,o){if(e&1&&(u(0,Sp,1,0,"i",132),r(1,"span",55),h(2),_(3,"leftPad"),_(4,"rate"),s(),u(5,vp,1,0,"i",132)(6,wp,5,7,"i",128)(7,yp,3,3,"span")),e&2){let t=p(2),i=t.percentOnDest,n=t.percent,a=t.destId,c=t.outputs;g(0,i?0:-1),l(2),O("",m(3,5,k(4,7,n,-2)),"%"),l(3),g(5,i?-1:5),l(),g(6,a?6:-1),l(),g(7,c?7:-1)}}function Bp(e,o){if(e&1&&(u(0,op,1,0,"ng-container",111),r(1,"td",53)(2,"span",55),h(3),_(4,"rate"),s()(),r(5,"td",56)(6,"div",33)(7,"i",51),_(8,"iconClass"),u(9,ap,1,1,"ng-template",null,49,B),s()()(),u(11,pp,10,9)(12,dp,8,5),r(13,"td",53),u(14,mp,3,5,"span",54),_(15,"machineShowRate"),s(),r(16,"td",126)(17,"div",13),u(18,up,3,3,"div",127)(19,xp,9,12),_(20,"machineShow"),u(21,hp,4,0)(22,Ip,8,10),s()()),e&2){let t=T(10),i=p(),n=i.items,a=i.itemId,c=i.belts,C=i.beltId,f=i.wagons,E=i.wagonId,P=i.machines,A=i.machineId,$=i.inputs,K=i.percent,me=p(),ve=T(9);d("ngTemplateOutlet",ve),l(3),w(k(4,11,n,me.columnsState().items.precision)),l(4),I(m(8,14,a)),d("pTooltip",t),l(4),g(11,me.columnsState().belts.show&&c&&C?11:-1),l(),g(12,me.columnsState().wagons.show&&f&&E?12:-1),l(2),g(14,P&&P.nonzero()&&k(15,16,A,me.data().game)?14:-1),l(4),g(18,$?18:-1),l(),g(19,k(20,19,A,me.data().game)?19:21),l(3),g(22,K?22:-1)}}function Ep(e,o){if(e&1&&(r(0,"tr",101),u(1,Bp,23,22),s()),e&2){let t=o.itemId;l(),g(1,t?1:-1)}}function kp(e,o){e&1&&S(0,"td")}function Mp(e,o){e&1&&S(0,"td")}function Op(e,o){e&1&&j(0)}function Vp(e,o){e&1&&j(0)}function Rp(e,o){e&1&&j(0)}function Pp(e,o){e&1&&j(0)}function Fp(e,o){if(e&1&&(r(0,"td",137)(1,"span",55),h(2),_(3,"power"),s()()),e&2){let t=p(3);l(2),w(ge(3,1,t.totals().power,t.columnsState().power.precision,t.effectivePowerUnit()))}}function Dp(e,o){if(e&1&&(r(0,"td",137)(1,"span",55),h(2),_(3,"rate"),s()()),e&2){let t=p(3);l(2),w(k(3,1,t.totals().pollution,t.columnsState().pollution.precision))}}function jp(e,o){e&1&&S(0,"td")}var $p=(e,o)=>({columnSettings:e,totals:o,type:"belt"}),Ap=(e,o)=>({columnSettings:e,totals:o}),Np=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"machine"}),Up=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"beacon"});function zp(e,o){if(e&1&&(r(0,"tr"),S(1,"td"),u(2,kp,1,0,"td")(3,Mp,1,0,"td"),r(4,"td",58),h(5),_(6,"translate"),s(),u(7,Op,1,0,"ng-container",113)(8,Vp,1,0,"ng-container",113)(9,Rp,1,0,"ng-container",113)(10,Pp,1,0,"ng-container",113)(11,Fp,4,5,"td",136)(12,Dp,4,4,"td",136)(13,jp,1,0,"td"),s()),e&2){p();let t=T(2),i=p();l(2),g(2,i.columnsState().checkbox.show?2:-1),l(),g(3,i.columnsState().tree.show?3:-1),l(2),O(" ",m(6,14,"steps.total")," "),l(2),d("ngTemplateOutlet",t)("ngTemplateOutletContext",q(16,$p,i.columnsState().belts,i.totals().belts)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",q(19,Ap,i.columnsState().wagons,i.totals().wagons)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Ge(22,Np,i.columnsState().machines,i.totals().machines,i.totals().machineModules)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Ge(26,Up,i.columnsState().beacons,i.totals().beacons,i.totals().beaconModules)),l(),g(11,i.columnsState().power.show?11:-1),l(),g(12,i.columnsState().pollution.show?12:-1),l(),g(13,i.columnsState().link.show?13:-1)}}function Hp(e,o){if(e&1&&(r(0,"div",142)(1,"span",55),h(2),_(3,"rate"),s()()),e&2){let t=o.$implicit,i=p(2).columnSettings;l(2),w(k(3,1,t.value,i.precision))}}function Lp(e,o){if(e&1&&S(0,"lab-tooltip",134),e&2){let t=p(2).$implicit,i=p(2).type;d("id",t.key)("type",i)}}function Wp(e,o){if(e&1&&(r(0,"i",144),_(1,"iconClass"),u(2,Lp,1,2,"ng-template",null,49,B),s()),e&2){let t=T(3),i=p().$implicit;I(m(1,3,i.key)),d("pTooltip",t)}}function Gp(e,o){if(e&1&&S(0,"lab-tooltip",52),e&2){let t=p(2).$implicit;d("id",t.key)}}function qp(e,o){if(e&1&&(r(0,"i",144),_(1,"iconClass"),u(2,Gp,1,1,"ng-template",null,49,B),s()),e&2){let t=T(3),i=p().$implicit;I(k(1,3,i.key,"recipe")),d("pTooltip",t)}}function Qp(e,o){if(e&1&&u(0,Wp,4,5,"i",143)(1,qp,4,6),e&2){let t=o.$implicit,i=p(4);g(0,i.data().itemEntities[t.key]?0:1)}}function Kp(e,o){if(e&1&&S(0,"lab-tooltip",85),e&2){let t=p().$implicit;d("id",t.key)}}function Xp(e,o){if(e&1&&(r(0,"div",142)(1,"span",55),h(2),s()(),r(3,"i",144),_(4,"iconClass"),u(5,Kp,1,1,"ng-template",null,49,B),s()),e&2){let t=o.$implicit,i=T(6);l(2),w(t.value),l(),I(k(4,4,t.key,"item")),d("pTooltip",t.key!=="module"?i:void 0)}}function Zp(e,o){if(e&1&&(r(0,"td",138),F(1,Hp,4,4,"div",145,we),_(3,"keyvalue"),s(),r(4,"td",139)(5,"div",33)(6,"div",140),F(7,Qp,2,1,null,null,we),_(9,"keyvalue"),s(),r(10,"div",141),F(11,Xp,7,7,null,null,we),_(13,"keyvalue"),s()()()),e&2){let t=p(),i=t.totals,n=t.modulesTotals,a=p(2);l(),D(k(3,0,i,a.trackSvc.sortByValue)),l(6),D(k(9,3,i,a.trackSvc.sortByValue)),l(4),D(k(13,6,n,a.trackSvc.sortByValue))}}function Jp(e,o){if(e&1&&u(0,Zp,14,9),e&2){let t=o.columnSettings;g(0,t.show?0:-1)}}function Yp(e,o){if(e&1&&u(0,zp,14,30,"tr")(1,Jp,1,1,"ng-template",null,135,B),e&2){let t=p();g(0,t.focus()?-1:0)}}var es=()=>[25,50,100,1e3],ts=(()=>{let o=class o{constructor(){this.document=V(Jt),this.route=V(Si),this.ref=V(Xt),this.contentSvc=V(xe),this.trackSvc=V(ct),this.store=V(ae),this.exportSvc=V(Ei),this.routerSvc=V(Ne),this.focus=Le(!1),this.selectedId=Le(),this.steps=Z(()=>{let i=[...this.store.selectSignal(R.getSteps)()];if(!this.focus())return i;let a=this.selectedId();return i.filter(c=>c.id===a)}),this.activeItemsEffect=Ve(()=>{let i=this.steps(),n=this.store.selectSignal(R.getStepDetails)();this.setActiveItems(i,n)}),this.toggleEffect=Ve(()=>{let i=this.focus(),n=this.steps();i&&this.stepsTable?.toggleRow(n[0])}),this.machinesState=this.store.selectSignal(Q.getMachinesState),this.itemsState=this.store.selectSignal(G.getItemsState),this.itemsModified=this.store.selectSignal(G.getItemsModified),this.stepsModified=this.store.selectSignal(R.getStepsModified),this.totals=this.store.selectSignal(R.getTotals),this.stepDetails=this.store.selectSignal(R.getStepDetails),this.stepById=this.store.selectSignal(R.getStepById),this.stepByItemEntities=this.store.selectSignal(R.getStepByItemEntities),this.stepTree=this.store.selectSignal(R.getStepTree),this.effectivePowerUnit=this.store.selectSignal(R.getEffectivePowerUnit),this.recipesState=this.store.selectSignal(U.getRecipesState),this.recipesModified=this.store.selectSignal(R.getRecipesModified),this.data=this.store.selectSignal(U.getAdjustedDataset),this.columnsState=this.store.selectSignal(M.getColumnsState),this.settings=this.store.selectSignal(M.getSettings),this.dispRateInfo=this.store.selectSignal(M.getDisplayRateInfo),this.options=this.store.selectSignal(M.getOptions),this.beltSpeed=this.store.selectSignal(M.getBeltSpeed),this.preferences=this.store.selectSignal(H.preferencesState),this.sortSteps$=new zt(null),this.activeItem={},this.stepDetailIcon=ui,this.ItemId=L,this.StepDetailTab=mi,this.Game=fe,this.RecipeField=Qe,this.EnergyType=ei,this.ObjectiveUnit=ue,this.Rational=N,wt([this.sortSteps$.pipe(Lt()),this.store.select(R.getSteps)]).pipe(Ti()).subscribe(([[i,n],a])=>{this.sortSteps(i,n,a)})}ngOnInit(){this.route.fragment.pipe(Ce(),Ht(i=>i!=null)).subscribe(i=>{this.fragmentId=i})}ngAfterViewInit(){try{if(this.fragmentId){let[i,n,a]=this.fragmentId.split("_");wt([this.store.select(R.getSteps),this.store.select(R.getStepDetails)]).pipe(Ce()).subscribe(([c,C])=>{let f=c.find(E=>E.id===n);f&&C[f.id].tabs.length&&this.stepsTable&&(this.stepsTable.toggleRow(f),setTimeout(()=>{if(a){let P=this.document.querySelector("#"+this.fragmentId);P&&P.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(i,n,a){if(n==null||n.order==null||n.field==null)return;let c=n.order,C=n.field;if(i!=null&&i.field===C&&i.order!==c&&c===-1&&this.stepsTable!=null)return n.data?.sort((f,E)=>a.indexOf(f)-a.indexOf(E)),this.stepsTable.sortOrder=0,this.stepsTable.sortField="",this.stepsTable.reset(),this.sortSteps$.next(null);n.data?.sort((f,E)=>(f[C]??N.zero).sub(E[C]??N.zero).toNumber()*c)}setActiveItems(i,n){i.forEach(a=>{let c=ze.transform(a),C=this.activeItem[c],f=n[a.id];if(f!=null)if(C==null)this.activeItem[c]=f.tabs[0];else{let E=f.tabs.find(P=>P.label===C.label);E==null?this.activeItem[c]=f.tabs[0]:this.activeItem[c]=E}})}setActiveItem(i,n){let a=ze.transform(i);this.activeItem[a]=n}resetStep(i){i.itemId&&this.resetItem(i.itemId),i.recipeObjectiveId?this.resetRecipeObjective(i.recipeObjectiveId):i.recipeId&&this.resetRecipe(i.recipeId)}export(i,n,a,c,C){this.exportSvc.stepsToCsv(i,c,n,a,C)}toggleRecipes(i,n,a){let c=i.map(C=>({id:C,value:n,def:(a.defaults?.excludedRecipeIds??[]).includes(C)}));this.setRecipeExcludedBatch(c)}toggleRecipe(i,n,a){let c=!n[i].excluded,C=(a.defaults?.excludedRecipeIds??[]).some(f=>f===i);this.setRecipeExcluded(i,c,C)}changeRecipeField(i,n,a,c,C){if(i.recipeId==null)return;let f=i.recipeObjectiveId??i.recipeId,E=i.recipeObjectiveId!=null,P=i.recipeSettings;if(P?.machineId){let A=a.entities[P.machineId];switch(C){case Qe.Machine:{typeof n=="string"&&a.ids!=null&&this.setMachine(i.recipeObjectiveId??i.recipeId,n,Ae.bestMatch(c.recipeEntities[i.recipeId].producers,a.ids),i.recipeObjectiveId!=null);break}case Qe.Fuel:{typeof n=="string"&&this.setFuel(i.recipeObjectiveId??i.recipeId,n,A.fuelId,i.recipeObjectiveId!=null);break}case Qe.Overclock:{if(typeof n=="number"){let $=A.overclock;this.setOverclock(f,N.fromNumber(n),$,E)}break}}}}generateModules(i,n,a){let c=[...a];for(let C=i;C<c.length;C++)c[C]=n;return c}changeStepChecked(i,n){i.itemId!=null?this.setItemChecked(i.itemId,n):i.recipeObjectiveId!=null?this.setRecipeChecked(i.recipeObjectiveId,n,!0):i.recipeId!=null&&this.setRecipeChecked(i.recipeId,n)}setRows(i){this.store.dispatch(new H.SetRowsAction(i))}setItemExcluded(i,n){this.store.dispatch(new G.SetExcludedAction({id:i,value:n}))}setItemChecked(i,n){this.store.dispatch(new G.SetCheckedAction({id:i,value:n}))}setBelt(i,n,a){this.store.dispatch(new G.SetBeltAction({id:i,value:n,def:a}))}setWagon(i,n,a){this.store.dispatch(new G.SetWagonAction({id:i,value:n,def:a}))}setRecipeExcluded(i,n,a){this.store.dispatch(new U.SetExcludedAction({id:i,value:n,def:a}))}setRecipeExcludedBatch(i){this.store.dispatch(new U.SetExcludedBatchAction(i))}addObjective(i){this.store.dispatch(new R.AddAction(i))}setMachine(i,n,a,c=!1){let C=c?R.SetMachineAction:U.SetMachineAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setFuel(i,n,a,c=!1){let C=c?R.SetFuelAction:U.SetFuelAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setModules(i,n,a=!1){let c=a?R.SetModulesAction:U.SetModulesAction;this.store.dispatch(new c({id:i,value:n}))}setBeacons(i,n,a=!1){let c=a?R.SetBeaconsAction:U.SetBeaconsAction;this.store.dispatch(new c({id:i,value:n}))}setOverclock(i,n,a,c=!1){let C=c?R.SetOverclockAction:U.SetOverclockAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setRecipeChecked(i,n,a=!1){let c=a?R.SetCheckedAction:U.SetCheckedAction;this.store.dispatch(new c({id:i,value:n}))}resetItem(i){this.store.dispatch(new G.ResetItemAction(i))}resetRecipe(i){this.store.dispatch(new U.ResetRecipeAction(i))}resetRecipeObjective(i){this.store.dispatch(new R.ResetObjectiveAction(i))}resetChecked(){this.store.dispatch(new G.ResetCheckedAction)}resetExcluded(){this.store.dispatch(new G.ResetExcludedAction)}resetBelts(){this.store.dispatch(new G.ResetBeltsAction)}resetWagons(){this.store.dispatch(new G.ResetWagonsAction)}resetMachines(){this.store.dispatch(new U.ResetMachinesAction)}resetBeacons(){this.store.dispatch(new U.ResetBeaconsAction)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=te({type:o,selectors:[["lab-steps"]],viewQuery:function(n,a){if(n&1&&Pe(Sn,5),n&2){let c;Fe(c=De())&&(a.stepsTable=c.first)}},inputs:{focus:[We.SignalBased,"focus"],selectedId:[We.SignalBased,"selectedId"]},decls:13,vars:10,consts:[["dataKey","id","styleClass","p-datatable-sm",3,"rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport","rowsChange","sortFunction"],["stepsTable",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["emptyCol2",""],["leftPad",""],["detailRow",""],["pTemplate","footer"],[1,"w-0","px-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined","p-button-rounded",3,"pTooltip","click"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","class","ms-2 p-button-text p-button-rounded","icon","fa-solid fa-rotate-left",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["pSortableColumn","power"],["pSortableColumn","pollution"],["class","w-0 px-1"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip","click"],["field","belts"],["field","wagons"],["field","power"],["field","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down","data-test","lab-list-export","tooltipPosition","left",1,"p-button-outlined","p-button-rounded",3,"pTooltip","click"],[1,"w-0","px-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"pTooltip","pRowToggler"],["class","overflow-hidden px-1 py-0"],["class","text-end"],[1,"d-flex","justify-content-center"],[3,"binary","ngModel","onChange"],[1,"overflow-hidden","px-1","py-0"],[1,"d-flex","align-items-center","links"],["class","indent"],[1,"icon"],["pButton","","pRipple","","type","button","class","hover-action p-button-text",3,"hover-active","icon","pTooltip"],[1,"indent"],[1,"connect"],["class","connect",3,"trail","last"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"icon","pTooltip","click"],[1,"hover-icon","fa-solid","fa-eye-slash"],["tooltip",""],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","text-end"],["class","monospace"],[1,"monospace"],[1,"ps-0"],[1,"find-text"],["colspan","2"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"pTooltip","ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["class","d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["class","d-flex align-items-center"],["pButton","","pRipple","","type","button","class","hover-action p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip","click"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"pTooltip","options","ngModel","onChange"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel","onBlur"],["overclockInput",""],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options","onChange"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","modules","p-button-text",3,"click"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["modulePicker",""],["class","p-button-icon",3,"class"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click"],["beaconsOverlay",""],["class","p-button-icon sum",3,"class"],[1,"p-button-icon","sum"],[1,"text-end"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","class","p-button-text p-button-rounded","icon","fa-solid fa-rotate-left","tooltipPosition","left",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip","click"],["class","fragment",3,"id"],[1,"detail"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],["colspan","100"],[3,"model","activeItem","activeItemChange"],["expandTabMenu",""],[1,"p-menuitem-link"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],["class","detail"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],["machineValueCell",""],[1,"d-flex","align-items-center","justify-content-end"],[1,"fw-bold"],[1,"mb-2"],[3,"ngModel","binary","label","onChange"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"icon","pTooltip","click"],["pButton","","pRipple","","type","button","class","p-button-text hover-action me-2",3,"hover-active","icon","pTooltip"],["colspan","100",1,"p-0"],["class","position-absolute"],[3,"class","pTooltip"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],["class","m-1 p-2 fa-solid fa-arrow-right"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],["totalCell",""],["class","text-end inherit"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"py-2","icon-height"],["class","d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],["class","py-2 icon-height"]],template:function(n,a){n&1&&(r(0,"p-table",0,1),x("rowsChange",function(C){return a.setRows(C)})("sortFunction",function(C){return a.sortSteps$.next(C)}),u(2,Un,26,21,"ng-template",2)(3,ka,2,3,"ng-template",3)(4,Xl,2,3,"ng-template",4)(5,Jl,1,1,"ng-template",5)(6,Yl,1,0,"ng-template",null,6,B)(8,np,2,1,"ng-template",null,7,B)(10,Ep,2,1,"ng-template",null,8,B)(12,Yp,3,1,"ng-template",9),s()),n&2&&d("rowTrackBy",a.trackSvc.trackStep)("value",a.steps())("customSort",!0)("rowExpandMode",a.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!a.focus()&&!a.preferences().disablePaginator)("rows",a.preferences().rows)("rowsPerPageOptions",X(9,es))("showCurrentPageReport",!0)},dependencies:[je,pe,se,ne,bi,_e,re,Ue,ce,ut,oe,Ct,Mi,Vi,Oi,Ui,he,at,Me,Te,Oe,st,le,Ri,de,Ot,Vt,Rt,Pt,Ft,Dt,jt,$t,Se,At,ze],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;height:100vh;margin-left:16px}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:hover):not(:focus):not(.ng-invalid), [_nghost-%COMP%]     .p-inputtext:not(:hover):not(:focus):not(.ng-invalid){border-color:transparent;background-color:transparent}[_nghost-%COMP%]     .module-dropdown:not(.last){margin-right:-.5rem}[_nghost-%COMP%]     .module-dropdown:not(.last) .p-dropdown{border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown .lab-icon.sm{opacity:.3}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown:not(.last) .p-dropdown{border-top-color:var(--primary-color);border-bottom-color:var(--primary-color)}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown.last .p-dropdown{border-color:var(--primary-color);border-left-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{height:32px;margin-top:1px;margin-bottom:1px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}"],changeDetection:0});let e=o;return e})();function as(e,o){if(e&1&&(r(0,"span",25),h(1),s()),e&2){let t=p(2).$implicit,i=p();l(),w(i.data().recipeEntities[t.targetId].name)}}function ls(e,o){if(e&1){let t=y();r(0,"button",21),x("click",function(){v(t);let n=T(8),a=p().$implicit,c=p();return b(n.clickOpen("recipe",c.recipeIds(),a.targetId))}),_(1,"translate"),r(2,"i",22),_(3,"iconSmClass"),r(4,"span"),h(5),s()(),u(6,as,2,1,"span",23),s(),r(7,"lab-picker",10,24),x("selectId",function(n){v(t);let a=p().$implicit,c=p();return b(c.setTarget(a.id,n))}),_(9,"translate"),s()}if(e&2){let t=p().$implicit,i=p();d("pTooltip",m(1,6,"objectives.selectARecipe")),l(2),I(k(3,8,t.targetId,"recipe")),l(3),O("#",t.id,""),l(),g(6,i.contentSvc.isMobile()?-1:6),l(),d("header",m(9,11,"objectives.selectARecipe"))}}function ps(e,o){if(e&1){let t=y();r(0,"button",26),x("click",function(){v(t);let n=T(4),a=p().$implicit,c=p();return b(n.clickOpen("item",c.itemIds(),a.targetId))}),_(1,"iconSmClass"),_(2,"translate"),s(),r(3,"lab-picker",10,27),x("selectId",function(n){v(t);let a=p().$implicit,c=p();return b(c.setTarget(a.id,n))}),_(5,"translate"),s()}if(e&2){let t=p().$implicit,i=p();d("icon",m(1,4,t.targetId))("label",i.contentSvc.isMobile()?"":i.data().itemEntities[t.targetId].name)("pTooltip",m(2,6,"objectives.selectAnItem")),l(3),d("header",m(5,8,"objectives.selectAnItem"))}}function ss(e,o){if(e&1){let t=y();r(0,"p-dropdown",19),x("onChange",function(n){v(t);let a=p().$implicit,c=p(),C=T(22),f=T(25);return b(c.changeUnit(a,n.value,c.objectiveRationals(),c.itemsState(),c.beltSpeed(),c.dispRateInfo(),c.data(),C,f))}),_(1,"translate"),s()}if(e&2){let t=p().$implicit,i=p();d("tooltip",m(1,3,"objectives.unitTooltip"))("options",i.rateUnitOptions())("ngModel",t.unit)}}function rs(e,o){if(e&1){let t=y();r(0,"div",15),S(1,"button",16),u(2,ls,10,13)(3,ps,6,10),r(4,"lab-input-number",17),x("setValue",function(n){let c=v(t).$implicit,C=p();return b(C.setValue(c.id,n))}),_(5,"translate"),s(),u(6,ss,2,5,"p-dropdown",18),r(7,"p-dropdown",19),x("onChange",function(n){let c=v(t).$implicit,C=p();return b(C.setType(c.id,n.value))}),_(8,"translate"),s(),r(9,"button",20),x("click",function(){let a=v(t).$implicit,c=p();return b(c.removeObjective(a.id))}),_(10,"translate"),s()()}if(e&2){let t=o.$implicit,i=p();l(2),g(2,t.unit===i.ObjectiveUnit.Machines?2:3),l(2),d("pTooltip",m(5,9,"objectives.valueTooltip"))("hideButtons",i.contentSvc.isMobile())("value",t.value),l(2),g(6,t.type!==i.ObjectiveType.Maximize?6:-1),l(),d("tooltip",m(8,11,"objectives.typeTooltip"))("options",i.objectiveTypeOptions)("ngModel",t.type),l(2),d("pTooltip",m(10,13,"objectives.removeTooltip"))}}function _s(e,o){if(e&1&&S(0,"p-messages",9),e&2){let t=p();d("value",t.messages())("closable",!1)("escape",!1)}}var cs=(()=>{let o=class o{constructor(){this.store=V(ae),this.translateSvc=V($e),this.contentSvc=V(xe),this.trackSvc=V(ct),this.messages=Z(()=>{let i=this.store.selectSignal(R.getObjectives),n=this.store.selectSignal(R.getMatrixResult),a=this.store.selectSignal(G.getItemsState),c=this.store.selectSignal(U.getRecipesState);return this.getMessages(i(),n(),a(),c())}),this.objectives=Z(()=>[...this.store.selectSignal(R.getObjectives)()]),this.objectiveRationals=this.store.selectSignal(R.getAdjustedObjectives),this.itemsState=this.store.selectSignal(G.getItemsState),this.itemIds=this.store.selectSignal(U.getAvailableItems),this.data=this.store.selectSignal(U.getAdjustedDataset),this.beltSpeed=this.store.selectSignal(M.getBeltSpeed),this.dispRateInfo=this.store.selectSignal(M.getDisplayRateInfo),this.rateUnitOptions=this.store.selectSignal(M.getObjectiveUnitOptions),this.recipeIds=this.store.selectSignal(M.getAvailableRecipes),this.paused=this.store.selectSignal(H.getPaused),this.objectiveTypeOptions=ri,this.displayRateOptions=rt,this.ObjectiveUnit=ue,this.ObjectiveType=be}getMessages(i,n,a,c){if(n.resultType===It.Paused)return[{severity:"info",detail:this.translateSvc.instant("objectives.pausedMessage")}];if(n.resultType!==It.Failed)return[];if(n.simplexStatus==="unbounded"){let C=i.filter(f=>f.type===be.Maximize);return C.length&&i.every(f=>f.type!==be.Limit)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorNoLimits",n):C.some(f=>f.unit===ue.Machines?c[f.targetId].excluded:a[f.targetId].excluded)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorMaximizeExcluded",n):this.buildErrorMessages("objectives.errorUnbounded","objectives.errorUnboundedDetail",n)}else return n.simplexStatus==="no_feasible"?this.buildErrorMessages("objectives.errorInfeasible","objectives.errorInfeasibleDetail",n):this.buildErrorMessages("objectives.error","objectives.errorDetail",n)}buildErrorMessages(i,n,a){return[{severity:"error",summary:this.translateSvc.instant(i),detail:`${this.translateSvc.instant(n)} ${this.translateSvc.instant("objectives.errorSimplexInfo",{returnCode:a.returnCode??"unknown",simplexStatus:a.simplexStatus??"unknown"})}`}]}setObjectiveOrder(i){this.setOrder(i.map(n=>n.id))}changeUnit(i,n,a,c,C,f,E,P,A){let $=a.find(K=>K.id===i.id);if($!=null)if(n===ue.Machines){if(i.unit!==ue.Machines){let K=E.itemRecipeIds[i.targetId],me=ve=>this.convertItemsToMachines($,ve,c,C,f,E);K.length===1?me(K[0]):(A.selectId.pipe(Ce()).subscribe(ve=>me(ve)),A.clickOpen("recipe",K))}}else if(i.unit===ue.Machines){let K=Array.from(E.recipeR[i.targetId].produces),me=ve=>this.convertMachinesToItems($,ve,n,c,C,f,E);K.length===1?me(K[0]):(P.selectId.pipe(Ce()).subscribe(ve=>me(ve)),P.clickOpen("item",K))}else this.convertItemsToItems($,i.targetId,n,c,C,f,E)}convertItemsToMachines(i,n,a,c,C,f){if(this.setUnit(i.id,{targetId:n,unit:ue.Machines}),i.type===be.Maximize)return;let E=Xe.objectiveNormalizedRate(i,a,c,C,f),P=f.recipeR[n],A=E.div(P.output[i.targetId]);this.setValue(i.id,A)}convertMachinesToItems(i,n,a,c,C,f,E){if(this.setUnit(i.id,{targetId:n,unit:a}),i.type===be.Maximize||i.recipe==null)return;let P=Xe.objectiveNormalizedRate({id:"",targetId:n,value:N.one,unit:a,type:be.Output},c,C,f,E),$=i.value.mul(i.recipe.output[n]).div(P);this.setValue(i.id,$)}convertItemsToItems(i,n,a,c,C,f,E){if(this.setUnit(i.id,{targetId:n,unit:a}),i.type===be.Maximize)return;let P=Xe.objectiveNormalizedRate(i,c,C,f,E),A=Xe.objectiveNormalizedRate({id:"",targetId:n,value:N.one,unit:a,type:be.Output},c,C,f,E),$=P.div(A);this.setValue(i.id,$)}addItemObjective(i){this.addObjective({targetId:i,unit:ue.Items})}addRecipeObjective(i){this.addObjective({targetId:i,unit:ue.Machines})}removeObjective(i){this.store.dispatch(new R.RemoveAction(i))}setOrder(i){this.store.dispatch(new R.SetOrderAction(i))}setTarget(i,n){this.store.dispatch(new R.SetTargetAction({id:i,value:n}))}setValue(i,n){this.store.dispatch(new R.SetValueAction({id:i,value:n}))}setUnit(i,n){this.store.dispatch(new R.SetUnitAction({id:i,value:n}))}setType(i,n){this.store.dispatch(new R.SetTypeAction({id:i,value:n}))}addObjective(i){this.store.dispatch(new R.AddAction(i))}setDisplayRate(i,n){this.store.dispatch(new M.SetDisplayRateAction({value:i,prev:n}))}setPaused(i){this.store.dispatch(new H.SetPausedAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=te({type:o,selectors:[["lab-objectives"]],decls:27,vars:35,consts:[[3,"header"],[1,"objectives-content"],[3,"value","dragdrop","trackBy","onReorder"],["pTemplate","item"],[1,"objectives-buttons","d-flex","flex-wrap","mt-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"label","click"],["labDropdownTranslate","","styleClass","h-100",3,"tooltip","ngModel","options","onChange"],["offIcon","fa-solid fa-pause",3,"ngModel","onIcon","pTooltip","onChange"],["styleClass","mt-2 w-100",3,"value","closable","escape"],[3,"header","selectId"],["addItemPicker",""],["addRecipePicker",""],["chooseItemPicker",""],["chooseRecipePicker",""],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","border-end-0","cursor-grab"],["labNoDrag","","tooltipPosition","top",3,"pTooltip","hideButtons","value","setValue"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"tooltip","options","ngModel"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"tooltip","options","ngModel","onChange"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark","tooltipPosition","left",1,"p-button-outlined",3,"pTooltip","click"],["pButton","","pRipple","","labNoDrag","","type","button","tooltipPosition","top",1,"p-button-outlined","lab-button-icon-only","text-truncate",3,"pTooltip","click"],[1,"p-button-icon"],["class","p-button-label"],["editRecipePicker",""],[1,"p-button-label"],["labNoDrag","","pButton","","pRipple","","type","button","tooltipPosition","top",1,"p-button-outlined","text-truncate",3,"icon","label","pTooltip","click"],["editItemPicker",""]],template:function(n,a){if(n&1){let c=y();r(0,"p-card",0),_(1,"translate"),r(2,"div",1)(3,"p-orderList",2),x("onReorder",function(){return a.setObjectiveOrder(a.objectives())}),u(4,rs,11,15,"ng-template",3),s(),r(5,"div",4)(6,"button",5),x("click",function(){v(c);let f=T(16);return b(f.clickOpen("item",a.itemIds()))}),_(7,"translate"),s(),r(8,"button",6),x("click",function(){v(c);let f=T(19);return b(f.clickOpen("recipe",a.recipeIds()))}),_(9,"translate"),s(),r(10,"p-dropdown",7),x("onChange",function(f){return a.setDisplayRate(f.value,a.dispRateInfo().option)}),_(11,"translate"),s(),r(12,"p-toggleButton",8),x("onChange",function(f){let E;return a.setPaused((E=f.checked)!==null&&E!==void 0?E:!1)}),_(13,"translate"),s()(),u(14,_s,1,3,"p-messages",9),s(),r(15,"lab-picker",10,11),x("selectId",function(f){return a.addItemObjective(f)}),_(17,"translate"),s(),r(18,"lab-picker",10,12),x("selectId",function(f){return a.addRecipeObjective(f)}),_(20,"translate"),s(),S(21,"lab-picker",0,13),_(23,"translate"),S(24,"lab-picker",0,14),_(26,"translate"),s()}n&2&&(d("header",m(1,17,"objectives.title")),l(3),d("value",a.objectives())("dragdrop",!0)("trackBy",a.trackSvc.trackById),l(3),d("label",m(7,19,"objectives.addItems")),l(2),d("label",m(9,21,"objectives.addMachines")),l(2),d("tooltip",m(11,23,"objectives.selectDisplayRate"))("ngModel",a.dispRateInfo().option)("options",a.displayRateOptions),l(2),d("ngModel",a.paused())("onIcon","fa-solid fa-play")("pTooltip",m(13,25,"objectives.pauseTooltip")),l(2),g(14,a.messages().length?14:-1),l(),d("header",m(17,27,"objectives.selectAnItem")),l(3),d("header",m(20,29,"objectives.selectARecipe")),l(3),d("header",m(23,31,"objectives.selectAnItem")),l(3),d("header",m(26,33,"objectives.selectARecipe")))},dependencies:[pe,se,ne,_e,re,Di,ce,Ai,ht,oe,zi,Be,ft,xt,Oe,le,de],styles:[".objectives-content[_ngcontent-%COMP%]{max-width:1000px}.objectives-buttons[_ngcontent-%COMP%]{gap:.25rem}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown.icon[_ngcontent-%COMP%]{flex:0 0 36px}@media (min-width: 576px){button.text-truncate[_ngcontent-%COMP%], .p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 25%}}@media (max-width: 575.98px){.p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 15%}}@media (max-width: 575.98px){[_nghost-%COMP%]     button.lab-button-icon-only{justify-content:center;width:2.571rem;padding:.5rem 0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-icon{margin:0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-label{flex:0 0 auto;visibility:hidden;width:0}}"],changeDetection:0});let e=o;return e})();function Cs(e,o){if(e&1){let t=y();r(0,"div",16)(1,"span",2),h(2),_(3,"translate"),s(),r(4,"button",17),x("click",function(){v(t);let n=p();return b(n.copyScriptToClipboard())}),_(5,"translate"),s(),S(6,"a",18),_(7,"translate"),s()}e&2&&(l(2),w(m(3,3,"techPicker.exportFromFactorio")),l(2),d("label",m(5,5,"techPicker.exportCopyScript")),l(2),d("label",m(7,7,"techPicker.exportUseMod")))}function gs(e,o){if(e&1){let t=y();r(0,"button",19),x("click",function(){v(t);let n=p();return b(n.importTechs())}),_(1,"translate"),s(),r(2,"button",20),x("click",function(){v(t);let n=p();return b(n.importVisible=!1)}),_(3,"translate"),s()}e&2&&(d("label",m(1,2,"ok")),l(2),d("label",m(3,4,"cancel")))}function fs(e,o){e&1&&j(0)}function xs(e,o){e&1&&j(0)}function hs(e,o){e&1&&j(0)}function Ss(e,o){e&1&&(r(0,"i"),h(1),_(2,"translate"),s()),e&2&&(l(),w(m(2,1,"none")))}function vs(e,o){e&1&&j(0)}var bs=(e,o)=>({id:e,class:o});function Ts(e,o){if(e&1&&u(0,vs,1,0,"ng-container",21),e&2){let t=o.$implicit,i=p().class;p();let n=T(7);d("ngTemplateOutlet",n)("ngTemplateOutletContext",q(2,bs,t,i))}}function ws(e,o){if(e&1&&(r(0,"h3"),h(1),_(2,"translate"),s(),r(3,"div",24),u(4,Ss,3,3,"i"),F(5,Ts,1,5,"ng-container",null,ee),s()),e&2){let t=o.title,i=o.ids;l(),w(m(2,2,t)),l(3),g(4,i.length===0?4:-1),l(),D(i)}}function ys(e,o){if(e&1&&S(0,"lab-tooltip",27),e&2){let t=p().id;d("id",t)}}function Is(e,o){if(e&1){let t=y();r(0,"button",25),x("click",function(){let a=v(t).id,c=p(2);return b(c.clickId(a))}),_(1,"iconSmClass"),u(2,ys,1,1,"ng-template",null,26,B),s()}if(e&2){let t=o.id,i=o.class,n=T(3),a=p(2);I(i),J("hover-active",a.selection().indexOf(t)===-1),d("label",a.showTechLabels()&&(a.data().itemEntities[t]==null?null:a.data().itemEntities[t].name)||"")("icon",m(1,7,t))("pTooltip",n)}}var Bs=()=>({height:"calc(80vh - 165px)",minHeight:"363px"}),Es=e=>({title:"techPicker.available",ids:e,class:"p-button-text"}),ks=e=>({title:"techPicker.locked",ids:e,class:"p-button-danger"}),Ms=e=>({title:"techPicker.researched",ids:e,class:"p-button-success"});function Os(e,o){if(e&1&&(r(0,"p-scrollPanel"),u(1,fs,1,0,"ng-container",21)(2,xs,1,0,"ng-container",21)(3,hs,1,0,"ng-container",21)(4,ws,7,4,"ng-template",null,22,B)(6,Is,4,9,"ng-template",null,23,B),s()),e&2){let t=T(5),i=p();ke(X(8,Bs)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(9,Es,i.status().available)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(11,ks,i.status().locked)),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(13,Ms,i.status().researched))}}function Vs(e,o){if(e&1){let t=y();r(0,"button",19),x("click",function(){v(t);let n=p();return b(n.hide())}),_(1,"translate"),s(),r(2,"button",20),x("click",function(){v(t);let n=p();return b(n.hide(!0))}),_(3,"translate"),s()}e&2&&(d("label",m(1,2,"ok")),l(2),d("label",m(3,4,"cancel")))}var Rs=()=>({minHeight:"528px",height:"80vh",width:"50vw"}),Ps=()=>({"768px":"80vw","576px":"100vw"}),Fs=()=>({width:"30vw"}),Ds=()=>({"768px":"50vw","576px":"90vw"}),Nt=(()=>{let o=class o extends hi{constructor(){super(...arguments),this.filterSvc=V(xi),this.translateSvc=V($e),this.store=V(ae),this.contentSvc=V(xe),this.selectIds=new Re,this.data=this.store.selectSignal(U.getAdjustedDataset),this.showTechLabels=this.store.selectSignal(H.getShowTechLabels),this.filter=ie(""),this.selection=ie([]),this.allSelected=Z(()=>this.selection().length===this.data().technologyIds.length),this.status=Z(()=>{let i=this.data(),n=this.filter(),a=this.selection(),c=new Set(a),C=[],f=[],E=i.technologyIds;if(n){let A=E.map($=>i.itemEntities[$]);E=this.filterSvc.filter(A,["name"],n,"contains").map($=>$.id),a=a.filter($=>E.includes($))}let P=a;for(let A of E)if(!c.has(A)){let $=i.technologyEntities[A];$.prerequisites==null||$.prerequisites.every(K=>c.has(K))?C.push(A):f.push(A)}return{available:C,locked:f,researched:P}}),this.importVisible=!1,this.importValue="",this.Game=fe}clickOpen(i){i=[...i??this.data().technologyIds],this.selection.set(i),this.show()}selectAll(i){this.selection.set(i?[...this.data().technologyIds]:[])}openImport(i){this.importVisible=!0,this.importValue="",setTimeout(()=>i.focus())}copyScriptToClipboard(){window.navigator.clipboard.writeText(`/c local list = {}
for _, tech in pairs(game.player.force.technologies) do
    if tech.researched then
        list[#list + 1] = tech.name
    end
end
game.write_file("techs.txt", table.concat(list, ","))
`),this.contentSvc.showToast$.next({severity:"success",detail:this.translateSvc.instant("techPicker.exportScriptCopied"),life:1e5,contentStyleClass:"detail-only"})}importTechs(){let i=this.importValue.split(",").map(a=>a.trim()).map(a=>{if(!a)return"";let c=`${a}-technology`;return this.data().technologyIds.includes(c)?c:this.data().technologyIds.includes(a)?a:""}).filter(a=>!!a),n=new Set(i);this.addPrerequisites(n),this.selection.set(Array.from(n)),this.importValue="",this.importVisible=!1}clickId(i){let n=new Set(this.selection());if(n.has(i)){n.delete(i);let a;do{a=new Set;for(let c of n)this.data().technologyEntities[c].prerequisites?.some(f=>!n.has(f))&&a.add(c);a.forEach(c=>n.delete(c))}while(a.size)}else n.add(i),this.addPrerequisites(n);this.selection.set(Array.from(n))}addPrerequisites(i){let n;do{n=new Set;for(let a of i)this.data().technologyEntities[a].prerequisites?.filter(C=>!i.has(C)).forEach(C=>n.add(C));n.forEach(a=>i.add(a))}while(n.size)}save(){let i=this.selection(),n=this.data();i.length===n.technologyIds.length&&this.selectIds.emit(null);let a=i.filter(c=>!i.some(C=>{let f=n.technologyEntities[C];return f.prerequisites&&f.prerequisites.indexOf(c)!==-1}));this.selectIds.emit(a)}setShowTechLabels(i){this.store.dispatch(new H.SetShowTechLabelsAction(i))}};o.\u0275fac=(()=>{let i;return function(a){return(i||(i=qt(o)))(a||o)}})(),o.\u0275cmp=te({type:o,selectors:[["lab-tech-picker"]],outputs:{selectIds:"selectIds"},features:[Zt],decls:28,vars:49,consts:[["styleClass","picker-dialog","appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","header","breakpoints","visibleChange","onHide"],[1,"d-flex","w-100","my-1","p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-magnifying-glass"],["pInputText","","type","text",1,"w-100",3,"ngModel","input"],["filterInput",""],[1,"p-inputgroup-addon","flex-shrink-0"],["labelStyleClass","text-nowrap",3,"binary","label","ngModel","onChange"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-import",1,"flex-shrink-0",3,"label","pTooltip","click"],["appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","breakpoints","header","visibleChange"],[1,"d-flex","flex-column"],["class","p-inputgroup mb-3"],["rows","10","pInputTextarea","",1,"mt-2","w-100",3,"ngModel","ngModelChange","keydown.enter"],["importInput",""],["pTemplate","footer"],[3,"style"],[1,"p-inputgroup","mb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"label","click"],["href","https://mods.factorio.com/mod/export-researched-technologies","target","_blank","pButton","","pRipple","","icon","fa-solid fa-link",1,"text-decoration-none","p-inputgroup-addon","p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-secondary",3,"label","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["techSet",""],["techButton",""],[1,"d-flex","flex-wrap","invert"],["pButton","","pRipple","","type","button","tooltipPosition","bottom",1,"me-1","mb-1",3,"label","icon","pTooltip","click"],["tooltip",""],["type","technology",3,"id"]],template:function(n,a){if(n&1){let c=y();r(0,"p-dialog",0),x("visibleChange",function(f){return a.visible=f})("onHide",function(){return a.onHide()}),_(1,"translate"),r(2,"div",1)(3,"span",2),S(4,"i",3),s(),r(5,"input",4,5),x("input",function(){v(c);let f=T(6);return b(a.filter.set(f.value))}),s(),r(7,"span",6)(8,"p-checkbox",7),x("onChange",function(f){return a.selectAll(f.checked)}),_(9,"translate"),s()(),r(10,"span",6)(11,"p-checkbox",7),x("onChange",function(f){return a.setShowTechLabels(f.checked)}),_(12,"translate"),s()(),r(13,"button",8),x("click",function(){v(c);let f=T(24);return b(a.openImport(f))}),_(14,"translate"),_(15,"translate"),s(),r(16,"p-dialog",9),x("visibleChange",function(f){return a.importVisible=f}),_(17,"translate"),r(18,"div",10),u(19,Cs,8,9,"div",11),r(20,"div"),h(21),_(22,"translate"),s(),r(23,"textarea",12,13),x("ngModelChange",function(f){return a.importValue=f})("keydown.enter",function(){return a.importTechs()}),s()(),u(25,gs,4,6,"ng-template",14),s()(),u(26,Os,8,15,"p-scrollPanel",15)(27,Vs,4,6,"ng-template",14),s()}n&2&&(ke(X(45,Rs)),d("visible",a.visible)("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("header",m(1,31,"techPicker.header"))("breakpoints",X(46,Ps)),l(5),d("ngModel",a.filter()),l(3),d("binary",!0)("label",m(9,33,"techPicker.unlockAll"))("ngModel",a.allSelected()),l(3),d("binary",!0)("label",m(12,35,"techPicker.showLabels"))("ngModel",a.showTechLabels()),l(2),d("label",m(14,37,"techPicker.import"))("pTooltip",m(15,39,"techPicker.importTooltip")),l(3),ke(X(47,Fs)),d("visible",a.importVisible)("modal",!0)("dismissableMask",!0)("draggable",!0)("resizable",!1)("breakpoints",X(48,Ds))("header",m(17,41,"techPicker.importHeader")),l(3),g(19,a.data().game===a.Game.Factorio?19:-1),l(2),w(m(22,43,"techPicker.importInstructions")),l(2),d("ngModel",a.importValue),l(3),g(26,a.visible?26:-1))},dependencies:[je,_t,pe,se,ne,_e,re,Ue,dt,ji,mt,oe,gt,he,le,de],changeDetection:0});let e=o;return e})();function $s(e,o){if(e&1&&(r(0,"div"),h(1),s()),e&2){let t=p(2);l(),w(t.state)}}function As(e,o){if(e&1&&(r(0,"div",60)(1,"div"),h(2),_(3,"translate"),s(),u(4,$s,2,1,"div"),s()),e&2){let t=p();l(2),w(m(3,2,"settings.savedStates")),l(2),g(4,t.state?4:-1)}}function Ns(e,o){if(e&1){let t=y();r(0,"div",61)(1,"button",62),x("click",function(){v(t);let n=T(3),a=p();return b(a.setSearch(n.value))}),s(),S(2,"input",63,64),r(4,"button",65),x("click",function(){v(t);let n=T(3),a=p();return b(a.copySearchToClipboard(n.value))}),s()()}if(e&2){let t=p();l(2),d("ngModel",t.BrowserUtility.search)}}function Us(e,o){if(e&1){let t=y();r(0,"div",61)(1,"input",66,67),x("ngModelChange",function(n){v(t);let a=p();return b(a.editValue=n)})("keydown.enter",function(){v(t);let n=p();return b(n.clickSaveState(n.data().game))}),_(3,"translate"),_(4,"translate"),s(),r(5,"button",68),x("click",function(){v(t);let n=p();return b(n.clickSaveState(n.data().game))}),_(6,"translate"),s(),r(7,"button",69),x("click",function(){v(t);let n=p();return b(n.editState=null)}),_(8,"translate"),s()()}if(e&2){let t=T(2),i=p();l(),d("autofocus",!0)("placeholder",m(3,7,"settings.nameSavedState"))("pTooltip",m(4,9,"settings.nameSavedState"))("ngModel",i.editValue),l(4),d("pTooltip",m(6,11,"settings.saveState"))("disabled",t.invalid),l(2),d("pTooltip",m(8,13,"cancel"))}}function zs(e,o){if(e&1){let t=y();r(0,"button",73),x("click",function(n){v(t);let a=T(2);return b(a.toggle(n))}),S(1,"p-menu",74,75),s()}if(e&2){let t=p(2);l(),d("popup",!0)("model",t.editStateMenu)}}function Hs(e,o){if(e&1){let t=y();r(0,"button",76),x("click",function(){v(t);let n=p(2);return b(n.openCreateState())}),_(1,"translate"),s()}e&2&&d("pTooltip",m(1,1,"settings.createSavedState"))}function Ls(e,o){if(e&1){let t=y();r(0,"div",70)(1,"p-dropdown",71),x("onChange",function(n){v(t);let a=p();return b(a.setState(n.value,a.gameStates()))}),_(2,"translate"),_(3,"translate"),s(),u(4,zs,3,2,"button",72)(5,Hs,2,3),s()}if(e&2){let t=p();l(),d("placeholder",m(2,5,"settings.selectSavedState"))("tooltip",m(3,7,"settings.selectSavedState"))("ngModel",t.state)("options",t.savedStates()),l(3),g(4,t.state?4:5)}}function Ws(e,o){if(e&1){let t=y();r(0,"button",77),x("click",function(){v(t);let n=p();return b(n.openCreateState())}),_(1,"translate"),s()}e&2&&d("label",m(1,1,"settings.createSavedState"))}function Gs(e,o){if(e&1&&(r(0,"div",60)(1,"div"),h(2),_(3,"translate"),s(),r(4,"div"),h(5),s()()),e&2){let t=p();l(2),w(m(3,2,"settings.game")),l(3),w(t.modRecord()[t.settings().modId]==null?null:t.modRecord()[t.settings().modId].id)}}function qs(e,o){if(e&1&&(r(0,"small",46),h(1),s()),e&2){let t=o.$implicit;l(),O(" ",t.value," ")}}function Qs(e,o){if(e&1&&(F(0,qs,2,1,"small",78,ee),_(2,"keyvalue")),e&2){let t=p();D(m(2,0,t.data().version))}}function Ks(e,o){e&1&&(r(0,"tr")(1,"th"),h(2),_(3,"translate"),s(),r(4,"th"),h(5),_(6,"translate"),s()()),e&2&&(l(2),w(m(3,2,"settings.mod")),l(3),w(m(6,4,"settings.version")))}function Xs(e,o){if(e&1&&(r(0,"tr")(1,"td"),h(2),s(),r(3,"td"),h(4),s()()),e&2){let t=o.$implicit;l(2),w(t.key),l(2),w(t.value)}}function Zs(e,o){if(e&1){let t=y();r(0,"button",89),x("click",function(){v(t);let n=p(2);return b(n.versionsVisible=!1)}),_(1,"translate"),s()}e&2&&d("label",m(1,1,"ok"))}var Js=()=>({width:"400px",maxHeight:"500px"}),Ys=()=>({"400px":"100vw"});function er(e,o){if(e&1){let t=y();r(0,"div",79)(1,"label",80),h(2),_(3,"translate"),s(),r(4,"small",81)(5,"a",82),h(6),_(7,"translate"),s()(),r(8,"span",70)(9,"p-dropdown",83),x("onChange",function(n){v(t);let a=p();return b(a.setMod(n.value))}),_(10,"translate"),s(),r(11,"button",84),x("click",function(){v(t);let n=p();return b(n.versionsVisible=!0)}),_(12,"translate"),r(13,"p-dialog",85),x("visibleChange",function(n){v(t);let a=p();return b(a.versionsVisible=n)}),_(14,"translate"),r(15,"p-table",86),_(16,"keyvalue"),u(17,Ks,7,6,"ng-template",8)(18,Xs,5,2,"ng-template",87),s(),u(19,Zs,2,3,"ng-template",88),s()()()()}if(e&2){let t=p();l(2),w(m(3,18,"settings.modSet")),l(4),w(m(7,20,"settings.requestMod")),l(3),d("filter",!0)("autofocusFilter",!t.contentSvc.isMobile())("tooltip",m(10,22,"settings.modSetTooltip"))("ngModel",t.settings().modId)("options",t.modOptions()),l(2),d("pTooltip",m(12,24,"settings.modVersions")),l(2),ke(X(30,Js)),d("visible",t.versionsVisible)("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("breakpoints",X(31,Ys))("header",m(14,26,"settings.modVersions")),l(2),d("value",m(16,28,t.data().version))}}function tr(e,o){e&1&&(r(0,"div"),h(1),_(2,"translate"),s()),e&2&&(l(),w(m(2,1,o)))}function ir(e,o){if(e&1&&(r(0,"div",60)(1,"div"),h(2),_(3,"translate"),s(),u(4,tr,3,3,"div"),s()),e&2){p();let t=T(44),i;l(2),w(m(3,2,"settings.factory")),l(2),g(4,(i=t.label())?4:-1,i)}}function nr(e,o){if(e&1&&(r(0,"i",95),_(1,"iconSmClass"),s()),e&2){let t=o.$implicit;I(m(1,2,t))}}function or(e,o){if(e&1&&(r(0,"div",94),F(1,nr,2,4,"i",96,ee),s()),e&2){let t=o.$implicit;l(),D(t)}}function ar(e,o){if(e&1&&S(0,"lab-tooltip",100),e&2){let t=p().$implicit;d("id",t.value)}}function lr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,ar,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function pr(e,o){if(e&1){let t=y();r(0,"p-multiSelect",92),x("onChange",function(n){let c=v(t),C=p(2);return b(C.setFuelRank(n.value,c.defaults==null?null:c.defaults.fuelRankIds))}),_(1,"translate"),u(2,or,3,0,"ng-template",93)(3,lr,7,6,"ng-template",28),s()}if(e&2){let t=p(2);d("tooltip",m(1,3,"settings.fuelRankTooltip"))("ngModel",t.machinesState().fuelRankIds)("options",t.options().fuels)}}function sr(e,o){if(e&1&&(r(0,"div",20)(1,"div",12),u(2,pr,4,5,"p-multiSelect",90),r(3,"label",91),h(4),_(5,"translate"),s()()()),e&2){let t=p(),i;l(2),g(2,(i=t.data())?2:-1,i),l(2),w(m(5,2,"settings.fuelRank"))}}function rr(e,o){if(e&1&&(r(0,"i",95),_(1,"iconSmClass"),s()),e&2){let t=o.$implicit;I(m(1,2,t))}}function _r(e,o){if(e&1&&(r(0,"div",94),F(1,rr,2,4,"i",96,ee),s()),e&2){let t=o.$implicit;l(),D(t)}}function cr(e,o){if(e&1&&S(0,"lab-tooltip",100),e&2){let t=p().$implicit;d("id",t.value)}}function dr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,cr,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function mr(e,o){if(e&1){let t=y();r(0,"p-multiSelect",103),x("onChange",function(n){let c=v(t),C=p(2);return b(C.setModuleRank(n.value,c.defaults==null?null:c.defaults.moduleRankIds))}),_(1,"translate"),u(2,_r,3,0,"ng-template",93)(3,dr,7,6,"ng-template",28),s()}if(e&2){let t=p(2);d("tooltip",m(1,3,"settings.modifierRankTooltip"))("ngModel",t.machinesState().moduleRankIds)("options",t.options().modules)}}function ur(e,o){if(e&1&&(r(0,"div",20)(1,"div",12),u(2,mr,4,5,"p-multiSelect",101),r(3,"label",102),h(4),_(5,"translate"),s()()()),e&2){let t=p(),i;l(2),g(2,(i=t.data())?2:-1,i),l(2),w(m(5,2,"settings.modifierRank"))}}function Cr(e,o){e&1&&(r(0,"div",113),S(1,"i",114),s())}function gr(e,o){if(e&1&&S(0,"lab-tooltip",115),e&2){let t=p().$implicit;d("id",t.value)}}function fr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,gr,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function xr(e,o){if(e&1){let t=y();r(0,"p-inputNumber",116,117),x("onBlur",function(){v(t);let n=T(1),a=p(2),c;return b(a.setDefaultOverclock(a.Rational.fromNumber((c=n.value)!==null&&c!==void 0?c:100)))}),_(2,"translate"),s()}if(e&2){let t=p(2);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",t.machinesState().overclock==null?null:t.machinesState().overclock.toNumber())}}function hr(e,o){if(e&1&&(r(0,"i",122),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function Sr(e,o){if(e&1&&(r(0,"div",94)(1,"i",122),_(2,"iconSmClass"),r(3,"span"),h(4),s()(),F(5,hr,4,5,"i",123,Y),s()),e&2){let t=o.$implicit;l(),I(m(2,3,t.id)),l(3),w(t.count),l(),D(t.modules)}}function vr(e,o){if(e&1){let t=y();r(0,"button",118),x("click",function(n){let c=v(t),C=T(5);return b(C.show(n,c))}),F(1,Sr,7,5,"div",124,Y),S(3,"i",119),s(),r(4,"lab-beacons-overlay",120,121),x("setValue",function(n){v(t);let a=p(2);return b(a.setDefaultBeacons(n))}),s()}e&2&&(l(),D(o))}function br(e,o){e&1&&j(0)}function Tr(e,o){e&1&&j(0)}var wr=(e,o,t)=>({machineId:e,settings:o,defaults:t});function yr(e,o){if(e&1&&u(0,Tr,1,0,"ng-container",109),e&2){let t=o.$implicit;p();let i=T(15),n=p();d("ngTemplateOutlet",i)("ngTemplateOutletContext",Ge(2,wr,t,n.machinesState().entities[t],n.machinesState().entities[""]))}}function Ir(e,o){if(e&1&&(r(0,"div",94)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=p().$implicit;l(),I(m(2,2,t.value))}}function Br(e,o){if(e&1&&(r(0,"div"),h(1),s()),e&2){let t=p(3).machineId;l(),w(t)}}function Er(e,o){if(e&1&&u(0,Ir,3,4,"div",124)(1,Br,2,1),e&2){let t=o.$implicit;g(0,t?0:1)}}function kr(e,o){if(e&1&&S(0,"lab-tooltip",115),e&2){let t=p().$implicit;d("id",t.value)}}function Mr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,kr,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Or(e,o){if(e&1&&(r(0,"div",94)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function Vr(e,o){if(e&1&&S(0,"lab-tooltip",100),e&2){let t=p().$implicit;d("id",t.value)}}function Rr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,Vr,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function Pr(e,o){if(e&1){let t=y();r(0,"p-dropdown",128),x("onChange",function(n){v(t);let a=p(2),c=a.machineId,C=a.settings,f=p(2);return b(f.changeFuel(c,n.value,C,C().fuelRankIds))}),_(1,"translate"),u(2,Or,3,4,"ng-template",27)(3,Rr,7,6,"ng-template",28),s()}if(e&2){let t=p(2).settings;d("tooltip",m(1,3,"settings.fuelTooltip"))("ngModel",t.fuelId)("options",t.fuelOptions)}}function Fr(e,o){if(e&1&&(r(0,"div",94)(1,"i"),_(2,"iconSmClass"),s()()),e&2){let t=o.$implicit;l(),I(m(2,2,t.value))}}function Dr(e,o){if(e&1&&S(0,"lab-tooltip",131),e&2){let t=p().$implicit;d("id",t.value)}}function jr(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,Dr,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}var $r=()=>[];function Ar(e,o){if(e&1){let t=y();r(0,"p-dropdown",128),x("onChange",function(n){v(t);let a=p(3).machineId,c=p(2);return b(c.setModules(a,[{id:n.value,count:c.Rational.one}]))}),_(1,"translate"),u(2,Fr,3,4,"ng-template",27)(3,jr,7,6,"ng-template",28),s()}if(e&2){let t=p(3).settings,i;d("tooltip",m(1,3,"settings.modifierTooltip"))("ngModel",t.modules[0].id)("options",(i=t.moduleOptions)!==null&&i!==void 0?i:X(5,$r))}}function Nr(e,o){if(e&1&&(r(0,"i",122),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function Ur(e,o){if(e&1){let t=y();r(0,"button",132),x("click",function(n){v(t);let a=T(5),c=p(2),C=p().settings;return b(a.show(n,C.modules,c))}),F(1,Nr,4,5,"i",123,ee),S(3,"i",119),s(),r(4,"lab-modules-overlay",120,133),x("setValue",function(n){v(t);let a=p(3).machineId,c=p(2);return b(c.setModules(a,n))}),s()}if(e&2){let t=p(3).settings;l(),D(t.modules)}}function zr(e,o){if(e&1&&u(0,Ar,4,6,"p-dropdown",129)(1,Ur,6,0),e&2){let t=p();g(0,t.modules===1?0:1)}}function Hr(e,o){if(e&1){let t=y();r(0,"p-inputNumber",116,117),x("onBlur",function(){v(t);let n=T(1),a=p(2).machineId,c=p(2),C;return b(c.setOverclock(a,c.Rational.fromNumber((C=n.value)!==null&&C!==void 0?C:100),a?c.machinesState().entities[""].overclock:c.Rational.hundred))}),_(2,"translate"),s()}if(e&2){let t=p(2).settings;d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",t.overclock.toNumber())}}function Lr(e,o){if(e&1&&(r(0,"i",122),_(1,"iconSmClass"),r(2,"span"),h(3),s()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),l(3),w(t.count)}}function Wr(e,o){if(e&1&&(r(0,"div",94)(1,"i",122),_(2,"iconSmClass"),r(3,"span"),h(4),s()(),F(5,Lr,4,5,"i",123,Y),s()),e&2){let t=o.$implicit;l(),I(m(2,3,t.id)),l(3),w(t.count),l(),D(t.modules)}}function Gr(e,o){if(e&1){let t=y();r(0,"button",118),x("click",function(n){v(t);let a=T(5),c=p(2).settings;return b(a.show(n,c.beacons))}),F(1,Wr,7,5,"div",124,Y),S(3,"i",119),s(),r(4,"lab-beacons-overlay",120,121),x("setValue",function(n){v(t);let a=p(2).machineId,c=p(2);return b(c.setBeacons(a,n))}),s()}if(e&2){let t=p(2).settings;l(),D(t.beacons)}}function qr(e,o){if(e&1){let t=y();r(0,"div",126),S(1,"button",127),r(2,"p-dropdown",128),x("onChange",function(n){v(t);let a=p().machineId,c=p(2);return b(c.setMachine(a,n.value,c.data().defaults==null?null:c.data().defaults.machineRankIds))}),_(3,"translate"),_(4,"filterOptions"),u(5,Er,2,1,"ng-template",27)(6,Mr,7,6,"ng-template",28),s(),u(7,Pr,4,5,"p-dropdown",129)(8,zr,2,1)(9,Hr,3,9,"p-inputNumber",108)(10,Gr,6,0),r(11,"button",130),x("click",function(){v(t);let n=p().machineId,a=p(2);return b(a.removeMachine(n,a.data().defaults==null?null:a.data().defaults.machineRankIds))}),_(12,"translate"),s()()}if(e&2){let t=p(),i=t.machineId,n=t.settings,a=p(2);l(),J("invisible",i===""),l(),d("tooltip",m(3,12,"settings.machineTooltip"))("ngModel",i)("options",ge(4,14,a.options().machines,a.machineIds(),i)),l(5),g(7,n.fuelId?7:-1),l(),g(8,n.modules&&o.modules?8:-1),l(),g(9,a.data().game===a.Game.Satisfactory?9:-1),l(),g(10,n.beacons.length?10:-1),l(),J("invisible",i===""),d("pTooltip",m(12,18,"settings.removeMachinePreference"))}}function Qr(e,o){if(e&1&&u(0,qr,13,20,"div",125),e&2){let t=o.machineId,i=o.settings,n=p(2),a;g(0,(a=i&&n.data().machineEntities[t])?0:-1,a)}}var Kr=(e,o)=>({machineId:"",settings:e,defaults:o});function Xr(e,o){if(e&1){let t=y();r(0,"div",104)(1,"span",105),_(2,"translate"),S(3,"i",106),s(),r(4,"p-dropdown",107),x("onChange",function(n){v(t);let a=p();return b(a.addMachine(n.value,a.data().defaults==null?null:a.data().defaults.machineRankIds))}),_(5,"translate"),_(6,"filterOptions"),u(7,Cr,2,0,"ng-template",27)(8,fr,7,6,"ng-template",28),s(),u(9,xr,3,9,"p-inputNumber",108)(10,vr,6,0),s(),u(11,br,1,0,"ng-container",109),r(12,"p-orderList",110),x("onReorder",function(){v(t);let n=p();return b(n.setMachineRank(n.machineIds(),n.data().defaults==null?null:n.data().defaults.machineRankIds))}),u(13,yr,1,6,"ng-template",28),s(),u(14,Qr,1,1,"ng-template",null,111,B),S(16,"div",112)}if(e&2){let t=T(15),i=p(),n;l(),d("pTooltip",m(2,12,"settings.machineDefaults")),l(3),J("invisible",!i.options().machines.length),d("ngModel",i.options().machines[0]==null?null:i.options().machines[0].value)("tooltip",m(5,14,"settings.addMachineTooltip"))("options",k(6,16,i.options().machines,i.machineIds())),l(5),g(9,i.data().game===i.Game.Satisfactory?9:-1),l(),g(10,(n=i.machinesState().beacons)?10:-1,n),l(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",q(19,Kr,i.machinesState().entities[""],i.data().defaults)),l(),d("value",i.machineIds())("dragdrop",!0)}}function Zr(e,o){if(e&1){let t=y();r(0,"div",16)(1,"p-checkbox",38),x("onChange",function(n){v(t);let a=p();return b(a.toggleBeaconReceivers(n.checked))}),_(2,"translate"),_(3,"translate"),s()()}if(e&2){let t=p();l(),d("ngModel",t.settings().beaconReceivers!=null)("binary",!0)("label",m(2,4,"settings.estimateBeaconPowerUsage"))("pTooltip",m(3,6,"settings.estimateBeaconPowerUsageTooltip"))}}function Jr(e,o){if(e&1){let t=y();r(0,"div",16)(1,"label",134),h(2),_(3,"translate"),s(),r(4,"lab-input-number",135),x("setValue",function(n){v(t);let a=p();return b(a.setBeaconReceivers(n))}),_(5,"translate"),s()()}e&2&&(l(2),w(m(3,3,"settings.averageBeaconReceivers")),l(2),d("pTooltip",m(5,5,"settings.averageBeaconReceiversTooltip"))("value",o))}function Yr(e,o){if(e&1&&(r(0,"div",138)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s()()),e&2){let t=o.$implicit;l(),I(m(2,3,t.value)),l(3),O(" ",t.label," ")}}function e_(e,o){if(e&1&&S(0,"lab-tooltip",131),e&2){let t=p().$implicit;d("id",t.value)}}function t_(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,e_,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function i_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"div",12)(2,"p-dropdown",136),x("onChange",function(n){v(t);let a=p();return b(a.setProliferatorSpray(n.value))}),_(3,"translate"),u(4,Yr,5,5,"ng-template",27)(5,t_,7,6,"ng-template",28),s(),r(6,"label",137),h(7),_(8,"translate"),s()()()}if(e&2){let t=p();l(2),d("autoDisplayFirst",!1)("tooltip",m(3,5,"settings.proliferatorSelfSprayTooltip"))("ngModel",t.settings().proliferatorSprayId)("options",t.options().proliferatorModules),l(5),w(m(8,7,"settings.proliferatorSelfSpray"))}}function n_(e,o){if(e&1&&(r(0,"div",138)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s()()),e&2){let t=p().$implicit;l(),I(m(2,3,t.value)),l(3),O(" ",t.label," ")}}function o_(e,o){if(e&1&&u(0,n_,5,5,"div",139),e&2){let t=o.$implicit;g(0,t?0:-1)}}function a_(e,o){if(e&1&&S(0,"lab-tooltip",140),e&2){let t=p().$implicit;d("id",t.value)}}function l_(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,a_,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function p_(e,o){if(e&1&&(r(0,"div",138)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s()()),e&2){let t=o.$implicit;l(),I(m(2,3,t.value)),l(3),O(" ",t.label," ")}}function s_(e,o){if(e&1&&S(0,"lab-tooltip",143),e&2){let t=p().$implicit;d("id",t.value)}}function r_(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,s_,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function __(e,o){if(e&1){let t=y();r(0,"div",20)(1,"div",12)(2,"p-dropdown",141),x("onChange",function(n){v(t);let a=p();return b(a.setPipe(n.value,a.data().defaults==null?null:a.data().defaults.pipeId))}),_(3,"translate"),u(4,p_,5,5,"ng-template",27)(5,r_,7,6,"ng-template",28),s(),r(6,"label",142),h(7),_(8,"translate"),s()()()}if(e&2){let t=p();l(2),d("tooltip",m(3,4,"settings.defaultPipeTooltip"))("ngModel",t.settings().pipeId)("options",t.options().pipes),l(5),w(m(8,6,"settings.defaultPipe"))}}function c_(e,o){if(e&1&&(r(0,"div",138)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s()()),e&2){let t=o.$implicit;l(),I(m(2,3,t.value)),l(3),O(" ",t.label," ")}}function d_(e,o){if(e&1&&S(0,"lab-tooltip",146),e&2){let t=p().$implicit;d("id",t.value)}}function m_(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,d_,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function u_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"div",12)(2,"p-dropdown",144),x("onChange",function(n){v(t);let a=p();return b(a.setCargoWagon(n.value,a.data().defaults==null?null:a.data().defaults.cargoWagonId))}),_(3,"translate"),u(4,c_,5,5,"ng-template",27)(5,m_,7,6,"ng-template",28),s(),r(6,"label",145),h(7),_(8,"translate"),s()()()}if(e&2){let t=p();l(2),d("tooltip",m(3,4,"settings.defaultCargoWagonTooltip"))("ngModel",t.settings().cargoWagonId)("options",t.options().cargoWagons),l(5),w(m(8,6,"settings.defaultCargoWagon"))}}function C_(e,o){if(e&1&&(r(0,"div",138)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s()()),e&2){let t=o.$implicit;l(),I(m(2,3,t.value)),l(3),O(" ",t.label," ")}}function g_(e,o){if(e&1&&S(0,"lab-tooltip",149),e&2){let t=p().$implicit;d("id",t.value)}}function f_(e,o){if(e&1&&(r(0,"div",97)(1,"i"),_(2,"iconSmClass"),s(),r(3,"div",98),h(4),s(),u(5,g_,1,1,"ng-template",null,99,B),s()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),l(),I(m(2,4,t.value)),l(3),O(" ",t.label," ")}}function x_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"div",12)(2,"p-dropdown",147),x("onChange",function(n){v(t);let a=p();return b(a.setFluidWagon(n.value,a.data().defaults==null?null:a.data().defaults.fluidWagonId))}),_(3,"translate"),u(4,C_,5,5,"ng-template",27)(5,f_,7,6,"ng-template",28),s(),r(6,"label",148),h(7),_(8,"translate"),s()()()}if(e&2){let t=p();l(2),d("tooltip",m(3,4,"settings.defaultFluidWagonTooltip"))("ngModel",t.settings().fluidWagonId)("options",t.options().fluidWagons),l(5),w(m(8,6,"settings.defaultFluidWagon"))}}function h_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"div",12)(2,"p-inputNumber",150,151),x("onBlur",function(){v(t);let n=T(3),a=p(),c;return b(a.setFlowRate(a.Rational.from((c=n.value)!==null&&c!==void 0?c:1500)))}),_(4,"translate"),_(5,"translate"),s(),r(6,"label",152),h(7),_(8,"translate"),s(),r(9,"small",46)(10,"a",153),h(11,"Wiki"),s()()()(),r(12,"div",11)(13,"div",12)(14,"p-dropdown",154),x("onChange",function(n){v(t);let a=p();return b(a.setInserterTarget(n.value))}),_(15,"translate"),s(),r(16,"label",155),h(17),_(18,"translate"),s()()()}if(e&2){let t=p();l(2),d("suffix"," "+m(4,11,"settings.flowRateUnit"))("min",1)("step",100)("showButtons",!0)("pTooltip",m(5,13,"settings.pipeFlowRateTooltip"))("ngModel",t.settings().flowRate),l(5),w(m(8,15,"settings.pipeFlowRate")),l(7),d("tooltip",m(15,17,"settings.inserterTargetTooltip"))("ngModel",t.settings().inserterTarget)("options",t.inserterTargetOptions),l(3),w(m(18,19,"settings.inserterTarget"))}}function S_(e,o){if(e&1){let t=y();r(0,"div",11)(1,"div",12)(2,"p-inputNumber",156,157),x("onBlur",function(){v(t);let n=T(3),a=p(),c;return b(a.setMiningBonus(a.Rational.fromNumber(((c=n.value)!==null&&c!==void 0?c:100)-100)))}),_(4,"translate"),s(),r(5,"label",158),h(6),_(7,"translate"),s()()()}if(e&2){let t=p();l(2),d("min",100)("step",10)("showButtons",!0)("pTooltip",m(4,6,"settings.miningSpeedTooltip"))("ngModel",t.settings().miningBonus.toNumber()+100),l(4),w(m(7,8,"settings.miningSpeed"))}}function v_(e,o){e&1&&(r(0,"div"),h(1),_(2,"translate"),s()),e&2&&(l(),w(m(2,1,o)))}function b_(e,o){if(e&1&&(r(0,"div",60)(1,"div"),h(2),_(3,"translate"),s(),u(4,v_,3,3,"div"),s()),e&2){p();let t=T(75),i;l(2),w(m(3,2,"settings.flow")),l(2),g(4,(i=t.label())?4:-1,i)}}function T_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"span",12)(2,"p-dropdown",159),x("onChange",function(n){v(t);let a=p();return b(a.setSankeyAlign(n.value))}),_(3,"translate"),s(),r(4,"label",160),h(5),_(6,"translate"),s()()()}if(e&2){let t=p();l(2),d("tooltip",m(3,4,"settings.sankeyAlignTooltip"))("ngModel",t.preferences().sankeyAlign)("options",t.sankeyAlignOptions),l(3),w(m(6,6,"settings.sankeyAlign"))}}function w_(e,o){if(e&1){let t=y();r(0,"p-accordionTab",39),_(1,"translate"),r(2,"div",10)(3,"div",20)(4,"div",12)(5,"p-inputNumber",161,162),x("onBlur",function(){v(t);let n=T(6),a=p(),c;return b(a.setMiningBonus(a.Rational.fromNumber((c=n.value)!==null&&c!==void 0?c:0)))}),_(7,"translate"),s(),r(8,"label",163),h(9),_(10,"translate"),s()()(),r(11,"div",20)(12,"div",12)(13,"p-dropdown",164),x("onChange",function(n){v(t);let a=p();return b(a.setResearchSpeed(n.value))}),_(14,"translate"),s(),r(15,"label",165),h(16),_(17,"translate"),s()()(),r(18,"div",11)(19,"div",12)(20,"p-dropdown",166),x("onChange",function(n){v(t);let a=p();return b(a.setInserterCapacity(n.value))}),_(21,"translate"),s(),r(22,"label",167),h(23),_(24,"translate"),s()()()()()}if(e&2){let t=p();d("header",m(1,15,"settings.bonuses")),l(5),d("min",0)("step",10)("showButtons",!0)("pTooltip",m(7,17,"settings.miningProductivityTooltip"))("ngModel",t.settings().miningBonus),l(4),w(m(10,19,"settings.miningProductivity")),l(4),d("pTooltip",m(14,21,"settings.researchSpeedTooltip"))("ngModel",t.settings().researchSpeed)("options",t.researchSpeedOptions),l(3),w(m(17,23,"settings.researchSpeed")),l(4),d("tooltip",m(21,25,"settings.inserterCapacityTooltip"))("ngModel",t.settings().inserterCapacity)("options",t.inserterCapacityOptions),l(3),w(m(24,27,"settings.inserterCapacity"))}}function y_(e,o){if(e&1){let t=y();r(0,"div",20)(1,"span",12)(2,"p-dropdown",168),x("onChange",function(n){v(t);let a=p();return b(a.setPowerUnit(n.value))}),_(3,"translate"),s(),r(4,"label",169),h(5),_(6,"translate"),s()()()}if(e&2){let t=p();l(2),d("tooltip",m(3,4,"settings.powerUnitTooltip"))("ngModel",t.preferences().powerUnit)("options",t.powerUnitOptions),l(3),w(m(6,6,"settings.powerUnit"))}}var I_=()=>({height:"100%"}),Ut=e=>({count:e}),B_=(()=>{let o=class o{constructor(){this.contentSvc=V(xe),this.router=V(vi),this.store=V(ae),this.translateSvc=V($e),this.routerSvc=V(Ne),this.active=!1,this.hidden=!1,this.itemsState=this.store.selectSignal(G.getItemsState),this.excludedItemIds=this.store.selectSignal(G.getExcludedItemIds),this.recipesState=this.store.selectSignal(U.getRecipesState),this.excludedRecipeIds=this.store.selectSignal(U.getExcludedRecipeIds),this.itemIds=this.store.selectSignal(U.getAvailableItems),this.data=this.store.selectSignal(U.getAdjustedDataset),this.machinesState=this.store.selectSignal(Q.getMachinesState),this.settings=this.store.selectSignal(M.getSettings),this.columnsState=this.store.selectSignal(M.getColumnsState),this.options=this.store.selectSignal(M.getOptions),this.modOptions=this.store.selectSignal(M.getModOptions),this.presetOptions=this.store.selectSignal(M.getPresetOptions),this.linkValueOptions=this.store.selectSignal(M.getLinkValueOptions),this.researchedTechnologyIds=this.store.selectSignal(M.getAllResearchedTechnologyIds),this.recipeIds=this.store.selectSignal(M.getAvailableRecipes),this.gameStates=this.store.selectSignal(M.getGameStates),this.savedStates=this.store.selectSignal(M.getSavedStates),this.preferences=this.store.selectSignal(H.preferencesState),this.modRecord=this.store.selectSignal(Ii.getModRecord),this.machineIds=Z(()=>[...this.store.selectSignal(Q.getMachinesState)().ids??[]]),this.state="",this.editValue="",this.editState=null,this.editStateMenu=[{label:this.translateSvc.instant("settings.createSavedState"),icon:"fa-solid fa-plus",command:()=>this.openCreateState()},{label:this.translateSvc.instant("settings.saveSavedState"),icon:"fa-solid fa-floppy-disk",command:()=>this.overwriteState()},{label:this.translateSvc.instant("settings.editSavedState"),icon:"fa-solid fa-pencil",command:()=>this.openEditState()},{label:this.translateSvc.instant("settings.deleteSavedState"),icon:"fa-solid fa-trash",command:()=>this.clickDeleteState()}],this.versionsVisible=!1,this.displayRateOptions=rt,this.gameOptions=oi,this.inserterCapacityOptions=ai,this.inserterTargetOptions=li,this.languageOptions=pi,this.powerUnitOptions=_i,this.researchSpeedOptions=ci,this.themeOptions=Ci,this.flowDiagramOptions=ii,this.sankeyAlignOptions=di,this.maximizeTypeOptions=si,this.FuelType=ni,this.Game=fe,this.ItemId=L,this.FlowDiagram=ti,this.Rational=N,this.BrowserUtility=Ke}ngOnInit(){this.store.select(M.getGameStates).pipe(Ce()).subscribe(i=>{this.state=Bi(Object.keys(i).find(n=>i[n]===Ke.search))})}clickResetSettings(){this.contentSvc.confirm({icon:"fa-solid fa-exclamation-triangle",header:this.translateSvc.instant("settings.reset"),message:this.translateSvc.instant("settings.resetWarning"),acceptLabel:this.translateSvc.instant("yes"),rejectLabel:this.translateSvc.instant("cancel"),accept:()=>{localStorage.clear(),this.resetSettings()}})}setSearch(i){let n=this.router.parseUrl(this.router.url);new URLSearchParams(i).forEach((c,C)=>n.queryParams[C]=c),this.router.navigateByUrl(n)}copySearchToClipboard(i){navigator.clipboard.writeText(i)}setState(i,n){let a=n[i];if(a){let c=this.routerSvc.getParams(a);this.state=i,this.router.navigate([],{queryParams:c})}}clickSaveState(i){!this.editValue||!this.editState||(this.saveState(i,this.editValue,Ke.search),this.editState==="edit"&&this.state&&this.removeState(i,this.state),this.editState=null,this.state=this.editValue)}openCreateState(){this.editValue="",this.editState="create"}overwriteState(){this.store.select(M.getGame).pipe(Ce()).subscribe(i=>{this.saveState(i,this.state,Ke.search)})}openEditState(){this.editValue=this.state,this.editState="edit"}clickDeleteState(){this.store.select(M.getGame).pipe(Ce()).subscribe(i=>{this.removeState(i,this.state),this.state=""})}setGame(i){this.setMod(gi[i].modId)}setExcludedRecipes(i,n,a){let c=[];for(let C of a.recipeIds){let f=i.some(E=>E===C);if(f!==n[C].excluded){let E=(a.defaults?.excludedRecipeIds??[]).some(P=>P===C);c.push({id:C,value:f,def:E})}}this.setRecipeExcludedBatch(c)}setExcludedItems(i,n,a){let c=[];for(let C of a.itemIds){let f=i.some(E=>E===C);f!==n[C].excluded&&c.push({id:C,value:f})}this.setItemExcludedBatch(c)}changeFuel(i,n,a,c){let C=Ae.bestMatch(a.fuelOptions?.map(f=>f.value)??[],c);this.setFuel(i,n,C)}toggleBeaconReceivers(i){this.setBeaconReceivers(i?N.one:null)}resetSettings(){this.store.dispatch(new yi.ResetAction)}saveState(i,n,a){this.store.dispatch(new H.SaveStateAction({key:i,id:n,value:a}))}removeState(i,n){this.store.dispatch(new H.RemoveStateAction({key:i,id:n}))}setMod(i){this.store.dispatch(new M.SetModAction(i))}setResearchedTechnologies(i){this.store.dispatch(new M.SetResearchedTechnologiesAction(i))}setItemExcludedBatch(i){this.store.dispatch(new G.SetExcludedBatchAction(i))}setRecipeExcludedBatch(i){this.store.dispatch(new U.SetExcludedBatchAction(i))}setNetProductionOnly(i){this.store.dispatch(new M.SetNetProductionOnlyAction(i))}setSurplusMachinesOutput(i){this.store.dispatch(new M.SetSurplusMachinesOutputAction(i))}setPreset(i){this.store.dispatch(new M.SetPresetAction(i))}addMachine(i,n){this.store.dispatch(new Q.AddAction({value:i,def:n}))}removeMachine(i,n){this.store.dispatch(new Q.RemoveAction({value:i,def:n}))}setMachineRank(i,n){this.store.dispatch(new Q.SetRankAction({value:i,def:n}))}setMachine(i,n,a){this.store.dispatch(new Q.SetMachineAction({id:i,value:n,def:a}))}setFuel(i,n,a){this.store.dispatch(new Q.SetFuelAction({id:i,value:n,def:a}))}setModules(i,n){this.store.dispatch(new Q.SetModulesAction({id:i,value:n}))}setOverclock(i,n,a){this.store.dispatch(new Q.SetOverclockAction({id:i,value:n,def:a}))}setBeacons(i,n){this.store.dispatch(new Q.SetBeaconsAction({id:i,value:n}))}setBeaconReceivers(i){this.store.dispatch(new M.SetBeaconReceiversAction(i))}setProliferatorSpray(i){this.store.dispatch(new M.SetProliferatorSprayAction(i))}setBelt(i,n){this.store.dispatch(new M.SetBeltAction({value:i,def:n}))}setPipe(i,n){this.store.dispatch(new M.SetPipeAction({value:i,def:n}))}setCargoWagon(i,n){this.store.dispatch(new M.SetCargoWagonAction({value:i,def:n}))}setFluidWagon(i,n){this.store.dispatch(new M.SetFluidWagonAction({value:i,def:n}))}setFuelRank(i,n){this.store.dispatch(new Q.SetFuelRankAction({value:i,def:n}))}setModuleRank(i,n){this.store.dispatch(new Q.SetModuleRankAction({value:i,def:n}))}setDefaultBeacons(i){this.store.dispatch(new Q.SetDefaultBeaconsAction(i))}setDefaultOverclock(i){this.store.dispatch(new Q.SetDefaultOverclockAction(i))}setFlowRate(i){this.store.dispatch(new M.SetFlowRateAction(i))}setInserterTarget(i){this.store.dispatch(new M.SetInserterTargetAction(i))}setMiningBonus(i){this.store.dispatch(new M.SetMiningBonusAction(i))}setResearchSpeed(i){this.store.dispatch(new M.SetResearchSpeedAction(i))}setInserterCapacity(i){this.store.dispatch(new M.SetInserterCapacityAction(i))}setDisplayRate(i,n){this.store.dispatch(new M.SetDisplayRateAction({value:i,prev:n}))}setMaximizeType(i){this.store.dispatch(new M.SetMaximizeTypeAction(i))}setPowerUnit(i){this.store.dispatch(new H.SetPowerUnitAction(i))}setLanguage(i){this.translateSvc.use(i),this.store.dispatch(new H.SetLanguageAction(i))}setTheme(i){this.store.dispatch(new H.SetThemeAction(i))}setBypassLanding(i){this.store.dispatch(new H.SetBypassLandingAction(i))}setHideDuplicateIcons(i){this.store.dispatch(new H.SetHideDuplicateIconsAction(i))}setDisablePaginator(i){this.store.dispatch(new H.SetDisablePaginatorAction(i))}setFlowDiagram(i){this.store.dispatch(new H.SetFlowDiagramAction(i))}setSankeyAlign(i){this.store.dispatch(new H.SetSankeyAlignAction(i))}setLinkSize(i){this.store.dispatch(new H.SetLinkSizeAction(i))}setLinkText(i){this.store.dispatch(new H.SetLinkTextAction(i))}setFlowHideExcluded(i){this.store.dispatch(new H.SetFlowHideExcludedAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=te({type:o,selectors:[["lab-settings"]],hostVars:4,hostBindings:function(n,a){n&2&&J("active",a.active)("hidden",a.hidden)},inputs:{active:"active",hidden:"hidden"},decls:175,vars:202,consts:[[1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","type","button","icon","fa-solid fa-trash","tooltipPosition","bottom",1,"p-button-rounded","p-button-text",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-none","d-xl-inline-flex",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-sm-none",3,"click"],[1,"flex-grow-1","overflow-hidden"],[3,"multiple"],[3,"selected"],["pTemplate","header"],["class","p-inputgroup mb-2"],[1,"p-fluid"],[1,"mt-3"],[1,"p-float-label"],["labDropdownTranslate","","inputId","game",3,"tooltip","ngModel","options","onChange"],["for","game"],["class","position-relative"],[1,"pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-microchip",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],[3,"selectIds"],["techPicker",""],[1,"mt-3","pb-3"],["labDropdownTranslate","","inputId","preset",3,"tooltip","ngModel","options","onChange"],["presetDropdown",""],["for","preset"],["class","mt-3 pb-3"],["class","pb-3"],["labDropdownBase","","inputId","default-transport-belt",3,"tooltip","ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","default-transport-belt"],["class","mt-3"],["labDropdownTranslate","","inputId","flow-diagram",3,"tooltip","ngModel","options","onChange"],["flowDiagramDropdown",""],["for","flow-diagram"],["labDropdownTranslate","","inputId","link-size",3,"tooltip","ngModel","options","onChange"],["for","link-size"],["labDropdownTranslate","","inputId","link-text",3,"tooltip","ngModel","options","onChange"],["for","link-text"],[3,"ngModel","binary","label","pTooltip","onChange"],[3,"header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-rounded","p-button-outlined","mb-2",3,"label","click"],["labDropdownTranslate","","inputId","display-rate",3,"tooltip","ngModel","options","onChange"],["for","display-rate"],[1,"text-end"],["labDropdownTranslate","","inputId","language",3,"tooltip","ngModel","options","onChange"],["for","language"],[1,"position-absolute","end-0","bottom-100","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab","target","_blank"],["labDropdownTranslate","","inputId","theme",3,"tooltip","ngModel","options","onChange"],["for","theme"],[3,"binary","label","ngModel","onChange"],[3,"ngModel","binary","label","onChange"],["labDropdownTranslate","","inputId","maximize-type",3,"tooltip","ngModel","options","onChange"],["for","maximize-type"],["pButton","","pRipple","","type","button","icon","fa-solid fa-boxes-stacked",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],[3,"header","selectIds"],["itemsPicker",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-flask-vial",1,"p-button-rounded","p-button-outlined",3,"pTooltip","label","click"],["recipesPicker",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-dollar-sign",1,"p-button-rounded","p-button-outlined","mb-4",3,"label","click"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],[1,"p-inputgroup","mb-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square",1,"p-button-outlined",3,"click"],["pInputText","","type","text",3,"ngModel"],["search",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click"],["pInputText","","pAutoFocus","","type","text","tooltipPosition","top","required","",3,"autofocus","placeholder","pTooltip","ngModel","ngModelChange","keydown.enter"],["nameCtrl","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk","tooltipPosition","top",1,"p-button-outlined",3,"pTooltip","disabled","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined",3,"pTooltip","click"],[1,"p-inputgroup"],["tooltipPosition","top",3,"placeholder","tooltip","ngModel","options","onChange"],["pButton","","pRipple","","type","button","class","p-button-outlined","icon","fa-solid fa-ellipsis-vertical"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined",3,"click"],["appendTo","body",3,"popup","model"],["stateMenu",""],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"label","click"],["class","position-absolute end-0 bottom-100 me-1 mb-1"],[1,"position-relative"],[1,"p-static-label"],[1,"position-absolute","end-0","top-0","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=","target","_blank"],["inputId","mod","styleClass","w-100",3,"filter","autofocusFilter","tooltip","ngModel","options","onChange"],["pButton","","pRipple","","icon","fa-solid fa-info",1,"p-button-outlined",3,"pTooltip","click"],["appendTo","body",3,"visible","modal","dismissableMask","draggable","resizable","breakpoints","header","visibleChange"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"label","click"],["inputId","fuel-rank","styleClass","icons","appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options"],["for","fuel-rank"],["inputId","fuel-rank","styleClass","icons","appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options","onChange"],["pTemplate","selectedItems"],[1,"d-flex"],[1,"mx-2"],["class","mx-2",3,"class"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["tooltip",""],["type","fuel",3,"id"],["inputId","modifier-rank","styleClass","icons","appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options"],["for","modifier-rank"],["inputId","modifier-rank","styleClass","icons","appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options","onChange"],[1,"p-inputgroup","flex-wrap","machine-preference","mb-1"],[1,"p-inputgroup-addon",3,"pTooltip"],[1,"fa-solid","fa-industry"],["labDropdownBase","icon",3,"ngModel","tooltip","options","onChange"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value","dragdrop","onReorder"],["machineRow",""],[1,"pt-2"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"fa-solid","fa-plus"],["type","machine",3,"id"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel","onBlur"],["overclockInput",""],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["beaconsOverlay",""],[1,"p-button-icon"],["class","p-button-icon",3,"class"],["class","d-flex"],["class","p-inputgroup flex-wrap machine-preference"],[1,"p-inputgroup","flex-wrap","machine-preference"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options","onChange"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","ms-auto",3,"pTooltip","click"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text",3,"click"],["modulesOverlay",""],["for","beacon-receivers",1,"p-static-label"],["inputId","beacon-receivers",1,"w-100",3,"pTooltip","value","setValue"],["labDropdownBase","","inputId","proliferator-self-spray",3,"autoDisplayFirst","tooltip","ngModel","options","onChange"],["for","proliferator-self-spray"],[1,"d-flex","align-items-center","h-100"],["class","d-flex align-items-center h-100"],["type","belt",3,"id"],["labDropdownBase","","inputId","default-pipe",3,"tooltip","ngModel","options","onChange"],["for","default-pipe"],["type","pipe",3,"id"],["labDropdownBase","","inputId","default-cargo-wagon",3,"tooltip","ngModel","options","onChange"],["for","default-cargo-wagon"],["type","cargo-wagon",3,"id"],["labDropdownBase","","inputId","default-fluid-wagon",3,"tooltip","ngModel","options","onChange"],["for","default-fluid-wagon"],["type","fluid-wagon",3,"id"],["inputId","pipe-flow-rate","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"suffix","min","step","showButtons","pTooltip","ngModel","onBlur"],["flowRateInput",""],["for","pipe-flow-rate"],["href","https://wiki.factorio.com/Fluid_system#Pipelines","target","_blank"],["labDropdownTranslate","","inputId","inserter-target",3,"tooltip","ngModel","options","onChange"],["for","inserter-target"],["inputId","mining-speed","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"min","step","showButtons","pTooltip","ngModel","onBlur"],["miningBonusInput",""],["for","mining-speed"],["labDropdownTranslate","","inputId","sankey-align",3,"tooltip","ngModel","options","onChange"],["for","sankey-align"],["inputId","mining-productivity","prefix","+","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"min","step","showButtons","pTooltip","ngModel","onBlur"],["miningProdInput",""],["for","mining-productivity"],["labDropdownTranslate","","inputId","research-speed",3,"pTooltip","ngModel","options","onChange"],["for","research-speed"],["labDropdownTranslate","","inputId","inserter-capacity",3,"tooltip","ngModel","options","onChange"],["for","inserter-capacity"],["labDropdownTranslate","","inputId","power-unit",3,"tooltip","ngModel","options","onChange"],["for","power-unit"]],template:function(n,a){if(n&1){let c=y();r(0,"div",0)(1,"div",1)(2,"h2"),h(3),_(4,"translate"),s(),r(5,"div")(6,"button",2),x("click",function(){return a.clickResetSettings()}),_(7,"translate"),s(),r(8,"button",3),x("click",function(){return a.contentSvc.toggleSettingsXl()}),s(),r(9,"button",4),x("click",function(){return a.contentSvc.toggleSettings()}),s()()()(),r(10,"div",5)(11,"p-scrollPanel")(12,"p-accordion",6)(13,"p-accordionTab",7),u(14,As,5,4,"ng-template",8)(15,Ns,5,1,"div",9)(16,Us,9,15,"div",9)(17,Ls,6,9)(18,Ws,2,3),s(),r(19,"p-accordionTab",7),u(20,Gs,6,4,"ng-template",8),r(21,"div",10)(22,"div",11)(23,"span",12)(24,"p-dropdown",13),x("onChange",function(f){return a.setGame(f.value)}),_(25,"translate"),s(),r(26,"label",14),h(27),_(28,"translate"),s(),u(29,Qs,3,2),s()(),u(30,er,20,32,"div",15),s()(),r(31,"p-accordionTab",7),u(32,ir,5,4,"ng-template",8),r(33,"div",10)(34,"div",16)(35,"button",17),x("click",function(){v(c);let f=T(40);return b(f.clickOpen(a.researchedTechnologyIds()))}),_(36,"translate"),_(37,"translate"),_(38,"translate"),s(),r(39,"lab-tech-picker",18,19),x("selectIds",function(f){return a.setResearchedTechnologies(f)}),s()(),r(41,"div",20)(42,"span",12)(43,"p-dropdown",21,22),x("onChange",function(f){return a.setPreset(f.value)}),_(45,"translate"),s(),r(46,"label",23),h(47),_(48,"translate"),s()()(),u(49,sr,6,4,"div",24)(50,ur,6,4,"div",24)(51,Xr,17,22)(52,Zr,4,8,"div",25)(53,Jr,6,7,"div",25)(54,i_,9,9,"div",24),r(55,"div",20)(56,"div",12)(57,"p-dropdown",26),x("onChange",function(f){return a.setBelt(f.value,a.data().defaults==null?null:a.data().defaults.beltId)}),_(58,"translate"),u(59,o_,1,1,"ng-template",27)(60,l_,7,6,"ng-template",28),s(),r(61,"label",29),h(62),_(63,"translate"),s()()(),u(64,__,9,8,"div",24)(65,u_,9,8,"div",24)(66,x_,9,8,"div",24)(67,h_,19,21)(68,S_,8,10,"div",30),s()(),r(69,"p-accordionTab"),u(70,b_,5,4,"ng-template",8),r(71,"div",10)(72,"div",20)(73,"span",12)(74,"p-dropdown",31,32),x("onChange",function(f){return a.setFlowDiagram(f.value)}),_(76,"translate"),s(),r(77,"label",33),h(78),_(79,"translate"),s()()(),u(80,T_,7,8,"div",24),r(81,"div",20)(82,"span",12)(83,"p-dropdown",34),x("onChange",function(f){return a.setLinkSize(f.value)}),_(84,"translate"),s(),r(85,"label",35),h(86),_(87,"translate"),s()()(),r(88,"div",20)(89,"span",12)(90,"p-dropdown",36),x("onChange",function(f){return a.setLinkText(f.value)}),_(91,"translate"),s(),r(92,"label",37),h(93),_(94,"translate"),s()()(),r(95,"div",16)(96,"p-checkbox",38),x("onChange",function(f){return a.setFlowHideExcluded(f.checked)}),_(97,"translate"),_(98,"translate"),s()()()(),u(99,w_,25,29,"p-accordionTab",39),r(100,"p-accordionTab",39),_(101,"translate"),r(102,"div",10)(103,"button",40),x("click",function(){return a.contentSvc.showColumns$.next()}),_(104,"translate"),s(),r(105,"div",20)(106,"span",12)(107,"p-dropdown",41),x("onChange",function(f){return a.setDisplayRate(f.value,a.settings().displayRate)}),_(108,"translate"),s(),r(109,"label",42),h(110),_(111,"translate"),s()()(),u(112,y_,7,8,"div",24),r(113,"div",20),S(114,"div",43),r(115,"div",12)(116,"p-dropdown",44),x("onChange",function(f){return a.setLanguage(f.value)}),_(117,"translate"),s(),r(118,"label",45),h(119),_(120,"translate"),s(),r(121,"small",46)(122,"a",47),h(123),_(124,"translate"),s()()()(),r(125,"div",20)(126,"div",12)(127,"p-dropdown",48),x("onChange",function(f){return a.setTheme(f.value)}),_(128,"translate"),s(),r(129,"label",49),h(130),_(131,"translate"),s()()(),r(132,"div",16)(133,"p-checkbox",50),x("onChange",function(f){return a.setBypassLanding(f.checked)}),_(134,"translate"),s()(),r(135,"div",16)(136,"p-checkbox",51),x("onChange",function(f){return a.setHideDuplicateIcons(f.checked)}),_(137,"translate"),s()(),r(138,"div")(139,"p-checkbox",51),x("onChange",function(f){return a.setDisablePaginator(f.checked)}),_(140,"translate"),s()()()(),r(141,"p-accordionTab",39),_(142,"translate"),r(143,"div",10)(144,"div",20)(145,"span",12)(146,"p-dropdown",52),x("onChange",function(f){return a.setMaximizeType(f.value)}),_(147,"translate"),s(),r(148,"label",53),h(149),_(150,"translate"),s()()(),r(151,"div",16)(152,"p-checkbox",38),x("onChange",function(f){return a.setNetProductionOnly(f.checked)}),_(153,"translate"),_(154,"translate"),s()(),r(155,"div",16)(156,"p-checkbox",38),x("onChange",function(f){return a.setSurplusMachinesOutput(f.checked)}),_(157,"translate"),_(158,"translate"),s()(),r(159,"div",16)(160,"button",54),x("click",function(){v(c);let f=T(164);return b(f.clickOpen("item",a.itemIds(),a.excludedItemIds()))}),_(161,"translate"),_(162,"translate"),s(),r(163,"lab-picker",55,56),x("selectIds",function(f){return a.setExcludedItems(f,a.itemsState(),a.data())}),_(165,"translate"),s()(),r(166,"div",16)(167,"button",57),x("click",function(){v(c);let f=T(171);return b(f.clickOpen("recipe",a.recipeIds(),a.excludedRecipeIds()))}),_(168,"translate"),_(169,"translate"),s(),r(170,"lab-picker",55,58),x("selectIds",function(f){return a.setExcludedRecipes(f,a.recipesState(),a.data())}),_(172,"translate"),s()(),r(173,"button",59),x("click",function(){return a.contentSvc.showCosts$.next()}),_(174,"translate"),s()()()()()()}if(n&2){let c;l(3),w(m(4,102,"settings.header")),l(3),d("pTooltip",m(7,104,"settings.reset")),l(5),ke(X(195,I_)),l(),d("multiple",!0),l(),d("selected",!0),l(2),g(15,a.BrowserUtility.isStandalone?15:-1),l(),g(16,a.editState?16:a.savedStates().length?17:18),l(3),d("selected",!0),l(3),J("pb-3",a.data().game===a.Game.Factorio),l(2),d("tooltip",m(25,106,"settings.gameTooltip"))("ngModel",a.data().game)("options",a.gameOptions),l(3),w(m(28,108,"settings.game")),l(2),g(29,a.data().game!==a.Game.Factorio?29:-1),l(),g(30,a.data().game===a.Game.Factorio?30:-1),l(),d("selected",!0),l(4),d("pTooltip",m(36,110,"settings.techsTooltip"))("label",a.researchedTechnologyIds()?k(37,112,"settings.techsResearched",ye(196,Ut,a.researchedTechnologyIds().length)):m(38,115,"settings.allTechsResearched")),l(8),d("tooltip",m(45,117,"settings.presetTooltip"))("ngModel",a.settings().preset)("options",a.presetOptions()),l(4),w(m(48,119,"settings.preset")),l(2),g(49,a.data().fuelIds.length&&a.data().game!==a.Game.Satisfactory?49:-1),l(),g(50,a.data().moduleIds.length>1?50:-1),l(),g(51,a.data().game!==a.Game.CaptainOfIndustry?51:-1),l(),g(52,a.data().game===a.Game.Factorio?52:-1),l(),g(53,(c=a.settings().beaconReceivers)?53:-1,c),l(),g(54,a.data().game===a.Game.DysonSphereProgram?54:-1),l(3),d("tooltip",m(58,121,"settings.defaultTransportBeltTooltip"))("ngModel",a.settings().beltId)("options",a.options().belts),l(5),w(m(63,123,"settings.defaultTransportBelt")),l(2),g(64,a.data().pipeIds.length>1?64:-1),l(),g(65,a.data().cargoWagonIds.length>1?65:-1),l(),g(66,a.data().fluidWagonIds.length>1?66:-1),l(),g(67,a.data().game===a.Game.Factorio?67:-1),l(),g(68,a.data().game===a.Game.DysonSphereProgram?68:-1),l(6),d("tooltip",m(76,125,"settings.flowDiagramTooltip"))("ngModel",a.preferences().flowDiagram)("options",a.flowDiagramOptions),l(4),w(m(79,127,"settings.flowDiagram")),l(2),g(80,a.preferences().flowDiagram===a.FlowDiagram.Sankey?80:-1),l(3),d("tooltip",m(84,129,"settings.linkSizeTooltip"))("ngModel",a.preferences().linkSize)("options",a.linkValueOptions()),l(3),w(m(87,131,"settings.linkSize")),l(4),d("tooltip",m(91,133,"settings.linkTextTooltip"))("ngModel",a.preferences().linkText)("options",a.linkValueOptions()),l(3),w(m(94,135,"settings.linkText")),l(3),d("ngModel",a.preferences().flowHideExcluded)("binary",!0)("label",m(97,137,"settings.flowHideExcluded"))("pTooltip",m(98,139,"settings.flowHideExcludedTooltip")),l(3),g(99,a.data().game===a.Game.Factorio?99:-1),l(),d("header",m(101,141,"settings.display")),l(3),d("label",m(104,143,"settings.openColumnSettings")),l(4),d("tooltip",m(108,145,"settings.displayRateTooltip"))("ngModel",a.settings().displayRate)("options",a.displayRateOptions),l(3),w(m(111,147,"settings.displayRate")),l(2),g(112,a.columnsState().power.show?112:-1),l(4),d("tooltip",m(117,149,"settings.languageTooltip"))("ngModel",a.preferences().language)("options",a.languageOptions),l(3),w(m(120,151,"settings.language")),l(4),w(m(124,153,"settings.helpTranslate")),l(4),d("tooltip",m(128,155,"settings.themeTooltip"))("ngModel",a.preferences().theme)("options",a.themeOptions),l(3),w(m(131,157,"settings.theme")),l(3),d("binary",!0)("label",m(134,159,"settings.bypassLanding"))("ngModel",a.preferences().bypassLanding),l(3),d("ngModel",a.preferences().hideDuplicateIcons)("binary",!0)("label",m(137,161,"settings.hideDuplicateIcons")),l(3),d("ngModel",a.preferences().disablePaginator)("binary",!0)("label",m(140,163,"settings.disablePaginator")),l(2),d("header",m(142,165,"settings.advanced")),l(5),d("tooltip",m(147,167,"settings.maximizeTypeTooltip"))("ngModel",a.settings().maximizeType)("options",a.maximizeTypeOptions),l(3),w(m(150,169,"settings.maximizeType")),l(3),d("ngModel",a.settings().netProductionOnly)("binary",!0)("label",m(153,171,"settings.netProductionOnly"))("pTooltip",m(154,173,"settings.netProductionOnlyTooltip")),l(4),d("ngModel",a.settings().surplusMachinesOutput)("binary",!0)("label",m(157,175,"settings.surplusMachinesOutput"))("pTooltip",m(158,177,"settings.surplusMachinesOutputTooltip")),l(4),d("pTooltip",m(161,179,"settings.itemsTooltip"))("label",k(162,181,"settings.itemsExcluded",ye(198,Ut,a.excludedItemIds().length))),l(3),d("header",m(165,184,"settings.itemsHeader")),l(4),d("pTooltip",m(168,186,"settings.recipesTooltip"))("label",k(169,188,"settings.recipesExcluded",ye(200,Ut,a.excludedRecipeIds().length))),l(3),d("header",m(172,191,"settings.recipesHeader")),l(3),d("label",m(174,193,"settings.openCosts"))}},dependencies:[je,_t,pe,wi,se,Fi,Pi,ne,ki,_e,re,Ue,dt,ce,ut,mt,$i,Ni,ht,oe,gt,Ct,Be,ft,he,xt,at,Me,Nt,Te,Oe,st,le,de,Ze],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:fixed;z-index:4;top:0;left:0;transition:transform .4s cubic-bezier(.05,.74,.2,.99);width:322px;height:100%;background-color:var(--surface-overlay)}@media (max-width: 1199.98px){[_nghost-%COMP%]{transform:translate(-100%)}.active[_nghost-%COMP%]{transform:translate(0)}}@media (min-width: 1200px){.hidden[_nghost-%COMP%]{transform:translate(-100%)}}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-content{overflow-y:scroll}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-bar-x{visibility:hidden}[_nghost-%COMP%]     .p-accordion{width:323px}"],changeDetection:0});let e=o;return e})();var J0=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=Gt({type:o}),o.\u0275inj=Wt({imports:[Yt,Bt,Hi,Bt]});let e=o;return e})();export{cs as a,B_ as b,ts as c,J0 as d};

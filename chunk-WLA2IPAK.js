import{a as ke,b as Me,c as Pe,e as Ae,f as Ne,g as Le,h as ze}from"./chunk-FTBBGU2E.js";import{c as It}from"./chunk-MCZ7Y6EF.js";import{c as je,e as De,f as We,g as Ue}from"./chunk-KA32YPUS.js";import{a as Be}from"./chunk-YZL45LBC.js";import{d as Mt,e as Ot}from"./chunk-NEYKPSFL.js";import{a as wt,b as yt,d as Et,e as Oe,f as Re,g as Ve,i as Bt}from"./chunk-3TMIFLL3.js";import{a as Fe,b as $e}from"./chunk-BTZS2KAN.js";import{f as ye,g as Ee}from"./chunk-PKMIYV3H.js";import{e as gt,f as St,h as vt,i as Ie,j as we}from"./chunk-5V6A4SOG.js";import{$b as _e,$d as be,Ab as S,Ad as ge,Bb as I,Bc as Ce,Bd as Nt,Ca as Dt,Cb as R,Ce as Te,Eb as mt,Ec as ue,Fb as Ct,Gb as ut,Ha as te,Hd as Se,He as j,I as Xt,Ia as ee,Ib as xt,Id as ve,Ie as $,Jb as tt,La as p,Lb as L,Mb as At,Mc as xe,Nd as Lt,Od as he,Rb as nt,Sb as r,T as jt,Tb as f,Ub as T,Va as ne,Vb as pt,W as Qt,Wa as ie,Wb as w,Ya as c,Ye as ht,_a as C,_c as Q,a as ct,ab as et,b as qt,bb as oe,cb as B,cc as se,db as d,eb as dt,ec as Wt,ed as ft,ee as _t,f as an,fb as ae,fd as fe,gb as A,h as ln,ha as Yt,hb as W,hc as ce,hd as Ut,hf as bt,ib as _,if as Tt,j as Jt,jb as s,jd as U,kb as u,la as N,mf as kt,n as Kt,na as rt,nb as V,ob as O,pb as k,pc as re,pd as it,qa as P,qb as a,qc as de,qe as ot,rc as me,td as G,ua as y,va as E,ve as Y,we as J,xa as Zt,xb as le,xe as z,y as $t,yb as pe,zb as h}from"./chunk-S2PCDOQL.js";var He=an((zt,Ht)=>{"use strict";(function(e,o){typeof define=="function"&&define.amd?define([],o):typeof zt<"u"?o():(o(),e.FileSaver={})})(zt,function(){"use strict";function e(x,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\uFEFF",x],{type:x.type}):x}function o(x,g,b){var v=new XMLHttpRequest;v.open("GET",x),v.responseType="blob",v.onload=function(){m(v.response,g,b)},v.onerror=function(){console.error("could not download file")},v.send()}function t(x){var g=new XMLHttpRequest;g.open("HEAD",x,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function n(x){try{x.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),x.dispatchEvent(g)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(x,g,b){var v=i.URL||i.webkitURL,M=document.createElement("a");g=g||x.name||"download",M.download=g,M.rel="noopener",typeof x=="string"?(M.href=x,M.origin===location.origin?n(M):t(M.href)?o(x,g,b):n(M,M.target="_blank")):(M.href=v.createObjectURL(x),setTimeout(function(){v.revokeObjectURL(M.href)},4e4),setTimeout(function(){n(M)},0))}:"msSaveOrOpenBlob"in navigator?function(x,g,b){if(g=g||x.name||"download",typeof x!="string")navigator.msSaveOrOpenBlob(e(x,b),g);else if(t(x))o(x,g,b);else{var v=document.createElement("a");v.href=x,v.target="_blank",setTimeout(function(){n(v)})}}:function(x,g,b,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof x=="string")return o(x,g,b);var M=x.type==="application/octet-stream",F=/constructor/i.test(i.HTMLElement)||i.safari,q=/CriOS\/[\d]+/.test(navigator.userAgent);if((q||M&&F||l)&&typeof FileReader<"u"){var D=new FileReader;D.onloadend=function(){var lt=D.result;lt=q?lt:lt.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=lt:location=lt,v=null},D.readAsDataURL(x)}else{var Z=i.URL||i.webkitURL,Ft=Z.createObjectURL(x);v?v.location=Ft:location.href=Ft,v=null,setTimeout(function(){Z.revokeObjectURL(Ft)},4e4)}});i.saveAs=m.saveAs=m,typeof Ht<"u"&&(Ht.exports=m)})});var Gt=ln(He());var pn="text/csv;charset=UTF-8",_n=".csv",sn="text/json;charset=UTF-8",cn=".json",rn=["Item","Items","Surplus","Inputs","Outputs","Targets","Belts","Belt","Wagons","Wagon","Recipe","Machines","Machine","Modules","Beacons","Power","Pollution"],Ge=(()=>{class e{store=N(Q);itemsState=this.store.selectSignal(z.selectItemsState);recipesState=this.store.selectSignal(j.selectRecipesState);columnsState=this.store.selectSignal(J.selectColumnsState);data=this.store.selectSignal(j.selectAdjustedDataset);stepsToCsv(t){let n=t.map(m=>this.stepToJson(m,t)),i=rn.filter(m=>n.some(x=>x[m]!=null)),l=n.map(m=>i.map(x=>m[x]).join(","));l.unshift(i.join(",")),l.unshift(`"${_t.href}"`),this.saveAsCsv(l.join(`\r
`),"factoriolab_list")}flowToJson(t){this.saveAsJson(JSON.stringify(t),"factoriolab_flow")}saveAsCsv(t,n){(0,Gt.saveAs)(new Blob([t],{type:pn}),n+_n)}saveAsJson(t,n){(0,Gt.saveAs)(new Blob([t],{type:sn}),n+cn)}stepToJson(t,n){let i=this.columnsState(),l=this.itemsState(),m=this.recipesState(),x=this.data(),g={};if(t.itemId!=null){g.Item=t.itemId;let b=l[t.itemId];t.items!=null&&(g.Items="="+t.items.sub(t.surplus??U.zero).toString()),t.surplus!=null&&(g.Surplus="="+t.surplus.toString()),i.belts.show&&(t.belts!=null&&(g.Belts="="+t.belts.toString()),g.Belt=b.beltId),i.wagons.show&&(t.wagons!=null&&(g.Wagons="="+t.wagons.toString()),g.Wagon=b.wagonId)}if(t.recipeId!=null){g.Recipe=t.recipeId;let b=x.adjustedRecipe[t.recipeId],v=m[t.recipeId],M=Object.keys(b.in).map(F=>{let q=n.find(D=>D.itemId===F);return[F,q?.parents?.[t.id]?.toString()]}).filter(F=>F[1]).map(F=>`${F[0]}:${F[1]}`).join(",");if(M&&(g.Inputs=`"${M}"`),v.machineId!=null){let F=x.machineEntities[v.machineId],q=ot.allowsModules(b,F);i.machines.show&&(t.machines!=null&&(g.Machines="="+t.machines.toString()),g.Machine=v.machineId,q&&v.modules!=null&&(g.Modules=`"${v.modules.filter(Ut("count","id")).map(D=>`${D.count.toString()} ${D.id}`).join(",")}"`)),i.beacons.show&&q&&(g.Beacons=`"${v.beacons?.map(D=>`${D.count?.toString()} ${D.id} (${D.modules?.filter(Ut("count","id")).map(Z=>`${Z.count.toString()} ${Z.id}`).join(",")})`).join(",")}"`),i.power.show&&t.power!=null&&(g.Power="="+t.power.toString()),i.pollution.show&&t.pollution!=null&&(g.Pollution="="+t.pollution.toString())}}if(t.outputs!=null){let b=t.outputs,v=Object.keys(b).map(M=>`${M}:${b[M].toString()}`).join(",");g.Outputs=`"${v}"`}if(t.parents!=null){let b=t.parents,v=Object.keys(b).map(M=>n.find(F=>F.id===M)).filter(fe).map(M=>`${M.recipeId}:${b[M.id].toString()}`).join(",");g.Targets=`"${v}"`}return g}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Yt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var qe=(()=>{class e{transform(t){return t}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"asStep",type:e,pure:!0,standalone:!0})}return e})();var Je=(()=>{class e{transform(t,n){if(t!=null){let i=be[n.inserterTarget][n.inserterCapacity]?.find(l=>l.value.gt(t)||l.id===G.StackInserter);return i==null?null:{id:i.id,value:t.div(i.value)}}return null}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"inserterSpeed",type:e,pure:!0,standalone:!0})}return e})();var Ke=(()=>{class e{transform(t){return t==null?"":" ".repeat(4-t.length)+t}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"leftPad",type:e,pure:!0,standalone:!0})}return e})();var K=(()=>{class e{static transform(t,n){if(n==null)return t.toFraction();if(n===-2)return Math.round(t.mul(U(100n)).toNumber()).toString();let l=t.toPrecision(n).toString();if(n>0){let m=U(1,Math.pow(10,n));t.gt(U.zero)&&t.lt(m)&&(l=`<${l}`);let x=l.split(".");if(x.length>1){if(x[1].length<n){let g=n-x[1].length;return l+"0".repeat(g)}}else return t.isInteger()?l+" ".repeat(n+1):l+"."+"0".repeat(n)}return l}transform(t,n){return e.transform(t,n)}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"rate",type:e,pure:!0,standalone:!0})}return e})();var Xe=(()=>{class e{transform(t,n,i){return i===G.Pumpjack?`${K.transform(t.mul(U(100n)),n!=null?Math.max(n-2,0):n)}%`:K.transform(t,n)}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"machineRate",type:e,pure:!0,standalone:!0})}return e})();var Qe=(()=>{class e{transform(t,n){return n!==it.CaptainOfIndustry||t!==G.MineControlTower}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"machineShowRate",type:e,pure:!0,standalone:!0})}return e})();var Ye=(()=>{class e{transform(t,n){return t==null?!1:n!==it.DysonSphereProgram||t!==G.MiningMachine}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"machineShow",type:e,pure:!0,standalone:!0})}return e})();var Ze=(()=>{class e{transform(t,n,i=!1){if(t==null)return[];let l=t.map(m=>({label:n[m].name,value:m}));return i&&l.unshift({label:"None",value:G.Module}),l}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"options",type:e,pure:!0,standalone:!0})}return e})();var tn=(()=>{class e{transform(t,n,i){switch(i){case Nt.GW:return`${K.transform(t.div(U(1000000n)),n)} GW`;case Nt.MW:return`${K.transform(t.div(U(1000n)),n)} MW`;default:return`${K.transform(t,n)} kW`}}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"power",type:e,pure:!0,standalone:!0})}return e})();var Rt=class e{static value=U(1n,3n);transform(o){return o==null?e.value.toFraction():e.value.toPrecision(o).toString()}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=P({name:"precisionExample",type:e,pure:!0,standalone:!0})};var en=(()=>{class e{store=N(Q);routerSvc=N(It);data=this.store.selectSignal(j.selectAdjustedDataset);transform(t,n){return Jt(this,null,function*(){let i=t;if(i.recipeId){let l=this.data().adjustedRecipe[i.recipeId];l.isTechnology&&l.productivity&&t.items&&(i=qt(ct({},t),{items:t.items.div(l.productivity)}))}return this.routerSvc.stepHref(i,n,this.data().hash)})}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"stepHref",type:e,pure:!0,standalone:!0})}return e})();var st=(()=>{class e{static transform(t){return t.itemId??t.recipeObjectiveId??t.recipeId??t.id}transform(t){return e.transform(t)}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=P({name:"stepId",type:e,pure:!0,standalone:!0})}return e})();var gn=()=>({width:"400px"}),Sn=()=>({"400px":"100vw"});function vn(e,o){e&1&&(_(0,"tr")(1,"th"),S(2),r(3,"translate"),s(),_(4,"th"),S(5),r(6,"translate"),s(),_(7,"th"),S(8),r(9,"translate"),s(),_(10,"th"),S(11),r(12,"translate"),s()()),e&2&&(p(2),I(f(3,4,"columns.visibility")),p(3),I(f(6,6,"columns.decimals")),p(3),I(f(9,8,"columns.fractions")),p(3),I(f(12,10,"columns.example")))}function hn(e,o){if(e&1){let t=O();_(0,"td")(1,"p-inputNumber",7),ut("ngModelChange",function(i){y(t);let l=a().$implicit,m=a();return Ct(m.editValue[l.value].precision,i)||(m.editValue[l.value].precision=i),E(i)}),s()(),_(2,"td",8)(3,"p-checkbox",9),k("onChange",function(i){y(t);let l=a().$implicit,m=a();return E(m.changeFraction(i.checked,l.value))}),s()(),_(4,"td"),S(5),r(6,"precisionExample"),s()}if(e&2){let t=a().$implicit,n=a();p(),C("min",0)("size",1)("showButtons",!0)("disabled",!n.editValue[t.value].show),mt("ngModel",n.editValue[t.value].precision),p(2),C("ngModel",n.editValue[t.value].precision==null)("binary",!0)("disabled",!n.editValue[t.value].show),p(2),R(" ",f(6,9,n.editValue[t.value].precision)," ")}}function bn(e,o){e&1&&(_(0,"td",6)(1,"div",10),S(2),r(3,"translate"),s()()),e&2&&(p(2),I(f(3,1,"columns.notApplicable")))}function Tn(e,o){if(e&1){let t=O();_(0,"tr")(1,"td")(2,"p-checkbox",5),r(3,"translate"),ut("ngModelChange",function(i){let l=y(t).$implicit,m=a();return Ct(m.editValue[l.value].show,i)||(m.editValue[l.value].show=i),E(i)}),s()(),c(4,hn,7,11)(5,bn,4,3,"td",6),s()}if(e&2){let t=o.$implicit,n=a();p(2),mt("ngModel",n.editValue[t.value].show),C("binary",!0)("label",f(3,5,t.label))("disabled",t.disabled),p(2),d(n.columnsInf[t.value].hasPrecision?4:5)}}function In(e,o){if(e&1){let t=O();_(0,"button",14),r(1,"translate"),k("click",function(){y(t);let i=a(2);return E(i.reset())}),s()}e&2&&C("label",f(1,1,"reset"))}function wn(e,o){if(e&1){let t=O();c(0,In,2,3,"button",11),_(1,"button",12),r(2,"translate"),k("click",function(){y(t);let i=a();return E(i.hide())}),s(),_(3,"button",13),r(4,"translate"),k("click",function(){y(t);let i=a();return E(i.hide(!0))}),s()}if(e&2){let t=a();d(t.modified?0:-1),p(),C("label",f(2,3,"ok")),p(2),C("label",f(4,5,"cancel"))}}var nn=(()=>{class e extends je{store=N(Q);columnOptions=this.store.selectSignal(J.selectColumnOptions);editValue=he;columnsInf=Lt;get modified(){return Object.keys(this.editValue).some(t=>this.editValue[t].precision!==Y.initialState.columns[t].precision||this.editValue[t].show!==Y.initialState.columns[t].show)}initEdit(t){this.editValue=Object.keys(t).filter(n=>Lt[n]!=null).reduce((n,i)=>(n[i]=ct({},t[i]),n),{})}open(t){this.initEdit(t),this.show()}changeFraction(t,n){this.editValue[n].precision=t?null:1}reset(){this.initEdit(Y.initialState.columns)}save(){let t=this.editValue;this.store.dispatch(Y.setColumns({columns:t}))}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zt(e)))(i||e)}})();static \u0275cmp=rt({type:e,selectors:[["lab-columns"]],standalone:!0,features:[ie,xt],decls:6,vars:15,consts:[[3,"visibleChange","onHide","visible","modal","dismissableMask","draggable","resizable","focusOnShow","breakpoints","header"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[3,"ngModelChange","ngModel","binary","label","disabled"],["colspan","3",1,"text-center"],["styleClass","w-100","inputStyleClass","text-end",1,"w-100",3,"ngModelChange","min","size","showButtons","disabled","ngModel"],[1,"text-center"],[3,"onChange","ngModel","binary","disabled"],[1,"p-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-secondary",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"p-button-outlined",3,"click","label"]],template:function(n,i){n&1&&(_(0,"p-dialog",0),r(1,"translate"),ut("visibleChange",function(m){return Ct(i.visible,m)||(i.visible=m),m}),k("onHide",function(){return i.onHide()}),_(2,"p-table",1),c(3,vn,13,12,"ng-template",2)(4,Tn,6,7,"ng-template",3),s(),c(5,wn,5,7,"ng-template",4),s()),n&2&&(oe(tt(13,gn)),mt("visible",i.visible),C("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("focusOnShow",!1)("breakpoints",tt(14,Sn))("header",f(1,11,"columns.header")),p(2),C("value",i.columnOptions()))},dependencies:[vt,gt,St,Tt,bt,ht,Ot,Mt,Ue,We,yt,wt,Bt,Et,Rt,kt],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{width:115px}[_nghost-%COMP%]     .p-dialog-content{padding-bottom:1rem}"],changeDetection:0})}return e})();var yn=["stepsTable"],Vt=(e,o)=>o.id,X=(e,o)=>o.key,En=()=>[25,50,100,1e3],on=()=>[],Bn=(e,o,t,n,i,l,m,x,g,b,v,M,F)=>({items:e,itemId:o,belts:t,beltId:n,wagons:i,wagonId:l,machines:m,machineId:x,recipeId:g,recipeObjectiveId:b,percent:v,percentOnDest:!0,destId:M,inputs:F}),kn=(e,o,t,n,i,l,m,x,g,b,v,M,F,q)=>({items:e,itemId:o,belts:t,beltId:n,wagons:i,wagonId:l,machines:m,machineId:x,recipeId:g,recipeObjectiveId:b,percent:v,destId:M,destRecipeObjectiveId:F,destIsRecipe:!0,outputs:q}),Pt=(e,o)=>({step:e,percent:o}),Mn=(e,o)=>({items:e,itemId:o}),On=(e,o,t,n,i,l,m,x,g,b,v,M,F)=>({items:e,itemId:o,belts:t,beltId:n,wagons:i,wagonId:l,machines:m,machineId:x,recipeId:g,recipeObjectiveId:b,percent:v,destId:M,destRecipeObjectiveId:F,destIsRecipe:!0}),Rn=(e,o,t,n,i,l,m,x,g)=>({items:e,itemId:o,belts:t,beltId:n,wagons:i,wagonId:l,percent:m,destId:x,destRecipeObjectiveId:g,destIsRecipe:!0}),Vn=(e,o,t,n,i,l,m,x,g,b,v,M,F)=>({items:e,itemId:o,belts:t,beltId:n,wagons:i,wagonId:l,machines:m,machineId:x,recipeId:g,recipeObjectiveId:b,percent:v,percentOnDest:!0,destId:M,destRecipeObjectiveId:F}),at=(e,o)=>({value:e,itemId:o}),Pn=(e,o)=>({columnSettings:e,totals:o,type:"belt"}),Fn=(e,o)=>({columnSettings:e,totals:o}),$n=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"machine"}),jn=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"beacon"});function Dn(e,o){if(e&1){let t=O();_(0,"button",34),r(1,"translate"),k("click",function(){y(t);let i=a(2);return E(i.exportSvc.stepsToCsv(i.steps()))}),s()}e&2&&C("label",f(1,1,"steps.downloadAsCsv"))}function An(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(){y(t);let i=a(3);return E(i.resetChecked())}),s()}e&2&&C("pTooltip",f(1,1,"steps.checkedUndoTooltip"))}function Wn(e,o){if(e&1&&(_(0,"th")(1,"div",35),u(2,"i",36),c(3,An,2,3,"button",26),s()()),e&2){let t=a(2);p(3),d(t.itemsModified().checked||t.recipesModified().checked?3:-1)}}function Un(e,o){e&1&&(_(0,"th"),S(1),r(2,"translate"),s()),e&2&&(p(),I(f(2,1,"options.column.tree")))}function Nn(e,o){e&1&&u(0,"p-sortIcon",25)}function Ln(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(i){return y(t),a(2).resetExcluded(),E(i.stopImmediatePropagation())}),s()}e&2&&C("pTooltip",f(1,1,"steps.itemsUndoTooltip"))}function zn(e,o){e&1&&u(0,"p-sortIcon",38)}function Hn(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(i){return y(t),a(3).resetBelts(),E(i.stopImmediatePropagation())}),s()}e&2&&C("pTooltip",f(1,1,"steps.beltsUndoTooltip"))}function Gn(e,o){if(e&1&&(_(0,"th",27)(1,"div",24)(2,"span"),S(3),r(4,"translate"),s(),c(5,zn,1,0,"p-sortIcon",38)(6,Hn,2,3,"button",26),s()()),e&2){let t=a(2);p(3),I(f(4,3,"options.column.belts")),p(2),d(t.focus()?-1:5),p(),d(t.itemsModified().belts?6:-1)}}function qn(e,o){e&1&&u(0,"p-sortIcon",39)}function Jn(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(i){return y(t),a(3).resetWagons(),E(i.stopImmediatePropagation())}),s()}e&2&&C("pTooltip",f(1,1,"steps.wagonsUndoTooltip"))}function Kn(e,o){if(e&1&&(_(0,"th",28)(1,"div",24)(2,"span"),S(3),r(4,"translate"),s(),c(5,qn,1,0,"p-sortIcon",39)(6,Jn,2,3,"button",26),s()()),e&2){let t=a(2);p(3),I(f(4,3,t.dispRateInfo().wagonsLabel)),p(2),d(t.focus()?-1:5),p(),d(t.itemsModified().wagons?6:-1)}}function Xn(e,o){e&1&&u(0,"p-sortIcon",30)}function Qn(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(i){return y(t),a(2).resetMachines(),E(i.stopImmediatePropagation())}),s()}e&2&&C("pTooltip",f(1,1,"steps.machinesUndoTooltip"))}function Yn(e,o){if(e&1){let t=O();_(0,"button",37),r(1,"translate"),k("click",function(){y(t);let i=a(3);return E(i.resetBeacons())}),s()}e&2&&C("pTooltip",f(1,1,"steps.beaconsUndoTooltip"))}function Zn(e,o){if(e&1&&(_(0,"th",31)(1,"div",24)(2,"span"),S(3),r(4,"translate"),s(),c(5,Yn,2,3,"button",26),s()()),e&2){let t=a(2);p(3),I(f(4,2,"options.column.beacons")),p(2),d(t.recipesModified().beacons?5:-1)}}function ti(e,o){e&1&&u(0,"p-sortIcon",41)}function ei(e,o){if(e&1&&(_(0,"th",32)(1,"div",40)(2,"span"),S(3),r(4,"translate"),s(),c(5,ti,1,0,"p-sortIcon",41),s()()),e&2){let t=a(2);p(3),I(f(4,2,"options.column.power")),p(2),d(t.focus()?-1:5)}}function ni(e,o){e&1&&u(0,"p-sortIcon",42)}function ii(e,o){if(e&1&&(_(0,"th",33)(1,"div",40)(2,"span"),S(3),r(4,"translate"),s(),c(5,ni,1,0,"p-sortIcon",42),s()()),e&2){let t=a(2);p(3),I(f(4,2,t.dispRateInfo().pollutionLabel)),p(2),d(t.focus()?-1:5)}}function oi(e,o){e&1&&u(0,"th")}function ai(e,o){if(e&1){let t=O();_(0,"tr")(1,"td",18)(2,"div",19)(3,"button",20),r(4,"translate"),k("click",function(){y(t);let i=a(),l=h(14);return E(l.open(i.columnsState()))}),s(),c(5,Dn,2,3,"button",21),s()()(),_(6,"tr",22),u(7,"th"),c(8,Wn,4,1,"th")(9,Un,3,3,"th"),_(10,"th",23)(11,"div",24)(12,"span"),S(13),r(14,"translate"),s(),c(15,Nn,1,0,"p-sortIcon",25)(16,Ln,2,3,"button",26),s()(),c(17,Gn,7,5,"th",27)(18,Kn,7,5,"th",28),_(19,"th",29)(20,"div",24)(21,"span"),S(22),r(23,"translate"),s(),c(24,Xn,1,0,"p-sortIcon",30)(25,Qn,2,3,"button",26),s()(),c(26,Zn,6,4,"th",31)(27,ei,6,4,"th",32)(28,ii,6,4,"th",33)(29,oi,1,0,"th"),s()}if(e&2){let t=a();p(3),C("label",f(4,16,"steps.columnSettings")),p(2),d(t.steps().length?5:-1),p(3),d(!t.focus()&&t.columnsState().checkbox.show?8:-1),p(),d(!t.focus()&&t.columnsState().tree.show?9:-1),p(4),I(f(14,18,t.dispRateInfo().itemsLabel)),p(2),d(t.focus()?-1:15),p(),d(t.itemsModified().excluded?16:-1),p(),d(t.columnsState().belts.show?17:-1),p(),d(t.columnsState().wagons.show?18:-1),p(4),I(f(23,20,"options.column.machines")),p(2),d(t.focus()?-1:24),p(),d(t.recipesModified().machines?25:-1),p(),d(t.columnsState().beacons.show?26:-1),p(),d(t.columnsState().power.show?27:-1),p(),d(t.columnsState().pollution.show?28:-1),p(),d(t.columnsState().link.show?29:-1)}}function li(e,o){if(e&1&&u(0,"div",44),e&2){let t=o.$implicit,n=a();C("id","step_"+n.id+"_"+t.label)}}function pi(e,o){if(e&1){let t=O();_(0,"td",47)(1,"div",52)(2,"p-checkbox",53),k("onChange",function(i){y(t);let l=a(),m=a(2);return E(m.changeStepChecked(l,i.checked))}),s()()()}if(e&2){let t=a();p(2),C("binary",!0)("ngModel",t.checked)}}function _i(e,o){if(e&1&&u(0,"div",60),e&2){let t=o.$implicit,n=o.$index,i=o.$count;et("trail",t)("last",n===i-1)}}function si(e,o){if(e&1&&(A(0,_i,1,4,"div",59,dt),u(2,"div",55)),e&2){let t=a(2),n=a(2);W(n.stepTree()[t.id])}}function ci(e,o){if(e&1&&u(0,"lab-tooltip",63),e&2){let t=a(3);C("id",t.itemId)}}function ri(e,o){if(e&1){let t=O();_(0,"button",61),r(1,"iconSmClass"),k("click",function(){y(t);let i=a(2),l=a(2);return E(l.setItemExcluded(i.itemId,!l.itemsState()[i.itemId].excluded))}),u(2,"i",62),c(3,ci,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(2),i=a(2);et("hover-active",i.itemsState()[n.itemId].excluded),C("icon",f(1,4,n.itemId))("pTooltip",t)}}function di(e,o){if(e&1&&(_(0,"span"),S(1),s()),e&2){let t=a(3);p(),R("#",t.recipeObjectiveId,"")}}function mi(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a(4);C("id",t.recipeId)}}function Ci(e,o){if(e&1&&c(0,mi,1,1,"lab-tooltip",65),e&2){let t=a(3);d(t.recipeId?0:-1)}}function ui(e,o){if(e&1&&(_(0,"i",64),r(1,"iconSmClass"),c(2,di,2,1,"span")(3,Ci,1,1,"ng-template",null,5,w),s()),e&2){let t=h(4),n=a(2);B(T(1,4,n.recipeId,"recipe")),C("pTooltip",t),p(2),d(n.recipeObjectiveId!=null?2:-1)}}function xi(e,o){if(e&1&&(_(0,"td",48)(1,"div",54),c(2,si,3,0,"div",55),_(3,"div",56),c(4,ri,5,6,"button",57)(5,ui,5,7,"i",58),s()()()),e&2){let t,n=a(),i=a(2),l=h(1);p(2),d(!l.sortField&&((t=i.stepTree()[n.id])!=null&&t.length)?2:-1),p(2),d(n.itemId&&n.recipeObjectiveId==null?4:5)}}function fi(e,o){if(e&1&&(_(0,"span",67),S(1),r(2,"rate"),s()),e&2){let t=a(2),n=a(2);p(),R("(+",T(2,1,t.surplus,n.columnsState().items.precision),") ")}}function gi(e,o){if(e&1&&u(0,"lab-tooltip",63),e&2){let t=a(3);C("id",t.itemId)}}function Si(e,o){if(e&1){let t=O();_(0,"button",61),r(1,"iconSmClass"),k("click",function(){y(t);let i=a(2),l=a(2);return E(l.setItemExcluded(i.itemId,!l.itemsState()[i.itemId].excluded))}),u(2,"i",62),c(3,gi,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(2),i=a(2);et("hover-active",i.itemsState()[n.itemId].excluded),C("icon",f(1,4,n.itemId))("pTooltip",t)}}function vi(e,o){if(e&1&&(_(0,"td",66),c(1,fi,3,4,"span",67),_(2,"span",67),S(3),r(4,"rate"),s()(),_(5,"td",68)(6,"div",24)(7,"span",69),S(8),s(),c(9,Si,5,6,"button",57),s()()),e&2){let t,n=a(),i=a(2);p(),d(n.surplus&&n.surplus.nonzero()?1:-1),p(2),I(T(4,4,n.items.sub((t=n.surplus)!==null&&t!==void 0?t:i.rational.zero),i.columnsState().items.precision)),p(5),I(i.data().itemEntities[n.itemId].name),p(),d(!i.preferences().hideDuplicateIcons||!i.columnsState().tree.show?9:-1)}}function hi(e,o){e&1&&u(0,"td",31)}function bi(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=a().$implicit;p(),B(f(2,2,t.value))}}function Ti(e,o){if(e&1&&c(0,bi,3,4,"div",45),e&2){let t=o.$implicit;d(t?0:-1)}}function Ii(e,o){if(e&1&&u(0,"lab-tooltip",76),e&2){let t=a().$implicit;C("id",t.value)}}function wi(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,Ii,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function yi(e,o){if(e&1&&u(0,"lab-tooltip",76),e&2){let t=a(2);C("id",t)}}function Ei(e,o){if(e&1){let t=O();_(0,"p-dropdown",71),k("onChange",function(i){let l=y(t),m=a(4),x=a(2);return E(x.setBelt(m.itemId,i.value,l))}),c(1,Ti,1,1,"ng-template",72)(2,wi,7,6,"ng-template",73)(3,yi,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(),i=a(5);C("pTooltip",t)("ngModel",n)("options",i.options().belts)}}function Bi(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=o.$implicit;p(),B(f(2,2,t.value))}}function ki(e,o){if(e&1&&u(0,"lab-tooltip",77),e&2){let t=a().$implicit;C("id",t.value)}}function Mi(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,ki,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function Oi(e,o){if(e&1&&u(0,"lab-tooltip",77),e&2){let t=a(3);C("id",t)}}function Ri(e,o){if(e&1){let t=O();_(0,"p-dropdown",71),k("onChange",function(i){let l=y(t),m=a(5),x=a(2);return E(x.setBelt(m.itemId,i.value,l))}),c(1,Bi,3,4,"ng-template",72)(2,Mi,7,6,"ng-template",73)(3,Oi,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(2),i=a(5);C("pTooltip",t)("ngModel",n)("options",i.options().pipes)}}function Vi(e,o){if(e&1&&u(0,"lab-tooltip",77),e&2){let t=a(3);C("id",t)}}function Pi(e,o){if(e&1&&(_(0,"i",64),r(1,"iconClass"),c(2,Vi,1,1,"ng-template",null,5,w),s()),e&2){let t=h(3),n=a(2);B(f(1,3,n)),C("pTooltip",t)}}function Fi(e,o){if(e&1&&c(0,Ri,5,3,"p-dropdown",70)(1,Pi,4,5,"i",58),e&2){let t,n=a(),i=a(5);d((t=i.data().pipeIds.indexOf(n)!==-1&&i.settings().pipeId)?0:1,t)}}function $i(e,o){if(e&1&&(_(0,"td",66)(1,"span",67),S(2),r(3,"rate"),s()(),_(4,"td",68)(5,"div",24),c(6,Ei,5,3,"p-dropdown",70)(7,Fi,2,1),s()()),e&2){let t,n=a(3),i=a(2);p(2),I(T(3,2,n.belts,i.columnsState().belts.precision)),p(4),d((t=i.data().beltIds.indexOf(o)!==-1&&i.settings().beltId)?6:7,t)}}function ji(e,o){if(e&1&&c(0,$i,8,5),e&2){let t,n=a(2),i=a(2);d((t=i.itemsState()[n.itemId].beltId)?0:-1,t)}}function Di(e,o){e&1&&u(0,"td",31)}function Ai(e,o){if(e&1&&c(0,ji,1,1)(1,Di,1,0,"td",31),e&2){let t=a();d(t.itemId&&t.belts?0:1)}}function Wi(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=a().$implicit;p(),B(f(2,2,t.value))}}function Ui(e,o){if(e&1&&c(0,Wi,3,4,"div",45),e&2){let t=o.$implicit;d(t?0:-1)}}function Ni(e,o){if(e&1&&u(0,"lab-tooltip",78),e&2){let t=a().$implicit;C("id",t.value)}}function Li(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,Ni,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function zi(e,o){if(e&1&&u(0,"lab-tooltip",78),e&2){let t=a(2);C("id",t)}}function Hi(e,o){if(e&1){let t=O();_(0,"p-dropdown",71),k("onChange",function(i){let l=y(t),m=a(4),x=a(2);return E(x.setWagon(m.itemId,i.value,l))}),c(1,Ui,1,1,"ng-template",72)(2,Li,7,6,"ng-template",73)(3,zi,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(),i=a(5);C("pTooltip",t)("ngModel",n)("options",i.options().cargoWagons)}}function Gi(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=a().$implicit;p(),B(f(2,2,t.value))}}function qi(e,o){if(e&1&&c(0,Gi,3,4,"div",45),e&2){let t=o.$implicit;d(t?0:-1)}}function Ji(e,o){if(e&1&&u(0,"lab-tooltip",79),e&2){let t=a().$implicit;C("id",t.value)}}function Ki(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s()(),c(5,Ji,1,1,"ng-template",null,5,w)),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function Xi(e,o){if(e&1&&u(0,"lab-tooltip",79),e&2){let t=a(3);C("id",t)}}function Qi(e,o){if(e&1){let t=O();_(0,"p-dropdown",71),k("onChange",function(i){let l=y(t),m=a(5),x=a(2);return E(x.setWagon(m.itemId,i.value,l))}),c(1,qi,1,1,"ng-template",72)(2,Ki,7,6,"ng-template",73)(3,Xi,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(4),n=a(2),i=a(5);C("pTooltip",t)("ngModel",n)("options",i.options().fluidWagons)}}function Yi(e,o){if(e&1&&c(0,Qi,5,3,"p-dropdown",70),e&2){let t,n=a(),i=a(5);d((t=i.data().fluidWagonIds.indexOf(n)!==-1&&i.settings().fluidWagonId)?0:-1,t)}}function Zi(e,o){if(e&1&&(_(0,"td",66)(1,"span",67),S(2),r(3,"rate"),s()(),_(4,"td",68)(5,"div",24),c(6,Hi,5,3,"p-dropdown",70)(7,Yi,1,1),s()()),e&2){let t,n=a(3),i=a(2);p(2),I(T(3,2,n.wagons,i.columnsState().wagons.precision)),p(4),d((t=i.data().cargoWagonIds.indexOf(o)!==-1&&i.settings().cargoWagonId)?6:7,t)}}function to(e,o){if(e&1&&c(0,Zi,8,5),e&2){let t,n=a(2),i=a(2);d((t=i.itemsState()[n.itemId].wagonId)?0:-1,t)}}function eo(e,o){e&1&&u(0,"td",31)}function no(e,o){if(e&1&&c(0,to,1,1)(1,eo,1,0,"td",31),e&2){let t=a();d(t.itemId&&t.wagons?0:1)}}function io(e,o){if(e&1&&(_(0,"span",67),S(1),r(2,"machineRate"),s()),e&2){let t=a(),n=a(),i=a(2);p(),I(pt(2,1,n.machines,i.columnsState().machines.precision,t))}}function oo(e,o){if(e&1&&(_(0,"span"),S(1),s()),e&2){let t=a(4);p(),R("#",t.recipeObjectiveId,"")}}function ao(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a(4);C("id",t.recipeId)}}function lo(e,o){if(e&1){let t=O();_(0,"button",83),k("click",function(){y(t);let i=a(3),l=a(2);return E(l.addObjective({targetId:i.recipeId,unit:l.ObjectiveUnit.Machines}))}),_(1,"span",84),r(2,"iconSmClass"),c(3,oo,2,1,"span"),s(),u(4,"i",85),c(5,ao,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(6),n=a(3);C("pTooltip",t),p(),B(T(2,4,n.recipeId,"recipe")),p(2),d(n.recipeObjectiveId?3:-1)}}function po(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=a().$implicit;p(),B(f(2,2,t.value))}}function _o(e,o){if(e&1&&c(0,po,3,4,"div",45),e&2){let t=o.$implicit;d(t?0:-1)}}function so(e,o){if(e&1&&u(0,"lab-tooltip",87),e&2){let t=a().$implicit;C("id",t.value)}}function co(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,so,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function ro(e,o){if(e&1&&u(0,"lab-tooltip",87),e&2){let t=a(3);C("id",t)}}function mo(e,o){if(e&1){let t=O();_(0,"p-dropdown",86),r(1,"options"),k("onChange",function(i){y(t);let l=a(3),m=a(2);return E(m.changeRecipeField(l,i.value,"machine"))}),c(2,_o,1,1,"ng-template",72)(3,co,7,6,"ng-template",73)(4,ro,1,1,"ng-template",null,5,w),s()}if(e&2){let t=h(5),n=a(2),i=a(),l=a(2);C("pTooltip",t)("options",T(1,3,i.recipe.producers,l.data().itemEntities))("ngModel",n)}}function Co(e,o){if(e&1){let t=O();_(0,"p-inputNumber",88,6),r(2,"translate"),k("onBlur",function(){let i;y(t);let l=h(1),m=a(3),x=a(2);return E(x.changeRecipeField(m,(i=l.value)!==null&&i!==void 0?i:100,"overclock"))}),s()}if(e&2){let t=a(3);C("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",f(2,7,"steps.overclockTooltip"))("ngModel",t.recipeSettings.overclock)}}function uo(e,o){if(e&1&&u(0,"lab-tooltip",90),e&2){let t=a(2);C("id",t)}}function xo(e,o){if(e&1&&(_(0,"div",24)(1,"i",89),r(2,"iconSmClass"),c(3,uo,1,1,"ng-template",null,5,w),s()()),e&2){let t=h(4),n=a();p(),B(f(2,3,n)),C("pTooltip",t)}}function fo(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=o.$implicit;p(),B(f(2,2,t.value))}}function go(e,o){if(e&1&&u(0,"lab-tooltip",90),e&2){let t=a().$implicit;C("id",t.value)}}function So(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,go,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",n),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function vo(e,o){if(e&1&&u(0,"lab-tooltip",90),e&2){let t=a(2);C("id",t)}}function ho(e,o){if(e&1){let t=O();_(0,"p-dropdown",71),k("onChange",function(i){y(t);let l=a(4),m=a(2);return E(m.changeRecipeField(l,i.value,"fuel"))}),c(1,fo,3,4,"ng-template",72)(2,So,7,6,"ng-template",73)(3,vo,1,1,"ng-template",null,5,w),s()}if(e&2){let t,n=h(4),i=a(),l=a(3);C("pTooltip",n)("ngModel",i)("options",(t=l.recipeSettings.fuelOptions)!==null&&t!==void 0?t:tt(3,on))}}function bo(e,o){if(e&1&&c(0,xo,5,5,"div",24)(1,ho,5,4,"p-dropdown",70),e&2){let t=a(3);d(t.recipe.isBurn?0:t.recipeSettings.machineId?1:-1)}}function To(e,o){if(e&1&&(_(0,"div",45),u(1,"i"),r(2,"iconSmClass"),s()),e&2){let t=o.$implicit;p(),B(f(2,2,t.value))}}function Io(e,o){if(e&1&&u(0,"lab-tooltip",93),e&2){let t=a().$implicit;C("id",t.value)}}function wo(e,o){if(e&1&&(_(0,"div",74),u(1,"i"),r(2,"iconSmClass"),_(3,"div",75),S(4),s(),c(5,Io,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);C("pTooltip",t.value!=="module"?n:void 0),p(),B(f(2,4,t.value)),p(3),R(" ",t.label," ")}}function yo(e,o){if(e&1){let t=O();_(0,"p-dropdown",92),r(1,"translate"),k("onChange",function(i){y(t);let l=a(5),m=a(2);return E(m.changeRecipeField(l,[{id:i.value,count:m.rational.one}],"modules"))}),c(2,To,3,4,"ng-template",72)(3,wo,7,6,"ng-template",73),s()}if(e&2){let t,n=a(2),i=a(3);C("pTooltip",f(1,3,"settings.modifierTooltip"))("ngModel",n[0].id)("options",(t=i.recipeSettings.moduleOptions)!==null&&t!==void 0?t:tt(5,on))}}function Eo(e,o){if(e&1&&(_(0,"i",84),r(1,"iconSmClass"),_(2,"span"),S(3),s()()),e&2){let t=o.$implicit;B(f(1,3,t.id)),p(3),I(t.count)}}function Bo(e,o){if(e&1&&u(0,"lab-tooltip",93),e&2){let t=a().$implicit;C("id",t.id)}}function ko(e,o){if(e&1&&c(0,Bo,1,1,"lab-tooltip",93),e&2){let t=o.$implicit;d(t.id?0:-1)}}function Mo(e,o){if(e&1&&A(0,ko,1,1,null,null,Vt),e&2){let t=a(3);W(t)}}function Oo(e,o){if(e&1){let t=O();_(0,"button",94),k("click",function(i){y(t);let l=h(5),m=a(),x=a(),g=a(3);return E(l.show(i,x,m,g.recipeId))}),A(1,Eo,4,5,"i",95,Vt),u(3,"i",96),s(),_(4,"lab-modules-overlay",97,7),k("setValue",function(i){y(t);let l=a(5),m=a(2);return E(m.changeRecipeField(l,i,"modules"))}),s(),c(6,Mo,2,0,"ng-template",null,5,w)}if(e&2){let t=h(7),n=a(2);C("pTooltip",t),p(),W(n)}}function Ro(e,o){if(e&1&&c(0,yo,4,6,"p-dropdown",91)(1,Oo,8,1),e&2){let t=o;d(t.modules!==!0&&(t.modules!=null&&t.modules.isOne())?0:t.modules!=null?1:-1)}}function Vo(e,o){if(e&1&&c(0,Ro,2,1),e&2){let t,n=a(2),i=a(3);d((t=i.data().machineEntities[n])?0:-1,t)}}function Po(e,o){if(e&1&&(_(0,"div",24)(1,"span",69),S(2),s(),c(3,lo,7,7,"button",80)(4,mo,6,6,"p-dropdown",81),r(5,"machineShow"),c(6,Co,3,9,"p-inputNumber",82)(7,bo,2,1)(8,Vo,1,1),s()),e&2){let t,n,i=a(),l=a(),m=a(2);p(2),I(l.recipe.name),p(),d(!m.preferences().hideDuplicateIcons||l.itemId!=null&&l.itemId!==l.recipeId?3:-1),p(),d(T(5,6,i,m.data().game)?4:-1),p(2),d(m.data().game===m.Game.Satisfactory?6:-1),p(),d((t=l.recipeSettings==null?null:l.recipeSettings.fuelId)?7:-1,t),p(),d((n=l.recipeSettings==null?null:l.recipeSettings.modules)?8:-1,n)}}function Fo(e,o){if(e&1&&(_(0,"td",66),c(1,io,3,5,"span",67),r(2,"machineShowRate"),s(),_(3,"td",68),c(4,Po,9,9,"div",24),s()),e&2){let t=a(),n=a(2);p(),d(t.machines&&t.machines.nonzero()&&T(2,2,o,n.data().game)?1:-1),p(3),d(t.recipeId&&t.recipe&&t.recipeSettings?4:-1)}}function $o(e,o){e&1&&u(0,"td",31)}function jo(e,o){if(e&1&&(_(0,"i",100),r(1,"iconSmClass"),_(2,"span"),S(3),s()()),e&2){let t=a().$implicit;B(f(1,3,t.id)),p(3),I(t.total)}}function Do(e,o){if(e&1&&(_(0,"i",84),r(1,"iconSmClass"),_(2,"span"),S(3),s()()),e&2){let t=o.$implicit;B(f(1,3,t.id)),p(3),I(t.count)}}function Ao(e,o){if(e&1&&(_(0,"div",45)(1,"i",84),r(2,"iconSmClass"),_(3,"span"),S(4),s()(),c(5,jo,4,5,"i",99),A(6,Do,4,5,"i",95,Vt),s()),e&2){let t=o.$implicit;p(),B(f(2,4,t.id)),p(3),I(t.count),p(),d(t.total?5:-1),p(),W(t.modules)}}function Wo(e,o){e&1&&u(0,"lab-tooltip",101),e&2&&C("id",o)}function Uo(e,o){if(e&1&&c(0,Wo,1,1,"lab-tooltip",101),e&2){let t,n=a(3);d((t=n.recipeSettings.beacons==null||n.recipeSettings.beacons[0]==null?null:n.recipeSettings.beacons[0].id)?0:-1,t)}}function No(e,o){if(e&1){let t=O();_(0,"button",98),k("click",function(i){y(t);let l=h(5),m=a(2);return E(l.show(i,m.recipeSettings.beacons))}),A(1,Ao,8,6,"div",45,dt),u(3,"i",96),s(),_(4,"lab-beacons-overlay",97,8),k("setValue",function(i){y(t);let l=a(2),m=a(2);return E(m.changeRecipeField(l,i,"beacons"))}),s(),c(6,Uo,1,1,"ng-template",null,5,w)}if(e&2){let t=h(7),n=a(2);C("pTooltip",t),p(),W(n.recipeSettings.beacons)}}function Lo(e,o){if(e&1&&(_(0,"td",49),c(1,No,8,1),s()),e&2){let t=a();p(),d(t.recipeId&&t.recipeSettings&&t.recipeSettings.beacons?1:-1)}}function zo(e,o){if(e&1&&(_(0,"span",67),S(1),r(2,"power"),s()),e&2){let t=a(2),n=a(2);p(),I(pt(2,1,t.power,n.columnsState().power.precision,n.effectivePowerUnit()))}}function Ho(e,o){if(e&1&&(_(0,"td",50),c(1,zo,3,5,"span",67),s()),e&2){let t=a();p(),d(t.power&&t.power.nonzero()?1:-1)}}function Go(e,o){if(e&1&&(_(0,"span",67),S(1),r(2,"rate"),s()),e&2){let t=a(2),n=a(2);p(),I(T(2,1,t.pollution,n.columnsState().pollution.precision))}}function qo(e,o){if(e&1&&(_(0,"td",50),c(1,Go,3,4,"span",67),s()),e&2){let t=a();p(),d(t.pollution&&t.pollution.nonzero()?1:-1)}}function Jo(e,o){if(e&1){let t=O();_(0,"button",105),r(1,"translate"),k("click",function(){y(t);let i=a(2),l=a(2);return E(l.resetStep(i))}),s()}e&2&&C("pTooltip",f(1,1,"steps.stepUndoTooltip"))}function Ko(e,o){if(e&1&&(_(0,"td",51)(1,"div",45)(2,"a",102),r(3,"stepHref"),r(4,"async"),u(5,"button",103),r(6,"translate"),s(),c(7,Jo,2,3,"button",104),s()()),e&2){let t=a(),n=a(2);p(2),C("href",f(4,6,T(3,3,t,n.routerSvc.zipConfig())),ee),p(3),C("pTooltip",f(6,8,"steps.openNewTabTooltip")),p(2),d(t.recipeId&&n.stepsModified().recipes[t.recipeId]||t.itemId&&n.stepsModified().items[t.itemId]||t.recipeObjectiveId&&n.stepsModified().objectives[t.recipeObjectiveId]?7:-1)}}function Xo(e,o){if(e&1){let t=O();_(0,"tr")(1,"td",43),u(2,"div",44),A(3,li,1,1,"div",44,Vt),_(5,"div",45)(6,"button",46),r(7,"translate"),k("click",function(){let i=y(t),l=a().expanded,m=a();return E(m.expandRow(i,l))}),s()()(),c(8,pi,3,2,"td",47)(9,xi,6,2,"td",48)(10,vi,10,7)(11,hi,1,0,"td",31)(12,Ai,2,1)(13,no,2,1)(14,Fo,5,5)(15,$o,1,0,"td",31)(16,Lo,2,1,"td",49)(17,Ho,2,1,"td",50)(18,qo,2,1,"td",50)(19,Ko,8,10,"td",51),s()}if(e&2){let t,n=o,i=a().expanded,l=a();p(2),C("id","step_"+n.id),p(),W(l.stepDetails()[n.id].tabs),p(3),et("fa-rotate-90",i),C("pTooltip",f(7,15,i?"steps.hideDetails":"steps.showDetails"))("pRowToggler",n),p(2),d(!l.focus()&&l.columnsState().checkbox.show?8:-1),p(),d(!l.focus()&&l.columnsState().tree.show?9:-1),p(),d(n.itemId&&n.items?10:11),p(2),d(l.columnsState().belts.show?12:-1),p(),d(l.columnsState().wagons.show?13:-1),p(),d((t=n.recipeSettings==null?null:n.recipeSettings.machineId)?14:15,t),p(2),d(l.columnsState().beacons.show?16:-1),p(),d(l.columnsState().power.show?17:-1),p(),d(l.columnsState().pollution.show?18:-1),p(),d(l.columnsState().link.show?19:-1)}}function Qo(e,o){if(e&1&&(c(0,Xo,20,17,"tr"),r(1,"asStep")),e&2){let t,n=o.$implicit;d((t=f(1,1,n))?0:-1,t)}}function Yo(e,o){if(e&1&&(_(0,"a",111),u(1,"span",112),_(2,"span",113),S(3),r(4,"translate"),s()()),e&2){let t=o.$implicit,n=a(3);C("id",t.id),p(),B(n.stepDetailIcon[t.label]),p(2),I(f(4,4,"options.stepDetailTab."+t.label))}}function Zo(e,o){e&1&&V(0)}function ta(e,o){if(e&1&&(_(0,"tr",106),c(1,Zo,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()()),e&2){a(4);let t=h(9);p(),C("ngTemplateOutlet",t),p(2),R(" ",f(4,2,"steps.sources")," ")}}function ea(e,o){e&1&&V(0)}function na(e,o){if(e&1&&c(0,ea,1,0,"ng-container",116),e&2){let t=a().$implicit,n=a(2),i=a(2),l=h(11);C("ngTemplateOutlet",l)("ngTemplateOutletContext",nt(2,Bn,[n.items==null?null:n.items.mul(t.value),n.itemId,n.belts==null?null:n.belts.mul(t.value),i.itemsState()[n.itemId].beltId,n.wagons==null?null:n.wagons.mul(t.value),i.itemsState()[n.itemId].wagonId,t.step==null?null:t.step.machines,t.step==null||t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step==null?null:t.step.recipeId,t.step==null?null:t.step.recipeObjectiveId,t.value,n.itemId,t.inputs]))}}function ia(e,o){if(e&1&&c(0,na,1,16,"ng-container"),e&2){let t=a(2);d(t.itemId?0:-1)}}function oa(e,o){e&1&&V(0)}function aa(e,o){if(e&1&&(_(0,"tr",106),c(1,oa,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()()),e&2){a(4);let t=h(9);p(),C("ngTemplateOutlet",t),p(2),R(" ",f(4,2,"steps.destinations")," ")}}function la(e,o){e&1&&V(0)}function pa(e,o){if(e&1&&c(0,la,1,0,"ng-container",116),e&2){let t,n=a().$implicit,i=a(2),l=a(2),m=h(11);C("ngTemplateOutlet",m)("ngTemplateOutletContext",nt(2,kn,[i.items==null?null:i.items.mul(n.value),i.itemId,i.belts==null?null:i.belts.mul(n.value),l.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(n.value),l.itemsState()[i.itemId].wagonId,l.stepDetails()[i.id].outputs.length===1?i.machines==null?null:i.machines.mul(n.value):null,l.stepDetails()[i.id].outputs.length===1?i.recipeSettings==null?null:i.recipeSettings.machineId:null,i.recipeId,i.recipeObjectiveId,n.value,(t=l.stepById()[n.key])==null?null:t.recipeId,(t=l.stepById()[n.key])==null?null:t.recipeObjectiveId,n.key===""]))}}function _a(e,o){if(e&1&&c(0,pa,1,17,"ng-container"),e&2){let t=a(2);d(t.itemId?0:-1)}}function sa(e,o){if(e&1&&(c(0,ta,5,4,"tr",106),A(1,ia,1,1,null,null,dt),c(3,aa,5,4,"tr",106),A(4,_a,1,1,null,null,X),r(6,"keyvalue")),e&2){let t=a(),n=a(2);d(n.stepDetails()[t.id].outputs.length?0:-1),p(),W(n.stepDetails()[t.id].outputs),p(2),d(t.parents?3:-1),p(),W(T(6,2,t.parents,n.trackSvc.sortByValue))}}function ca(e,o){e&1&&V(0)}function ra(e,o){e&1&&V(0)}function da(e,o){if(e&1&&c(0,ra,1,0,"ng-container",116),e&2){let t=a(),n=a().$implicit,i=a(4);a(2);let l=h(11);C("ngTemplateOutlet",l)("ngTemplateOutletContext",L(2,Mn,t.step.items.mul(t.percent).div(i.recipe.productivity),n.key))}}function ma(e,o){if(e&1&&c(0,da,1,5,"ng-container"),e&2){let t=o;d(t.step&&t.percent&&t.step.items?0:-1)}}function Ca(e,o){if(e&1&&c(0,ma,1,1),e&2){let t,n=o.$implicit,i=a(4),l=a(2);d((t=L(1,Pt,l.stepByItemEntities()[n.key],i.outputs==null?null:i.outputs[n.key]))?0:-1,t)}}function ua(e,o){if(e&1&&(_(0,"tr",106),c(1,ca,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()(),A(5,Ca,1,4,null,null,X),r(7,"keyvalue")),e&2){let t=a(3),n=a(2),i=h(9);p(),C("ngTemplateOutlet",i),p(2),R(" ",f(4,2,"steps.depletion")," "),p(2),W(T(7,4,t.outputs,n.trackSvc.sortByValue))}}function xa(e,o){e&1&&V(0)}function fa(e,o){e&1&&V(0)}function ga(e,o){if(e&1&&c(0,fa,1,0,"ng-container",116),e&2){let t=o,n=a(2),i=a().$implicit,l=a(4),m=a(2),x=h(11);C("ngTemplateOutlet",x)("ngTemplateOutletContext",nt(2,On,[n.step.items==null?null:n.step.items.mul(n.percent),i.key,n.step.belts==null?null:n.step.belts.mul(n.percent),m.itemsState()[n.step.itemId].beltId,n.step.wagons==null?null:n.step.wagons.mul(n.percent),m.itemsState()[n.step.itemId].wagonId,t.step==null?null:t.step.machines,t.step==null||t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step==null?null:t.step.recipeId,t.step==null?null:t.step.recipeObjectiveId,n.percent,l.recipeId,l.recipeObjectiveId]))}}function Sa(e,o){e&1&&V(0)}function va(e,o){if(e&1&&c(0,Sa,1,0,"ng-container",116),e&2){let t=a(2),n=a().$implicit,i=a(4),l=a(2),m=h(11);C("ngTemplateOutlet",m)("ngTemplateOutletContext",nt(2,Rn,[t.step.items==null?null:t.step.items.mul(t.percent),n.key,t.step.belts==null?null:t.step.belts.mul(t.percent),l.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),l.itemsState()[t.step.itemId].wagonId,t.percent,i.recipeId,i.recipeObjectiveId]))}}function ha(e,o){if(e&1&&c(0,ga,1,16,"ng-container")(1,va,1,12,"ng-container"),e&2){let t,n=a(),i=a(7);d((t=i.stepDetails()[n.step.id].outputs.length===1&&i.stepDetails()[n.step.id].outputs[0])?0:1,t)}}function ba(e,o){if(e&1&&c(0,ha,2,1),e&2){let t=o;d(t.step.itemId&&t.percent?0:-1)}}function Ta(e,o){if(e&1&&c(0,ba,1,1),e&2){let t,n=o.$implicit,i=a(4),l=a(2);d((t=L(1,Pt,l.stepByItemEntities()[n.key],(t=l.stepByItemEntities()[n.key].parents)==null?null:t[i.id]))?0:-1,t)}}function Ia(e,o){if(e&1&&(_(0,"tr",106),c(1,xa,1,0,"ng-container",114),_(2,"td",115),S(3),r(4,"translate"),s()(),A(5,Ta,1,4,null,null,X),r(7,"keyvalue")),e&2){let t=a(3),n=a(2),i=h(9);p(),C("ngTemplateOutlet",i),p(2),R(" ",f(4,2,"steps.inputs")," "),p(2),W(T(7,4,t.recipe.in,n.trackSvc.sortByValue))}}function wa(e,o){e&1&&V(0)}function ya(e,o){e&1&&V(0)}function Ea(e,o){e&1&&V(0)}function Ba(e,o){e&1&&V(0)}function ka(e,o){if(e&1&&c(0,Ba,1,0,"ng-container",116),e&2){let t=a(),n=a().$implicit,i=a(3),l=a(2),m=h(11);C("ngTemplateOutlet",m)("ngTemplateOutletContext",nt(2,Vn,[t.step.items==null?null:t.step.items.mul(t.percent),n.key,t.step.belts==null?null:t.step.belts.mul(t.percent),l.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),l.itemsState()[t.step.itemId].wagonId,i.machines,i.recipeSettings==null?null:i.recipeSettings.machineId,i.recipeId,i.recipeObjectiveId,t.percent,n.key,i.recipeObjectiveId]))}}function Ma(e,o){if(e&1&&c(0,ka,1,16,"ng-container"),e&2){let t=o;d(t.step.itemId&&t.percent?0:-1)}}function Oa(e,o){if(e&1&&c(0,Ma,1,1),e&2){let t,n=o.$implicit,i=a(3),l=a(2);d((t=L(1,Pt,l.stepByItemEntities()[n.key],i.outputs==null?null:i.outputs[n.key]))?0:-1,t)}}function Ra(e,o){if(e&1&&(c(0,ua,8,7)(1,Ia,8,7),r(2,"keyvalue"),_(3,"tr",106),c(4,wa,1,0,"ng-container",114),_(5,"td",115),S(6),r(7,"translate"),s()(),_(8,"tr",106),c(9,ya,1,0,"ng-container",114),_(10,"td",117)(11,"span",67),S(12),r(13,"rate"),s()(),_(14,"td",118)(15,"div",45),u(16,"i",119),s()(),u(17,"td",18),s(),_(18,"tr",106),c(19,Ea,1,0,"ng-container",114),_(20,"td",115),S(21),r(22,"translate"),s()(),A(23,Oa,1,4,null,null,X),r(25,"keyvalue")),e&2){let t=a(2),n=a(2),i=h(9);d(n.data().game===n.Game.Factorio&&t.recipe.isMining?0:-1),p(),d(f(2,8,t.recipe.in).length?1:-1),p(3),C("ngTemplateOutlet",i),p(2),R(" ",f(7,10,"steps.time")," "),p(3),C("ngTemplateOutlet",i),p(3),I(T(13,12,t.recipe.time,n.columnsState().items.precision)),p(7),C("ngTemplateOutlet",i),p(2),R(" ",f(22,15,"steps.outputs")," "),p(2),W(T(25,17,t.recipe.out,n.trackSvc.sortByValue))}}function Va(e,o){if(e&1&&c(0,Ra,26,20),e&2){let t=a();d(t.recipe?0:-1)}}function Pa(e,o){e&1&&V(0)}function Fa(e,o){if(e&1&&(c(0,Pa,1,0,"ng-container",116),r(1,"rate")),e&2){let t=a(2),n=a().$implicit;a();let i=h(28),l=a(2),m=a(2);C("ngTemplateOutlet",i)("ngTemplateOutletContext",L(5,at,T(1,2,t.step.items.mul(t.percent).div(l.machines),m.columnsState().items.precision),n.key))}}function $a(e,o){e&1&&V(0)}function ja(e,o){if(e&1&&(c(0,$a,1,0,"ng-container",116),r(1,"rate")),e&2){let t=a(4);a(2);let n=h(28),i=a(2),l=a(2);C("ngTemplateOutlet",n)("ngTemplateOutletContext",L(5,at,T(1,2,t.step.belts.mul(t.percent).div(i.machines),l.columnsState().belts.precision),o))}}function Da(e,o){if(e&1&&c(0,ja,2,8,"ng-container"),e&2){let t,n=a(4).$implicit,i=a(5);d((t=i.itemsState()[n.key].beltId)?0:-1,t)}}function Aa(e,o){if(e&1&&(_(0,"td"),c(1,Da,1,1),s()),e&2){let t=a(2);p(),d(t.step.belts?1:-1)}}function Wa(e,o){e&1&&V(0)}function Ua(e,o){if(e&1&&(c(0,Wa,1,0,"ng-container",116),r(1,"rate")),e&2){let t=o;a(6);let n=h(28);C("ngTemplateOutlet",n)("ngTemplateOutletContext",L(5,at,T(1,2,t.value,1),t.id))}}function Na(e,o){if(e&1&&(c(0,Ua,2,8,"ng-container"),r(1,"inserterSpeed")),e&2){let t,n=a(3),i=a(4),l=a(2);d((t=T(1,1,n.step.items.mul(n.percent).div(i.machines).div(l.dispRateInfo().value),l.settings()))?0:-1,t)}}function La(e,o){if(e&1&&(_(0,"td"),c(1,Na,2,4),s()),e&2){let t=a(2),n=a().$implicit,i=a(5);p(),d(i.itemsState()[n.key].beltId!==i.ItemId.Pipe&&t.step.items?1:-1)}}function za(e,o){if(e&1&&(_(0,"tr")(1,"td"),c(2,Fa,2,8,"ng-container"),s(),c(3,Aa,2,1,"td")(4,La,2,1,"td"),s()),e&2){let t=a(),n=a(6);p(2),d(t.step.items?2:-1),p(),d(n.columnsState().belts.show?3:-1),p(),d(n.data().game===n.Game.Factorio?4:-1)}}function Ha(e,o){e&1&&c(0,za,5,3,"tr"),e&2&&d(o.percent?0:-1)}function Ga(e,o){if(e&1&&c(0,Ha,1,1),e&2){let t,n=o.$implicit,i=a(3),l=a(2);d((t=L(1,Pt,l.stepByItemEntities()[n.key],(t=l.stepByItemEntities()[n.key].parents)==null?null:t[i.id]))?0:-1,t)}}function qa(e,o){e&1&&u(0,"i",122)}function Ja(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a(4);C("id",t.recipeId)}}function Ka(e,o){if(e&1&&u(0,"lab-tooltip",87),e&2){let t=a();C("id",t)}}function Xa(e,o){if(e&1&&(_(0,"div",24)(1,"i",64),r(2,"iconClass"),c(3,Ja,1,1,"ng-template",null,5,w),s(),_(5,"i",64),r(6,"iconClass"),c(7,Ka,1,1,"ng-template",null,5,w),s()()),e&2){let t=h(4),n=a(3);p(),B(T(2,6,n.recipeId,"recipe")),C("pTooltip",t),p(4),B(f(6,9,o)),C("pTooltip",t)}}function Qa(e,o){e&1&&V(0)}function Ya(e,o){if(e&1&&(c(0,Qa,1,0,"ng-container",116),r(1,"rate")),e&2){let t=o;a(5);let n=h(28);C("ngTemplateOutlet",n)("ngTemplateOutletContext",L(5,at,T(1,2,t.value,1),t.id))}}function Za(e,o){if(e&1&&(c(0,Ya,2,8,"ng-container"),r(1,"inserterSpeed")),e&2){let t,n=a(2),i=a(6);d((t=T(1,1,n,i.settings()))?0:-1,t)}}function tl(e,o){if(e&1&&(_(0,"td"),c(1,Za,2,4),s()),e&2){let t=a(2).$implicit,n=a(5);p(),d(n.itemsState()[t.key].beltId!==n.ItemId.Pipe?1:-1)}}function el(e,o){e&1&&V(0)}function nl(e,o){if(e&1&&(c(0,el,1,0,"ng-container",116),r(1,"rate")),e&2){let t=o,n=a(2);a(2);let i=h(28),l=a(4);C("ngTemplateOutlet",i)("ngTemplateOutletContext",L(5,at,T(1,2,n.div(l.beltSpeed()[t]),l.columnsState().belts.precision),t))}}function il(e,o){if(e&1&&(_(0,"td"),c(1,nl,2,8,"ng-container"),s()),e&2){let t,n=a(2).$implicit,i=a(5);p(),d((t=i.itemsState()[n.key].beltId)?1:-1,t)}}function ol(e,o){e&1&&V(0)}function al(e,o){if(e&1&&(_(0,"tr"),c(1,tl,2,1,"td")(2,il,2,1,"td"),_(3,"td"),c(4,ol,1,0,"ng-container",116),r(5,"rate"),s()()),e&2){let t=a().$implicit;a();let n=h(28),i=a(4);p(),d(i.data().game===i.Game.Factorio?1:-1),p(),d(i.columnsState().belts.show?2:-1),p(2),C("ngTemplateOutlet",n)("ngTemplateOutletContext",L(7,at,T(5,4,o.mul(i.dispRateInfo().value),i.columnsState().items.precision),t.key))}}function ll(e,o){if(e&1&&c(0,al,6,10,"tr"),e&2){let t,n=o.$implicit,i=a(3);d((t=n.value.div(i.recipe.time))?0:-1,t)}}function pl(e,o){if(e&1&&u(0,"lab-tooltip",63),e&2){let t=a().itemId;C("id",t)}}function _l(e,o){if(e&1&&(_(0,"div",40)(1,"span",67),S(2),s(),_(3,"i",64),r(4,"iconClass"),c(5,pl,1,1,"ng-template",null,5,w),s()()),e&2){let t=o.value,n=o.itemId,i=h(6);p(2),I(t),p(),B(f(4,4,n)),C("pTooltip",i)}}function sl(e,o){if(e&1&&(_(0,"div",24)(1,"table",121),A(2,Ga,1,4,null,null,X),r(4,"keyvalue"),s(),c(5,qa,1,0,"i",122),r(6,"keyvalue"),_(7,"table",121)(8,"tr")(9,"td",117)(10,"span",67),S(11),r(12,"rate"),s()(),_(13,"td"),c(14,Xa,9,11,"div",24),s()(),_(15,"tr")(16,"td",117)(17,"span",67),S(18),r(19,"rate"),s()(),_(20,"td"),u(21,"i",119),s()()(),u(22,"i",122),_(23,"table",121),A(24,ll,1,1,null,null,X),r(26,"keyvalue"),s(),c(27,_l,7,6,"ng-template",null,10,w),s()),e&2){let t,n=a(2),i=a(2);p(2),W(T(4,4,n.recipe.in,i.trackSvc.sortByValue)),p(3),d(f(6,7,n.recipe.in).length?5:-1),p(6),I(T(12,9,i.rational.one,i.columnsState().machines.precision)),p(3),d((t=n.recipeSettings==null?null:n.recipeSettings.machineId)?14:-1,t),p(4),I(T(19,12,i.dispRateInfo().value,i.columnsState().machines.precision)),p(6),W(T(26,15,n.recipe.out,i.trackSvc.sortByValue))}}function cl(e,o){e&1&&(u(0,"small",120),r(1,"translate")),e&2&&C("innerHTML",f(1,1,"steps.inserterCountInfo"),te)}function rl(e,o){if(e&1&&(_(0,"tr",106),u(1,"td"),_(2,"td",18),c(3,sl,29,18,"div",24)(4,cl,2,3,"small",120),s()()),e&2){let t=a(),n=a(2);p(3),d(t.recipeId&&t.recipe&&t.machines?3:-1),p(),d(n.data().game===n.Game.Factorio?4:-1)}}function dl(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a().$implicit;C("id",t)}}function ml(e,o){if(e&1){let t=O();_(0,"button",128),r(1,"iconSmClass"),k("click",function(){let i=y(t).$implicit,l=a(5);return E(l.toggleRecipe(i,l.recipesState(),l.data()))}),u(2,"i",62),c(3,dl,1,1,"ng-template",null,5,w),s()}if(e&2){let t=o.$implicit,n=h(4),i=a(5);et("hover-active",i.recipesState()[t].excluded),C("icon",T(1,4,t,"recipe"))("pTooltip",n)}}function Cl(e,o){if(e&1){let t=O();_(0,"tr",106),u(1,"td"),_(2,"td",18)(3,"div")(4,"div",123),S(5),r(6,"translate"),s(),_(7,"div",124)(8,"small"),S(9),r(10,"translate"),s()(),_(11,"p-checkbox",125),r(12,"translate"),k("onChange",function(){let i=y(t),l=a(4);return E(l.toggleRecipes(i.recipeIds,i.allRecipesIncluded,l.data()))}),s()()()(),_(13,"tr",106),u(14,"td"),_(15,"td",18)(16,"div",126),A(17,ml,5,7,"button",127,ae),s()()()}if(e&2){let t=o;p(5),R(" ",f(6,5,"steps.includedRecipes")," "),p(4),I(f(10,7,"steps.includedRecipesInfo")),p(2),C("ngModel",t.allRecipesIncluded)("binary",!0)("label",f(12,9,"picker.includeAll")),p(6),W(t.recipeIds)}}function ul(e,o){if(e&1&&c(0,Cl,19,11),e&2){let t,n=a(),i=a(2);d((t=n.itemId&&i.stepDetails()[n.id])?0:-1,t)}}function xl(e,o){if(e&1){let t=O();_(0,"tr",106)(1,"td",107)(2,"a",108),u(3,"button",109),s()(),_(4,"td",18)(5,"p-tabMenu",110,9),r(7,"stepId"),k("activeItemChange",function(i){let l=y(t),m=a(2);return E(m.setActiveItem(l,i))}),c(8,Yo,5,6,"ng-template",73),s()()(),c(9,sa,7,5)(10,Va,1,1)(11,rl,5,2,"tr",106)(12,ul,1,1)}if(e&2){let t,n=o,i=h(6),l=a(2);p(2),C("relativeTo",l.route)("fragment",n.id),p(3),C("model",l.stepDetails()[n.id].tabs)("activeItem",l.activeItem[f(7,5,n)]),p(4),d((t=i.activeItem==null?null:i.activeItem.label)===l.StepDetailTab.Item?9:t===l.StepDetailTab.Recipe?10:t===l.StepDetailTab.Machine?11:t===l.StepDetailTab.Recipes?12:-1)}}function fl(e,o){if(e&1&&(c(0,xl,13,7),r(1,"asStep")),e&2){let t,n=o.$implicit;d((t=f(1,1,n))?0:-1,t)}}function gl(e,o){e&1&&(_(0,"tr")(1,"td",18)(2,"div",52)(3,"span"),S(4),r(5,"translate"),s()()()()),e&2&&(p(4),I(f(5,1,"steps.emptyMessage")))}function Sl(e,o){if(e&1&&c(0,gl,6,3,"tr"),e&2){let t=a();d(t.focus()?0:-1)}}function vl(e,o){e&1&&u(0,"td",31)}function hl(e,o){e&1&&u(0,"td")}function bl(e,o){e&1&&u(0,"td")}function Tl(e,o){if(e&1&&c(0,hl,1,0,"td")(1,bl,1,0,"td"),e&2){let t=a(2);d(t.columnsState().checkbox.show?0:-1),p(),d(t.columnsState().tree.show?1:-1)}}function Il(e,o){if(e&1&&(u(0,"td"),c(1,Tl,2,2)),e&2){let t=a();p(),d(t.focus()?-1:1)}}function wl(e,o){e&1&&V(0)}function yl(e,o){if(e&1&&u(0,"lab-tooltip",63),e&2){let t=a(2).itemId;C("id",t)}}function El(e,o){if(e&1&&u(0,"lab-tooltip",76),e&2){let t=a(3).beltId;C("id",t)}}function Bl(e,o){if(e&1&&(_(0,"td",117)(1,"span",67),S(2),r(3,"rate"),s()(),_(4,"td",118)(5,"div",45)(6,"i",64),r(7,"iconClass"),c(8,El,1,1,"ng-template",null,5,w),s()()()),e&2){let t=h(9),n=a(2),i=n.belts,l=n.beltId,m=a();p(2),I(T(3,4,i,m.columnsState().belts.precision)),p(4),B(f(7,7,l)),C("pTooltip",t)}}function kl(e,o){if(e&1&&u(0,"lab-tooltip",78),e&2){let t=a(4).wagonId;C("id",t)}}function Ml(e,o){if(e&1&&(_(0,"i",64),r(1,"iconClass"),c(2,kl,1,1,"ng-template",null,5,w),s()),e&2){let t=h(3),n=a(3).wagonId;B(f(1,3,n)),C("pTooltip",t)}}function Ol(e,o){if(e&1&&u(0,"lab-tooltip",79),e&2){let t=a(4).wagonId;C("id",t)}}function Rl(e,o){if(e&1&&(_(0,"i",64),r(1,"iconClass"),c(2,Ol,1,1,"ng-template",null,5,w),s()),e&2){let t=h(3),n=a(3).wagonId;B(f(1,3,n)),C("pTooltip",t)}}function Vl(e,o){if(e&1&&(_(0,"td",117)(1,"span",67),S(2),r(3,"rate"),s()(),_(4,"td",118)(5,"div",45),c(6,Ml,4,5,"i",58)(7,Rl,4,5,"i",58),s()()),e&2){let t=a(2),n=t.wagons,i=t.wagonId,l=a();p(2),I(T(3,2,n,l.columnsState().wagons.precision)),p(4),d(l.data().cargoWagonIds.indexOf(i)!==-1?6:7)}}function Pl(e,o){if(e&1&&(_(0,"span",67),S(1),r(2,"machineRate"),s()),e&2){let t=a(2),n=t.machines,i=t.machineId,l=a();p(),I(pt(2,1,n,l.columnsState().machines.precision,i))}}function Fl(e,o){e&1&&(_(0,"div",130),S(1),r(2,"translate"),s()),e&2&&(p(),R(" ",f(2,1,"steps.inputs")," "))}function $l(e,o){if(e&1&&(_(0,"span"),S(1),s()),e&2){let t=a(3).recipeObjectiveId;p(),R("#",t,"")}}function jl(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a(3).recipeId;C("id",t)}}function Dl(e,o){if(e&1&&u(0,"lab-tooltip",87),e&2){let t=a(3).machineId;C("id",t)}}function Al(e,o){if(e&1&&(_(0,"i",64),r(1,"iconClass"),c(2,$l,2,1,"span")(3,jl,1,1,"ng-template",null,5,w),s(),_(5,"i",64),r(6,"iconClass"),c(7,Dl,1,1,"ng-template",null,5,w),s()),e&2){let t=h(4),n=a(2),i=n.machineId,l=n.recipeId,m=n.recipeObjectiveId;B(T(1,7,l,"recipe")),C("pTooltip",t),p(2),d(m?2:-1),p(3),B(f(6,10,i)),C("pTooltip",t)}}function Wl(e,o){e&1&&(_(0,"div",131),u(1,"i",132),s(),_(2,"div",131),u(3,"i",132),s())}function Ul(e,o){e&1&&u(0,"i",133)}function Nl(e,o){e&1&&u(0,"i",133)}function Ll(e,o){if(e&1&&(_(0,"span"),S(1),s()),e&2){let t=a(4).destRecipeObjectiveId;p(),R("#",t,"")}}function zl(e,o){if(e&1&&u(0,"lab-tooltip",134),e&2){let t=a(4),n=t.destId,i=t.destIsRecipe;C("id",n)("type",i?"recipe":"item")}}function Hl(e,o){if(e&1&&(_(0,"i",64),r(1,"iconClass"),c(2,Ll,2,1,"span")(3,zl,1,2,"ng-template",null,5,w),s()),e&2){let t=h(4),n=a(3),i=n.destId,l=n.destRecipeObjectiveId,m=n.destIsRecipe;B(T(1,4,i,m?"recipe":"item")),C("pTooltip",t),p(2),d(l?2:-1)}}function Gl(e,o){e&1&&(_(0,"span"),S(1),r(2,"translate"),s()),e&2&&(p(),R(" ",f(2,1,"steps.outputs")," "))}function ql(e,o){if(e&1&&(c(0,Ul,1,0,"i",133),_(1,"span",67),S(2),r(3,"rate"),r(4,"leftPad"),s(),c(5,Nl,1,0,"i",133)(6,Hl,5,7,"i",58)(7,Gl,3,3,"span")),e&2){let t=a(2),n=t.percent,i=t.percentOnDest,l=t.destId,m=t.outputs;d(i?0:-1),p(2),R("",f(4,8,T(3,5,n,-2)),"%"),p(3),d(i?-1:5),p(),d(l?6:-1),p(),d(m?7:-1)}}function Jl(e,o){if(e&1&&(c(0,wl,1,0,"ng-container",114),_(1,"td",117)(2,"span",67),S(3),r(4,"rate"),s()(),_(5,"td",118)(6,"div",45)(7,"i",64),r(8,"iconClass"),c(9,yl,1,1,"ng-template",null,5,w),s()()(),c(11,Bl,10,9)(12,Vl,8,5),_(13,"td",117),c(14,Pl,3,5,"span",67),r(15,"machineShowRate"),s(),_(16,"td",129)(17,"div",24),c(18,Fl,3,3,"div",130)(19,Al,9,12),r(20,"machineShow"),c(21,Wl,4,0)(22,ql,8,10),s()()),e&2){let t=h(10),n=a(),i=n.items,l=n.itemId,m=n.belts,x=n.beltId,g=n.wagons,b=n.wagonId,v=n.machines,M=n.machineId,F=n.percent,q=n.inputs,D=a(),Z=h(9);C("ngTemplateOutlet",Z),p(3),I(T(4,11,i,D.columnsState().items.precision)),p(4),B(f(8,14,l)),C("pTooltip",t),p(4),d(D.columnsState().belts.show&&m&&x?11:-1),p(),d(D.columnsState().wagons.show&&g&&b?12:-1),p(2),d(v&&v.nonzero()&&T(15,16,M,D.data().game)?14:-1),p(4),d(q?18:-1),p(),d(T(20,19,M,D.data().game)?19:21),p(3),d(F?22:-1)}}function Kl(e,o){if(e&1&&(_(0,"tr",106),c(1,Jl,23,22),s()),e&2){let t=o.itemId;p(),d(t?1:-1)}}function Xl(e,o){e&1&&u(0,"td")}function Ql(e,o){e&1&&u(0,"td")}function Yl(e,o){e&1&&V(0)}function Zl(e,o){e&1&&V(0)}function tp(e,o){e&1&&V(0)}function ep(e,o){e&1&&V(0)}function np(e,o){if(e&1&&(_(0,"td",135)(1,"span",67),S(2),r(3,"power"),s()()),e&2){let t=a(3);p(2),I(pt(3,1,t.totals().power,t.columnsState().power.precision,t.effectivePowerUnit()))}}function ip(e,o){if(e&1&&(_(0,"td",135)(1,"span",67),S(2),r(3,"rate"),s()()),e&2){let t=a(3);p(2),I(T(3,1,t.totals().pollution,t.columnsState().pollution.precision))}}function op(e,o){e&1&&u(0,"td")}function ap(e,o){if(e&1&&(_(0,"tr"),u(1,"td"),c(2,Xl,1,0,"td")(3,Ql,1,0,"td"),_(4,"td",31),S(5),r(6,"translate"),s(),c(7,Yl,1,0,"ng-container",116)(8,Zl,1,0,"ng-container",116)(9,tp,1,0,"ng-container",116)(10,ep,1,0,"ng-container",116)(11,np,4,5,"td",135)(12,ip,4,4,"td",135)(13,op,1,0,"td"),s()),e&2){a();let t=h(2),n=a();p(2),d(n.columnsState().checkbox.show?2:-1),p(),d(n.columnsState().tree.show?3:-1),p(2),R(" ",f(6,14,"steps.total")," "),p(2),C("ngTemplateOutlet",t)("ngTemplateOutletContext",L(16,Pn,n.columnsState().belts,n.totals().belts)),p(),C("ngTemplateOutlet",t)("ngTemplateOutletContext",L(19,Fn,n.columnsState().wagons,n.totals().wagons)),p(),C("ngTemplateOutlet",t)("ngTemplateOutletContext",At(22,$n,n.columnsState().machines,n.totals().machines,n.totals().modules)),p(),C("ngTemplateOutlet",t)("ngTemplateOutletContext",At(26,jn,n.columnsState().beacons,n.totals().beacons,n.totals().beaconModules)),p(),d(n.columnsState().power.show?11:-1),p(),d(n.columnsState().pollution.show?12:-1),p(),d(n.columnsState().link.show?13:-1)}}function lp(e,o){if(e&1&&(_(0,"div",137)(1,"span",67),S(2),r(3,"rate"),s()()),e&2){let t=o.$implicit,n=a(2).columnSettings;p(2),I(T(3,1,t.value,n.precision))}}function pp(e,o){if(e&1&&u(0,"lab-tooltip",134),e&2){let t=a(2).$implicit,n=a(2).type;C("id",t.key)("type",n)}}function _p(e,o){if(e&1&&(_(0,"i",142),r(1,"iconClass"),c(2,pp,1,2,"ng-template",null,5,w),s()),e&2){let t=h(3),n=a().$implicit;B(f(1,3,n.key)),C("pTooltip",t)}}function sp(e,o){if(e&1&&u(0,"lab-tooltip",65),e&2){let t=a(2).$implicit;C("id",t.key)}}function cp(e,o){if(e&1&&(_(0,"i",142),r(1,"iconClass"),c(2,sp,1,1,"ng-template",null,5,w),s()),e&2){let t=h(3),n=a().$implicit;B(T(1,3,n.key,"recipe")),C("pTooltip",t)}}function rp(e,o){if(e&1&&c(0,_p,4,5,"i",141)(1,cp,4,6,"i",141),e&2){let t=o.$implicit,n=a(4);d(n.data().itemEntities[t.key]?0:1)}}function dp(e,o){if(e&1&&u(0,"lab-tooltip",93),e&2){let t=a().$implicit;C("id",t.key)}}function mp(e,o){if(e&1&&(_(0,"div",143)(1,"span",67),S(2),s()(),_(3,"i",142),r(4,"iconClass"),c(5,dp,1,1,"ng-template",null,5,w),s()),e&2){let t=o.$implicit,n=h(6);p(2),I(t.value),p(),B(T(4,4,t.key,"item")),C("pTooltip",t.key!=="module"?n:void 0)}}function Cp(e,o){if(e&1&&(_(0,"td",136),A(1,lp,4,4,"div",137,X),r(3,"keyvalue"),s(),_(4,"td",138)(5,"div",45)(6,"div",139),A(7,rp,2,1,null,null,X),r(9,"keyvalue"),s(),_(10,"div",140),A(11,mp,7,7,null,null,X),r(13,"keyvalue"),s()()()),e&2){let t=a(),n=t.totals,i=t.modulesTotals,l=a(2);p(),W(T(3,0,n,l.trackSvc.sortByValue)),p(6),W(T(9,3,n,l.trackSvc.sortByValue)),p(4),W(T(13,6,i,l.trackSvc.sortByValue))}}function up(e,o){if(e&1&&c(0,Cp,14,9),e&2){let t=o.columnSettings;d(t.show?0:-1)}}function xp(e,o){if(e&1&&c(0,ap,14,30,"tr")(1,up,1,1,"ng-template",null,11,w),e&2){let t=a();d(t.focus()?-1:0)}}var G_=(()=>{class e{document=N(ce);route=N(Ce);ref=N(_e);contentSvc=N(Be);trackSvc=N(ke);store=N(Q);exportSvc=N(Ge);routerSvc=N(It);focus=Dt(!1);selectedId=Dt();steps=se(()=>{let t=[...this.store.selectSignal($.selectSteps)()];if(!this.focus())return t;let i=this.selectedId();return t.filter(l=>l.id===i)});activeItemsEffect=Wt(()=>{let t=this.steps(),n=this.store.selectSignal($.selectStepDetails)();this.setActiveItems(t,n)});toggleEffect=Wt(()=>{let t=this.focus(),n=this.steps()[0];t&&n&&(this.stepsTable().toggleRow(n),this.expandRow(n,!1))});machinesState=this.store.selectSignal(Te.selectMachinesState);itemsState=this.store.selectSignal(z.selectItemsState);itemsModified=this.store.selectSignal(z.selectItemsModified);stepsModified=this.store.selectSignal($.selectStepsModified);totals=this.store.selectSignal($.selectTotals);stepDetails=this.store.selectSignal($.selectStepDetails);stepById=this.store.selectSignal($.selectStepById);stepByItemEntities=this.store.selectSignal($.selectStepByItemEntities);stepTree=this.store.selectSignal($.selectStepTree);effectivePowerUnit=this.store.selectSignal($.selectEffectivePowerUnit);recipesState=this.store.selectSignal(j.selectRecipesState);recipesModified=this.store.selectSignal($.selectRecipesModified);data=this.store.selectSignal(j.selectAdjustedDataset);columnsState=this.store.selectSignal(J.selectColumnsState);settings=this.store.selectSignal(J.selectSettings);dispRateInfo=this.store.selectSignal(J.selectDisplayRateInfo);options=this.store.selectSignal(J.selectOptions);beltSpeed=this.store.selectSignal(J.selectBeltSpeed);preferences=this.store.selectSignal(Y.preferencesState);sortSteps$=new Kt(null);stepsTable=ne.required("stepsTable");activeItem={};fragmentId;stepDetailIcon=ve;ItemId=G;StepDetailTab=Se;Game=it;ObjectiveUnit=ge;rational=U;constructor(){$t([this.sortSteps$.pipe(Qt()),this.store.select($.selectSteps)]).pipe(xe()).subscribe(([[t,n],i])=>{this.sortSteps(t,n,i)})}ngOnInit(){this.route.fragment.pipe(jt(),Xt(t=>t!=null)).subscribe(t=>{this.fragmentId=t})}ngAfterViewInit(){try{if(this.fragmentId){let[t,n,i]=this.fragmentId.split("_");$t({steps:this.store.select($.selectSteps),stepDetails:this.store.select($.selectStepDetails)}).pipe(jt()).subscribe(({steps:l,stepDetails:m})=>{let x=l.find(g=>g.id===n);x&&m[x.id].tabs.length&&this.stepsTable&&(this.stepsTable().toggleRow(x),setTimeout(()=>{if(i){let b=this.document.querySelector("#"+this.fragmentId);b&&b.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(t,n,i){if(n==null||n.order==null||n.field==null)return;let l=n.order,m=n.field;if(t!=null&&t.field===m&&t.order!==l&&l===-1&&this.stepsTable!=null)return n.data?.sort((x,g)=>i.indexOf(x)-i.indexOf(g)),this.stepsTable().sortOrder=0,this.stepsTable().sortField="",this.stepsTable().reset(),this.sortSteps$.next(null);n.data?.sort((x,g)=>(x[m]??U.zero).sub(g[m]??U.zero).toNumber()*l)}setActiveItems(t,n){t.forEach(i=>this._updateActiveItem(i,n,!1))}expandRow(t,n){n||this._updateActiveItem(t,this.stepDetails(),!0)}_updateActiveItem(t,n,i){let l=st.transform(t),m=this._getActiveItem(t,l,n,i);if(m){let x=st.transform(t);this.activeItem[x]=m}}_getActiveItem(t,n,i,l){let m=this.activeItem[n],x=i[t.id];if(x==null)return null;if(m!=null){let b=x.tabs.find(v=>v.label===m.label);if(b!=null)return b}if(m==null&&!l)return null;let g=_t.stepDetailTab;if(g){let b=x.tabs.find(v=>v.label===g);if(b!=null)return b}return x.tabs[0]}setActiveItem(t,n){if(n==null)return;let i=st.transform(t);this.activeItem[i]=n,_t.stepDetailTab=n.label}resetStep(t){t.itemId&&this.resetItem(t.itemId),t.recipeObjectiveId?this.resetRecipeObjective(t.recipeObjectiveId):t.recipeId&&this.resetRecipe(t.recipeId)}toggleRecipes(t,n,i){let l=t.map(m=>({id:m,value:n,def:ft(i.defaults?.excludedRecipeIds,[]).includes(m)}));this.setRecipeExcludedBatch(l)}toggleRecipe(t,n,i){let l=!n[t].excluded,m=ft(i.defaults?.excludedRecipeIds,[]).some(x=>x===t);this.setRecipeExcluded(t,l,m)}changeRecipeField(t,n,i){if(t.recipeId==null)return;let l=t.recipeSettings;if(l?.machineId==null)return;let m=t.recipeObjectiveId??t.recipeId,x=t.recipeObjectiveId!=null,g=this.machinesState(),b=g.entities[l.machineId];switch(i){case"machine":{if(typeof n!="string")return;let v=this.data();this.setMachine(m,n,ot.bestMatch(v.recipeEntities[t.recipeId].producers,g.ids),x);break}case"fuel":{if(typeof n!="string")return;this.setFuel(m,n,b.fuelId,x);break}case"modules":{if(!Array.isArray(n))return;n=n;let v=this.data().machineEntities[l.machineId];this.setModules(m,ot.dehydrateModules(n,ft(l.moduleOptions,[]),g.moduleRankIds,v.modules,b.modules),x);break}case"beacons":{if(!Array.isArray(n))return;n=n;let v=b.beacons;this.setBeacons(m,ot.dehydrateBeacons(n,v),x);break}case"overclock":{if(typeof n!="number")return;let v=b.overclock;this.setOverclock(m,U(n),v,x);break}}}changeStepChecked(t,n){t.itemId!=null?this.setItemChecked(t.itemId,n):t.recipeObjectiveId!=null?this.setRecipeChecked(t.recipeObjectiveId,n,!0):t.recipeId!=null&&this.setRecipeChecked(t.recipeId,n)}setRows(t){this.store.dispatch(Y.setRows({rows:t}))}setItemExcluded(t,n){this.store.dispatch(z.setExcluded({id:t,value:n}))}setItemChecked(t,n){this.store.dispatch(z.setChecked({id:t,value:n}))}setBelt(t,n,i){this.store.dispatch(z.setBelt({id:t,value:n,def:i}))}setWagon(t,n,i){this.store.dispatch(z.setWagon({id:t,value:n,def:i}))}setRecipeExcluded(t,n,i){this.store.dispatch(j.setExcluded({id:t,value:n,def:i}))}setRecipeExcludedBatch(t){this.store.dispatch(j.setExcludedBatch({values:t}))}addObjective(t){this.store.dispatch($.add({objective:t}))}setMachine(t,n,i,l=!1){let m=l?$.setMachine:j.setMachine;this.store.dispatch(m({id:t,value:n,def:i}))}setFuel(t,n,i,l=!1){let m=l?$.setFuel:j.setFuel;this.store.dispatch(m({id:t,value:n,def:i}))}setModules(t,n,i=!1){let l=i?$.setModules:j.setModules;this.store.dispatch(l({id:t,value:n}))}setBeacons(t,n,i=!1){let l=i?$.setBeacons:j.setBeacons;this.store.dispatch(l({id:t,value:n}))}setOverclock(t,n,i,l=!1){let m=l?$.setOverclock:j.setOverclock;this.store.dispatch(m({id:t,value:n,def:i}))}setRecipeChecked(t,n,i=!1){let l=i?$.setChecked:j.setChecked;this.store.dispatch(l({id:t,value:n}))}resetItem(t){this.store.dispatch(z.resetItem({id:t}))}resetRecipe(t){this.store.dispatch(j.resetRecipe({id:t}))}resetRecipeObjective(t){this.store.dispatch($.resetObjective({id:t}))}resetChecked(){this.store.dispatch(z.resetChecked())}resetExcluded(){this.store.dispatch(z.resetExcluded())}resetBelts(){this.store.dispatch(z.resetBelts())}resetWagons(){this.store.dispatch(z.resetWagons())}resetMachines(){this.store.dispatch(j.resetMachines())}resetBeacons(){this.store.dispatch(j.resetBeacons())}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=rt({type:e,selectors:[["lab-steps"]],viewQuery:function(n,i){n&1&&le(i.stepsTable,yn,5),n&2&&pe()},inputs:{focus:[1,"focus"],selectedId:[1,"selectedId"]},standalone:!0,features:[xt],decls:15,vars:10,consts:[["stepsTable",""],["emptyCol2",""],["leftPad",""],["detailRow",""],["columnsDlg",""],["tooltip",""],["overclockInput",""],["modulePicker",""],["beaconsOverlay",""],["expandTabMenu",""],["machineValueCell",""],["totalCell",""],["dataKey","id","styleClass","p-datatable-sm",3,"rowsChange","sortFunction","rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["pTemplate","footer"],["colspan","100"],[1,"d-flex","gap-2","py-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"label"],[1,"column-header-row"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["colspan","2"],["pSortableColumn","power"],["pSortableColumn","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"click","label"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"click","pTooltip"],["field","belts"],["field","wagons"],[1,"d-flex","align-items-center","justify-content-end"],["field","power"],["field","pollution"],[1,"w-0","px-0","px-sm-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"click","pTooltip","pRowToggler"],[1,"px-0","px-sm-2"],[1,"overflow-hidden","px-0","px-sm-1","py-0"],["colspan","2",1,"px-0","px-sm-2"],[1,"px-0","px-sm-2","text-end"],[1,"w-0","px-0","ps-sm-1"],[1,"d-flex","justify-content-center"],[3,"onChange","binary","ngModel"],[1,"d-flex","align-items-center","links"],[1,"indent"],[1,"icon"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"hover-active","icon","pTooltip"],[3,"class","pTooltip"],[1,"connect",3,"trail","last"],[1,"connect"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","icon","pTooltip"],[1,"hover-icon","fa-solid","fa-eye-slash"],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","px-0","px-sm-2","text-end"],[1,"monospace"],[1,"px-0","pe-sm-2"],[1,"find-text"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","pTooltip"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"onChange","pTooltip","options","ngModel"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","size","pTooltip","ngModel"],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","labNoDrag","",3,"pTooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"onChange","pTooltip","ngModel","options"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","modules","p-button-text",3,"click","pTooltip"],[1,"p-button-icon",3,"class"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click","pTooltip"],[1,"p-button-icon","sum",3,"class"],[1,"p-button-icon","sum"],["type","beacon",3,"id"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"click","pTooltip"],[1,"detail"],[1,"px-1"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],[3,"activeItemChange","model","activeItem"],[1,"p-menuitem-link",3,"id"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-0","text-end"],[1,"ps-0"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],[1,"fw-bold"],[1,"mb-2"],[3,"onChange","ngModel","binary","label"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"hover-active","icon","pTooltip"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"click","icon","pTooltip"],["colspan","100",1,"p-0"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"py-2","icon-height"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],[1,"p-2","icon-height","text-end"]],template:function(n,i){if(n&1){let l=O();_(0,"p-table",12,0),k("rowsChange",function(x){return y(l),E(i.setRows(x))})("sortFunction",function(x){return y(l),E(i.sortSteps$.next(x))}),c(2,ai,30,22,"ng-template",13)(3,Qo,2,3,"ng-template",14)(4,fl,2,3,"ng-template",15)(5,Sl,1,1,"ng-template",16)(6,vl,1,0,"ng-template",null,1,w)(8,Il,2,1,"ng-template",null,2,w)(10,Kl,2,1,"ng-template",null,3,w)(12,xp,3,1,"ng-template",17),s(),u(13,"lab-columns",null,4)}n&2&&C("rowTrackBy",i.trackSvc.trackStep)("value",i.steps())("customSort",!0)("rowExpandMode",i.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!i.focus()&&!i.preferences().disablePaginator)("rows",i.preferences().rows)("rowsPerPageOptions",tt(9,En))("showCurrentPageReport",!0)},dependencies:[de,vt,gt,St,me,re,ue,Tt,bt,ht,Ot,Mt,Ee,ye,yt,wt,Bt,Et,Oe,Ve,Re,ze,Le,Ie,we,qe,Ae,nn,Me,Fe,$e,Je,Ke,Xe,Ye,Qe,Ne,Pe,Ze,tn,K,en,st,De,kt],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;margin-left:16px;height:100vh}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:is(:hover,   :focus,   .ng-invalid)), [_nghost-%COMP%]     .p-inputtext:not(:is(:hover,   :focus,   .ng-invalid)){border-color:transparent;background-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{min-height:32px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}.column-header-row[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:48px}"],changeDetection:0})}return e})();export{He as a,Ge as b,G_ as c};

"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[973],{1973:(at,u,a)=>{a.r(u),a.d(u,{MatrixModule:()=>it});var c=a(6895),d=a(453),f=a(2891),g=a(6259),Z=a(9841),h=a(4004),T=a(1944),_=a(5046),s=a(3045),t=a(4650),A=a(2997),C=a(5593),I=a(805),x=a(8465),b=a(3608),v=a(5357),M=a(6188),w=a(7957);const J=function(e){return{value:e}};function Q(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.runtime")),t.xp6(3),t.hij(" ",t.xi3(6,4,"matrix.runtimeValue",t.VKq(7,J,n.result.time))," ")}}function U(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.pivots")),t.xp6(3),t.Oqu(n.result.pivots)}}const q=function(e,o){return{rows:e,cols:o}};function O(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.size")),t.xp6(3),t.hij(" ",t.xi3(6,4,"matrix.sizeValue",t.WLB(7,q,n.result.A.length,n.result.O.length))," ")}}function L(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"table",1)(1,"tr")(2,"th",2)(3,"div",5)(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.resetCost())}),t.ALo(8,"translate"),t.qZA()()()(),t.TgZ(9,"tr",7),t.ALo(10,"translate"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td")(15,"lab-input-number",8),t.NdJ("setValue",function(l){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setCostFactor(l))}),t.qZA()()(),t.TgZ(16,"tr",7),t.ALo(17,"translate"),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"td")(22,"lab-input-number",8),t.NdJ("setValue",function(l){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setCostFactory(l))}),t.qZA()()(),t.TgZ(23,"tr",7),t.ALo(24,"translate"),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"td")(29,"lab-input-number",8),t.NdJ("setValue",function(l){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setCostInput(l))}),t.qZA()()(),t.TgZ(30,"tr",7),t.ALo(31,"translate"),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td")(36,"lab-input-number",8),t.NdJ("setValue",function(l){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setCostIgnored(l))}),t.qZA()()()()}if(2&e){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(t.lcZ(6,16,"matrix.costModifiers")),t.xp6(2),t.ekj("invisible",!n.settingsModified.cost),t.Q6J("pTooltip",t.lcZ(8,18,"matrix.costUndoTooltip")),t.xp6(2),t.Q6J("pTooltip",t.lcZ(10,20,"matrix.recipeCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(13,22,"matrix.recipe")),t.xp6(3),t.Q6J("value",n.settings.costFactor),t.xp6(1),t.Q6J("pTooltip",t.lcZ(17,24,"matrix.factoryCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(20,26,"matrix.factory")),t.xp6(3),t.Q6J("value",n.settings.costFactory),t.xp6(1),t.Q6J("pTooltip",t.lcZ(24,28,"matrix.inputCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(27,30,"matrix.input")),t.xp6(3),t.Q6J("value",n.settings.costInput),t.xp6(1),t.Q6J("pTooltip",t.lcZ(31,32,"matrix.ignoredCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(34,34,"matrix.ignored")),t.xp6(3),t.Q6J("value",n.settings.costIgnored)}}function N(e,o){if(1&e&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw(3).ngIf;t.Udp("width",4*n.result.inputIds.length,"rem"),t.Q6J("colSpan",n.result.inputIds.length),t.xp6(1),t.hij(" ",t.lcZ(2,4,"matrix.inputs")," ")}}function F(e,o){if(1&e&&(t.TgZ(0,"th",16)(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function y(e,o){if(1&e&&(t.TgZ(0,"th",16)(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function Y(e,o){if(1&e&&(t.TgZ(0,"th",16)(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function j(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"th",13),t._uU(2),t.ALo(3,"translate"),t.qZA()(),t.TgZ(4,"tr"),t._UZ(5,"th",14),t.TgZ(6,"th",13),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",13),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,N,3,6,"th",15),t._UZ(13,"th",14),t.qZA(),t.TgZ(14,"tr"),t._UZ(15,"th",16),t.TgZ(16,"th",16),t._uU(17,"I"),t.qZA(),t.YNc(18,F,3,5,"th",17),t.YNc(19,y,3,6,"th",17),t.YNc(20,Y,3,5,"th",17),t.TgZ(21,"th",14)(22,"div",5)(23,"span"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"button",6),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(3);return t.KtG(l.resetRecipeCost())}),t.ALo(27,"translate"),t.qZA()()()()}if(2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.Udp("width",4*(n.result.O.length+2),"rem"),t.Q6J("colSpan",n.result.O.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,20,"matrix.simplexCanonicalTableau")," "),t.xp6(4),t.Udp("width",4*n.result.itemIds.length,"rem"),t.Q6J("colSpan",n.result.itemIds.length),t.xp6(1),t.hij(" ",t.lcZ(8,22,"matrix.items")," "),t.xp6(2),t.Udp("width",4*n.result.recipeIds.length,"rem"),t.Q6J("colSpan",n.result.recipeIds.length),t.xp6(1),t.hij(" ",t.lcZ(11,24,"matrix.recipes")," "),t.xp6(2),t.Q6J("ngIf",n.result.inputIds.length),t.xp6(6),t.Q6J("ngForOf",n.result.itemIds),t.xp6(1),t.Q6J("ngForOf",n.result.recipeIds),t.xp6(1),t.Q6J("ngForOf",n.result.inputIds),t.xp6(4),t.Oqu(t.lcZ(25,26,"matrix.cost")),t.xp6(2),t.ekj("invisible",!n.recipesModified.cost),t.Q6J("pTooltip",t.lcZ(27,28,"matrix.costUndoTooltip"))}}function E(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"i",7),t.ALo(2,"iconClass"),t.qZA(),t.BQk()),2&e){const n=o.ngIf,i=t.oxw(4).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function R(e,o){if(1&e&&(t.TgZ(0,"i",7),t.ALo(1,"iconClass"),t.qZA()),2&e){const n=o.ngIf,i=t.oxw(5).ngIf;t.Tol(t.lcZ(1,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function S(e,o){if(1&e&&t.YNc(0,R,2,5,"i",24),2&e){const n=t.oxw(2).rowIndex,i=t.oxw(2).ngIf;t.Q6J("ngIf",i.result.inputIds[n-1-i.result.recipeIds.length])}}function V(e,o){if(1&e&&(t.TgZ(0,"td",21),t.YNc(1,E,3,6,"ng-container",22),t.YNc(2,S,1,1,"ng-template",null,23,t.W1O),t.qZA()),2&e){const n=t.MAs(3),i=t.oxw().rowIndex,l=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",l.result.recipeIds[i-1])("ngIfElse",n)}}function B(e,o){1&e&&(t.TgZ(0,"td",25)(1,"div",26),t._UZ(2,"i",27),t.qZA()())}function $(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"lab-input-number",30),t.NdJ("setValue",function(l){const p=t.CHM(n).ngIf,m=t.oxw(5);return t.KtG(m.setRecipeCost(p,l))}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",31),t.NdJ("click",function(){const r=t.CHM(n).ngIf,p=t.oxw(5);return t.KtG(p.setRecipeCost(r))}),t.ALo(4,"translate"),t.qZA()()}if(2&e){const n=o.ngIf,i=t.oxw().$implicit,l=t.oxw(3).ngIf;t.xp6(1),t.Q6J("pTooltip",t.lcZ(2,6,"matrix.recipeCost"))("hideButtons",!0)("value",i.toString()),t.xp6(2),t.ekj("invisible",!(null!=l.recipeRaw[n]&&l.recipeRaw[n].cost)),t.Q6J("pTooltip",t.lcZ(4,8,"matrix.recipeCostUndoTooltip"))}}function K(e,o){if(1&e&&t._uU(0),2&e){const n=t.oxw().$implicit;t.hij(" ",n.toString()," ")}}function H(e,o){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,$,5,10,"div",28),t.YNc(2,K,1,1,"ng-template",null,29,t.W1O),t.qZA()),2&e){const n=o.last,i=t.MAs(3),l=t.oxw().rowIndex,r=t.oxw(2).ngIf;t.Udp("width",n?8:4,"rem"),t.xp6(1),t.Q6J("ngIf",n&&r.result.recipeIds[l-1])("ngIfElse",i)}}function P(e,o){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,V,4,2,"td",18),t.YNc(2,B,3,0,"ng-template",null,19,t.W1O),t.YNc(4,H,4,4,"td",20),t.qZA()),2&e){const n=o.$implicit,i=o.rowIndex,l=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==i)("ngIfElse",l),t.xp6(3),t.Q6J("ngForOf",n)}}function z(e,o){if(1&e&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw(3).ngIf;t.Udp("width",4*n.result.inputIds.length,"rem"),t.Q6J("colSpan",n.result.inputIds.length),t.xp6(1),t.hij(" ",t.lcZ(2,4,"matrix.inputs")," ")}}function G(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function D(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function W(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",7),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function X(e,o){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Udp("width",o.last?8:4,"rem"),t.xp6(1),t.hij(" ",n.toString()," ")}}function k(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th",13),t._uU(2),t.ALo(3,"translate"),t.qZA()(),t.TgZ(4,"tr"),t._UZ(5,"th",14),t.TgZ(6,"th",13),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",13),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,z,3,6,"th",15),t._UZ(13,"th",14),t.qZA(),t.TgZ(14,"tr"),t._UZ(15,"th",16),t.TgZ(16,"th",16)(17,"div",32)(18,"span"),t._uU(19,"I"),t.qZA()()(),t.YNc(20,G,3,5,"th",33),t.YNc(21,D,3,6,"th",33),t.YNc(22,W,3,5,"th",33),t.TgZ(23,"th",14)(24,"div",32)(25,"span"),t._uU(26),t.ALo(27,"translate"),t.qZA()()()(),t.TgZ(28,"tr"),t._UZ(29,"td",16),t.YNc(30,X,2,3,"td",20),t.qZA()),2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.Udp("width",4*(n.result.O.length+2),"rem"),t.Q6J("colSpan",n.result.O.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,18,"matrix.solution")," "),t.xp6(4),t.Udp("width",4*n.result.itemIds.length,"rem"),t.Q6J("colSpan",n.result.itemIds.length),t.xp6(1),t.hij(" ",t.lcZ(8,20,"matrix.surplus")," "),t.xp6(2),t.Udp("width",4*n.result.recipeIds.length,"rem"),t.Q6J("colSpan",n.result.recipeIds.length),t.xp6(1),t.hij(" ",t.lcZ(11,22,"matrix.recipes")," "),t.xp6(2),t.Q6J("ngIf",n.result.inputIds.length),t.xp6(8),t.Q6J("ngForOf",n.result.itemIds),t.xp6(1),t.Q6J("ngForOf",n.result.recipeIds),t.xp6(1),t.Q6J("ngForOf",n.result.inputIds),t.xp6(4),t.Oqu(t.lcZ(27,24,"matrix.cost")),t.xp6(4),t.Q6J("ngForOf",n.result.O)}}function tt(e,o){if(1&e&&(t.TgZ(0,"p-table",9),t.YNc(1,j,28,30,"ng-template",10),t.YNc(2,P,5,3,"ng-template",11),t.YNc(3,k,31,26,"ng-template",12),t.qZA()),2&e){const n=t.oxw().ngIf;t.Q6J("scrollable",!0)("value",n.result.A)}}function nt(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"table",1)(2,"tr")(3,"th",2),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"tr")(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA()(),t.YNc(12,Q,7,9,"tr",0),t.YNc(13,U,6,4,"tr",0),t.YNc(14,O,7,10,"tr",0),t.qZA(),t.YNc(15,L,37,36,"table",3),t.YNc(16,tt,4,2,"p-table",4),t.BQk()),2&e){const n=o.ngIf;t.xp6(4),t.Oqu(t.lcZ(5,8,"matrix.statistics")),t.xp6(4),t.Oqu(t.lcZ(9,10,"matrix.simplexResult")),t.xp6(3),t.Oqu(n.result.resultType),t.xp6(1),t.Q6J("ngIf",null!=n.result.time),t.xp6(1),t.Q6J("ngIf",null!=n.result.pivots),t.xp6(1),t.Q6J("ngIf",n.result.A&&n.result.O),t.xp6(1),t.Q6J("ngIf",n.result.A),t.xp6(1),t.Q6J("ngIf",n.result.A&&n.result.O&&n.result.itemIds&&n.result.recipeIds&&n.result.inputIds)}}const et=[{path:"",component:(()=>{class e{constructor(n){this.store=n,this.vm$=(0,Z.a)([this.store.select(T.p5),this.store.select(_.Ue),this.store.select(_.O8),this.store.select(_.IB),this.store.select(s.x1),this.store.select(s.Ko)]).pipe((0,h.U)(([i,l,r,p,m,lt])=>({result:i,recipesModified:l,data:r,recipeRaw:p,settingsModified:m,settings:lt})))}setCostFactor(n){this.store.dispatch(new s.BD(n))}setCostFactory(n){this.store.dispatch(new s.Bt(n))}setCostInput(n){this.store.dispatch(new s.R2(n))}setCostIgnored(n){this.store.dispatch(new s.bJ(n))}setRecipeCost(n,i){this.store.dispatch(new _.aq({id:n,value:i}))}resetCost(){this.store.dispatch(new s.Z8)}resetRecipeCost(){this.store.dispatch(new _.Z8)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["lab-matrix"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"result-info","my-3"],["colspan","2"],["class","result-info my-3",4,"ngIf"],["scrollDirection","both","styleClass","p-datatable-sm",3,"scrollable","value",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","icon","fa-solid fa-rotate-left",1,"ms-3","p-button-outlined","p-button-rounded",3,"pTooltip","click"],[3,"pTooltip"],["width","8rem",3,"value","setValue"],["scrollDirection","both","styleClass","p-datatable-sm",3,"scrollable","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[3,"colSpan"],[2,"width","8rem"],[3,"colSpan","width",4,"ngIf"],[2,"width","4rem"],["style","width: 4rem",4,"ngFor","ngForOf"],["pFrozenColumn","","style","width: 4rem",4,"ngIf","ngIfElse"],["objectiveRow",""],[3,"width",4,"ngFor","ngForOf"],["pFrozenColumn","",2,"width","4rem"],[4,"ngIf","ngIfElse"],["notRecipe",""],[3,"class","pTooltip",4,"ngIf"],["pFrozenColumn","",1,"fw-bold","text-center",2,"width","4rem"],[1,"d-flex","justify-content-center","w-100"],[1,"fa-solid","fa-bullseye"],["class","d-flex align-items-center justify-content-between",4,"ngIf","ngIfElse"],["valueCell",""],["tooltipPosition","left","width","6rem",3,"pTooltip","hideButtons","value","setValue"],["pButton","","pRipple","","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"ms-3","p-button-outlined","p-button-rounded",3,"pTooltip","click"],[1,"d-flex","align-items-center","h-100"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.YNc(0,nt,17,12,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[c.sg,c.O5,C.Hq,I.jx,x.iA,x.on,b.u,v.l,c.Ov,M.X$,w.Y],styles:["table.result-info[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.result-info[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]     .p-datatable-tfoot th{border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]     .p-datatable-tfoot th, [_nghost-%COMP%]     .p-datatable-tfoot td{padding:.5rem}"],changeDetection:0}),e})()}];let ot=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(et),g.Bz]}),e})(),it=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,d.o,f.S,ot]}),e})()}}]);
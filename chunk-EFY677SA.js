import{b as Ne,c as Me,d as ae,e as Ge,f as Xi,g as He,h as ar,i as Gi,j as Yi,k as be}from"./chunk-SLBVU74K.js";import{a as Un,b as cr,d as io,e as oo,f as qr,g as $n,h as Rt}from"./chunk-5G2NHO4H.js";import{$ as qe,$c as ye,Ae as to,B as Bi,Be as ro,Cd as Zi,E as Pi,Fd as Hr,Fe as no,Gd as Wr,Hc as Ui,Ic as $i,Jd as st,L as Vr,La as Vi,Le as Vn,Od as Ji,Pd as vt,Qd as eo,S as Lr,Sd as Tt,Se as Ln,Tc as Wt,Uc as Oe,Ue as ur,V as Ht,We as Cn,X as At,Y as ji,Yc as Cr,Zc as Ur,ad as pe,bd as Hi,c as Ri,d as Oi,da as ke,dd as Wi,e as Ni,ed as qi,fd as Pn,hd as Xe,id as jn,k as Bn,ld as $r,m as Fi,mc as Li,md as qt,o as jr,p as sr,sd as re,ud as Ki,vc as Ci,xd as Qi,ye as lr,z as Di}from"./chunk-UVK4FVHI.js";import{a as Ie,b as et,f as or,h as Bp,j as $e}from"./chunk-TWZW5B45.js";var fa=or(()=>{"use strict"});var pa=or(()=>{"use strict"});var da=or(()=>{"use strict"});var ma=or((In,gi)=>{"use strict";var hi=(()=>{var t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(t=t||__filename),function(e){e=e||{};var e=typeof e<"u"?e:{},n,o;e.ready=new Promise(function(i,l){n=i,o=l});var a=Object.assign({},e),c=[],s="./this.program",d=(i,l)=>{throw l},f=typeof window=="object",h=typeof importScripts=="function",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="";function A(i){return e.locateFile?e.locateFile(i,y):y+i}var T,$,R,P;function Q(i){if(i instanceof xi)return;Y("exiting due to exception: "+i)}if(v){var J=fa(),j=pa();h?y=j.dirname(y)+"/":y=__dirname+"/",T=(i,l)=>(i=Fr(i)?new URL(i):j.normalize(i),J.readFileSync(i,l?void 0:"utf8")),R=i=>{var l=T(i,!0);return l.buffer||(l=new Uint8Array(l)),l},$=(i,l,p)=>{i=Fr(i)?new URL(i):j.normalize(i),J.readFile(i,function(_,g){_?p(_):l(g.buffer)})},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),c=process.argv.slice(2),process.on("uncaughtException",function(i){if(!(i instanceof xi))throw i}),process.on("unhandledRejection",function(i){throw i}),d=(i,l)=>{if(Et())throw process.exitCode=i,l;Q(l),process.exit(i)},e.inspect=function(){return"[Emscripten Module object]"}}else(f||h)&&(h?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),t&&(y=t),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",T=i=>{var l=new XMLHttpRequest;return l.open("GET",i,!1),l.send(null),l.responseText},h&&(R=i=>{var l=new XMLHttpRequest;return l.open("GET",i,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),$=(i,l,p)=>{var _=new XMLHttpRequest;_.open("GET",i,!0),_.responseType="arraybuffer",_.onload=()=>{if(_.status==200||_.status==0&&_.response){l(_.response);return}p()},_.onerror=p,_.send(null)},P=i=>document.title=i);var Z=e.print||console.log.bind(console),Y=e.printErr||console.warn.bind(console);Object.assign(e,a),a=null,e.arguments&&(c=e.arguments),e.thisProgram&&(s=e.thisProgram),e.quit&&(d=e.quit);var ne;e.wasmBinary&&(ne=e.wasmBinary);var me=e.noExitRuntime||!0;typeof WebAssembly!="object"&&it("no native wasm support detected");var _e,ve=!1,he;function De(i,l){i||it(l)}var F=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function S(i,l,p){for(var _=l+p,g=l;i[g]&&!(g>=_);)++g;if(g-l>16&&i.buffer&&F)return F.decode(i.subarray(l,g));for(var w="";l<g;){var I=i[l++];if(!(I&128)){w+=String.fromCharCode(I);continue}var k=i[l++]&63;if((I&224)==192){w+=String.fromCharCode((I&31)<<6|k);continue}var H=i[l++]&63;if((I&240)==224?I=(I&15)<<12|k<<6|H:I=(I&7)<<18|k<<12|H<<6|i[l++]&63,I<65536)w+=String.fromCharCode(I);else{var ee=I-65536;w+=String.fromCharCode(55296|ee>>10,56320|ee&1023)}}return w}function D(i,l){return i?S(E,i,l):""}function M(i,l,p,_){if(!(_>0))return 0;for(var g=p,w=p+_-1,I=0;I<i.length;++I){var k=i.charCodeAt(I);if(k>=55296&&k<=57343){var H=i.charCodeAt(++I);k=65536+((k&1023)<<10)|H&1023}if(k<=127){if(p>=w)break;l[p++]=k}else if(k<=2047){if(p+1>=w)break;l[p++]=192|k>>6,l[p++]=128|k&63}else if(k<=65535){if(p+2>=w)break;l[p++]=224|k>>12,l[p++]=128|k>>6&63,l[p++]=128|k&63}else{if(p+3>=w)break;l[p++]=240|k>>18,l[p++]=128|k>>12&63,l[p++]=128|k>>6&63,l[p++]=128|k&63}}return l[p]=0,p-g}function O(i,l,p){return M(i,E,l,p)}function x(i){for(var l=0,p=0;p<i.length;++p){var _=i.charCodeAt(p);_<=127?l++:_<=2047?l+=2:_>=55296&&_<=57343?(l+=4,++p):l+=3}return l}var u,b,E,V,q,L,N,B,z;function C(i){u=i,e.HEAP8=b=new Int8Array(i),e.HEAP16=V=new Int16Array(i),e.HEAP32=L=new Int32Array(i),e.HEAPU8=E=new Uint8Array(i),e.HEAPU16=q=new Uint16Array(i),e.HEAPU32=N=new Uint32Array(i),e.HEAPF32=B=new Float32Array(i),e.HEAPF64=z=new Float64Array(i)}var X=e.INITIAL_MEMORY||16777216,G,W=[],ie=[],ze=[],xe=!1;function Et(){return me}function ct(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)tr(e.preRun.shift());Nn(W)}function It(){xe=!0,!e.noFSInit&&!m.init.initialized&&m.init(),m.ignorePermissions=!1,ht.init(),Nn(ie)}function kt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)ka(e.postRun.shift());Nn(ze)}function tr(i){W.unshift(i)}function zt(i){ie.unshift(i)}function ka(i){ze.unshift(i)}var Mt=0,Rn=null,rr=null;function g_(i){return i}function On(i){Mt++,e.monitorRunDependencies&&e.monitorRunDependencies(Mt)}function Nr(i){if(Mt--,e.monitorRunDependencies&&e.monitorRunDependencies(Mt),Mt==0&&(Rn!==null&&(clearInterval(Rn),Rn=null),rr)){var l=rr;rr=null,l()}}function it(i){e.onAbort&&e.onAbort(i),i="Aborted("+i+")",Y(i),ve=!0,he=1,i+=". Build with -sASSERTIONS for more info.";var l=new WebAssembly.RuntimeError(i);throw o(l),l}var za="data:application/octet-stream;base64,";function bi(i){return i.startsWith(za)}function Fr(i){return i.startsWith("file://")}var Ce;Ce="glpk.all.wasm",bi(Ce)||(Ce=A(Ce));function wi(i){try{if(i==Ce&&ne)return new Uint8Array(ne);if(R)return R(i);throw"both async and sync fetching of the wasm failed"}catch(l){it(l)}}function Ma(){if(!ne&&(f||h)){if(typeof fetch=="function"&&!Fr(Ce))return fetch(Ce,{credentials:"same-origin"}).then(function(i){if(!i.ok)throw"failed to load wasm binary file at '"+Ce+"'";return i.arrayBuffer()}).catch(function(){return wi(Ce)});if($)return new Promise(function(i,l){$(Ce,function(p){i(new Uint8Array(p))},l)})}return Promise.resolve().then(function(){return wi(Ce)})}function Aa(){var i={a:ul};function l(I,k){var H=I.exports;e.asm=H,_e=e.asm.D,C(_e.buffer),G=e.asm.N,zt(e.asm.E),Nr("wasm-instantiate")}On("wasm-instantiate");function p(I){l(I.instance)}function _(I){return Ma().then(function(k){return WebAssembly.instantiate(k,i)}).then(function(k){return k}).then(I,function(k){Y("failed to asynchronously prepare wasm: "+k),it(k)})}function g(){return!ne&&typeof WebAssembly.instantiateStreaming=="function"&&!bi(Ce)&&!Fr(Ce)&&!v&&typeof fetch=="function"?fetch(Ce,{credentials:"same-origin"}).then(function(I){var k=WebAssembly.instantiateStreaming(I,i);return k.then(p,function(H){return Y("wasm streaming compile failed: "+H),Y("falling back to ArrayBuffer instantiation"),_(p)})}):_(p)}if(e.instantiateWasm)try{var w=e.instantiateWasm(i,l);return w}catch(I){Y("Module.instantiateWasm callback failed with error: "+I),o(I)}return g().catch(o),{}}var oe,Se;function xi(i){this.name="ExitStatus",this.message="Program terminated with exit("+i+")",this.status=i}function Nn(i){for(;i.length>0;)i.shift()(e)}function Ta(i,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":return b[i>>0];case"i8":return b[i>>0];case"i16":return V[i>>1];case"i32":return L[i>>2];case"i64":return L[i>>2];case"float":return B[i>>2];case"double":return z[i>>3];case"*":return N[i>>2];default:it("invalid type for getValue: "+l)}return null}function Ra(i,l,p="i8"){switch(p.endsWith("*")&&(p="*"),p){case"i1":b[i>>0]=l;break;case"i8":b[i>>0]=l;break;case"i16":V[i>>1]=l;break;case"i32":L[i>>2]=l;break;case"i64":Se=[l>>>0,(oe=l,+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[i>>2]=Se[0],L[i+4>>2]=Se[1];break;case"float":B[i>>2]=l;break;case"double":z[i>>3]=l;break;case"*":N[i>>2]=l;break;default:it("invalid type for setValue: "+p)}}function Oa(i,l,p,_){it("Assertion failed: "+D(i)+", at: "+[l?D(l):"unknown filename",p,_?D(_):"unknown function"])}function Na(i){return L[Ai()>>2]=i,i}var de={isAbs:i=>i.charAt(0)==="/",splitPath:i=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return l.exec(i).slice(1)},normalizeArray:(i,l)=>{for(var p=0,_=i.length-1;_>=0;_--){var g=i[_];g==="."?i.splice(_,1):g===".."?(i.splice(_,1),p++):p&&(i.splice(_,1),p--)}if(l)for(;p;p--)i.unshift("..");return i},normalize:i=>{var l=de.isAbs(i),p=i.substr(-1)==="/";return i=de.normalizeArray(i.split("/").filter(_=>!!_),!l).join("/"),!i&&!l&&(i="."),i&&p&&(i+="/"),(l?"/":"")+i},dirname:i=>{var l=de.splitPath(i),p=l[0],_=l[1];return!p&&!_?".":(_&&(_=_.substr(0,_.length-1)),p+_)},basename:i=>{if(i==="/")return"/";i=de.normalize(i),i=i.replace(/\/$/,"");var l=i.lastIndexOf("/");return l===-1?i:i.substr(l+1)},join:function(){var i=Array.prototype.slice.call(arguments);return de.normalize(i.join("/"))},join2:(i,l)=>de.normalize(i+"/"+l)};function Fa(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var i=new Uint8Array(1);return()=>(crypto.getRandomValues(i),i[0])}else if(v)try{var l=da();return()=>l.randomBytes(1)[0]}catch{}return()=>it("randomDevice")}var ft={resolve:function(){for(var i="",l=!1,p=arguments.length-1;p>=-1&&!l;p--){var _=p>=0?arguments[p]:m.cwd();if(typeof _!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_)return"";i=_+"/"+i,l=de.isAbs(_)}return i=de.normalizeArray(i.split("/").filter(g=>!!g),!l).join("/"),(l?"/":"")+i||"."},relative:(i,l)=>{i=ft.resolve(i).substr(1),l=ft.resolve(l).substr(1);function p(ee){for(var le=0;le<ee.length&&ee[le]==="";le++);for(var fe=ee.length-1;fe>=0&&ee[fe]==="";fe--);return le>fe?[]:ee.slice(le,fe-le+1)}for(var _=p(i.split("/")),g=p(l.split("/")),w=Math.min(_.length,g.length),I=w,k=0;k<w;k++)if(_[k]!==g[k]){I=k;break}for(var H=[],k=I;k<_.length;k++)H.push("..");return H=H.concat(g.slice(I)),H.join("/")}};function Fn(i,l,p){var _=p>0?p:x(i)+1,g=new Array(_),w=M(i,g,0,g.length);return l&&(g.length=w),g}var ht={ttys:[],init:function(){},shutdown:function(){},register:function(i,l){ht.ttys[i]={input:[],output:[],ops:l},m.registerDevice(i,ht.stream_ops)},stream_ops:{open:function(i){var l=ht.ttys[i.node.rdev];if(!l)throw new m.ErrnoError(43);i.tty=l,i.seekable=!1},close:function(i){i.tty.ops.fsync(i.tty)},fsync:function(i){i.tty.ops.fsync(i.tty)},read:function(i,l,p,_,g){if(!i.tty||!i.tty.ops.get_char)throw new m.ErrnoError(60);for(var w=0,I=0;I<_;I++){var k;try{k=i.tty.ops.get_char(i.tty)}catch{throw new m.ErrnoError(29)}if(k===void 0&&w===0)throw new m.ErrnoError(6);if(k==null)break;w++,l[p+I]=k}return w&&(i.node.timestamp=Date.now()),w},write:function(i,l,p,_,g){if(!i.tty||!i.tty.ops.put_char)throw new m.ErrnoError(60);try{for(var w=0;w<_;w++)i.tty.ops.put_char(i.tty,l[p+w])}catch{throw new m.ErrnoError(29)}return _&&(i.node.timestamp=Date.now()),w}},default_tty_ops:{get_char:function(i){if(!i.input.length){var l=null;if(v){var p=256,_=Buffer.alloc(p),g=0;try{g=J.readSync(process.stdin.fd,_,0,p,-1)}catch(w){if(w.toString().includes("EOF"))g=0;else throw w}g>0?l=_.slice(0,g).toString("utf-8"):l=null}else typeof window<"u"&&typeof window.prompt=="function"?(l=window.prompt("Input: "),l!==null&&(l+=`
`)):typeof readline=="function"&&(l=readline(),l!==null&&(l+=`
`));if(!l)return null;i.input=Fn(l,!0)}return i.input.shift()},put_char:function(i,l){l===null||l===10?(Z(S(i.output,0)),i.output=[]):l!=0&&i.output.push(l)},fsync:function(i){i.output&&i.output.length>0&&(Z(S(i.output,0)),i.output=[])}},default_tty1_ops:{put_char:function(i,l){l===null||l===10?(Y(S(i.output,0)),i.output=[]):l!=0&&i.output.push(l)},fsync:function(i){i.output&&i.output.length>0&&(Y(S(i.output,0)),i.output=[])}}};function Si(i){it()}var se={ops_table:null,mount:function(i){return se.createNode(null,"/",16895,0)},createNode:function(i,l,p,_){if(m.isBlkdev(p)||m.isFIFO(p))throw new m.ErrnoError(63);se.ops_table||(se.ops_table={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,allocate:se.stream_ops.allocate,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:m.chrdev_stream_ops}});var g=m.createNode(i,l,p,_);return m.isDir(g.mode)?(g.node_ops=se.ops_table.dir.node,g.stream_ops=se.ops_table.dir.stream,g.contents={}):m.isFile(g.mode)?(g.node_ops=se.ops_table.file.node,g.stream_ops=se.ops_table.file.stream,g.usedBytes=0,g.contents=null):m.isLink(g.mode)?(g.node_ops=se.ops_table.link.node,g.stream_ops=se.ops_table.link.stream):m.isChrdev(g.mode)&&(g.node_ops=se.ops_table.chrdev.node,g.stream_ops=se.ops_table.chrdev.stream),g.timestamp=Date.now(),i&&(i.contents[l]=g,i.timestamp=g.timestamp),g},getFileDataAsTypedArray:function(i){return i.contents?i.contents.subarray?i.contents.subarray(0,i.usedBytes):new Uint8Array(i.contents):new Uint8Array(0)},expandFileStorage:function(i,l){var p=i.contents?i.contents.length:0;if(!(p>=l)){var _=1024*1024;l=Math.max(l,p*(p<_?2:1.125)>>>0),p!=0&&(l=Math.max(l,256));var g=i.contents;i.contents=new Uint8Array(l),i.usedBytes>0&&i.contents.set(g.subarray(0,i.usedBytes),0)}},resizeFileStorage:function(i,l){if(i.usedBytes!=l)if(l==0)i.contents=null,i.usedBytes=0;else{var p=i.contents;i.contents=new Uint8Array(l),p&&i.contents.set(p.subarray(0,Math.min(l,i.usedBytes))),i.usedBytes=l}},node_ops:{getattr:function(i){var l={};return l.dev=m.isChrdev(i.mode)?i.id:1,l.ino=i.id,l.mode=i.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=i.rdev,m.isDir(i.mode)?l.size=4096:m.isFile(i.mode)?l.size=i.usedBytes:m.isLink(i.mode)?l.size=i.link.length:l.size=0,l.atime=new Date(i.timestamp),l.mtime=new Date(i.timestamp),l.ctime=new Date(i.timestamp),l.blksize=4096,l.blocks=Math.ceil(l.size/l.blksize),l},setattr:function(i,l){l.mode!==void 0&&(i.mode=l.mode),l.timestamp!==void 0&&(i.timestamp=l.timestamp),l.size!==void 0&&se.resizeFileStorage(i,l.size)},lookup:function(i,l){throw m.genericErrors[44]},mknod:function(i,l,p,_){return se.createNode(i,l,p,_)},rename:function(i,l,p){if(m.isDir(i.mode)){var _;try{_=m.lookupNode(l,p)}catch{}if(_)for(var g in _.contents)throw new m.ErrnoError(55)}delete i.parent.contents[i.name],i.parent.timestamp=Date.now(),i.name=p,l.contents[p]=i,l.timestamp=i.parent.timestamp,i.parent=l},unlink:function(i,l){delete i.contents[l],i.timestamp=Date.now()},rmdir:function(i,l){var p=m.lookupNode(i,l);for(var _ in p.contents)throw new m.ErrnoError(55);delete i.contents[l],i.timestamp=Date.now()},readdir:function(i){var l=[".",".."];for(var p in i.contents)i.contents.hasOwnProperty(p)&&l.push(p);return l},symlink:function(i,l,p){var _=se.createNode(i,l,41471,0);return _.link=p,_},readlink:function(i){if(!m.isLink(i.mode))throw new m.ErrnoError(28);return i.link}},stream_ops:{read:function(i,l,p,_,g){var w=i.node.contents;if(g>=i.node.usedBytes)return 0;var I=Math.min(i.node.usedBytes-g,_);if(I>8&&w.subarray)l.set(w.subarray(g,g+I),p);else for(var k=0;k<I;k++)l[p+k]=w[g+k];return I},write:function(i,l,p,_,g,w){if(l.buffer===b.buffer&&(w=!1),!_)return 0;var I=i.node;if(I.timestamp=Date.now(),l.subarray&&(!I.contents||I.contents.subarray)){if(w)return I.contents=l.subarray(p,p+_),I.usedBytes=_,_;if(I.usedBytes===0&&g===0)return I.contents=l.slice(p,p+_),I.usedBytes=_,_;if(g+_<=I.usedBytes)return I.contents.set(l.subarray(p,p+_),g),_}if(se.expandFileStorage(I,g+_),I.contents.subarray&&l.subarray)I.contents.set(l.subarray(p,p+_),g);else for(var k=0;k<_;k++)I.contents[g+k]=l[p+k];return I.usedBytes=Math.max(I.usedBytes,g+_),_},llseek:function(i,l,p){var _=l;if(p===1?_+=i.position:p===2&&m.isFile(i.node.mode)&&(_+=i.node.usedBytes),_<0)throw new m.ErrnoError(28);return _},allocate:function(i,l,p){se.expandFileStorage(i.node,l+p),i.node.usedBytes=Math.max(i.node.usedBytes,l+p)},mmap:function(i,l,p,_,g){if(!m.isFile(i.node.mode))throw new m.ErrnoError(43);var w,I,k=i.node.contents;if(!(g&2)&&k.buffer===u)I=!1,w=k.byteOffset;else{if((p>0||p+l<k.length)&&(k.subarray?k=k.subarray(p,p+l):k=Array.prototype.slice.call(k,p,p+l)),I=!0,w=Si(l),!w)throw new m.ErrnoError(48);b.set(k,w)}return{ptr:w,allocated:I}},msync:function(i,l,p,_,g){return se.stream_ops.write(i,l,0,_,p,!1),0}}};function Da(i,l,p,_){var g=_?"":"al "+i;$(i,w=>{De(w,'Loading data file "'+i+'" failed (no arrayBuffer).'),l(new Uint8Array(w)),g&&Nr(g)},w=>{if(p)p();else throw'Loading data file "'+i+'" failed.'}),g&&On(g)}var m={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(i,l={})=>{if(i=ft.resolve(i),!i)return{path:"",node:null};var p={follow_mount:!0,recurse_count:0};if(l=Object.assign(p,l),l.recurse_count>8)throw new m.ErrnoError(32);for(var _=i.split("/").filter(fe=>!!fe),g=m.root,w="/",I=0;I<_.length;I++){var k=I===_.length-1;if(k&&l.parent)break;if(g=m.lookupNode(g,_[I]),w=de.join2(w,_[I]),m.isMountpoint(g)&&(!k||k&&l.follow_mount)&&(g=g.mounted.root),!k||l.follow)for(var H=0;m.isLink(g.mode);){var ee=m.readlink(w);w=ft.resolve(de.dirname(w),ee);var le=m.lookupPath(w,{recurse_count:l.recurse_count+1});if(g=le.node,H++>40)throw new m.ErrnoError(32)}}return{path:w,node:g}},getPath:i=>{for(var l;;){if(m.isRoot(i)){var p=i.mount.mountpoint;return l?p[p.length-1]!=="/"?p+"/"+l:p+l:p}l=l?i.name+"/"+l:i.name,i=i.parent}},hashName:(i,l)=>{for(var p=0,_=0;_<l.length;_++)p=(p<<5)-p+l.charCodeAt(_)|0;return(i+p>>>0)%m.nameTable.length},hashAddNode:i=>{var l=m.hashName(i.parent.id,i.name);i.name_next=m.nameTable[l],m.nameTable[l]=i},hashRemoveNode:i=>{var l=m.hashName(i.parent.id,i.name);if(m.nameTable[l]===i)m.nameTable[l]=i.name_next;else for(var p=m.nameTable[l];p;){if(p.name_next===i){p.name_next=i.name_next;break}p=p.name_next}},lookupNode:(i,l)=>{var p=m.mayLookup(i);if(p)throw new m.ErrnoError(p,i);for(var _=m.hashName(i.id,l),g=m.nameTable[_];g;g=g.name_next){var w=g.name;if(g.parent.id===i.id&&w===l)return g}return m.lookup(i,l)},createNode:(i,l,p,_)=>{var g=new m.FSNode(i,l,p,_);return m.hashAddNode(g),g},destroyNode:i=>{m.hashRemoveNode(i)},isRoot:i=>i===i.parent,isMountpoint:i=>!!i.mounted,isFile:i=>(i&61440)===32768,isDir:i=>(i&61440)===16384,isLink:i=>(i&61440)===40960,isChrdev:i=>(i&61440)===8192,isBlkdev:i=>(i&61440)===24576,isFIFO:i=>(i&61440)===4096,isSocket:i=>(i&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:i=>{var l=m.flagModes[i];if(typeof l>"u")throw new Error("Unknown file open mode: "+i);return l},flagsToPermissionString:i=>{var l=["r","w","rw"][i&3];return i&512&&(l+="w"),l},nodePermissions:(i,l)=>m.ignorePermissions?0:l.includes("r")&&!(i.mode&292)||l.includes("w")&&!(i.mode&146)||l.includes("x")&&!(i.mode&73)?2:0,mayLookup:i=>{var l=m.nodePermissions(i,"x");return l||(i.node_ops.lookup?0:2)},mayCreate:(i,l)=>{try{var p=m.lookupNode(i,l);return 20}catch{}return m.nodePermissions(i,"wx")},mayDelete:(i,l,p)=>{var _;try{_=m.lookupNode(i,l)}catch(w){return w.errno}var g=m.nodePermissions(i,"wx");if(g)return g;if(p){if(!m.isDir(_.mode))return 54;if(m.isRoot(_)||m.getPath(_)===m.cwd())return 10}else if(m.isDir(_.mode))return 31;return 0},mayOpen:(i,l)=>i?m.isLink(i.mode)?32:m.isDir(i.mode)&&(m.flagsToPermissionString(l)!=="r"||l&512)?31:m.nodePermissions(i,m.flagsToPermissionString(l)):44,MAX_OPEN_FDS:4096,nextfd:(i=0,l=m.MAX_OPEN_FDS)=>{for(var p=i;p<=l;p++)if(!m.streams[p])return p;throw new m.ErrnoError(33)},getStream:i=>m.streams[i],createStream:(i,l,p)=>{m.FSStream||(m.FSStream=function(){this.shared={}},m.FSStream.prototype={},Object.defineProperties(m.FSStream.prototype,{object:{get:function(){return this.node},set:function(g){this.node=g}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(g){this.shared.flags=g}},position:{get:function(){return this.shared.position},set:function(g){this.shared.position=g}}})),i=Object.assign(new m.FSStream,i);var _=m.nextfd(l,p);return i.fd=_,m.streams[_]=i,i},closeStream:i=>{m.streams[i]=null},chrdev_stream_ops:{open:i=>{var l=m.getDevice(i.node.rdev);i.stream_ops=l.stream_ops,i.stream_ops.open&&i.stream_ops.open(i)},llseek:()=>{throw new m.ErrnoError(70)}},major:i=>i>>8,minor:i=>i&255,makedev:(i,l)=>i<<8|l,registerDevice:(i,l)=>{m.devices[i]={stream_ops:l}},getDevice:i=>m.devices[i],getMounts:i=>{for(var l=[],p=[i];p.length;){var _=p.pop();l.push(_),p.push.apply(p,_.mounts)}return l},syncfs:(i,l)=>{typeof i=="function"&&(l=i,i=!1),m.syncFSRequests++,m.syncFSRequests>1&&Y("warning: "+m.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var p=m.getMounts(m.root.mount),_=0;function g(I){return m.syncFSRequests--,l(I)}function w(I){if(I)return w.errored?void 0:(w.errored=!0,g(I));++_>=p.length&&g(null)}p.forEach(I=>{if(!I.type.syncfs)return w(null);I.type.syncfs(I,i,w)})},mount:(i,l,p)=>{var _=p==="/",g=!p,w;if(_&&m.root)throw new m.ErrnoError(10);if(!_&&!g){var I=m.lookupPath(p,{follow_mount:!1});if(p=I.path,w=I.node,m.isMountpoint(w))throw new m.ErrnoError(10);if(!m.isDir(w.mode))throw new m.ErrnoError(54)}var k={type:i,opts:l,mountpoint:p,mounts:[]},H=i.mount(k);return H.mount=k,k.root=H,_?m.root=H:w&&(w.mounted=k,w.mount&&w.mount.mounts.push(k)),H},unmount:i=>{var l=m.lookupPath(i,{follow_mount:!1});if(!m.isMountpoint(l.node))throw new m.ErrnoError(28);var p=l.node,_=p.mounted,g=m.getMounts(_);Object.keys(m.nameTable).forEach(I=>{for(var k=m.nameTable[I];k;){var H=k.name_next;g.includes(k.mount)&&m.destroyNode(k),k=H}}),p.mounted=null;var w=p.mount.mounts.indexOf(_);p.mount.mounts.splice(w,1)},lookup:(i,l)=>i.node_ops.lookup(i,l),mknod:(i,l,p)=>{var _=m.lookupPath(i,{parent:!0}),g=_.node,w=de.basename(i);if(!w||w==="."||w==="..")throw new m.ErrnoError(28);var I=m.mayCreate(g,w);if(I)throw new m.ErrnoError(I);if(!g.node_ops.mknod)throw new m.ErrnoError(63);return g.node_ops.mknod(g,w,l,p)},create:(i,l)=>(l=l!==void 0?l:438,l&=4095,l|=32768,m.mknod(i,l,0)),mkdir:(i,l)=>(l=l!==void 0?l:511,l&=1023,l|=16384,m.mknod(i,l,0)),mkdirTree:(i,l)=>{for(var p=i.split("/"),_="",g=0;g<p.length;++g)if(p[g]){_+="/"+p[g];try{m.mkdir(_,l)}catch(w){if(w.errno!=20)throw w}}},mkdev:(i,l,p)=>(typeof p>"u"&&(p=l,l=438),l|=8192,m.mknod(i,l,p)),symlink:(i,l)=>{if(!ft.resolve(i))throw new m.ErrnoError(44);var p=m.lookupPath(l,{parent:!0}),_=p.node;if(!_)throw new m.ErrnoError(44);var g=de.basename(l),w=m.mayCreate(_,g);if(w)throw new m.ErrnoError(w);if(!_.node_ops.symlink)throw new m.ErrnoError(63);return _.node_ops.symlink(_,g,i)},rename:(i,l)=>{var p=de.dirname(i),_=de.dirname(l),g=de.basename(i),w=de.basename(l),I,k,H;if(I=m.lookupPath(i,{parent:!0}),k=I.node,I=m.lookupPath(l,{parent:!0}),H=I.node,!k||!H)throw new m.ErrnoError(44);if(k.mount!==H.mount)throw new m.ErrnoError(75);var ee=m.lookupNode(k,g),le=ft.relative(i,_);if(le.charAt(0)!==".")throw new m.ErrnoError(28);if(le=ft.relative(l,p),le.charAt(0)!==".")throw new m.ErrnoError(55);var fe;try{fe=m.lookupNode(H,w)}catch{}if(ee!==fe){var te=m.isDir(ee.mode),K=m.mayDelete(k,g,te);if(K)throw new m.ErrnoError(K);if(K=fe?m.mayDelete(H,w,te):m.mayCreate(H,w),K)throw new m.ErrnoError(K);if(!k.node_ops.rename)throw new m.ErrnoError(63);if(m.isMountpoint(ee)||fe&&m.isMountpoint(fe))throw new m.ErrnoError(10);if(H!==k&&(K=m.nodePermissions(k,"w"),K))throw new m.ErrnoError(K);m.hashRemoveNode(ee);try{k.node_ops.rename(ee,H,w)}catch(ce){throw ce}finally{m.hashAddNode(ee)}}},rmdir:i=>{var l=m.lookupPath(i,{parent:!0}),p=l.node,_=de.basename(i),g=m.lookupNode(p,_),w=m.mayDelete(p,_,!0);if(w)throw new m.ErrnoError(w);if(!p.node_ops.rmdir)throw new m.ErrnoError(63);if(m.isMountpoint(g))throw new m.ErrnoError(10);p.node_ops.rmdir(p,_),m.destroyNode(g)},readdir:i=>{var l=m.lookupPath(i,{follow:!0}),p=l.node;if(!p.node_ops.readdir)throw new m.ErrnoError(54);return p.node_ops.readdir(p)},unlink:i=>{var l=m.lookupPath(i,{parent:!0}),p=l.node;if(!p)throw new m.ErrnoError(44);var _=de.basename(i),g=m.lookupNode(p,_),w=m.mayDelete(p,_,!1);if(w)throw new m.ErrnoError(w);if(!p.node_ops.unlink)throw new m.ErrnoError(63);if(m.isMountpoint(g))throw new m.ErrnoError(10);p.node_ops.unlink(p,_),m.destroyNode(g)},readlink:i=>{var l=m.lookupPath(i),p=l.node;if(!p)throw new m.ErrnoError(44);if(!p.node_ops.readlink)throw new m.ErrnoError(28);return ft.resolve(m.getPath(p.parent),p.node_ops.readlink(p))},stat:(i,l)=>{var p=m.lookupPath(i,{follow:!l}),_=p.node;if(!_)throw new m.ErrnoError(44);if(!_.node_ops.getattr)throw new m.ErrnoError(63);return _.node_ops.getattr(_)},lstat:i=>m.stat(i,!0),chmod:(i,l,p)=>{var _;if(typeof i=="string"){var g=m.lookupPath(i,{follow:!p});_=g.node}else _=i;if(!_.node_ops.setattr)throw new m.ErrnoError(63);_.node_ops.setattr(_,{mode:l&4095|_.mode&-4096,timestamp:Date.now()})},lchmod:(i,l)=>{m.chmod(i,l,!0)},fchmod:(i,l)=>{var p=m.getStream(i);if(!p)throw new m.ErrnoError(8);m.chmod(p.node,l)},chown:(i,l,p,_)=>{var g;if(typeof i=="string"){var w=m.lookupPath(i,{follow:!_});g=w.node}else g=i;if(!g.node_ops.setattr)throw new m.ErrnoError(63);g.node_ops.setattr(g,{timestamp:Date.now()})},lchown:(i,l,p)=>{m.chown(i,l,p,!0)},fchown:(i,l,p)=>{var _=m.getStream(i);if(!_)throw new m.ErrnoError(8);m.chown(_.node,l,p)},truncate:(i,l)=>{if(l<0)throw new m.ErrnoError(28);var p;if(typeof i=="string"){var _=m.lookupPath(i,{follow:!0});p=_.node}else p=i;if(!p.node_ops.setattr)throw new m.ErrnoError(63);if(m.isDir(p.mode))throw new m.ErrnoError(31);if(!m.isFile(p.mode))throw new m.ErrnoError(28);var g=m.nodePermissions(p,"w");if(g)throw new m.ErrnoError(g);p.node_ops.setattr(p,{size:l,timestamp:Date.now()})},ftruncate:(i,l)=>{var p=m.getStream(i);if(!p)throw new m.ErrnoError(8);if(!(p.flags&2097155))throw new m.ErrnoError(28);m.truncate(p.node,l)},utime:(i,l,p)=>{var _=m.lookupPath(i,{follow:!0}),g=_.node;g.node_ops.setattr(g,{timestamp:Math.max(l,p)})},open:(i,l,p)=>{if(i==="")throw new m.ErrnoError(44);l=typeof l=="string"?m.modeStringToFlags(l):l,p=typeof p>"u"?438:p,l&64?p=p&4095|32768:p=0;var _;if(typeof i=="object")_=i;else{i=de.normalize(i);try{var g=m.lookupPath(i,{follow:!(l&131072)});_=g.node}catch{}}var w=!1;if(l&64)if(_){if(l&128)throw new m.ErrnoError(20)}else _=m.mknod(i,p,0),w=!0;if(!_)throw new m.ErrnoError(44);if(m.isChrdev(_.mode)&&(l&=-513),l&65536&&!m.isDir(_.mode))throw new m.ErrnoError(54);if(!w){var I=m.mayOpen(_,l);if(I)throw new m.ErrnoError(I)}l&512&&!w&&m.truncate(_,0),l&=-131713;var k=m.createStream({node:_,path:m.getPath(_),flags:l,seekable:!0,position:0,stream_ops:_.stream_ops,ungotten:[],error:!1});return k.stream_ops.open&&k.stream_ops.open(k),e.logReadFiles&&!(l&1)&&(m.readFiles||(m.readFiles={}),i in m.readFiles||(m.readFiles[i]=1)),k},close:i=>{if(m.isClosed(i))throw new m.ErrnoError(8);i.getdents&&(i.getdents=null);try{i.stream_ops.close&&i.stream_ops.close(i)}catch(l){throw l}finally{m.closeStream(i.fd)}i.fd=null},isClosed:i=>i.fd===null,llseek:(i,l,p)=>{if(m.isClosed(i))throw new m.ErrnoError(8);if(!i.seekable||!i.stream_ops.llseek)throw new m.ErrnoError(70);if(p!=0&&p!=1&&p!=2)throw new m.ErrnoError(28);return i.position=i.stream_ops.llseek(i,l,p),i.ungotten=[],i.position},read:(i,l,p,_,g)=>{if(_<0||g<0)throw new m.ErrnoError(28);if(m.isClosed(i))throw new m.ErrnoError(8);if((i.flags&2097155)===1)throw new m.ErrnoError(8);if(m.isDir(i.node.mode))throw new m.ErrnoError(31);if(!i.stream_ops.read)throw new m.ErrnoError(28);var w=typeof g<"u";if(!w)g=i.position;else if(!i.seekable)throw new m.ErrnoError(70);var I=i.stream_ops.read(i,l,p,_,g);return w||(i.position+=I),I},write:(i,l,p,_,g,w)=>{if(_<0||g<0)throw new m.ErrnoError(28);if(m.isClosed(i))throw new m.ErrnoError(8);if(!(i.flags&2097155))throw new m.ErrnoError(8);if(m.isDir(i.node.mode))throw new m.ErrnoError(31);if(!i.stream_ops.write)throw new m.ErrnoError(28);i.seekable&&i.flags&1024&&m.llseek(i,0,2);var I=typeof g<"u";if(!I)g=i.position;else if(!i.seekable)throw new m.ErrnoError(70);var k=i.stream_ops.write(i,l,p,_,g,w);return I||(i.position+=k),k},allocate:(i,l,p)=>{if(m.isClosed(i))throw new m.ErrnoError(8);if(l<0||p<=0)throw new m.ErrnoError(28);if(!(i.flags&2097155))throw new m.ErrnoError(8);if(!m.isFile(i.node.mode)&&!m.isDir(i.node.mode))throw new m.ErrnoError(43);if(!i.stream_ops.allocate)throw new m.ErrnoError(138);i.stream_ops.allocate(i,l,p)},mmap:(i,l,p,_,g)=>{if(_&2&&!(g&2)&&(i.flags&2097155)!==2)throw new m.ErrnoError(2);if((i.flags&2097155)===1)throw new m.ErrnoError(2);if(!i.stream_ops.mmap)throw new m.ErrnoError(43);return i.stream_ops.mmap(i,l,p,_,g)},msync:(i,l,p,_,g)=>i.stream_ops.msync?i.stream_ops.msync(i,l,p,_,g):0,munmap:i=>0,ioctl:(i,l,p)=>{if(!i.stream_ops.ioctl)throw new m.ErrnoError(59);return i.stream_ops.ioctl(i,l,p)},readFile:(i,l={})=>{if(l.flags=l.flags||0,l.encoding=l.encoding||"binary",l.encoding!=="utf8"&&l.encoding!=="binary")throw new Error('Invalid encoding type "'+l.encoding+'"');var p,_=m.open(i,l.flags),g=m.stat(i),w=g.size,I=new Uint8Array(w);return m.read(_,I,0,w,0),l.encoding==="utf8"?p=S(I,0):l.encoding==="binary"&&(p=I),m.close(_),p},writeFile:(i,l,p={})=>{p.flags=p.flags||577;var _=m.open(i,p.flags,p.mode);if(typeof l=="string"){var g=new Uint8Array(x(l)+1),w=M(l,g,0,g.length);m.write(_,g,0,w,void 0,p.canOwn)}else if(ArrayBuffer.isView(l))m.write(_,l,0,l.byteLength,void 0,p.canOwn);else throw new Error("Unsupported data type");m.close(_)},cwd:()=>m.currentPath,chdir:i=>{var l=m.lookupPath(i,{follow:!0});if(l.node===null)throw new m.ErrnoError(44);if(!m.isDir(l.node.mode))throw new m.ErrnoError(54);var p=m.nodePermissions(l.node,"x");if(p)throw new m.ErrnoError(p);m.currentPath=l.path},createDefaultDirectories:()=>{m.mkdir("/tmp"),m.mkdir("/home"),m.mkdir("/home/web_user")},createDefaultDevices:()=>{m.mkdir("/dev"),m.registerDevice(m.makedev(1,3),{read:()=>0,write:(l,p,_,g,w)=>g}),m.mkdev("/dev/null",m.makedev(1,3)),ht.register(m.makedev(5,0),ht.default_tty_ops),ht.register(m.makedev(6,0),ht.default_tty1_ops),m.mkdev("/dev/tty",m.makedev(5,0)),m.mkdev("/dev/tty1",m.makedev(6,0));var i=Fa();m.createDevice("/dev","random",i),m.createDevice("/dev","urandom",i),m.mkdir("/dev/shm"),m.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{m.mkdir("/proc");var i=m.mkdir("/proc/self");m.mkdir("/proc/self/fd"),m.mount({mount:()=>{var l=m.createNode(i,"fd",16895,73);return l.node_ops={lookup:(p,_)=>{var g=+_,w=m.getStream(g);if(!w)throw new m.ErrnoError(8);var I={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>w.path}};return I.parent=I,I}},l}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?m.createDevice("/dev","stdin",e.stdin):m.symlink("/dev/tty","/dev/stdin"),e.stdout?m.createDevice("/dev","stdout",null,e.stdout):m.symlink("/dev/tty","/dev/stdout"),e.stderr?m.createDevice("/dev","stderr",null,e.stderr):m.symlink("/dev/tty1","/dev/stderr");var i=m.open("/dev/stdin",0),l=m.open("/dev/stdout",1),p=m.open("/dev/stderr",1)},ensureErrnoError:()=>{m.ErrnoError||(m.ErrnoError=function(l,p){this.node=p,this.setErrno=function(_){this.errno=_},this.setErrno(l),this.message="FS error"},m.ErrnoError.prototype=new Error,m.ErrnoError.prototype.constructor=m.ErrnoError,[44].forEach(i=>{m.genericErrors[i]=new m.ErrnoError(i),m.genericErrors[i].stack="<generic error, no stack>"}))},staticInit:()=>{m.ensureErrnoError(),m.nameTable=new Array(4096),m.mount(se,{},"/"),m.createDefaultDirectories(),m.createDefaultDevices(),m.createSpecialDirectories(),m.filesystems={MEMFS:se}},init:(i,l,p)=>{m.init.initialized=!0,m.ensureErrnoError(),e.stdin=i||e.stdin,e.stdout=l||e.stdout,e.stderr=p||e.stderr,m.createStandardStreams()},quit:()=>{m.init.initialized=!1;for(var i=0;i<m.streams.length;i++){var l=m.streams[i];l&&m.close(l)}},getMode:(i,l)=>{var p=0;return i&&(p|=365),l&&(p|=146),p},findObject:(i,l)=>{var p=m.analyzePath(i,l);return p.exists?p.object:null},analyzePath:(i,l)=>{try{var p=m.lookupPath(i,{follow:!l});i=p.path}catch{}var _={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var p=m.lookupPath(i,{parent:!0});_.parentExists=!0,_.parentPath=p.path,_.parentObject=p.node,_.name=de.basename(i),p=m.lookupPath(i,{follow:!l}),_.exists=!0,_.path=p.path,_.object=p.node,_.name=p.node.name,_.isRoot=p.path==="/"}catch(g){_.error=g.errno}return _},createPath:(i,l,p,_)=>{i=typeof i=="string"?i:m.getPath(i);for(var g=l.split("/").reverse();g.length;){var w=g.pop();if(w){var I=de.join2(i,w);try{m.mkdir(I)}catch{}i=I}}return I},createFile:(i,l,p,_,g)=>{var w=de.join2(typeof i=="string"?i:m.getPath(i),l),I=m.getMode(_,g);return m.create(w,I)},createDataFile:(i,l,p,_,g,w)=>{var I=l;i&&(i=typeof i=="string"?i:m.getPath(i),I=l?de.join2(i,l):i);var k=m.getMode(_,g),H=m.create(I,k);if(p){if(typeof p=="string"){for(var ee=new Array(p.length),le=0,fe=p.length;le<fe;++le)ee[le]=p.charCodeAt(le);p=ee}m.chmod(H,k|146);var te=m.open(H,577);m.write(te,p,0,p.length,0,w),m.close(te),m.chmod(H,k)}return H},createDevice:(i,l,p,_)=>{var g=de.join2(typeof i=="string"?i:m.getPath(i),l),w=m.getMode(!!p,!!_);m.createDevice.major||(m.createDevice.major=64);var I=m.makedev(m.createDevice.major++,0);return m.registerDevice(I,{open:k=>{k.seekable=!1},close:k=>{_&&_.buffer&&_.buffer.length&&_(10)},read:(k,H,ee,le,fe)=>{for(var te=0,K=0;K<le;K++){var ce;try{ce=p()}catch{throw new m.ErrnoError(29)}if(ce===void 0&&te===0)throw new m.ErrnoError(6);if(ce==null)break;te++,H[ee+K]=ce}return te&&(k.node.timestamp=Date.now()),te},write:(k,H,ee,le,fe)=>{for(var te=0;te<le;te++)try{_(H[ee+te])}catch{throw new m.ErrnoError(29)}return le&&(k.node.timestamp=Date.now()),te}}),m.mkdev(g,w,I)},forceLoadFile:i=>{if(i.isDevice||i.isFolder||i.link||i.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(T)try{i.contents=Fn(T(i.url),!0),i.usedBytes=i.contents.length}catch{throw new m.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(i,l,p,_,g)=>{function w(){this.lengthKnown=!1,this.chunks=[]}if(w.prototype.get=function(K){if(!(K>this.length-1||K<0)){var ce=K%this.chunkSize,Te=K/this.chunkSize|0;return this.getter(Te)[ce]}},w.prototype.setDataGetter=function(K){this.getter=K},w.prototype.cacheLength=function(){var K=new XMLHttpRequest;if(K.open("HEAD",p,!1),K.send(null),!(K.status>=200&&K.status<300||K.status===304))throw new Error("Couldn't load "+p+". Status: "+K.status);var ce=Number(K.getResponseHeader("Content-length")),Te,pt=(Te=K.getResponseHeader("Accept-Ranges"))&&Te==="bytes",Qe=(Te=K.getResponseHeader("Content-Encoding"))&&Te==="gzip",Ze=1024*1024;pt||(Ze=ce);var Je=(ot,$t)=>{if(ot>$t)throw new Error("invalid range ("+ot+", "+$t+") or no bytes requested!");if($t>ce-1)throw new Error("only "+ce+" bytes available! programmer error!");var Re=new XMLHttpRequest;if(Re.open("GET",p,!1),ce!==Ze&&Re.setRequestHeader("Range","bytes="+ot+"-"+$t),Re.responseType="arraybuffer",Re.overrideMimeType&&Re.overrideMimeType("text/plain; charset=x-user-defined"),Re.send(null),!(Re.status>=200&&Re.status<300||Re.status===304))throw new Error("Couldn't load "+p+". Status: "+Re.status);return Re.response!==void 0?new Uint8Array(Re.response||[]):Fn(Re.responseText||"",!0)},ir=this;ir.setDataGetter(ot=>{var $t=ot*Ze,Re=(ot+1)*Ze-1;if(Re=Math.min(Re,ce-1),typeof ir.chunks[ot]>"u"&&(ir.chunks[ot]=Je($t,Re)),typeof ir.chunks[ot]>"u")throw new Error("doXHR failed!");return ir.chunks[ot]}),(Qe||!ce)&&(Ze=ce=1,ce=this.getter(0).length,Ze=ce,Z("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=ce,this._chunkSize=Ze,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!h)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var I=new w;Object.defineProperties(I,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var k={isDevice:!1,contents:I}}else var k={isDevice:!1,url:p};var H=m.createFile(i,l,k,_,g);k.contents?H.contents=k.contents:k.url&&(H.contents=null,H.url=k.url),Object.defineProperties(H,{usedBytes:{get:function(){return this.contents.length}}});var ee={},le=Object.keys(H.stream_ops);le.forEach(te=>{var K=H.stream_ops[te];ee[te]=function(){return m.forceLoadFile(H),K.apply(null,arguments)}});function fe(te,K,ce,Te,pt){var Qe=te.node.contents;if(pt>=Qe.length)return 0;var Ze=Math.min(Qe.length-pt,Te);if(Qe.slice)for(var Je=0;Je<Ze;Je++)K[ce+Je]=Qe[pt+Je];else for(var Je=0;Je<Ze;Je++)K[ce+Je]=Qe.get(pt+Je);return Ze}return ee.read=(te,K,ce,Te,pt)=>(m.forceLoadFile(H),fe(te,K,ce,Te,pt)),ee.mmap=(te,K,ce,Te,pt)=>{m.forceLoadFile(H);var Qe=Si(K);if(!Qe)throw new m.ErrnoError(48);return fe(te,b,Qe,K,ce),{ptr:Qe,allocated:!0}},H.stream_ops=ee,H},createPreloadedFile:(i,l,p,_,g,w,I,k,H,ee)=>{var le=l?ft.resolve(de.join2(i,l)):i,fe="cp "+le;function te(K){function ce(Te){ee&&ee(),k||m.createDataFile(i,l,Te,_,g,H),w&&w(),Nr(fe)}Browser.handledByPreloadPlugin(K,le,ce,()=>{I&&I(),Nr(fe)})||ce(K)}On(fe),typeof p=="string"?Da(p,K=>te(K),I):te(p)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(i,l,p)=>{l=l||(()=>{}),p=p||(()=>{});var _=m.indexedDB();try{var g=_.open(m.DB_NAME(),m.DB_VERSION)}catch(w){return p(w)}g.onupgradeneeded=()=>{Z("creating db");var w=g.result;w.createObjectStore(m.DB_STORE_NAME)},g.onsuccess=()=>{var w=g.result,I=w.transaction([m.DB_STORE_NAME],"readwrite"),k=I.objectStore(m.DB_STORE_NAME),H=0,ee=0,le=i.length;function fe(){ee==0?l():p()}i.forEach(te=>{var K=k.put(m.analyzePath(te).object.contents,te);K.onsuccess=()=>{H++,H+ee==le&&fe()},K.onerror=()=>{ee++,H+ee==le&&fe()}}),I.onerror=p},g.onerror=p},loadFilesFromDB:(i,l,p)=>{l=l||(()=>{}),p=p||(()=>{});var _=m.indexedDB();try{var g=_.open(m.DB_NAME(),m.DB_VERSION)}catch(w){return p(w)}g.onupgradeneeded=p,g.onsuccess=()=>{var w=g.result;try{var I=w.transaction([m.DB_STORE_NAME],"readonly")}catch(te){p(te);return}var k=I.objectStore(m.DB_STORE_NAME),H=0,ee=0,le=i.length;function fe(){ee==0?l():p()}i.forEach(te=>{var K=k.get(te);K.onsuccess=()=>{m.analyzePath(te).exists&&m.unlink(te),m.createDataFile(de.dirname(te),de.basename(te),K.result,!0,!0,!0),H++,H+ee==le&&fe()},K.onerror=()=>{ee++,H+ee==le&&fe()}}),I.onerror=p},g.onerror=p}},Ee={DEFAULT_POLLMASK:5,calculateAt:function(i,l,p){if(de.isAbs(l))return l;var _;if(i===-100)_=m.cwd();else{var g=Ee.getStreamFromFD(i);_=g.path}if(l.length==0){if(!p)throw new m.ErrnoError(44);return _}return de.join2(_,l)},doStat:function(i,l,p){try{var _=i(l)}catch(k){if(k&&k.node&&de.normalize(l)!==de.normalize(m.getPath(k.node)))return-54;throw k}L[p>>2]=_.dev,L[p+8>>2]=_.ino,L[p+12>>2]=_.mode,N[p+16>>2]=_.nlink,L[p+20>>2]=_.uid,L[p+24>>2]=_.gid,L[p+28>>2]=_.rdev,Se=[_.size>>>0,(oe=_.size,+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[p+40>>2]=Se[0],L[p+44>>2]=Se[1],L[p+48>>2]=4096,L[p+52>>2]=_.blocks;var g=_.atime.getTime(),w=_.mtime.getTime(),I=_.ctime.getTime();return Se=[Math.floor(g/1e3)>>>0,(oe=Math.floor(g/1e3),+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[p+56>>2]=Se[0],L[p+60>>2]=Se[1],N[p+64>>2]=g%1e3*1e3,Se=[Math.floor(w/1e3)>>>0,(oe=Math.floor(w/1e3),+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[p+72>>2]=Se[0],L[p+76>>2]=Se[1],N[p+80>>2]=w%1e3*1e3,Se=[Math.floor(I/1e3)>>>0,(oe=Math.floor(I/1e3),+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[p+88>>2]=Se[0],L[p+92>>2]=Se[1],N[p+96>>2]=I%1e3*1e3,Se=[_.ino>>>0,(oe=_.ino,+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[p+104>>2]=Se[0],L[p+108>>2]=Se[1],0},doMsync:function(i,l,p,_,g){if(!m.isFile(l.node.mode))throw new m.ErrnoError(43);if(_&2)return 0;var w=E.slice(i,i+p);m.msync(l,w,g,p,_)},varargs:void 0,get:function(){Ee.varargs+=4;var i=L[Ee.varargs-4>>2];return i},getStr:function(i){var l=D(i);return l},getStreamFromFD:function(i){var l=m.getStream(i);if(!l)throw new m.ErrnoError(8);return l}};function Ba(i,l,p){Ee.varargs=p;try{var _=Ee.getStreamFromFD(i);switch(l){case 0:{var g=Ee.get();if(g<0)return-28;var w;return w=m.createStream(_,g),w.fd}case 1:case 2:return 0;case 3:return _.flags;case 4:{var g=Ee.get();return _.flags|=g,0}case 5:{var g=Ee.get(),I=0;return V[g+I>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Na(28),-1;default:return-28}}catch(k){if(typeof m>"u"||!(k instanceof m.ErrnoError))throw k;return-k.errno}}function Pa(i,l,p){Ee.varargs=p;try{var _=Ee.getStreamFromFD(i);switch(l){case 21509:case 21505:return _.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return _.tty?0:-59;case 21519:{if(!_.tty)return-59;var g=Ee.get();return L[g>>2]=0,0}case 21520:return _.tty?-28:-59;case 21531:{var g=Ee.get();return m.ioctl(_,l,g)}case 21523:return _.tty?0:-59;case 21524:return _.tty?0:-59;default:return-28}}catch(w){if(typeof m>"u"||!(w instanceof m.ErrnoError))throw w;return-w.errno}}function ja(i,l,p,_){Ee.varargs=_;try{l=Ee.getStr(l),l=Ee.calculateAt(i,l);var g=_?Ee.get():0;return m.open(l,p,g).fd}catch(w){if(typeof m>"u"||!(w instanceof m.ErrnoError))throw w;return-w.errno}}function Va(){throw 1/0}function La(i){return N[i>>2]+L[i+4>>2]*4294967296}function Ca(i,l){var p=new Date(La(i)*1e3);L[l>>2]=p.getUTCSeconds(),L[l+4>>2]=p.getUTCMinutes(),L[l+8>>2]=p.getUTCHours(),L[l+12>>2]=p.getUTCDate(),L[l+16>>2]=p.getUTCMonth(),L[l+20>>2]=p.getUTCFullYear()-1900,L[l+24>>2]=p.getUTCDay();var _=Date.UTC(p.getUTCFullYear(),0,1,0,0,0,0),g=(p.getTime()-_)/(1e3*60*60*24)|0;L[l+28>>2]=g}function Ei(i){var l=x(i)+1,p=Mi(l);return p&&M(i,b,p,l),p}function Ua(i,l,p){var _=new Date().getFullYear(),g=new Date(_,0,1),w=new Date(_,6,1),I=g.getTimezoneOffset(),k=w.getTimezoneOffset(),H=Math.max(I,k);N[i>>2]=H*60,L[l>>2]=+(I!=k);function ee(ce){var Te=ce.toTimeString().match(/\(([A-Za-z ]+)\)$/);return Te?Te[1]:"GMT"}var le=ee(g),fe=ee(w),te=Ei(le),K=Ei(fe);k<I?(N[p>>2]=te,N[p+4>>2]=K):(N[p>>2]=K,N[p+4>>2]=te)}function $a(){it("")}function Ha(){return Date.now()}function Wa(i,l,p){E.copyWithin(i,l,l+p)}function qa(){return 2147483648}function Xa(i){try{return _e.grow(i-u.byteLength+65535>>>16),C(_e.buffer),1}catch{}}function Ga(i){var l=E.length;i=i>>>0;var p=qa();if(i>p)return!1;let _=(H,ee)=>H+(ee-H%ee)%ee;for(var g=1;g<=4;g*=2){var w=l*(1+.2/g);w=Math.min(w,i+100663296);var I=Math.min(p,_(Math.max(i,w),65536)),k=Xa(I);if(k)return!0}return!1}function Ya(i){try{var l=Ee.getStreamFromFD(i);return m.close(l),0}catch(p){if(typeof m>"u"||!(p instanceof m.ErrnoError))throw p;return p.errno}}function Ka(i,l,p,_){for(var g=0,w=0;w<p;w++){var I=N[l>>2],k=N[l+4>>2];l+=8;var H=m.read(i,b,I,k,_);if(H<0)return-1;if(g+=H,H<k)break}return g}function Qa(i,l,p,_){try{var g=Ee.getStreamFromFD(i),w=Ka(g,l,p);return N[_>>2]=w,0}catch(I){if(typeof m>"u"||!(I instanceof m.ErrnoError))throw I;return I.errno}}function Za(i,l){return l+2097152>>>0<4194305-!!i?(i>>>0)+l*4294967296:NaN}function Ja(i,l,p,_,g){try{var w=Za(l,p);if(isNaN(w))return 61;var I=Ee.getStreamFromFD(i);return m.llseek(I,w,_),Se=[I.position>>>0,(oe=I.position,+Math.abs(oe)>=1?oe>0?(Math.min(+Math.floor(oe/4294967296),4294967295)|0)>>>0:~~+Math.ceil((oe-+(~~oe>>>0))/4294967296)>>>0:0)],L[g>>2]=Se[0],L[g+4>>2]=Se[1],I.getdents&&w===0&&_===0&&(I.getdents=null),0}catch(k){if(typeof m>"u"||!(k instanceof m.ErrnoError))throw k;return k.errno}}function el(i,l,p,_){for(var g=0,w=0;w<p;w++){var I=N[l>>2],k=N[l+4>>2];l+=8;var H=m.write(i,b,I,k,_);if(H<0)return-1;g+=H}return g}function tl(i,l,p,_){try{var g=Ee.getStreamFromFD(i),w=el(g,l,p);return N[_>>2]=w,0}catch(I){if(typeof m>"u"||!(I instanceof m.ErrnoError))throw I;return I.errno}}var nr=[];function Be(i){var l=nr[i];return l||(i>=nr.length&&(nr.length=i+1),nr[i]=l=G.get(i)),l}function Ii(i,l){i<128?l.push(i):l.push(i%128|128,i>>7)}function rl(i){for(var l={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},p={parameters:[],results:i[0]=="v"?[]:[l[i[0]]]},_=1;_<i.length;++_)p.parameters.push(l[i[_]]),i[_]==="j"&&p.parameters.push("i32");return p}function nl(i,l){var p=i.slice(0,1),_=i.slice(1),g={i:127,p:127,j:126,f:125,d:124};l.push(96),Ii(_.length,l);for(var w=0;w<_.length;++w)l.push(g[_[w]]);p=="v"?l.push(0):l.push(1,g[p])}function il(i,l){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(rl(l),i);var p=[1];nl(l,p);var _=[0,97,115,109,1,0,0,0,1];Ii(p.length,_),_.push.apply(_,p),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var g=new WebAssembly.Module(new Uint8Array(_)),w=new WebAssembly.Instance(g,{e:{f:i}}),I=w.exports.f;return I}function ol(i,l){if(gt)for(var p=i;p<i+l;p++){var _=Be(p);_&&gt.set(_,p)}}var gt=void 0,Dn=[];function sl(){if(Dn.length)return Dn.pop();try{G.grow(1)}catch(i){throw i instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":i}return G.length-1}function ki(i,l){G.set(i,l),nr[i]=G.get(i)}function al(i,l){if(gt||(gt=new WeakMap,ol(0,G.length)),gt.has(i))return gt.get(i);var p=sl();try{ki(p,i)}catch(g){if(!(g instanceof TypeError))throw g;var _=il(i,l);ki(p,_)}return gt.set(i,p),p}function ll(i){gt.delete(Be(i)),Dn.push(i)}var zi=function(i,l,p,_){i||(i=this),this.parent=i,this.mount=i.mount,this.mounted=null,this.id=m.nextInode++,this.name=l,this.mode=p,this.node_ops={},this.stream_ops={},this.rdev=_},Dr=365,Br=146;Object.defineProperties(zi.prototype,{read:{get:function(){return(this.mode&Dr)===Dr},set:function(i){i?this.mode|=Dr:this.mode&=~Dr}},write:{get:function(){return(this.mode&Br)===Br},set:function(i){i?this.mode|=Br:this.mode&=~Br}},isFolder:{get:function(){return m.isDir(this.mode)}},isDevice:{get:function(){return m.isChrdev(this.mode)}}}),m.FSNode=zi,m.staticInit();var ul={i:Oa,q:Ba,x:Pa,y:ja,u:Va,z:Ca,A:Ua,j:$a,r:Ha,B:Wa,v:Ga,o:Ya,w:Qa,t:Ja,p:tl,n:Op,s:Dp,g:Ip,e:zp,c:Sp,f:Ap,C:Fp,b:Ep,l:Np,d:xp,k:Mp,a:kp,h:Rp,m:Tp},v_=Aa(),cl=e.___wasm_call_ctors=function(){return(cl=e.___wasm_call_ctors=e.asm.E).apply(null,arguments)},fl=e._glp_printf=function(){return(fl=e._glp_printf=e.asm.F).apply(null,arguments)},pl=e._glp_alloc=function(){return(pl=e._glp_alloc=e.asm.G).apply(null,arguments)},dl=e._glp_free=function(){return(dl=e._glp_free=e.asm.H).apply(null,arguments)},ml=e._glp_adv_basis=function(){return(ml=e._glp_adv_basis=e.asm.I).apply(null,arguments)},_l=e._glp_std_basis=function(){return(_l=e._glp_std_basis=e.asm.J).apply(null,arguments)},hl=e._glp_set_row_stat=function(){return(hl=e._glp_set_row_stat=e.asm.K).apply(null,arguments)},gl=e._glp_set_col_stat=function(){return(gl=e._glp_set_col_stat=e.asm.L).apply(null,arguments)},vl=e._glp_assert_=function(){return(vl=e._glp_assert_=e.asm.M).apply(null,arguments)},yl=e._glp_asnprob_hall=function(){return(yl=e._glp_asnprob_hall=e.asm.O).apply(null,arguments)},bl=e._glp_check_asnprob=function(){return(bl=e._glp_check_asnprob=e.asm.P).apply(null,arguments)},wl=e._glp_asnprob_lp=function(){return(wl=e._glp_asnprob_lp=e.asm.Q).apply(null,arguments)},xl=e._glp_erase_prob=function(){return(xl=e._glp_erase_prob=e.asm.R).apply(null,arguments)},Sl=e._glp_set_prob_name=function(){return(Sl=e._glp_set_prob_name=e.asm.S).apply(null,arguments)},El=e._glp_set_obj_dir=function(){return(El=e._glp_set_obj_dir=e.asm.T).apply(null,arguments)},Il=e._glp_add_rows=function(){return(Il=e._glp_add_rows=e.asm.U).apply(null,arguments)},kl=e._glp_set_row_name=function(){return(kl=e._glp_set_row_name=e.asm.V).apply(null,arguments)},zl=e._glp_set_row_bnds=function(){return(zl=e._glp_set_row_bnds=e.asm.W).apply(null,arguments)},Ml=e._glp_add_cols=function(){return(Ml=e._glp_add_cols=e.asm.X).apply(null,arguments)},Al=e._glp_set_col_name=function(){return(Al=e._glp_set_col_name=e.asm.Y).apply(null,arguments)},Tl=e._glp_set_mat_col=function(){return(Tl=e._glp_set_mat_col=e.asm.Z).apply(null,arguments)},Rl=e._glp_set_col_bnds=function(){return(Rl=e._glp_set_col_bnds=e.asm._).apply(null,arguments)},Ol=e._glp_set_obj_coef=function(){return(Ol=e._glp_set_obj_coef=e.asm.$).apply(null,arguments)},Nl=e._glp_asnprob_okalg=function(){return(Nl=e._glp_asnprob_okalg=e.asm.aa).apply(null,arguments)},Fl=e._glp_check_cnfsat=function(){return(Fl=e._glp_check_cnfsat=e.asm.ba).apply(null,arguments)},Dl=e._glp_init_cpxcp=function(){return(Dl=e._glp_init_cpxcp=e.asm.ca).apply(null,arguments)},Bl=e._glp_read_lp=function(){return(Bl=e._glp_read_lp=e.asm.da).apply(null,arguments)},Mi=e._malloc=function(){return(Mi=e._malloc=e.asm.ea).apply(null,arguments)},Pl=e._glp_create_index=function(){return(Pl=e._glp_create_index=e.asm.fa).apply(null,arguments)},jl=e._glp_set_obj_name=function(){return(jl=e._glp_set_obj_name=e.asm.ga).apply(null,arguments)},Vl=e._glp_find_row=function(){return(Vl=e._glp_find_row=e.asm.ha).apply(null,arguments)},Ll=e._glp_set_mat_row=function(){return(Ll=e._glp_set_mat_row=e.asm.ia).apply(null,arguments)},Cl=e._glp_get_col_name=function(){return(Cl=e._glp_get_col_name=e.asm.ja).apply(null,arguments)},Ul=e._glp_get_num_int=function(){return(Ul=e._glp_get_num_int=e.asm.ka).apply(null,arguments)},$l=e._glp_get_num_bin=function(){return($l=e._glp_get_num_bin=e.asm.la).apply(null,arguments)},Hl=e._glp_delete_index=function(){return(Hl=e._glp_delete_index=e.asm.ma).apply(null,arguments)},Wl=e._glp_sort_matrix=function(){return(Wl=e._glp_sort_matrix=e.asm.na).apply(null,arguments)},ql=e._glp_set_col_kind=function(){return(ql=e._glp_set_col_kind=e.asm.oa).apply(null,arguments)},Xl=e._free=function(){return(Xl=e._free=e.asm.pa).apply(null,arguments)},Gl=e._glp_write_lp=function(){return(Gl=e._glp_write_lp=e.asm.qa).apply(null,arguments)},Yl=e._glp_get_obj_name=function(){return(Yl=e._glp_get_obj_name=e.asm.ra).apply(null,arguments)},Kl=e._glp_get_row_name=function(){return(Kl=e._glp_get_row_name=e.asm.sa).apply(null,arguments)},Ql=e._glp_find_col=function(){return(Ql=e._glp_find_col=e.asm.ta).apply(null,arguments)},Zl=e._glp_cpp=function(){return(Zl=e._glp_cpp=e.asm.ua).apply(null,arguments)},Jl=e._glp_top_sort=function(){return(Jl=e._glp_top_sort=e.asm.va).apply(null,arguments)},eu=e._glp_cpx_basis=function(){return(eu=e._glp_cpx_basis=e.asm.wa).apply(null,arguments)},tu=e._glp_get_num_rows=function(){return(tu=e._glp_get_num_rows=e.asm.xa).apply(null,arguments)},ru=e._glp_get_num_cols=function(){return(ru=e._glp_get_num_cols=e.asm.ya).apply(null,arguments)},nu=e._glp_get_row_type=function(){return(nu=e._glp_get_row_type=e.asm.za).apply(null,arguments)},iu=e._glp_get_row_lb=function(){return(iu=e._glp_get_row_lb=e.asm.Aa).apply(null,arguments)},ou=e._glp_get_row_ub=function(){return(ou=e._glp_get_row_ub=e.asm.Ba).apply(null,arguments)},su=e._glp_get_col_type=function(){return(su=e._glp_get_col_type=e.asm.Ca).apply(null,arguments)},au=e._glp_get_col_lb=function(){return(au=e._glp_get_col_lb=e.asm.Da).apply(null,arguments)},lu=e._glp_get_col_ub=function(){return(lu=e._glp_get_col_ub=e.asm.Ea).apply(null,arguments)},uu=e._glp_get_obj_coef=function(){return(uu=e._glp_get_obj_coef=e.asm.Fa).apply(null,arguments)},cu=e._glp_get_obj_dir=function(){return(cu=e._glp_get_obj_dir=e.asm.Ga).apply(null,arguments)},fu=e._glp_get_mat_col=function(){return(fu=e._glp_get_mat_col=e.asm.Ha).apply(null,arguments)},pu=e._glp_create_graph=function(){return(pu=e._glp_create_graph=e.asm.Ia).apply(null,arguments)},du=e._glp_set_graph_name=function(){return(du=e._glp_set_graph_name=e.asm.Ja).apply(null,arguments)},mu=e._glp_add_vertices=function(){return(mu=e._glp_add_vertices=e.asm.Ka).apply(null,arguments)},_u=e._glp_set_vertex_name=function(){return(_u=e._glp_set_vertex_name=e.asm.La).apply(null,arguments)},hu=e._glp_add_arc=function(){return(hu=e._glp_add_arc=e.asm.Ma).apply(null,arguments)},gu=e._glp_del_vertices=function(){return(gu=e._glp_del_vertices=e.asm.Na).apply(null,arguments)},vu=e._glp_del_arc=function(){return(vu=e._glp_del_arc=e.asm.Oa).apply(null,arguments)},yu=e._glp_erase_graph=function(){return(yu=e._glp_erase_graph=e.asm.Pa).apply(null,arguments)},bu=e._glp_delete_graph=function(){return(bu=e._glp_delete_graph=e.asm.Qa).apply(null,arguments)},wu=e._glp_create_v_index=function(){return(wu=e._glp_create_v_index=e.asm.Ra).apply(null,arguments)},xu=e._glp_find_vertex=function(){return(xu=e._glp_find_vertex=e.asm.Sa).apply(null,arguments)},Su=e._glp_delete_v_index=function(){return(Su=e._glp_delete_v_index=e.asm.Ta).apply(null,arguments)},Eu=e._glp_gridgen=function(){return(Eu=e._glp_gridgen=e.asm.Ua).apply(null,arguments)},Iu=e._glp_intfeas1=function(){return(Iu=e._glp_intfeas1=e.asm.Va).apply(null,arguments)},ku=e._glp_create_prob=function(){return(ku=e._glp_create_prob=e.asm.Wa).apply(null,arguments)},zu=e._glp_minisat1=function(){return(zu=e._glp_minisat1=e.asm.Xa).apply(null,arguments)},Mu=e._glp_delete_prob=function(){return(Mu=e._glp_delete_prob=e.asm.Ya).apply(null,arguments)},Au=e._glp_del_rows=function(){return(Au=e._glp_del_rows=e.asm.Za).apply(null,arguments)},Tu=e._glp_maxflow_ffalg=function(){return(Tu=e._glp_maxflow_ffalg=e.asm._a).apply(null,arguments)},Ru=e._glp_maxflow_lp=function(){return(Ru=e._glp_maxflow_lp=e.asm.$a).apply(null,arguments)},Ou=e._glp_mincost_lp=function(){return(Ou=e._glp_mincost_lp=e.asm.ab).apply(null,arguments)},Nu=e._glp_mincost_okalg=function(){return(Nu=e._glp_mincost_okalg=e.asm.bb).apply(null,arguments)},Fu=e._glp_mincost_relax4=function(){return(Fu=e._glp_mincost_relax4=e.asm.cb).apply(null,arguments)},Du=e._glp_mpl_alloc_wksp=function(){return(Du=e._glp_mpl_alloc_wksp=e.asm.db).apply(null,arguments)},Bu=e._glp_mpl_init_rand=function(){return(Bu=e._glp_mpl_init_rand=e.asm.eb).apply(null,arguments)},Pu=e._glp_mpl_read_model=function(){return(Pu=e._glp_mpl_read_model=e.asm.fb).apply(null,arguments)},ju=e._glp_mpl_read_data=function(){return(ju=e._glp_mpl_read_data=e.asm.gb).apply(null,arguments)},Vu=e._glp_mpl_generate=function(){return(Vu=e._glp_mpl_generate=e.asm.hb).apply(null,arguments)},Lu=e._glp_mpl_build_prob=function(){return(Lu=e._glp_mpl_build_prob=e.asm.ib).apply(null,arguments)},Cu=e._glp_mpl_postsolve=function(){return(Cu=e._glp_mpl_postsolve=e.asm.jb).apply(null,arguments)},Uu=e._glp_get_row_stat=function(){return(Uu=e._glp_get_row_stat=e.asm.kb).apply(null,arguments)},$u=e._glp_get_row_prim=function(){return($u=e._glp_get_row_prim=e.asm.lb).apply(null,arguments)},Hu=e._glp_get_row_dual=function(){return(Hu=e._glp_get_row_dual=e.asm.mb).apply(null,arguments)},Wu=e._glp_ipt_row_prim=function(){return(Wu=e._glp_ipt_row_prim=e.asm.nb).apply(null,arguments)},qu=e._glp_ipt_row_dual=function(){return(qu=e._glp_ipt_row_dual=e.asm.ob).apply(null,arguments)},Xu=e._glp_mip_row_val=function(){return(Xu=e._glp_mip_row_val=e.asm.pb).apply(null,arguments)},Gu=e._glp_get_col_stat=function(){return(Gu=e._glp_get_col_stat=e.asm.qb).apply(null,arguments)},Yu=e._glp_get_col_prim=function(){return(Yu=e._glp_get_col_prim=e.asm.rb).apply(null,arguments)},Ku=e._glp_get_col_dual=function(){return(Ku=e._glp_get_col_dual=e.asm.sb).apply(null,arguments)},Qu=e._glp_ipt_col_prim=function(){return(Qu=e._glp_ipt_col_prim=e.asm.tb).apply(null,arguments)},Zu=e._glp_ipt_col_dual=function(){return(Zu=e._glp_ipt_col_dual=e.asm.ub).apply(null,arguments)},Ju=e._glp_mip_col_val=function(){return(Ju=e._glp_mip_col_val=e.asm.vb).apply(null,arguments)},ec=e._glp_mpl_free_wksp=function(){return(ec=e._glp_mpl_free_wksp=e.asm.wb).apply(null,arguments)},tc=e._glp_init_mpscp=function(){return(tc=e._glp_init_mpscp=e.asm.xb).apply(null,arguments)},rc=e._glp_read_mps=function(){return(rc=e._glp_read_mps=e.asm.yb).apply(null,arguments)},nc=e._glp_write_mps=function(){return(nc=e._glp_write_mps=e.asm.zb).apply(null,arguments)},ic=e._glp_netgen=function(){return(ic=e._glp_netgen=e.asm.Ab).apply(null,arguments)},oc=e._glp_npp_alloc_wksp=function(){return(oc=e._glp_npp_alloc_wksp=e.asm.Bb).apply(null,arguments)},sc=e._glp_npp_load_prob=function(){return(sc=e._glp_npp_load_prob=e.asm.Cb).apply(null,arguments)},ac=e._glp_npp_preprocess1=function(){return(ac=e._glp_npp_preprocess1=e.asm.Db).apply(null,arguments)},lc=e._glp_npp_build_prob=function(){return(lc=e._glp_npp_build_prob=e.asm.Eb).apply(null,arguments)},uc=e._glp_npp_postprocess=function(){return(uc=e._glp_npp_postprocess=e.asm.Fb).apply(null,arguments)},cc=e._glp_get_status=function(){return(cc=e._glp_get_status=e.asm.Gb).apply(null,arguments)},fc=e._glp_ipt_status=function(){return(fc=e._glp_ipt_status=e.asm.Hb).apply(null,arguments)},pc=e._glp_mip_status=function(){return(pc=e._glp_mip_status=e.asm.Ib).apply(null,arguments)},dc=e._glp_npp_obtain_sol=function(){return(dc=e._glp_npp_obtain_sol=e.asm.Jb).apply(null,arguments)},mc=e._glp_npp_free_wksp=function(){return(mc=e._glp_npp_free_wksp=e.asm.Kb).apply(null,arguments)},_c=e._glp_print_ipt=function(){return(_c=e._glp_print_ipt=e.asm.Lb).apply(null,arguments)},hc=e._glp_print_mip=function(){return(hc=e._glp_print_mip=e.asm.Mb).apply(null,arguments)},gc=e._glp_load_matrix=function(){return(gc=e._glp_load_matrix=e.asm.Nb).apply(null,arguments)},vc=e._glp_check_dup=function(){return(vc=e._glp_check_dup=e.asm.Ob).apply(null,arguments)},yc=e._glp_del_cols=function(){return(yc=e._glp_del_cols=e.asm.Pb).apply(null,arguments)},bc=e._glp_copy_prob=function(){return(bc=e._glp_copy_prob=e.asm.Qb).apply(null,arguments)},wc=e._glp_get_bfcp=function(){return(wc=e._glp_get_bfcp=e.asm.Rb).apply(null,arguments)},xc=e._glp_set_bfcp=function(){return(xc=e._glp_set_bfcp=e.asm.Sb).apply(null,arguments)},Sc=e._glp_get_prob_name=function(){return(Sc=e._glp_get_prob_name=e.asm.Tb).apply(null,arguments)},Ec=e._glp_get_num_nz=function(){return(Ec=e._glp_get_num_nz=e.asm.Ub).apply(null,arguments)},Ic=e._glp_get_mat_row=function(){return(Ic=e._glp_get_mat_row=e.asm.Vb).apply(null,arguments)},kc=e._glp_set_rii=function(){return(kc=e._glp_set_rii=e.asm.Wb).apply(null,arguments)},zc=e._glp_set_sjj=function(){return(zc=e._glp_set_sjj=e.asm.Xb).apply(null,arguments)},Mc=e._glp_get_rii=function(){return(Mc=e._glp_get_rii=e.asm.Yb).apply(null,arguments)},Ac=e._glp_get_sjj=function(){return(Ac=e._glp_get_sjj=e.asm.Zb).apply(null,arguments)},Tc=e._glp_unscale_prob=function(){return(Tc=e._glp_unscale_prob=e.asm._b).apply(null,arguments)},Rc=e._glp_print_ranges=function(){return(Rc=e._glp_print_ranges=e.asm.$b).apply(null,arguments)},Oc=e._glp_bf_exists=function(){return(Oc=e._glp_bf_exists=e.asm.ac).apply(null,arguments)},Nc=e._glp_version=function(){return(Nc=e._glp_version=e.asm.bc).apply(null,arguments)},Fc=e._glp_analyze_bound=function(){return(Fc=e._glp_analyze_bound=e.asm.cc).apply(null,arguments)},Dc=e._glp_analyze_coef=function(){return(Dc=e._glp_analyze_coef=e.asm.dc).apply(null,arguments)},Bc=e._glp_print_sol=function(){return(Bc=e._glp_print_sol=e.asm.ec).apply(null,arguments)},Pc=e._glp_read_asnprob=function(){return(Pc=e._glp_read_asnprob=e.asm.fc).apply(null,arguments)},jc=e._glp_read_ccdata=function(){return(jc=e._glp_read_ccdata=e.asm.gc).apply(null,arguments)},Vc=e._glp_read_graph=function(){return(Vc=e._glp_read_graph=e.asm.hc).apply(null,arguments)},Lc=e._glp_read_cnfsat=function(){return(Lc=e._glp_read_cnfsat=e.asm.ic).apply(null,arguments)},Cc=e._glp_read_ipt=function(){return(Cc=e._glp_read_ipt=e.asm.jc).apply(null,arguments)},Uc=e._glp_read_maxflow=function(){return(Uc=e._glp_read_maxflow=e.asm.kc).apply(null,arguments)},$c=e._glp_read_mincost=function(){return($c=e._glp_read_mincost=e.asm.lc).apply(null,arguments)},Hc=e._glp_read_mip=function(){return(Hc=e._glp_read_mip=e.asm.mc).apply(null,arguments)},Wc=e._glp_read_prob=function(){return(Wc=e._glp_read_prob=e.asm.nc).apply(null,arguments)},qc=e._glp_read_sol=function(){return(qc=e._glp_read_sol=e.asm.oc).apply(null,arguments)},Xc=e._glp_rmfgen=function(){return(Xc=e._glp_rmfgen=e.asm.pc).apply(null,arguments)},Gc=e._glp_strong_comp=function(){return(Gc=e._glp_strong_comp=e.asm.qc).apply(null,arguments)},Yc=e._glp_weak_comp=function(){return(Yc=e._glp_weak_comp=e.asm.rc).apply(null,arguments)},Kc=e._glp_wclique_exact=function(){return(Kc=e._glp_wclique_exact=e.asm.sc).apply(null,arguments)},Qc=e._glp_write_asnprob=function(){return(Qc=e._glp_write_asnprob=e.asm.tc).apply(null,arguments)},Zc=e._glp_write_ccdata=function(){return(Zc=e._glp_write_ccdata=e.asm.uc).apply(null,arguments)},Jc=e._glp_write_graph=function(){return(Jc=e._glp_write_graph=e.asm.vc).apply(null,arguments)},ef=e._glp_write_cnfsat=function(){return(ef=e._glp_write_cnfsat=e.asm.wc).apply(null,arguments)},tf=e._glp_write_ipt=function(){return(tf=e._glp_write_ipt=e.asm.xc).apply(null,arguments)},rf=e._glp_write_maxflow=function(){return(rf=e._glp_write_maxflow=e.asm.yc).apply(null,arguments)},nf=e._glp_write_mincost=function(){return(nf=e._glp_write_mincost=e.asm.zc).apply(null,arguments)},of=e._glp_write_mip=function(){return(of=e._glp_write_mip=e.asm.Ac).apply(null,arguments)},sf=e._glp_write_prob=function(){return(sf=e._glp_write_prob=e.asm.Bc).apply(null,arguments)},af=e._glp_write_sol=function(){return(af=e._glp_write_sol=e.asm.Cc).apply(null,arguments)},lf=e._glp_realloc=function(){return(lf=e._glp_realloc=e.asm.Dc).apply(null,arguments)},uf=e._glp_simplex=function(){return(uf=e._glp_simplex=e.asm.Ec).apply(null,arguments)},cf=e._glp_scale_prob=function(){return(cf=e._glp_scale_prob=e.asm.Fc).apply(null,arguments)},ff=e._glp_init_smcp=function(){return(ff=e._glp_init_smcp=e.asm.Gc).apply(null,arguments)},pf=e._glp_factorize=function(){return(pf=e._glp_factorize=e.asm.Hc).apply(null,arguments)},df=e._glp_get_prim_stat=function(){return(df=e._glp_get_prim_stat=e.asm.Ic).apply(null,arguments)},mf=e._glp_get_dual_stat=function(){return(mf=e._glp_get_dual_stat=e.asm.Jc).apply(null,arguments)},_f=e._glp_get_obj_val=function(){return(_f=e._glp_get_obj_val=e.asm.Kc).apply(null,arguments)},hf=e._glp_get_unbnd_ray=function(){return(hf=e._glp_get_unbnd_ray=e.asm.Lc).apply(null,arguments)},gf=e._glp_get_it_cnt=function(){return(gf=e._glp_get_it_cnt=e.asm.Mc).apply(null,arguments)},vf=e._glp_set_it_cnt=function(){return(vf=e._glp_set_it_cnt=e.asm.Nc).apply(null,arguments)},yf=e._glp_exact=function(){return(yf=e._glp_exact=e.asm.Oc).apply(null,arguments)},bf=e._glp_time=function(){return(bf=e._glp_time=e.asm.Pc).apply(null,arguments)},wf=e._glp_interior=function(){return(wf=e._glp_interior=e.asm.Qc).apply(null,arguments)},xf=e._glp_init_iptcp=function(){return(xf=e._glp_init_iptcp=e.asm.Rc).apply(null,arguments)},Sf=e._glp_ipt_obj_val=function(){return(Sf=e._glp_ipt_obj_val=e.asm.Sc).apply(null,arguments)},Ef=e._glp_get_col_kind=function(){return(Ef=e._glp_get_col_kind=e.asm.Tc).apply(null,arguments)},If=e._glp_intopt=function(){return(If=e._glp_intopt=e.asm.Uc).apply(null,arguments)},kf=e._glp_init_iocp=function(){return(kf=e._glp_init_iocp=e.asm.Vc).apply(null,arguments)},zf=e._glp_mip_obj_val=function(){return(zf=e._glp_mip_obj_val=e.asm.Wc).apply(null,arguments)},Mf=e._glp_bf_updated=function(){return(Mf=e._glp_bf_updated=e.asm.Xc).apply(null,arguments)},Af=e._glp_get_bhead=function(){return(Af=e._glp_get_bhead=e.asm.Yc).apply(null,arguments)},Tf=e._glp_get_row_bind=function(){return(Tf=e._glp_get_row_bind=e.asm.Zc).apply(null,arguments)},Rf=e._glp_get_col_bind=function(){return(Rf=e._glp_get_col_bind=e.asm._c).apply(null,arguments)},Of=e._glp_ftran=function(){return(Of=e._glp_ftran=e.asm.$c).apply(null,arguments)},Nf=e._glp_btran=function(){return(Nf=e._glp_btran=e.asm.ad).apply(null,arguments)},Ff=e._glp_warm_up=function(){return(Ff=e._glp_warm_up=e.asm.bd).apply(null,arguments)},Df=e._glp_eval_tab_row=function(){return(Df=e._glp_eval_tab_row=e.asm.cd).apply(null,arguments)},Bf=e._glp_eval_tab_col=function(){return(Bf=e._glp_eval_tab_col=e.asm.dd).apply(null,arguments)},Pf=e._glp_transform_row=function(){return(Pf=e._glp_transform_row=e.asm.ed).apply(null,arguments)},jf=e._glp_transform_col=function(){return(jf=e._glp_transform_col=e.asm.fd).apply(null,arguments)},Vf=e._glp_prim_rtest=function(){return(Vf=e._glp_prim_rtest=e.asm.gd).apply(null,arguments)},Lf=e._glp_dual_rtest=function(){return(Lf=e._glp_dual_rtest=e.asm.hd).apply(null,arguments)},Cf=e._glp_ios_reason=function(){return(Cf=e._glp_ios_reason=e.asm.id).apply(null,arguments)},Uf=e._glp_ios_get_prob=function(){return(Uf=e._glp_ios_get_prob=e.asm.jd).apply(null,arguments)},$f=e._glp_ios_tree_size=function(){return($f=e._glp_ios_tree_size=e.asm.kd).apply(null,arguments)},Hf=e._glp_ios_curr_node=function(){return(Hf=e._glp_ios_curr_node=e.asm.ld).apply(null,arguments)},Wf=e._glp_ios_next_node=function(){return(Wf=e._glp_ios_next_node=e.asm.md).apply(null,arguments)},qf=e._glp_ios_prev_node=function(){return(qf=e._glp_ios_prev_node=e.asm.nd).apply(null,arguments)},Xf=e._glp_ios_up_node=function(){return(Xf=e._glp_ios_up_node=e.asm.od).apply(null,arguments)},Gf=e._glp_ios_node_level=function(){return(Gf=e._glp_ios_node_level=e.asm.pd).apply(null,arguments)},Yf=e._glp_ios_node_bound=function(){return(Yf=e._glp_ios_node_bound=e.asm.qd).apply(null,arguments)},Kf=e._glp_ios_best_node=function(){return(Kf=e._glp_ios_best_node=e.asm.rd).apply(null,arguments)},Qf=e._glp_ios_mip_gap=function(){return(Qf=e._glp_ios_mip_gap=e.asm.sd).apply(null,arguments)},Zf=e._glp_ios_node_data=function(){return(Zf=e._glp_ios_node_data=e.asm.td).apply(null,arguments)},Jf=e._glp_ios_row_attr=function(){return(Jf=e._glp_ios_row_attr=e.asm.ud).apply(null,arguments)},ep=e._glp_ios_pool_size=function(){return(ep=e._glp_ios_pool_size=e.asm.vd).apply(null,arguments)},tp=e._glp_ios_add_row=function(){return(tp=e._glp_ios_add_row=e.asm.wd).apply(null,arguments)},rp=e._glp_ios_del_row=function(){return(rp=e._glp_ios_del_row=e.asm.xd).apply(null,arguments)},np=e._glp_ios_clear_pool=function(){return(np=e._glp_ios_clear_pool=e.asm.yd).apply(null,arguments)},ip=e._glp_ios_can_branch=function(){return(ip=e._glp_ios_can_branch=e.asm.zd).apply(null,arguments)},op=e._glp_ios_branch_upon=function(){return(op=e._glp_ios_branch_upon=e.asm.Ad).apply(null,arguments)},sp=e._glp_ios_select_node=function(){return(sp=e._glp_ios_select_node=e.asm.Bd).apply(null,arguments)},ap=e._glp_ios_heur_sol=function(){return(ap=e._glp_ios_heur_sol=e.asm.Cd).apply(null,arguments)},lp=e._glp_ios_terminate=function(){return(lp=e._glp_ios_terminate=e.asm.Dd).apply(null,arguments)},up=e._glp_difftime=function(){return(up=e._glp_difftime=e.asm.Ed).apply(null,arguments)},cp=e._glp_mem_usage=function(){return(cp=e._glp_mem_usage=e.asm.Fd).apply(null,arguments)},fp=e._glp_mem_limit=function(){return(fp=e._glp_mem_limit=e.asm.Gd).apply(null,arguments)},pp=e._glp_init_env=function(){return(pp=e._glp_init_env=e.asm.Hd).apply(null,arguments)},dp=e._glp_config=function(){return(dp=e._glp_config=e.asm.Id).apply(null,arguments)},mp=e._glp_free_env=function(){return(mp=e._glp_free_env=e.asm.Jd).apply(null,arguments)},_p=e._glp_at_error=function(){return(_p=e._glp_at_error=e.asm.Kd).apply(null,arguments)},hp=e._glp_error_hook=function(){return(hp=e._glp_error_hook=e.asm.Ld).apply(null,arguments)},gp=e._glp_puts=function(){return(gp=e._glp_puts=e.asm.Md).apply(null,arguments)},vp=e._glp_term_out=function(){return(vp=e._glp_term_out=e.asm.Nd).apply(null,arguments)},yp=e._glp_term_hook=function(){return(yp=e._glp_term_hook=e.asm.Od).apply(null,arguments)},bp=e._glp_open_tee=function(){return(bp=e._glp_open_tee=e.asm.Pd).apply(null,arguments)},wp=e._glp_close_tee=function(){return(wp=e._glp_close_tee=e.asm.Qd).apply(null,arguments)},Ai=e.___errno_location=function(){return(Ai=e.___errno_location=e.asm.Rd).apply(null,arguments)},Pe=e._setThrew=function(){return(Pe=e._setThrew=e.asm.Sd).apply(null,arguments)},je=e.stackSave=function(){return(je=e.stackSave=e.asm.Td).apply(null,arguments)},Ve=e.stackRestore=function(){return(Ve=e.stackRestore=e.asm.Ud).apply(null,arguments)};function xp(i,l,p){var _=je();try{Be(i)(l,p)}catch(g){if(Ve(_),g!==g+0)throw g;Pe(1,0)}}function Sp(i,l,p){var _=je();try{return Be(i)(l,p)}catch(g){if(Ve(_),g!==g+0)throw g;Pe(1,0)}}function Ep(i,l){var p=je();try{Be(i)(l)}catch(_){if(Ve(p),_!==_+0)throw _;Pe(1,0)}}function Ip(i){var l=je();try{return Be(i)()}catch(p){if(Ve(l),p!==p+0)throw p;Pe(1,0)}}function kp(i,l,p,_){var g=je();try{Be(i)(l,p,_)}catch(w){if(Ve(g),w!==w+0)throw w;Pe(1,0)}}function zp(i,l){var p=je();try{return Be(i)(l)}catch(_){if(Ve(p),_!==_+0)throw _;Pe(1,0)}}function Mp(i,l,p,_){var g=je();try{Be(i)(l,p,_)}catch(w){if(Ve(g),w!==w+0)throw w;Pe(1,0)}}function Ap(i,l,p,_){var g=je();try{return Be(i)(l,p,_)}catch(w){if(Ve(g),w!==w+0)throw w;Pe(1,0)}}function Tp(i,l,p,_,g,w){var I=je();try{Be(i)(l,p,_,g,w)}catch(k){if(Ve(I),k!==k+0)throw k;Pe(1,0)}}function Rp(i,l,p,_,g,w){var I=je();try{Be(i)(l,p,_,g,w)}catch(k){if(Ve(I),k!==k+0)throw k;Pe(1,0)}}function Op(i,l){var p=je();try{return Be(i)(l)}catch(_){if(Ve(p),_!==_+0)throw _;Pe(1,0)}}function Np(i,l,p){var _=je();try{Be(i)(l,p)}catch(g){if(Ve(_),g!==g+0)throw g;Pe(1,0)}}function Fp(i,l,p,_,g,w){var I=je();try{return Be(i)(l,p,_,g,w)}catch(k){if(Ve(I),k!==k+0)throw k;Pe(1,0)}}function Dp(i,l,p){var _=je();try{return Be(i)(l,p)}catch(g){if(Ve(_),g!==g+0)throw g;Pe(1,0)}}e.UTF8ToString=D,e.stringToUTF8=O,e.lengthBytesUTF8=x,e.addFunction=al,e.removeFunction=ll,e.setValue=Ra,e.getValue=Ta,e.FS=m;var Pr;rr=function i(){Pr||Ti(),Pr||(rr=i)};function Ti(i){if(i=i||c,Mt>0||(ct(),Mt>0))return;function l(){Pr||(Pr=!0,e.calledRun=!0,!ve&&(It(),n(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),kt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),l()},1)):l()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Ti(),e.ready}})();typeof In=="object"&&typeof gi=="object"?gi.exports=hi:typeof define=="function"&&define.amd?define([],function(){return hi}):typeof In=="object"&&(In.Module=hi)});var ha=or((kn,_a)=>{"use strict";(function(t,r){typeof kn=="object"&&typeof _a<"u"?r(kn,ma()):typeof define=="function"&&define.amd?define(["exports","glpk-wasm"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.GLPK={},t.glpkWasm))})(kn,function(t,r){"use strict";function e(x){return x&&typeof x=="object"&&"default"in x?x:{default:x}}var n=e(r);function o(x,u){var b={};for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&u.indexOf(E)<0&&(b[E]=x[E]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var V=0,E=Object.getOwnPropertySymbols(x);V<E.length;V++)u.indexOf(E[V])<0&&Object.prototype.propertyIsEnumerable.call(x,E[V])&&(b[E[V]]=x[E[V]]);return b}function a(x,u,b,E){function V(q){return q instanceof b?q:new b(function(L){L(q)})}return new(b||(b=Promise))(function(q,L){function N(C){try{z(E.next(C))}catch(X){L(X)}}function B(C){try{z(E.throw(C))}catch(X){L(X)}}function z(C){C.done?q(C.value):V(C.value).then(N,B)}z((E=E.apply(x,u||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;let c,s;function d(x){return a(this,void 0,void 0,function*(){return c===void 0&&(c=x===void 0?n.default():n.default({locateFile(){return x}})),s=yield c,s})}var f;(function(x){(function(u){u[u.MIN=1]="MIN",u[u.MAX=2]="MAX"})(x.ObjectiveDirection||(x.ObjectiveDirection={})),function(u){u[u.FREE=1]="FREE",u[u.LB=2]="LB",u[u.UB=3]="UB",u[u.BOUNDED=4]="BOUNDED",u[u.FIXED=5]="FIXED"}(x.BoundType||(x.BoundType={})),function(u){u[u.BASIC=1]="BASIC",u[u.LB=2]="LB",u[u.UB=3]="UB",u[u.FREE=4]="FREE",u[u.FIXED=5]="FIXED"}(x.VariableStatus||(x.VariableStatus={})),function(u){u[u.CONTINUOUS=1]="CONTINUOUS",u[u.INTEGER=2]="INTEGER",u[u.BINARY=3]="BINARY"}(x.VariableType||(x.VariableType={})),function(u){u[u.GEOMETRIC_MEAN=1]="GEOMETRIC_MEAN",u[u.EQUILIBRATION=16]="EQUILIBRATION",u[u.POWER_TWO=32]="POWER_TWO",u[u.SKIP=64]="SKIP",u[u.AUTO=128]="AUTO"}(x.Scaling||(x.Scaling={})),function(u){u[u.BASIC=1]="BASIC",u[u.INTERIOR_POINT=2]="INTERIOR_POINT",u[u.MIXED_INTEGER=3]="MIXED_INTEGER"}(x.SolutionIndicator||(x.SolutionIndicator={})),function(u){u[u.UNDEFINED=1]="UNDEFINED",u[u.FEASIBLE=2]="FEASIBLE",u[u.INFEASIBLE=3]="INFEASIBLE",u[u.NO_FEASIBLE=4]="NO_FEASIBLE",u[u.OPTIMAL=5]="OPTIMAL",u[u.UNBOUNDED=6]="UNBOUNDED"}(x.Status||(x.Status={})),function(u){u[u.OFF=0]="OFF",u[u.ERR=1]="ERR",u[u.ON=2]="ON",u[u.ALL=3]="ALL",u[u.DBG=4]="DBG"}(x.MessageLevel||(x.MessageLevel={})),function(u){u[u.PRIMAL=1]="PRIMAL",u[u.DUALP=2]="DUALP",u[u.DUAL=3]="DUAL"}(x.Method||(x.Method={})),function(u){u[u.STD=17]="STD",u[u.PSE=34]="PSE"}(x.Pricing||(x.Pricing={})),function(u){u[u.STD=17]="STD",u[u.HAR=34]="HAR",u[u.FLIP=51]="FLIP"}(x.RatioTest||(x.RatioTest={})),function(u){u[u.NONE=0]="NONE",u[u.QMD=1]="QMD",u[u.AMD=2]="AMD",u[u.SYMAMD=3]="SYMAMD"}(x.OrderingAlgorithm||(x.OrderingAlgorithm={})),function(u){u[u.OK=0]="OK",u[u.EBADB=1]="EBADB",u[u.ESING=2]="ESING",u[u.ECOND=3]="ECOND",u[u.EBOUND=4]="EBOUND",u[u.EFAIL=5]="EFAIL",u[u.EOBJLL=6]="EOBJLL",u[u.EOBJUL=7]="EOBJUL",u[u.EITLIM=8]="EITLIM",u[u.ETMLIM=9]="ETMLIM",u[u.ENOPFS=10]="ENOPFS",u[u.ENODFS=11]="ENODFS",u[u.EROOT=12]="EROOT",u[u.ESTOP=13]="ESTOP",u[u.EMIPGAP=14]="EMIPGAP",u[u.ENOFEAS=15]="ENOFEAS",u[u.ENOCVG=16]="ENOCVG",u[u.EINSTAB=17]="EINSTAB",u[u.EDATA=18]="EDATA",u[u.ERANGE=19]="ERANGE"}(x.ReturnCode||(x.ReturnCode={})),function(u){u[u.FFV=1]="FFV",u[u.LFV=2]="LFV",u[u.MFV=3]="MFV",u[u.DTH=4]="DTH",u[u.PCH=5]="PCH"}(x.BranchingTechnique||(x.BranchingTechnique={})),function(u){u[u.DFS=1]="DFS",u[u.BFS=2]="BFS",u[u.BLB=3]="BLB",u[u.BPH=4]="BPH"}(x.BacktrackingTechnique||(x.BacktrackingTechnique={})),function(u){u[u.NONE=0]="NONE",u[u.ROOT=1]="ROOT",u[u.ALL=2]="ALL"}(x.PreprocessingTechnique||(x.PreprocessingTechnique={})),function(u){u[u.PE=1]="PE",u[u.PB=2]="PB",u[u.DE=3]="DE",u[u.DB=4]="DB",u[u.CS=5]="CS"}(x.ConditionIndicator||(x.ConditionIndicator={})),function(u){u[u.ROWGEN=1]="ROWGEN",u[u.BINGO=2]="BINGO",u[u.HEUR=3]="HEUR",u[u.CUTGEN=4]="CUTGEN",u[u.BRANCH=5]="BRANCH",u[u.SELECT=6]="SELECT",u[u.PREPRO=7]="PREPRO"}(x.ReasonCode||(x.ReasonCode={})),function(u){u[u.NO_BRNCH=0]="NO_BRNCH",u[u.DN_BRNCH=1]="DN_BRNCH",u[u.UP_BRNCH=2]="UP_BRNCH"}(x.BranchSelection||(x.BranchSelection={})),function(u){u[u.REG=0]="REG",u[u.LAZY=1]="LAZY",u[u.CUT=2]="CUT"}(x.RowOrigin||(x.RowOrigin={})),function(u){u[u.GMI=1]="GMI",u[u.MIR=2]="MIR",u[u.COV=3]="COV",u[u.CLQ=4]="CLQ"}(x.RowClass||(x.RowClass={})),function(u){u[u.DECK=1]="DECK",u[u.FILE=2]="FILE"}(x.MPSFormat||(x.MPSFormat={}))})(f||(f={}));function h(x,u){return x===void 0?u===void 0?f.BoundType.FREE:f.BoundType.UB:u===void 0?f.BoundType.LB:x===u?f.BoundType.FIXED:f.BoundType.BOUNDED}function v(x){let u=x.model.numConstrs,b=x.model.numVars,E=s._malloc((b+1)*12),V=new Float64Array(s.HEAPU8.buffer,E,b+1),q=new Int32Array(s.HEAPU8.buffer,E+(b+1)*8,b+1);s._glp_eval_tab_row(x.model.ptr,x instanceof Q?u+x.id:x.id,E+(b+1)*8,E);let L=Array.from(q.slice(1).filter(N=>N>0),(N,B)=>[N<=u?x.model.constrs[N-1]:x.model.vars[N-1-u],V[B+1]]);return s._free(E),L}function y(x){let u=x.model.numConstrs,b=s._malloc((u+1)*12),E=new Float64Array(s.HEAPU8.buffer,b,u+1),V=new Int32Array(s.HEAPU8.buffer,b+(u+1)*8,u+1);s._glp_eval_tab_col(x.model.ptr,x instanceof Q?u+x.id:x.id,b+(u+1)*8,b);let q=Array.from(V.slice(1).filter(L=>L>0),(L,N)=>[L<=u?x.model.constrs[L-1]:x.model.vars[L-1-u],E[N+1]]);return s._free(b),q}let A=new Map([[void 0,f.VariableType.CONTINUOUS],["c",f.VariableType.CONTINUOUS],["cont",f.VariableType.CONTINUOUS],["continuous",f.VariableType.CONTINUOUS],["i",f.VariableType.INTEGER],["int",f.VariableType.INTEGER],["integer",f.VariableType.INTEGER],["b",f.VariableType.BINARY],["bin",f.VariableType.BINARY],["binary",f.VariableType.BINARY]]),T=new Map(Array.from(A.entries(),([x,u])=>[u,x]));function $(x){let u=A.get(x);if(u===void 0)throw new Error(`unknown variable type '${x}'`);return u}let R=new Map([["basic",f.VariableStatus.BASIC],["lower-bound",f.VariableStatus.LB],["upper-bound",f.VariableStatus.UB],["free",f.VariableStatus.FREE],["fixed",f.VariableStatus.FIXED]]),P=new Map(Array.from(R.entries(),([x,u])=>[u,x]));class Q{get ptr(){return this.model.ptr}constructor(u,b,E){if(this._lb=0,this._ub=0,this.model=u,this._idx=b,E===void 0)return;let{obj:V,lb:q,ub:L,type:N,name:B}=E;V!==void 0&&(this.obj=V),this.setBounds(q,L),N!==void 0&&(this.type=N),B!==void 0&&(this.name=B)}get id(){return this._idx}setBounds(u,b){if(u===this._lb&&b===this._ub)return;this._lb=u,this._ub=b;let E=h(u,b);s._glp_set_col_bnds(this.ptr,this._idx,E,u||0,b||0)}set bounds([u,b]){this.setBounds(u,b)}set name(u){let b=s.lengthBytesUTF8(u)+1,E=s._malloc(b);s.stringToUTF8(u,E,b),s._glp_set_col_name(this.ptr,this._idx,E),s._free(E)}get name(){let u=s._glp_get_col_name(this.ptr,this._idx);return s.UTF8ToString(u)}set lb(u){this.setBounds(u,this.ub)}set ub(u){this.setBounds(this.lb,u)}get lb(){return this._lb}get ub(){return this._ub}get obj(){return s._glp_get_obj_coef(this.ptr,this._idx)}set obj(u){if(typeof u!="number")throw new Error("obj should be a number");s._glp_set_obj_coef(this.ptr,this._idx,u)}set type(u){s._glp_set_col_kind(this.ptr,this._idx,$(u))}get type(){return T.get(s._glp_get_col_kind(this.ptr,this._idx))}get value(){return s._glp_get_col_prim(this.ptr,this._idx)}get dual(){return s._glp_get_col_dual(this.ptr,this._idx)}get valueInt(){return s._glp_ipt_col_prim(this.ptr,this._idx)}get dualInt(){return s._glp_ipt_col_dual(this.ptr,this._idx)}get valueMIP(){return s._glp_mip_col_val(this.ptr,this._idx)}get status(){return P.get(s._glp_get_col_stat(this.ptr,this._idx))}get row(){return v(this)}get column(){return y(this)}}class J{get ptr(){return this.model.ptr}constructor(u,b,E){if(this._needsUpdate=!1,this.model=u,this._idx=b,this._coeffs=new Map,!E)return;let{lb:V,ub:q,coeffs:L,name:N}=E;this.setBounds(V,q),L!==void 0&&this.addCollection(L),N!==void 0&&(this.name=N)}get id(){return this._idx}set name(u){let b=s.lengthBytesUTF8(u)+1,E=s._malloc(b);s.stringToUTF8(u,E,b),s._glp_set_row_name(this.ptr,this._idx,E),s._free(E)}get name(){let u=s._glp_get_row_name(this.ptr,this._idx);return s.UTF8ToString(u)}setBounds(u,b){if(u===this._lb&&b===this._ub)return;let E=h(u,b);this._lb=u,this._ub=b,s._glp_set_row_bnds(this.ptr,this._idx,E,u||0,b||0)}set bounds([u,b]){this.setBounds(u,b)}set lb(u){this.setBounds(u,this._ub)}set ub(u){this.setBounds(this.lb,u)}get lb(){return this._lb}get ub(){return this._ub}add(u,b){if(b===void 0)return this.addCollection(u);if(!(u instanceof Q))throw new Error("variable should have type Variable");if(!b)return this;let E=(this._coeffs.get(u.id)||0)+b;return E?this._coeffs.set(u.id,E):this._coeffs.delete(u.id),this._needsUpdate=!0,this}addCollection(u){let b=u instanceof Array?u:u instanceof Map?u.entries():void 0;if(b===void 0)throw new Error("coeffs should have type Array or Map");for(let[E,V]of b){if(!(E instanceof Q))throw new Error("variable should have type Variable");if(!V)continue;let q=(this._coeffs.get(E.id)||0)+V;q?this._coeffs.set(E.id,q):this._coeffs.delete(E.id),this._needsUpdate=!0}return this}update(){if(!this._needsUpdate)return this;let u=this._coeffs.size+1,b=s._malloc(u*4),E=s._malloc(u*8),V=new Int32Array(s.HEAPU8.buffer,b,u),q=new Float64Array(s.HEAPU8.buffer,E,u);V[0]=0,q[0]=0;let L=0;for(let[N,B]of this._coeffs.entries())L++,V[L]=N,q[L]=B;return s._glp_set_mat_row(this.ptr,this._idx,u-1,b,E),s._free(b),s._free(E),this._needsUpdate=!1,this}get value(){return s._glp_get_row_prim(this.ptr,this._idx)}get dual(){return s._glp_get_row_dual(this.ptr,this._idx)}get valueInt(){return s._glp_ipt_row_prim(this.ptr,this._idx)}get dualInt(){return s._glp_ipt_row_dual(this.ptr,this._idx)}get valueMIP(){return s._glp_mip_row_val(this.ptr,this._idx)}get status(){return P.get(s._glp_get_row_stat(this.ptr,this._idx))}get row(){return v(this)}get column(){return y(this)}}let j=new Map([["optimal",f.Status.OPTIMAL],["feasible",f.Status.FEASIBLE],["infeasible",f.Status.INFEASIBLE],["no_feasible",f.Status.NO_FEASIBLE],["unbounded",f.Status.UNBOUNDED],["undefined",f.Status.UNDEFINED]]),Z=new Map(Array.from(j.entries(),([x,u])=>[u,x]));function Y(x){return Z.get(x)}function ne(x){let u={all:f.MessageLevel.ALL,on:f.MessageLevel.ON,off:f.MessageLevel.OFF,debug:f.MessageLevel.DBG,error:f.MessageLevel.ERR}[x];if(u===void 0)throw new Error(`unknown message level '${x}'`);return u}t.Interior=void 0,function(x){function u(E){let V={none:f.OrderingAlgorithm.NONE,qmd:f.OrderingAlgorithm.QMD,amd:f.OrderingAlgorithm.AMD,symamd:f.OrderingAlgorithm.SYMAMD}[E];if(V===void 0)throw new Error(`unknown ordering '${E}'`);return V}function b(E,V){let q=s._malloc(392);s._glp_init_iptcp(q),V.msgLevel!==void 0&&s.setValue(q,ne(V.msgLevel),"i32"),V.ordering!==void 0&&s.setValue(q+4,u(V.ordering),"i32");let L=s._glp_interior(E.ptr,q);switch(s._free(q),L){case f.ReturnCode.OK:return"ok";case f.ReturnCode.EFAIL:return"no_data";case f.ReturnCode.ENOCVG:return"no_convergence";case f.ReturnCode.EITLIM:return"iteration_limit";case f.ReturnCode.EINSTAB:return"instability";default:throw new Error(`unknown return code from interior: ${L}`)}}x.solve=b}(t.Interior||(t.Interior={})),t.Simplex=void 0,function(x){function u(B){let z={primal:f.Method.PRIMAL,dual:f.Method.DUAL,dual_primal:f.Method.DUALP}[B];if(z===void 0)throw new Error(`unknown method '${B}'`);return z}function b(B){let z={std:f.Pricing.STD,pse:f.Pricing.PSE}[B];if(z===void 0)throw new Error(`unknown pricing '${B}'`);return z}function E(B){let z={std:f.RatioTest.STD,harris:f.RatioTest.HAR,flipflop:f.RatioTest.FLIP}[B];if(z===void 0)throw new Error(`unknown ratioTest '${B}'`);return z}function V(B){switch(B){case f.ReturnCode.OK:return"ok";case f.ReturnCode.EBADB:return"basis_invalid";case f.ReturnCode.ESING:return"basis_singular";case f.ReturnCode.ECOND:return"basis_ill_conditioned";case f.ReturnCode.EBOUND:return"bounds_incorrect";case f.ReturnCode.EFAIL:return"failure";case f.ReturnCode.EOBJLL:return"objective_lower";case f.ReturnCode.EOBJUL:return"objective_upper";case f.ReturnCode.EITLIM:return"iteration_limit";case f.ReturnCode.ETMLIM:return"time_limit";case f.ReturnCode.ENOPFS:return"no_primal_feasible";case f.ReturnCode.ENODFS:return"no_dual_feasible";default:throw new Error(`unknown return code from simplex: ${B}`)}}function q(B){let z=s._malloc(352);return s._glp_init_smcp(z),B.msgLevel!==void 0&&s.setValue(z,ne(B.msgLevel),"i32"),B.method!==void 0&&s.setValue(z+4,u(B.method),"i32"),B.pricing!==void 0&&s.setValue(z+8,b(B.pricing),"i32"),B.ratioTest!==void 0&&s.setValue(z+12,E(B.ratioTest),"i32"),B.tolPrimal!==void 0&&s.setValue(z+16,B.tolPrimal,"double"),B.tolDual!==void 0&&s.setValue(z+24,B.tolDual,"double"),B.tolPivot!==void 0&&s.setValue(z+32,B.tolPivot,"double"),B.objLower!==void 0&&s.setValue(z+40,B.objLower,"double"),B.objUpper!==void 0&&s.setValue(z+48,B.objUpper,"double"),B.limitIter!==void 0&&s.setValue(z+56,B.limitIter,"i32"),B.limitTime!==void 0&&s.setValue(z+60,B.limitTime,"i32"),B.logFreq!==void 0&&s.setValue(z+64,B.logFreq,"i32"),B.logDelay!==void 0&&s.setValue(z+68,B.logDelay,"i32"),B.presolve!==void 0&&s.setValue(z+72,B.presolve?1:0,"i32"),z}function L(B,z){let C=q(z),X=s._glp_simplex(B.ptr,C);return s._free(C),V(X)}x.solve=L;function N(B,z){let C=q(z),X=s._glp_exact(B.ptr,C);return s._free(C),V(X)}x.solveExact=N}(t.Simplex||(t.Simplex={}));let me={row:f.ReasonCode.ROWGEN,improved:f.ReasonCode.BINGO,heuristic:f.ReasonCode.HEUR,cut:f.ReasonCode.CUTGEN,branch:f.ReasonCode.BRANCH,select:f.ReasonCode.SELECT,preprocessing:f.ReasonCode.PREPRO},_e=new Map(Object.entries(me).map(([x,u])=>[u,x])),ve={regular:f.RowOrigin.REG,lazy:f.RowOrigin.LAZY,cut:f.RowOrigin.CUT},he=new Map(Object.entries(ve).map(([x,u])=>[u,x])),De={gomory:f.RowClass.GMI,mir:f.RowClass.MIR,cover:f.RowClass.COV,clique:f.RowClass.CLQ},F=new Map(Object.entries(De).map(([x,u])=>[u,x])),S={down:f.BranchSelection.DN_BRNCH,up:f.BranchSelection.UP_BRNCH,general:f.BranchSelection.NO_BRNCH};class D{constructor(u,b){this.tree=u,this.idx=b}select(){s._glp_ios_select_node(this.tree.ptr,this.idx)}get next(){let u=s._glp_ios_next_node(this.tree.ptr,this.idx);if(u!==0)return new D(this.tree,u)}get previous(){let u=s._glp_ios_prev_node(this.tree.ptr,this.idx);if(u!==0)return new D(this.tree,u)}get parent(){let u=s._glp_ios_up_node(this.tree.ptr,this.idx);if(u!==0)return new D(this.tree,u)}get level(){return s._glp_ios_node_level(this.tree.ptr,this.idx)}get bound(){return s._glp_ios_node_bound(this.tree.ptr,this.idx)}}class M{constructor(u){this.ptr=u}static _alloc(){M._data===void 0&&(M._data=s._malloc(72))}get reason(){let u=s._glp_ios_reason(this.ptr),b=_e.get(u);if(b===void 0)throw new Error(`unknown reason code '${u}'`);return b}get model(){let u=s._glp_ios_get_prob(this.ptr);return O.fromPointer(u)}rowAttribute(u){return M._alloc(),s._glp_ios_row_attr(this.ptr,u,M._data),{level:s.getValue(M._data+0,"i32"),origin:he.get(s.getValue(M._data+4,"i32")),cls:F.get(s.getValue(M._data+8,"i32"))}}get gap(){return s._glp_ios_mip_gap(this.ptr)}setHeuristicSolution(u){let b=u.length,E=s._malloc(b*8),V=new Float64Array(s.HEAPU8.buffer,E,b);if(u instanceof Float64Array)u.set(V);else for(let[q,L]of u.entries())V[q]=L;s._glp_ios_heur_sol(this.ptr,E),s._free(E)}canBranch(u){return s._glp_ios_can_branch(this.ptr,u)}branchUpon(u,b){let E=S[b];if(E===void 0)throw new Error(`unknown branch selection '${b}'`);s._glp_ios_branch_upon(this.ptr,u,E)}terminate(){s._glp_ios_terminate(this.ptr)}get size(){M._alloc();let u=M._data;return s._glp_ios_tree_size(this.ptr,u,u+4,u+8),{active:s.getValue(u,"i32"),current:s.getValue(u+4,"i32"),total:s.getValue(u+8,"i32")}}get currentNode(){let u=s._glp_ios_curr_node(this.ptr);if(u!==0)return new D(this,u)}get bestNode(){let u=s._glp_ios_best_node(this.ptr);if(u!==0)return new D(this,u)}get firstNode(){let u=s._glp_ios_next_node(this.ptr,0);if(u!==0)return new D(this,u)}get lastNode(){let u=s._glp_ios_prev_node(this.ptr,0);if(u!==0)return new D(this,u)}get cutPoolSize(){return s._glp_ios_pool_size(this.ptr)}clearCutPool(){s._glp_ios_clear_pool(this.ptr)}}t.MIP=void 0,function(x){let u={ffv:f.BranchingTechnique.FFV,lfv:f.BranchingTechnique.LFV,mfv:f.BranchingTechnique.MFV,dth:f.BranchingTechnique.DTH,pch:f.BranchingTechnique.PCH,first_fractional:f.BranchingTechnique.FFV,last_fractional:f.BranchingTechnique.LFV,most_fractional:f.BranchingTechnique.MFV,driebeck_tomlin:f.BranchingTechnique.DTH,hybrid_pseudocost:f.BranchingTechnique.PCH},b={dfs:f.BacktrackingTechnique.DFS,bfs:f.BacktrackingTechnique.BFS,blb:f.BacktrackingTechnique.BLB,bph:f.BacktrackingTechnique.BPH,depth_first:f.BacktrackingTechnique.DFS,breadth_first:f.BacktrackingTechnique.BFS,best_bound:f.BacktrackingTechnique.BLB,best_projection:f.BacktrackingTechnique.BPH},E={none:f.PreprocessingTechnique.NONE,root:f.PreprocessingTechnique.ROOT,all:f.PreprocessingTechnique.ALL};function V(N){switch(N){case f.ReturnCode.OK:return"ok";case f.ReturnCode.EBOUND:return"bounds_incorrect";case f.ReturnCode.EROOT:return"no_root_basis";case f.ReturnCode.ENOPFS:return"no_primal_feasible";case f.ReturnCode.ENODFS:return"no_dual_feasible";case f.ReturnCode.EFAIL:return"failure";case f.ReturnCode.EMIPGAP:return"mip_gap_tolerance";case f.ReturnCode.ETMLIM:return"time_limit";case f.ReturnCode.ESTOP:return"stopped";default:throw new Error(`unknown return code from intopt: ${N}`)}}function q(N){let B=s._malloc(328);s._glp_init_iocp(B);let z;if(N.msgLevel!==void 0&&s.setValue(B,ne(N.msgLevel),"i32"),N.branching!==void 0){if(z=u[N.branching],z===void 0)throw new Error(`unknown branching technique '${N.branching}'`);s.setValue(B+4,z,"i32")}if(N.backtracking!==void 0){if(z=b[N.backtracking],z===void 0)throw new Error(`unknown backtracking technique '${N.backtracking}'`);s.setValue(B+8,z,"i32")}if(N.tolInt!==void 0&&s.setValue(B+16,N.tolInt,"double"),N.tolObj!==void 0&&s.setValue(B+24,N.tolObj,"double"),N.limitTime!==void 0&&s.setValue(B+32,N.limitTime,"i32"),N.logFreq!==void 0&&s.setValue(B+36,N.logFreq,"i32"),N.logDelay!==void 0&&s.setValue(B+40,N.logDelay,"i32"),N.callbackPtr!==void 0&&s.setValue(B+44,N.callbackPtr,"*"),N.preprocessing!==void 0){if(z=E[N.preprocessing],z===void 0)throw new Error(`unknown preprocessing technique '${N.preprocessing}'`);s.setValue(B+56,z,"i32")}return N.gapMIP!==void 0&&s.setValue(B+64,N.gapMIP,"double"),N.cutsMIR!==void 0&&s.setValue(B+72,N.cutsMIR?1:0,"i32"),N.cutsGomory!==void 0&&s.setValue(B+76,N.cutsGomory?1:0,"i32"),N.cutsCover!==void 0&&s.setValue(B+80,N.cutsCover?1:0,"i32"),N.cutsClique!==void 0&&s.setValue(B+84,N.cutsClique?1:0,"i32"),N.presolve!==void 0&&s.setValue(B+88,N.presolve?1:0,"i32"),N.binarize!==void 0&&s.setValue(B+92,N.binarize?1:0,"i32"),N.heuristicFP!==void 0&&s.setValue(B+96,N.heuristicFP?1:0,"i32"),N.heuristicPS!==void 0&&s.setValue(B+100,N.heuristicPS?1:0,"i32"),N.limitProxy!==void 0&&s.setValue(B+104,N.limitProxy,"i32"),N.heuristicRound!==void 0&&s.setValue(B+108,N.heuristicRound?1:0,"i32"),B}function L(N,B){if(B.callback!==void 0){let X=B.callback;B.callbackPtr=s.addFunction(G=>X(new M(G)),"vii")}let z=q(B||{}),C=s._glp_intopt(N.ptr,z);return s._free(z),B.callback!==void 0&&(s.removeFunction(B.callbackPtr),B.callbackPtr=void 0),V(C)}x.solve=L}(t.MIP||(t.MIP={}));class O{get vars(){return this._vars}get constrs(){return this._constrs}constructor(u){if(this._vars=[],this._constrs=[],s===void 0)throw new Error("wasm module not loaded");if(this.ptr=s._glp_create_prob(),u===void 0)return;let{name:b,sense:E}=u;b!==void 0&&(this.name=b),E!==void 0&&(this.sense=E)}set name(u){let b=s.lengthBytesUTF8(u)+1,E=s._malloc(b);s.stringToUTF8(u,E,b),s._glp_set_prob_name(this.ptr,E),s._free(E)}get name(){let u=s._glp_get_prob_name(this.ptr);return s.UTF8ToString(u)}static fromPointer(u){let b=Object.create(O.prototype);return b.ptr=u,b}get value(){return s._glp_get_obj_val(this.ptr)}get valueInt(){return s._glp_ipt_obj_val(this.ptr)}get valueMIP(){return s._glp_mip_obj_val(this.ptr)}get numVars(){return s._glp_get_num_cols(this.ptr)}get numConstrs(){return s._glp_get_num_rows(this.ptr)}get numNZs(){return s._glp_get_num_nz(this.ptr)}get numBinary(){return s._glp_get_num_bin(this.ptr)}get numInteger(){return s._glp_get_num_int(this.ptr)}get status(){let u=s._glp_get_status(this.ptr);return Y(u)}get statusPrimal(){let u=s._glp_get_prim_stat(this.ptr);return Y(u)}get statusDual(){let u=s._glp_get_dual_stat(this.ptr);return Y(u)}get statusInt(){let u=s._glp_ipt_status(this.ptr);return Y(u)}get statusMIP(){let u=s._glp_mip_status(this.ptr);return Y(u)}addVars(u,b){return Number.isInteger(u)?this.addVarsByCount(u,b):Array.isArray(u)?u.length===0||typeof u[0]=="string"?this.addVarsByKeys(u,b):this.addVarsByProperties(u):this.addVarsFromPropertiesArray(u)}addVar(u){let b=s._glp_add_cols(this.ptr,1),E=new Q(this,b,u);return this._vars.push(E),E}addVarsByProperties(u){let b=s._glp_add_cols(this.ptr,u.length),E=u.map((V,q)=>new Q(this,b+q,V));return this._vars=this._vars.concat(E),E}addVarsByCount(u,b){let E=s._glp_add_cols(this.ptr,u),V=Array.from(Array(u).keys(),q=>new Q(this,E+q,b&&b.name?Object.assign(Object.assign({},b),{name:`${b.name}_${q}`}):b));return this._vars=this._vars.concat(V),V}addVarsByKeys(u,b){let E=b||{},{name:V}=E,q=o(E,["name"]);return this.addVarsFromPropertiesArray(Object.fromEntries(u.map(L=>[L,Object.assign(Object.assign({},q),{name:`${V}[${L}]`})])))}addVarsFromPropertiesArray(u){let b=[...Object.keys(u)];return Object.fromEntries(this.addVarsByProperties(Object.values(u)).map((E,V)=>[b[V],E]))}addConstrs(u,b){return Number.isInteger(u)?this.addConstrsByCount(u,b):this.addConstrsByProperties(u)}addConstr(u){let b=s._glp_add_rows(this.ptr,1),E=new J(this,b,u);return this._constrs.push(E),E}addConstrsByProperties(u){let b=s._glp_add_rows(this.ptr,u.length),E=u.map((V,q)=>new J(this,b+q,V));return this._constrs=this._constrs.concat(E),E}addConstrsByCount(u,b){let E=s._glp_add_rows(this.ptr,u),V=Array.from(Array(u).keys(),q=>new J(this,E+q,b&&b.name?Object.assign(Object.assign({},b),{name:`${b.name}_${q}`}):b));return this._constrs=this._constrs.concat(V),V}update(){for(let u of this._constrs)u.update()}get sense(){return s._glp_get_obj_dir(this.ptr)===f.ObjectiveDirection.MIN?"min":"max"}set sense(u){if(u!=="min"&&u!=="max")throw new Error(`unknown sense '${u}'`);s._glp_set_obj_dir(this.ptr,u==="min"?f.ObjectiveDirection.MIN:f.ObjectiveDirection.MAX)}toModelLP(){this.update();let u="_tmp.lp",b=s._malloc(u.length+1);return s.stringToUTF8(u,b,u.length+1),s._glp_write_lp(this.ptr,0,b),s._free(b),s.FS.readFile(u,{encoding:"utf8"})}_refreshVariables(){let u=s._glp_get_num_cols(this.ptr);this._vars=Array.from(Array(u).keys(),b=>new Q(this,b+1,{lb:s._glp_get_col_lb(this.ptr,b+1),ub:s._glp_get_col_ub(this.ptr,b+1)}))}_refreshConstraints(){let u=s._glp_get_num_rows(this.ptr);this._constrs=Array.from(Array(u).keys(),b=>new J(this,b+1,{lb:s._glp_get_row_lb(this.ptr,b+1),ub:s._glp_get_row_ub(this.ptr,b+1)}))}static fromModelLP(u){let b=new O,E="_tmp.lp";s.FS.writeFile(E,u);let V=s._malloc(E.length+1);return s.stringToUTF8(E,V,E.length+1),s._glp_read_lp(b.ptr,0,V),s._free(V),b._refreshVariables(),b._refreshConstraints(),b}toMPS(){this.update();let u="_tmp.mps",b=s._malloc(u.length+1);return s.stringToUTF8(u,b,u.length+1),s._glp_write_mps(this.ptr,f.MPSFormat.FILE,0,b),s._free(b),s.FS.readFile(u,{encoding:"utf8"})}static fromMPS(u,b){let E=new O,V="_tmp.mps";s.FS.writeFile(V,u);let q=s._malloc(V.length+1);s.stringToUTF8(V,q,V.length+1);let L=b==="deck"?f.MPSFormat.DECK:f.MPSFormat.FILE,N=s._glp_read_mps(E.ptr,L,0,q);if(s._free(q),N!==0)throw new Error("mps reading failed");return E._refreshVariables(),E._refreshConstraints(),E}simplex(u){return this.update(),t.Simplex.solve(this,u||{})}exact(u){return this.update(),t.Simplex.solveExact(this,u||{})}interior(u){return this.update(),t.Interior.solve(this,u||{})}intopt(u){return this.update(),t.MIP.solve(this,u||{})}get solution(){switch(this.status){case"undefined":case"infeasible":throw new Error(`status is '${this.status}', run simplex first`);case"feasible":case"optimal":return[`status = ${this.status}`,...this._vars.map(u=>`${u.name} = ${u.value}`),`value = ${this.value}`].join(`
`);case"unbounded":return"problem is unbounded";case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get solutionInt(){switch(this.statusInt){case"undefined":case"infeasible":throw new Error(`status is '${this.statusInt}', run interior first`);case"optimal":return[`status = ${this.statusInt}`,...this._vars.map(u=>`${u.name} = ${Number(u.valueInt.toFixed(6))}`),`value = ${Number(this.valueInt.toFixed(6))}`].join(`
`);case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get solutionMIP(){switch(this.statusMIP){case"undefined":throw new Error(`status is '${this.statusMIP}', run intopt first`);case"feasible":case"optimal":return[`status = ${this.statusMIP}`,...this._vars.map(u=>`${u.name} = ${u.valueMIP}`),`value = ${this.valueMIP}`].join(`
`);case"no_feasible":return"problem has no feasible solution";default:throw new Error("unknown status")}}get ray(){let u=s._glp_get_unbnd_ray(this.ptr);if(u===0)throw new Error("no unbounded ray");return u<=this.numConstrs?this._constrs[u-1]:this._vars[u-1-this.numConstrs]}getTableau(u){let b=u===void 0?u=E=>E.toString():u;return[...[...this.vars,...this.constrs].filter(E=>E.status==="basic").map(E=>E.name+" = "+[...E.row.map(([V,q])=>`${b(V instanceof Q?q:-q)} ${V.name}`),b(E.value)].join(" + ")),"z = "+[...[...this.vars,...this.constrs].filter(E=>E.status!=="basic").map(E=>`${b(E instanceof Q?E.dual:-E.dual)} ${E.name}`),b(this.value)].join(" + ")].join(`
`)}}t.Constraint=J,t.Model=O,t.Node=D,t.Tree=M,t.Variable=Q,t.loadModule=d,Object.defineProperty(t,"__esModule",{value:!0})})});var at=function(t){return t.Router="router",t.Preferences="preferences",t.StepDetailTab="stepDetailTab",t}(at||{}),Xr=class t{static get search(){return window.location.search.substring(1)}static get href(){return window.location.href}static isStandalone=window.matchMedia("(display-mode: standalone)").matches;static mergeState(r){let e=t.preferencesState;return e?(e=et(Ie(Ie({},r.preferencesState),e),{states:Ie(Ie({},r.preferencesState.states),e.states),columns:Ie(Ie({},r.preferencesState.columns),e.columns)}),et(Ie({},r),{preferencesState:e})):r}static get preferencesState(){try{let r=localStorage.getItem(at.Preferences);if(r!=null)return JSON.parse(r)}catch{this.preferencesState=null}return null}static set preferencesState(r){r==null?localStorage.removeItem(at.Preferences):localStorage.setItem(at.Preferences,JSON.stringify(r))}static get routerState(){return localStorage.getItem(at.Router)}static set routerState(r){r==null?localStorage.removeItem(at.Router):localStorage.setItem(at.Router,r)}static get stepDetailTab(){return localStorage.getItem(at.StepDetailTab)}static set stepDetailTab(r){r==null?localStorage.removeItem(at.StepDetailTab):localStorage.setItem(at.StepDetailTab,r)}};function Pp(){}function Ot(t){return t==null?Pp:function(){return this.querySelector(t)}}function so(t){typeof t!="function"&&(t=Ot(t));for(var r=this._groups,e=r.length,n=new Array(e),o=0;o<e;++o)for(var a=r[o],c=a.length,s=n[o]=new Array(c),d,f,h=0;h<c;++h)(d=a[h])&&(f=t.call(d,d.__data__,h,a))&&("__data__"in d&&(f.__data__=d.__data__),s[h]=f);return new we(n,this._parents)}function Hn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function jp(){return[]}function fr(t){return t==null?jp:function(){return this.querySelectorAll(t)}}function Vp(t){return function(){return Hn(t.apply(this,arguments))}}function ao(t){typeof t=="function"?t=Vp(t):t=fr(t);for(var r=this._groups,e=r.length,n=[],o=[],a=0;a<e;++a)for(var c=r[a],s=c.length,d,f=0;f<s;++f)(d=c[f])&&(n.push(t.call(d,d.__data__,f,c)),o.push(d));return new we(n,o)}function pr(t){return function(){return this.matches(t)}}function Gr(t){return function(r){return r.matches(t)}}var Lp=Array.prototype.find;function Cp(t){return function(){return Lp.call(this.children,t)}}function Up(){return this.firstElementChild}function lo(t){return this.select(t==null?Up:Cp(typeof t=="function"?t:Gr(t)))}var $p=Array.prototype.filter;function Hp(){return Array.from(this.children)}function Wp(t){return function(){return $p.call(this.children,t)}}function uo(t){return this.selectAll(t==null?Hp:Wp(typeof t=="function"?t:Gr(t)))}function co(t){typeof t!="function"&&(t=pr(t));for(var r=this._groups,e=r.length,n=new Array(e),o=0;o<e;++o)for(var a=r[o],c=a.length,s=n[o]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&s.push(d);return new we(n,this._parents)}function Yr(t){return new Array(t.length)}function fo(){return new we(this._enter||this._groups.map(Yr),this._parents)}function dr(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}dr.prototype={constructor:dr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function po(t){return function(){return t}}function qp(t,r,e,n,o,a){for(var c=0,s,d=r.length,f=a.length;c<f;++c)(s=r[c])?(s.__data__=a[c],n[c]=s):e[c]=new dr(t,a[c]);for(;c<d;++c)(s=r[c])&&(o[c]=s)}function Xp(t,r,e,n,o,a,c){var s,d,f=new Map,h=r.length,v=a.length,y=new Array(h),A;for(s=0;s<h;++s)(d=r[s])&&(y[s]=A=c.call(d,d.__data__,s,r)+"",f.has(A)?o[s]=d:f.set(A,d));for(s=0;s<v;++s)A=c.call(t,a[s],s,a)+"",(d=f.get(A))?(n[s]=d,d.__data__=a[s],f.delete(A)):e[s]=new dr(t,a[s]);for(s=0;s<h;++s)(d=r[s])&&f.get(y[s])===d&&(o[s]=d)}function Gp(t){return t.__data__}function mo(t,r){if(!arguments.length)return Array.from(this,Gp);var e=r?Xp:qp,n=this._parents,o=this._groups;typeof t!="function"&&(t=po(t));for(var a=o.length,c=new Array(a),s=new Array(a),d=new Array(a),f=0;f<a;++f){var h=n[f],v=o[f],y=v.length,A=Yp(t.call(h,h&&h.__data__,f,n)),T=A.length,$=s[f]=new Array(T),R=c[f]=new Array(T),P=d[f]=new Array(y);e(h,v,$,R,P,A,r);for(var Q=0,J=0,j,Z;Q<T;++Q)if(j=$[Q]){for(Q>=J&&(J=Q+1);!(Z=R[J])&&++J<T;);j._next=Z||null}}return c=new we(c,n),c._enter=s,c._exit=d,c}function Yp(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _o(){return new we(this._exit||this._groups.map(Yr),this._parents)}function ho(t,r,e){var n=this.enter(),o=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),r!=null&&(o=r(o),o&&(o=o.selection())),e==null?a.remove():e(a),n&&o?n.merge(o).order():o}function go(t){for(var r=t.selection?t.selection():t,e=this._groups,n=r._groups,o=e.length,a=n.length,c=Math.min(o,a),s=new Array(o),d=0;d<c;++d)for(var f=e[d],h=n[d],v=f.length,y=s[d]=new Array(v),A,T=0;T<v;++T)(A=f[T]||h[T])&&(y[T]=A);for(;d<o;++d)s[d]=e[d];return new we(s,this._parents)}function vo(){for(var t=this._groups,r=-1,e=t.length;++r<e;)for(var n=t[r],o=n.length-1,a=n[o],c;--o>=0;)(c=n[o])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function yo(t){t||(t=Kp);function r(v,y){return v&&y?t(v.__data__,y.__data__):!v-!y}for(var e=this._groups,n=e.length,o=new Array(n),a=0;a<n;++a){for(var c=e[a],s=c.length,d=o[a]=new Array(s),f,h=0;h<s;++h)(f=c[h])&&(d[h]=f);d.sort(r)}return new we(o,this._parents).order()}function Kp(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function bo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wo(){return Array.from(this)}function xo(){for(var t=this._groups,r=0,e=t.length;r<e;++r)for(var n=t[r],o=0,a=n.length;o<a;++o){var c=n[o];if(c)return c}return null}function So(){let t=0;for(let r of this)++t;return t}function Eo(){return!this.node()}function Io(t){for(var r=this._groups,e=0,n=r.length;e<n;++e)for(var o=r[e],a=0,c=o.length,s;a<c;++a)(s=o[a])&&t.call(s,s.__data__,a,o);return this}var Kr="http://www.w3.org/1999/xhtml",Wn={svg:"http://www.w3.org/2000/svg",xhtml:Kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dt(t){var r=t+="",e=r.indexOf(":");return e>=0&&(r=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Wn.hasOwnProperty(r)?{space:Wn[r],local:t}:t}function Qp(t){return function(){this.removeAttribute(t)}}function Zp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jp(t,r){return function(){this.setAttribute(t,r)}}function ed(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function td(t,r){return function(){var e=r.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function rd(t,r){return function(){var e=r.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function ko(t,r){var e=dt(t);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((r==null?e.local?Zp:Qp:typeof r=="function"?e.local?rd:td:e.local?ed:Jp)(e,r))}function Qr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nd(t){return function(){this.style.removeProperty(t)}}function id(t,r,e){return function(){this.style.setProperty(t,r,e)}}function od(t,r,e){return function(){var n=r.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,e)}}function zo(t,r,e){return arguments.length>1?this.each((r==null?nd:typeof r=="function"?od:id)(t,r,e??"")):yt(this.node(),t)}function yt(t,r){return t.style.getPropertyValue(r)||Qr(t).getComputedStyle(t,null).getPropertyValue(r)}function sd(t){return function(){delete this[t]}}function ad(t,r){return function(){this[t]=r}}function ld(t,r){return function(){var e=r.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Mo(t,r){return arguments.length>1?this.each((r==null?sd:typeof r=="function"?ld:ad)(t,r)):this.node()[t]}function Ao(t){return t.trim().split(/^|\s+/)}function qn(t){return t.classList||new To(t)}function To(t){this._node=t,this._names=Ao(t.getAttribute("class")||"")}To.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ro(t,r){for(var e=qn(t),n=-1,o=r.length;++n<o;)e.add(r[n])}function Oo(t,r){for(var e=qn(t),n=-1,o=r.length;++n<o;)e.remove(r[n])}function ud(t){return function(){Ro(this,t)}}function cd(t){return function(){Oo(this,t)}}function fd(t,r){return function(){(r.apply(this,arguments)?Ro:Oo)(this,t)}}function No(t,r){var e=Ao(t+"");if(arguments.length<2){for(var n=qn(this.node()),o=-1,a=e.length;++o<a;)if(!n.contains(e[o]))return!1;return!0}return this.each((typeof r=="function"?fd:r?ud:cd)(e,r))}function pd(){this.textContent=""}function dd(t){return function(){this.textContent=t}}function md(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Fo(t){return arguments.length?this.each(t==null?pd:(typeof t=="function"?md:dd)(t)):this.node().textContent}function _d(){this.innerHTML=""}function hd(t){return function(){this.innerHTML=t}}function gd(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Do(t){return arguments.length?this.each(t==null?_d:(typeof t=="function"?gd:hd)(t)):this.node().innerHTML}function vd(){this.nextSibling&&this.parentNode.appendChild(this)}function Bo(){return this.each(vd)}function yd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Po(){return this.each(yd)}function bd(t){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===Kr&&r.documentElement.namespaceURI===Kr?r.createElement(t):r.createElementNS(e,t)}}function wd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Zr(t){var r=dt(t);return(r.local?wd:bd)(r)}function jo(t){var r=typeof t=="function"?t:Zr(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function xd(){return null}function Vo(t,r){var e=typeof t=="function"?t:Zr(t),n=r==null?xd:typeof r=="function"?r:Ot(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})}function Sd(){var t=this.parentNode;t&&t.removeChild(this)}function Lo(){return this.each(Sd)}function Ed(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Id(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Co(t){return this.select(t?Id:Ed)}function Uo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function kd(t){return function(r){t.call(this,r,this.__data__)}}function zd(t){return t.trim().split(/^|\s+/).map(function(r){var e="",n=r.indexOf(".");return n>=0&&(e=r.slice(n+1),r=r.slice(0,n)),{type:r,name:e}})}function Md(t){return function(){var r=this.__on;if(r){for(var e=0,n=-1,o=r.length,a;e<o;++e)a=r[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):r[++n]=a;++n?r.length=n:delete this.__on}}}function Ad(t,r,e){return function(){var n=this.__on,o,a=kd(r);if(n){for(var c=0,s=n.length;c<s;++c)if((o=n[c]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=e),o.value=r;return}}this.addEventListener(t.type,a,e),o={type:t.type,name:t.name,value:r,listener:a,options:e},n?n.push(o):this.__on=[o]}}function $o(t,r,e){var n=zd(t+""),o,a=n.length,c;if(arguments.length<2){var s=this.node().__on;if(s){for(var d=0,f=s.length,h;d<f;++d)for(o=0,h=s[d];o<a;++o)if((c=n[o]).type===h.type&&c.name===h.name)return h.value}return}for(s=r?Ad:Md,o=0;o<a;++o)this.each(s(n[o],r,e));return this}function Ho(t,r,e){var n=Qr(t),o=n.CustomEvent;typeof o=="function"?o=new o(r,e):(o=n.document.createEvent("Event"),e?(o.initEvent(r,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(r,!1,!1)),t.dispatchEvent(o)}function Td(t,r){return function(){return Ho(this,t,r)}}function Rd(t,r){return function(){return Ho(this,t,r.apply(this,arguments))}}function Wo(t,r){return this.each((typeof r=="function"?Rd:Td)(t,r))}function*qo(){for(var t=this._groups,r=0,e=t.length;r<e;++r)for(var n=t[r],o=0,a=n.length,c;o<a;++o)(c=n[o])&&(yield c)}var Xn=[null];function we(t,r){this._groups=t,this._parents=r}function Xo(){return new we([[document.documentElement]],Xn)}function Od(){return this}we.prototype=Xo.prototype={constructor:we,select:so,selectAll:ao,selectChild:lo,selectChildren:uo,filter:co,data:mo,enter:fo,exit:_o,join:ho,merge:go,selection:Od,order:vo,sort:yo,call:bo,nodes:wo,node:xo,size:So,empty:Eo,each:Io,attr:ko,style:zo,property:Mo,classed:No,text:Fo,html:Do,raise:Bo,lower:Po,append:jo,insert:Vo,remove:Lo,clone:Co,datum:Uo,on:$o,dispatch:Wo,[Symbol.iterator]:qo};var mt=Xo;function We(t){return typeof t=="string"?new we([[document.querySelector(t)]],[document.documentElement]):new we([[t]],Xn)}function Go(t){let r;for(;r=t.sourceEvent;)t=r;return t}function Ye(t,r){if(t=Go(t),r===void 0&&(r=t.currentTarget),r){var e=r.ownerSVGElement||r;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(r.getScreenCTM().inverse()),[n.x,n.y]}if(r.getBoundingClientRect){var o=r.getBoundingClientRect();return[t.clientX-o.left-r.clientLeft,t.clientY-o.top-r.clientTop]}}return[t.pageX,t.pageY]}var Nd={value:()=>{}};function Ko(){for(var t=0,r=arguments.length,e={},n;t<r;++t){if(!(n=arguments[t]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Jr(e)}function Jr(t){this._=t}function Fd(t,r){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Jr.prototype=Ko.prototype={constructor:Jr,on:function(t,r){var e=this._,n=Fd(t+"",e),o,a=-1,c=n.length;if(arguments.length<2){for(;++a<c;)if((o=(t=n[a]).type)&&(o=Dd(e[o],t.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++a<c;)if(o=(t=n[a]).type)e[o]=Yo(e[o],t.name,r);else if(r==null)for(o in e)e[o]=Yo(e[o],t.name,null);return this},copy:function(){var t={},r=this._;for(var e in r)t[e]=r[e].slice();return new Jr(t)},call:function(t,r){if((o=arguments.length-2)>0)for(var e=new Array(o),n=0,o,a;n<o;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,o=a.length;n<o;++n)a[n].value.apply(r,e)},apply:function(t,r,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,a=n.length;o<a;++o)n[o].value.apply(r,e)}};function Dd(t,r){for(var e=0,n=t.length,o;e<n;++e)if((o=t[e]).name===r)return o.value}function Yo(t,r,e){for(var n=0,o=t.length;n<o;++n)if(t[n].name===r){t[n]=Nd,t=t.slice(0,n).concat(t.slice(n+1));break}return e!=null&&t.push({name:r,value:e}),t}var Nt=Ko;var Qo={passive:!1},Ft={capture:!0,passive:!1};function en(t){t.stopImmediatePropagation()}function bt(t){t.preventDefault(),t.stopImmediatePropagation()}function mr(t){var r=t.document.documentElement,e=We(t).on("dragstart.drag",bt,Ft);"onselectstart"in r?e.on("selectstart.drag",bt,Ft):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function _r(t,r){var e=t.document.documentElement,n=We(t).on("dragstart.drag",null);r&&(n.on("click.drag",bt,Ft),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in e?n.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var hr=t=>()=>t;function gr(t,{sourceEvent:r,subject:e,target:n,identifier:o,active:a,x:c,y:s,dx:d,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}gr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Bd(t){return!t.ctrlKey&&!t.button}function Pd(){return this.parentNode}function jd(t,r){return r??{x:t.x,y:t.y}}function Vd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ld(){var t=Bd,r=Pd,e=jd,n=Vd,o={},a=Nt("start","drag","end"),c=0,s,d,f,h,v=0;function y(j){j.on("mousedown.drag",A).filter(n).on("touchstart.drag",R).on("touchmove.drag",P,Qo).on("touchend.drag touchcancel.drag",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(j,Z){if(!(h||!t.call(this,j,Z))){var Y=J(this,r.call(this,j,Z),j,Z,"mouse");Y&&(We(j.view).on("mousemove.drag",T,Ft).on("mouseup.drag",$,Ft),mr(j.view),en(j),f=!1,s=j.clientX,d=j.clientY,Y("start",j))}}function T(j){if(bt(j),!f){var Z=j.clientX-s,Y=j.clientY-d;f=Z*Z+Y*Y>v}o.mouse("drag",j)}function $(j){We(j.view).on("mousemove.drag mouseup.drag",null),_r(j.view,f),bt(j),o.mouse("end",j)}function R(j,Z){if(t.call(this,j,Z)){var Y=j.changedTouches,ne=r.call(this,j,Z),me=Y.length,_e,ve;for(_e=0;_e<me;++_e)(ve=J(this,ne,j,Z,Y[_e].identifier,Y[_e]))&&(en(j),ve("start",j,Y[_e]))}}function P(j){var Z=j.changedTouches,Y=Z.length,ne,me;for(ne=0;ne<Y;++ne)(me=o[Z[ne].identifier])&&(bt(j),me("drag",j,Z[ne]))}function Q(j){var Z=j.changedTouches,Y=Z.length,ne,me;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),ne=0;ne<Y;++ne)(me=o[Z[ne].identifier])&&(en(j),me("end",j,Z[ne]))}function J(j,Z,Y,ne,me,_e){var ve=a.copy(),he=Ye(_e||Y,Z),De,F,S;if((S=e.call(j,new gr("beforestart",{sourceEvent:Y,target:y,identifier:me,active:c,x:he[0],y:he[1],dx:0,dy:0,dispatch:ve}),ne))!=null)return De=S.x-he[0]||0,F=S.y-he[1]||0,function D(M,O,x){var u=he,b;switch(M){case"start":o[me]=D,b=c++;break;case"end":delete o[me],--c;case"drag":he=Ye(x||O,Z),b=c;break}ve.call(M,j,new gr(M,{sourceEvent:O,subject:S,target:y,identifier:me,active:b,x:he[0]+De,y:he[1]+F,dx:he[0]-u[0],dy:he[1]-u[1],dispatch:ve}),ne)}}return y.filter=function(j){return arguments.length?(t=typeof j=="function"?j:hr(!!j),y):t},y.container=function(j){return arguments.length?(r=typeof j=="function"?j:hr(j),y):r},y.subject=function(j){return arguments.length?(e=typeof j=="function"?j:hr(j),y):e},y.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:hr(!!j),y):n},y.on=function(){var j=a.on.apply(a,arguments);return j===a?y:j},y.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,y):Math.sqrt(v)},y}function tn(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function Gn(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function br(){}var vr=.7,on=1/vr,Xt="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cd=/^#([0-9a-f]{3,8})$/,Ud=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),$d=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),Hd=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${yr}\\)$`),Wd=new RegExp(`^rgba\\(${lt},${lt},${lt},${yr}\\)$`),qd=new RegExp(`^hsl\\(${yr},${lt},${lt}\\)$`),Xd=new RegExp(`^hsla\\(${yr},${lt},${lt},${yr}\\)$`),Zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tn(br,wt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Jo,formatHex:Jo,formatHex8:Gd,formatHsl:Yd,formatRgb:es,toString:es});function Jo(){return this.rgb().formatHex()}function Gd(){return this.rgb().formatHex8()}function Yd(){return ss(this).formatHsl()}function es(){return this.rgb().formatRgb()}function wt(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=Cd.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?ts(r):e===3?new Ue(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?rn(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?rn(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Ud.exec(t))?new Ue(r[1],r[2],r[3],1):(r=$d.exec(t))?new Ue(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Hd.exec(t))?rn(r[1],r[2],r[3],r[4]):(r=Wd.exec(t))?rn(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=qd.exec(t))?is(r[1],r[2]/100,r[3]/100,1):(r=Xd.exec(t))?is(r[1],r[2]/100,r[3]/100,r[4]):Zo.hasOwnProperty(t)?ts(Zo[t]):t==="transparent"?new Ue(NaN,NaN,NaN,0):null}function ts(t){return new Ue(t>>16&255,t>>8&255,t&255,1)}function rn(t,r,e,n){return n<=0&&(t=r=e=NaN),new Ue(t,r,e,n)}function Kd(t){return t instanceof br||(t=wt(t)),t?(t=t.rgb(),new Ue(t.r,t.g,t.b,t.opacity)):new Ue}function Gt(t,r,e,n){return arguments.length===1?Kd(t):new Ue(t,r,e,n??1)}function Ue(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}tn(Ue,Gt,Gn(br,{brighter(t){return t=t==null?on:Math.pow(on,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ue(Bt(this.r),Bt(this.g),Bt(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rs,formatHex:rs,formatHex8:Qd,formatRgb:ns,toString:ns}));function rs(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Qd(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ns(){let t=sn(this.opacity);return`${t===1?"rgb(":"rgba("}${Bt(this.r)}, ${Bt(this.g)}, ${Bt(this.b)}${t===1?")":`, ${t})`}`}function sn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Bt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dt(t){return t=Bt(t),(t<16?"0":"")+t.toString(16)}function is(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new tt(t,r,e,n)}function ss(t){if(t instanceof tt)return new tt(t.h,t.s,t.l,t.opacity);if(t instanceof br||(t=wt(t)),!t)return new tt;if(t instanceof tt)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,o=Math.min(r,e,n),a=Math.max(r,e,n),c=NaN,s=a-o,d=(a+o)/2;return s?(r===a?c=(e-n)/s+(e<n)*6:e===a?c=(n-r)/s+2:c=(r-e)/s+4,s/=d<.5?a+o:2-a-o,c*=60):s=d>0&&d<1?0:c,new tt(c,s,d,t.opacity)}function as(t,r,e,n){return arguments.length===1?ss(t):new tt(t,r,e,n??1)}function tt(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}tn(tt,as,Gn(br,{brighter(t){return t=t==null?on:Math.pow(on,t),new tt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vr:Math.pow(vr,t),new tt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,o=2*e-n;return new Ue(Yn(t>=240?t-240:t+120,o,n),Yn(t,o,n),Yn(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new tt(os(this.h),nn(this.s),nn(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=sn(this.opacity);return`${t===1?"hsl(":"hsla("}${os(this.h)}, ${nn(this.s)*100}%, ${nn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function os(t){return t=(t||0)%360,t<0?t+360:t}function nn(t){return Math.max(0,Math.min(1,t||0))}function Yn(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}function Kn(t,r,e,n,o){var a=t*t,c=a*t;return((1-3*t+3*a-c)*r+(4-6*a+3*c)*e+(1+3*t+3*a-3*c)*n+c*o)/6}function ls(t){var r=t.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),o=t[n],a=t[n+1],c=n>0?t[n-1]:2*o-a,s=n<r-1?t[n+2]:2*a-o;return Kn((e-n/r)*r,c,o,a,s)}}function us(t){var r=t.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*r),o=t[(n+r-1)%r],a=t[n%r],c=t[(n+1)%r],s=t[(n+2)%r];return Kn((e-n/r)*r,o,a,c,s)}}var Qn=t=>()=>t;function Zd(t,r){return function(e){return t+e*r}}function Jd(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}function cs(t){return(t=+t)==1?an:function(r,e){return e-r?Jd(r,e,t):Qn(isNaN(r)?e:r)}}function an(t,r){var e=r-t;return e?Zd(t,e):Qn(isNaN(t)?r:t)}var ln=function t(r){var e=cs(r);function n(o,a){var c=e((o=Gt(o)).r,(a=Gt(a)).r),s=e(o.g,a.g),d=e(o.b,a.b),f=an(o.opacity,a.opacity);return function(h){return o.r=c(h),o.g=s(h),o.b=d(h),o.opacity=f(h),o+""}}return n.gamma=t,n}(1);function fs(t){return function(r){var e=r.length,n=new Array(e),o=new Array(e),a=new Array(e),c,s;for(c=0;c<e;++c)s=Gt(r[c]),n[c]=s.r||0,o[c]=s.g||0,a[c]=s.b||0;return n=t(n),o=t(o),a=t(a),s.opacity=1,function(d){return s.r=n(d),s.g=o(d),s.b=a(d),s+""}}}var em=fs(ls),tm=fs(us);function Ke(t,r){return t=+t,r=+r,function(e){return t*(1-e)+r*e}}var Jn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zn=new RegExp(Jn.source,"g");function rm(t){return function(){return t}}function nm(t){return function(r){return t(r)+""}}function ei(t,r){var e=Jn.lastIndex=Zn.lastIndex=0,n,o,a,c=-1,s=[],d=[];for(t=t+"",r=r+"";(n=Jn.exec(t))&&(o=Zn.exec(r));)(a=o.index)>e&&(a=r.slice(e,a),s[c]?s[c]+=a:s[++c]=a),(n=n[0])===(o=o[0])?s[c]?s[c]+=o:s[++c]=o:(s[++c]=null,d.push({i:c,x:Ke(n,o)})),e=Zn.lastIndex;return e<r.length&&(a=r.slice(e),s[c]?s[c]+=a:s[++c]=a),s.length<2?d[0]?nm(d[0].x):rm(r):(r=d.length,function(f){for(var h=0,v;h<r;++h)s[(v=d[h]).i]=v.x(f);return s.join("")})}var ps=180/Math.PI,un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ti(t,r,e,n,o,a){var c,s,d;return(c=Math.sqrt(t*t+r*r))&&(t/=c,r/=c),(d=t*e+r*n)&&(e-=t*d,n-=r*d),(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s,d/=s),t*n<r*e&&(t=-t,r=-r,d=-d,c=-c),{translateX:o,translateY:a,rotate:Math.atan2(r,t)*ps,skewX:Math.atan(d)*ps,scaleX:c,scaleY:s}}var cn;function ds(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?un:ti(r.a,r.b,r.c,r.d,r.e,r.f)}function ms(t){return t==null?un:(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),(t=cn.transform.baseVal.consolidate())?(t=t.matrix,ti(t.a,t.b,t.c,t.d,t.e,t.f)):un)}function _s(t,r,e,n){function o(f){return f.length?f.pop()+" ":""}function a(f,h,v,y,A,T){if(f!==v||h!==y){var $=A.push("translate(",null,r,null,e);T.push({i:$-4,x:Ke(f,v)},{i:$-2,x:Ke(h,y)})}else(v||y)&&A.push("translate("+v+r+y+e)}function c(f,h,v,y){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),y.push({i:v.push(o(v)+"rotate(",null,n)-2,x:Ke(f,h)})):h&&v.push(o(v)+"rotate("+h+n)}function s(f,h,v,y){f!==h?y.push({i:v.push(o(v)+"skewX(",null,n)-2,x:Ke(f,h)}):h&&v.push(o(v)+"skewX("+h+n)}function d(f,h,v,y,A,T){if(f!==v||h!==y){var $=A.push(o(A)+"scale(",null,",",null,")");T.push({i:$-4,x:Ke(f,v)},{i:$-2,x:Ke(h,y)})}else(v!==1||y!==1)&&A.push(o(A)+"scale("+v+","+y+")")}return function(f,h){var v=[],y=[];return f=t(f),h=t(h),a(f.translateX,f.translateY,h.translateX,h.translateY,v,y),c(f.rotate,h.rotate,v,y),s(f.skewX,h.skewX,v,y),d(f.scaleX,f.scaleY,h.scaleX,h.scaleY,v,y),f=h=null,function(A){for(var T=-1,$=y.length,R;++T<$;)v[(R=y[T]).i]=R.x(A);return v.join("")}}}var ri=_s(ds,"px, ","px)","deg)"),ni=_s(ms,", ",")",")");var im=1e-12;function hs(t){return((t=Math.exp(t))+1/t)/2}function om(t){return((t=Math.exp(t))-1/t)/2}function sm(t){return((t=Math.exp(2*t))-1)/(t+1)}var ii=function t(r,e,n){function o(a,c){var s=a[0],d=a[1],f=a[2],h=c[0],v=c[1],y=c[2],A=h-s,T=v-d,$=A*A+T*T,R,P;if($<im)P=Math.log(y/f)/r,R=function(ne){return[s+ne*A,d+ne*T,f*Math.exp(r*ne*P)]};else{var Q=Math.sqrt($),J=(y*y-f*f+n*$)/(2*f*e*Q),j=(y*y-f*f-n*$)/(2*y*e*Q),Z=Math.log(Math.sqrt(J*J+1)-J),Y=Math.log(Math.sqrt(j*j+1)-j);P=(Y-Z)/r,R=function(ne){var me=ne*P,_e=hs(Z),ve=f/(e*Q)*(_e*sm(r*me+Z)-om(Z));return[s+ve*A,d+ve*T,f*_e/hs(r*me+Z)]}}return R.duration=P*1e3*r/Math.SQRT2,R}return o.rho=function(a){var c=Math.max(.001,+a),s=c*c,d=s*s;return t(c,s,d)},o}(Math.SQRT2,2,4);var Yt=0,xr=0,wr=0,vs=1e3,fn,Sr,pn=0,Pt=0,dn=0,Er=typeof performance=="object"&&performance.now?performance:Date,ys=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kr(){return Pt||(ys(am),Pt=Er.now()+dn)}function am(){Pt=0}function Ir(){this._call=this._time=this._next=null}Ir.prototype=mn.prototype={constructor:Ir,restart:function(t,r,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?kr():+e)+(r==null?0:+r),!this._next&&Sr!==this&&(Sr?Sr._next=this:fn=this,Sr=this),this._call=t,this._time=e,oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,oi())}};function mn(t,r,e){var n=new Ir;return n.restart(t,r,e),n}function bs(){kr(),++Yt;for(var t=fn,r;t;)(r=Pt-t._time)>=0&&t._call.call(void 0,r),t=t._next;--Yt}function gs(){Pt=(pn=Er.now())+dn,Yt=xr=0;try{bs()}finally{Yt=0,um(),Pt=0}}function lm(){var t=Er.now(),r=t-pn;r>vs&&(dn-=r,pn=t)}function um(){for(var t,r=fn,e,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:fn=e);Sr=t,oi(n)}function oi(t){if(!Yt){xr&&(xr=clearTimeout(xr));var r=t-Pt;r>24?(t<1/0&&(xr=setTimeout(gs,t-Er.now()-dn)),wr&&(wr=clearInterval(wr))):(wr||(pn=Er.now(),wr=setInterval(lm,vs)),Yt=1,ys(gs))}}function _n(t,r,e){var n=new Ir;return r=r==null?0:+r,n.restart(o=>{n.stop(),t(o+r)},r,e),n}var cm=Nt("start","end","cancel","interrupt"),fm=[],Ss=0,ws=1,gn=2,hn=3,xs=4,vn=5,zr=6;function xt(t,r,e,n,o,a){var c=t.__transition;if(!c)t.__transition={};else if(e in c)return;pm(t,e,{name:r,index:n,group:o,on:cm,tween:fm,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ss})}function Mr(t,r){var e=Ae(t,r);if(e.state>Ss)throw new Error("too late; already scheduled");return e}function Fe(t,r){var e=Ae(t,r);if(e.state>hn)throw new Error("too late; already running");return e}function Ae(t,r){var e=t.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function pm(t,r,e){var n=t.__transition,o;n[r]=e,e.timer=mn(a,0,e.time);function a(f){e.state=ws,e.timer.restart(c,e.delay,e.time),e.delay<=f&&c(f-e.delay)}function c(f){var h,v,y,A;if(e.state!==ws)return d();for(h in n)if(A=n[h],A.name===e.name){if(A.state===hn)return _n(c);A.state===xs?(A.state=zr,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete n[h]):+h<r&&(A.state=zr,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete n[h])}if(_n(function(){e.state===hn&&(e.state=xs,e.timer.restart(s,e.delay,e.time),s(f))}),e.state=gn,e.on.call("start",t,t.__data__,e.index,e.group),e.state===gn){for(e.state=hn,o=new Array(y=e.tween.length),h=0,v=-1;h<y;++h)(A=e.tween[h].value.call(t,t.__data__,e.index,e.group))&&(o[++v]=A);o.length=v+1}}function s(f){for(var h=f<e.duration?e.ease.call(null,f/e.duration):(e.timer.restart(d),e.state=vn,1),v=-1,y=o.length;++v<y;)o[v].call(t,h);e.state===vn&&(e.on.call("end",t,t.__data__,e.index,e.group),d())}function d(){e.state=zr,e.timer.stop(),delete n[r];for(var f in n)return;delete t.__transition}}function St(t,r){var e=t.__transition,n,o,a=!0,c;if(e){r=r==null?null:r+"";for(c in e){if((n=e[c]).name!==r){a=!1;continue}o=n.state>gn&&n.state<vn,n.state=zr,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete e[c]}a&&delete t.__transition}}function Es(t){return this.each(function(){St(this,t)})}function dm(t,r){var e,n;return function(){var o=Fe(this,t),a=o.tween;if(a!==e){n=e=a;for(var c=0,s=n.length;c<s;++c)if(n[c].name===r){n=n.slice(),n.splice(c,1);break}}o.tween=n}}function mm(t,r,e){var n,o;if(typeof e!="function")throw new Error;return function(){var a=Fe(this,t),c=a.tween;if(c!==n){o=(n=c).slice();for(var s={name:r,value:e},d=0,f=o.length;d<f;++d)if(o[d].name===r){o[d]=s;break}d===f&&o.push(s)}a.tween=o}}function Is(t,r){var e=this._id;if(t+="",arguments.length<2){for(var n=Ae(this.node(),e).tween,o=0,a=n.length,c;o<a;++o)if((c=n[o]).name===t)return c.value;return null}return this.each((r==null?dm:mm)(e,t,r))}function Kt(t,r,e){var n=t._id;return t.each(function(){var o=Fe(this,n);(o.value||(o.value={}))[r]=e.apply(this,arguments)}),function(o){return Ae(o,n).value[r]}}function yn(t,r){var e;return(typeof r=="number"?Ke:r instanceof wt?ln:(e=wt(r))?(r=e,ln):ei)(t,r)}function _m(t){return function(){this.removeAttribute(t)}}function hm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gm(t,r,e){var n,o=e+"",a;return function(){var c=this.getAttribute(t);return c===o?null:c===n?a:a=r(n=c,e)}}function vm(t,r,e){var n,o=e+"",a;return function(){var c=this.getAttributeNS(t.space,t.local);return c===o?null:c===n?a:a=r(n=c,e)}}function ym(t,r,e){var n,o,a;return function(){var c,s=e(this),d;return s==null?void this.removeAttribute(t):(c=this.getAttribute(t),d=s+"",c===d?null:c===n&&d===o?a:(o=d,a=r(n=c,s)))}}function bm(t,r,e){var n,o,a;return function(){var c,s=e(this),d;return s==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),d=s+"",c===d?null:c===n&&d===o?a:(o=d,a=r(n=c,s)))}}function ks(t,r){var e=dt(t),n=e==="transform"?ni:yn;return this.attrTween(t,typeof r=="function"?(e.local?bm:ym)(e,n,Kt(this,"attr."+t,r)):r==null?(e.local?hm:_m)(e):(e.local?vm:gm)(e,n,r))}function wm(t,r){return function(e){this.setAttribute(t,r.call(this,e))}}function xm(t,r){return function(e){this.setAttributeNS(t.space,t.local,r.call(this,e))}}function Sm(t,r){var e,n;function o(){var a=r.apply(this,arguments);return a!==n&&(e=(n=a)&&xm(t,a)),e}return o._value=r,o}function Em(t,r){var e,n;function o(){var a=r.apply(this,arguments);return a!==n&&(e=(n=a)&&wm(t,a)),e}return o._value=r,o}function zs(t,r){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;var n=dt(t);return this.tween(e,(n.local?Sm:Em)(n,r))}function Im(t,r){return function(){Mr(this,t).delay=+r.apply(this,arguments)}}function km(t,r){return r=+r,function(){Mr(this,t).delay=r}}function Ms(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Im:km)(r,t)):Ae(this.node(),r).delay}function zm(t,r){return function(){Fe(this,t).duration=+r.apply(this,arguments)}}function Mm(t,r){return r=+r,function(){Fe(this,t).duration=r}}function As(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?zm:Mm)(r,t)):Ae(this.node(),r).duration}function Am(t,r){if(typeof r!="function")throw new Error;return function(){Fe(this,t).ease=r}}function Ts(t){var r=this._id;return arguments.length?this.each(Am(r,t)):Ae(this.node(),r).ease}function Tm(t,r){return function(){var e=r.apply(this,arguments);if(typeof e!="function")throw new Error;Fe(this,t).ease=e}}function Rs(t){if(typeof t!="function")throw new Error;return this.each(Tm(this._id,t))}function Os(t){typeof t!="function"&&(t=pr(t));for(var r=this._groups,e=r.length,n=new Array(e),o=0;o<e;++o)for(var a=r[o],c=a.length,s=n[o]=[],d,f=0;f<c;++f)(d=a[f])&&t.call(d,d.__data__,f,a)&&s.push(d);return new Le(n,this._parents,this._name,this._id)}function Ns(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,e=t._groups,n=r.length,o=e.length,a=Math.min(n,o),c=new Array(n),s=0;s<a;++s)for(var d=r[s],f=e[s],h=d.length,v=c[s]=new Array(h),y,A=0;A<h;++A)(y=d[A]||f[A])&&(v[A]=y);for(;s<n;++s)c[s]=r[s];return new Le(c,this._parents,this._name,this._id)}function Rm(t){return(t+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||r==="start"})}function Om(t,r,e){var n,o,a=Rm(r)?Mr:Fe;return function(){var c=a(this,t),s=c.on;s!==n&&(o=(n=s).copy()).on(r,e),c.on=o}}function Fs(t,r){var e=this._id;return arguments.length<2?Ae(this.node(),e).on.on(t):this.each(Om(e,t,r))}function Nm(t){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==t)return;r&&r.removeChild(this)}}function Ds(){return this.on("end.remove",Nm(this._id))}function Bs(t){var r=this._name,e=this._id;typeof t!="function"&&(t=Ot(t));for(var n=this._groups,o=n.length,a=new Array(o),c=0;c<o;++c)for(var s=n[c],d=s.length,f=a[c]=new Array(d),h,v,y=0;y<d;++y)(h=s[y])&&(v=t.call(h,h.__data__,y,s))&&("__data__"in h&&(v.__data__=h.__data__),f[y]=v,xt(f[y],r,e,y,f,Ae(h,e)));return new Le(a,this._parents,r,e)}function Ps(t){var r=this._name,e=this._id;typeof t!="function"&&(t=fr(t));for(var n=this._groups,o=n.length,a=[],c=[],s=0;s<o;++s)for(var d=n[s],f=d.length,h,v=0;v<f;++v)if(h=d[v]){for(var y=t.call(h,h.__data__,v,d),A,T=Ae(h,e),$=0,R=y.length;$<R;++$)(A=y[$])&&xt(A,r,e,$,y,T);a.push(y),c.push(h)}return new Le(a,c,r,e)}var Fm=mt.prototype.constructor;function js(){return new Fm(this._groups,this._parents)}function Dm(t,r){var e,n,o;return function(){var a=yt(this,t),c=(this.style.removeProperty(t),yt(this,t));return a===c?null:a===e&&c===n?o:o=r(e=a,n=c)}}function Vs(t){return function(){this.style.removeProperty(t)}}function Bm(t,r,e){var n,o=e+"",a;return function(){var c=yt(this,t);return c===o?null:c===n?a:a=r(n=c,e)}}function Pm(t,r,e){var n,o,a;return function(){var c=yt(this,t),s=e(this),d=s+"";return s==null&&(d=s=(this.style.removeProperty(t),yt(this,t))),c===d?null:c===n&&d===o?a:(o=d,a=r(n=c,s))}}function jm(t,r){var e,n,o,a="style."+r,c="end."+a,s;return function(){var d=Fe(this,t),f=d.on,h=d.value[a]==null?s||(s=Vs(r)):void 0;(f!==e||o!==h)&&(n=(e=f).copy()).on(c,o=h),d.on=n}}function Ls(t,r,e){var n=(t+="")=="transform"?ri:yn;return r==null?this.styleTween(t,Dm(t,n)).on("end.style."+t,Vs(t)):typeof r=="function"?this.styleTween(t,Pm(t,n,Kt(this,"style."+t,r))).each(jm(this._id,t)):this.styleTween(t,Bm(t,n,r),e).on("end.style."+t,null)}function Vm(t,r,e){return function(n){this.style.setProperty(t,r.call(this,n),e)}}function Lm(t,r,e){var n,o;function a(){var c=r.apply(this,arguments);return c!==o&&(n=(o=c)&&Vm(t,c,e)),n}return a._value=r,a}function Cs(t,r,e){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;return this.tween(n,Lm(t,r,e??""))}function Cm(t){return function(){this.textContent=t}}function Um(t){return function(){var r=t(this);this.textContent=r??""}}function Us(t){return this.tween("text",typeof t=="function"?Um(Kt(this,"text",t)):Cm(t==null?"":t+""))}function $m(t){return function(r){this.textContent=t.call(this,r)}}function Hm(t){var r,e;function n(){var o=t.apply(this,arguments);return o!==e&&(r=(e=o)&&$m(o)),r}return n._value=t,n}function $s(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Hm(t))}function Hs(){for(var t=this._name,r=this._id,e=bn(),n=this._groups,o=n.length,a=0;a<o;++a)for(var c=n[a],s=c.length,d,f=0;f<s;++f)if(d=c[f]){var h=Ae(d,r);xt(d,t,e,f,c,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Le(n,this._parents,t,e)}function Ws(){var t,r,e=this,n=e._id,o=e.size();return new Promise(function(a,c){var s={value:c},d={value:function(){--o===0&&a()}};e.each(function(){var f=Fe(this,n),h=f.on;h!==t&&(r=(t=h).copy(),r._.cancel.push(s),r._.interrupt.push(s),r._.end.push(d)),f.on=r}),o===0&&a()})}var Wm=0;function Le(t,r,e,n){this._groups=t,this._parents=r,this._name=e,this._id=n}function qs(t){return mt().transition(t)}function bn(){return++Wm}var _t=mt.prototype;Le.prototype=qs.prototype={constructor:Le,select:Bs,selectAll:Ps,selectChild:_t.selectChild,selectChildren:_t.selectChildren,filter:Os,merge:Ns,selection:js,transition:Hs,call:_t.call,nodes:_t.nodes,node:_t.node,size:_t.size,empty:_t.empty,each:_t.each,on:Fs,attr:ks,attrTween:zs,style:Ls,styleTween:Cs,text:Us,textTween:$s,remove:Ds,tween:Is,delay:Ms,duration:As,ease:Ts,easeVarying:Rs,end:Ws,[Symbol.iterator]:_t[Symbol.iterator]};function wn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qm={time:null,delay:0,duration:250,ease:wn};function Xm(t,r){for(var e;!(e=t.__transition)||!(e=e[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return e}function Xs(t){var r,e;t instanceof Le?(r=t._id,t=t._name):(r=bn(),(e=qm).time=kr(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var c=n[a],s=c.length,d,f=0;f<s;++f)(d=c[f])&&xt(d,t,r,f,c,e||Xm(d,r));return new Le(n,this._parents,t,r)}mt.prototype.interrupt=Es;mt.prototype.transition=Xs;var Ar=t=>()=>t;function si(t,{sourceEvent:r,target:e,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function rt(t,r,e){this.k=t,this.x=r,this.y=e}rt.prototype={constructor:rt,scale:function(t){return t===1?this:new rt(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new rt(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tr=new rt(1,0,0);ai.prototype=rt.prototype;function ai(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Tr;return t.__zoom}function xn(t){t.stopImmediatePropagation()}function Qt(t){t.preventDefault(),t.stopImmediatePropagation()}function Gm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ym(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Gs(){return this.__zoom||Tr}function Km(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Qm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zm(t,r,e){var n=t.invertX(r[0][0])-e[0][0],o=t.invertX(r[1][0])-e[1][0],a=t.invertY(r[0][1])-e[0][1],c=t.invertY(r[1][1])-e[1][1];return t.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function Jm(){var t=Gm,r=Ym,e=Zm,n=Km,o=Qm,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,d=ii,f=Nt("start","zoom","end"),h,v,y,A=500,T=150,$=0,R=10;function P(S){S.property("__zoom",Gs).on("wheel.zoom",me,{passive:!1}).on("mousedown.zoom",_e).on("dblclick.zoom",ve).filter(o).on("touchstart.zoom",he).on("touchmove.zoom",De).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.transform=function(S,D,M,O){var x=S.selection?S.selection():S;x.property("__zoom",Gs),S!==x?Z(S,D,M,O):x.interrupt().each(function(){Y(this,arguments).event(O).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},P.scaleBy=function(S,D,M,O){P.scaleTo(S,function(){var x=this.__zoom.k,u=typeof D=="function"?D.apply(this,arguments):D;return x*u},M,O)},P.scaleTo=function(S,D,M,O){P.transform(S,function(){var x=r.apply(this,arguments),u=this.__zoom,b=M==null?j(x):typeof M=="function"?M.apply(this,arguments):M,E=u.invert(b),V=typeof D=="function"?D.apply(this,arguments):D;return e(J(Q(u,V),b,E),x,c)},M,O)},P.translateBy=function(S,D,M,O){P.transform(S,function(){return e(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof M=="function"?M.apply(this,arguments):M),r.apply(this,arguments),c)},null,O)},P.translateTo=function(S,D,M,O,x){P.transform(S,function(){var u=r.apply(this,arguments),b=this.__zoom,E=O==null?j(u):typeof O=="function"?O.apply(this,arguments):O;return e(Tr.translate(E[0],E[1]).scale(b.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof M=="function"?-M.apply(this,arguments):-M),u,c)},O,x)};function Q(S,D){return D=Math.max(a[0],Math.min(a[1],D)),D===S.k?S:new rt(D,S.x,S.y)}function J(S,D,M){var O=D[0]-M[0]*S.k,x=D[1]-M[1]*S.k;return O===S.x&&x===S.y?S:new rt(S.k,O,x)}function j(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function Z(S,D,M,O){S.on("start.zoom",function(){Y(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(O).end()}).tween("zoom",function(){var x=this,u=arguments,b=Y(x,u).event(O),E=r.apply(x,u),V=M==null?j(E):typeof M=="function"?M.apply(x,u):M,q=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),L=x.__zoom,N=typeof D=="function"?D.apply(x,u):D,B=d(L.invert(V).concat(q/L.k),N.invert(V).concat(q/N.k));return function(z){if(z===1)z=N;else{var C=B(z),X=q/C[2];z=new rt(X,V[0]-C[0]*X,V[1]-C[1]*X)}b.zoom(null,z)}})}function Y(S,D,M){return!M&&S.__zooming||new ne(S,D)}function ne(S,D){this.that=S,this.args=D,this.active=0,this.sourceEvent=null,this.extent=r.apply(S,D),this.taps=0}ne.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,D){return this.mouse&&S!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var D=We(this.that).datum();f.call(S,this.that,new si(S,{sourceEvent:this.sourceEvent,target:P,type:S,transform:this.that.__zoom,dispatch:f}),D)}};function me(S,...D){if(!t.apply(this,arguments))return;var M=Y(this,D).event(S),O=this.__zoom,x=Math.max(a[0],Math.min(a[1],O.k*Math.pow(2,n.apply(this,arguments)))),u=Ye(S);if(M.wheel)(M.mouse[0][0]!==u[0]||M.mouse[0][1]!==u[1])&&(M.mouse[1]=O.invert(M.mouse[0]=u)),clearTimeout(M.wheel);else{if(O.k===x)return;M.mouse=[u,O.invert(u)],St(this),M.start()}Qt(S),M.wheel=setTimeout(b,T),M.zoom("mouse",e(J(Q(O,x),M.mouse[0],M.mouse[1]),M.extent,c));function b(){M.wheel=null,M.end()}}function _e(S,...D){if(y||!t.apply(this,arguments))return;var M=S.currentTarget,O=Y(this,D,!0).event(S),x=We(S.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",q,!0),u=Ye(S,M),b=S.clientX,E=S.clientY;mr(S.view),xn(S),O.mouse=[u,this.__zoom.invert(u)],St(this),O.start();function V(L){if(Qt(L),!O.moved){var N=L.clientX-b,B=L.clientY-E;O.moved=N*N+B*B>$}O.event(L).zoom("mouse",e(J(O.that.__zoom,O.mouse[0]=Ye(L,M),O.mouse[1]),O.extent,c))}function q(L){x.on("mousemove.zoom mouseup.zoom",null),_r(L.view,O.moved),Qt(L),O.event(L).end()}}function ve(S,...D){if(t.apply(this,arguments)){var M=this.__zoom,O=Ye(S.changedTouches?S.changedTouches[0]:S,this),x=M.invert(O),u=M.k*(S.shiftKey?.5:2),b=e(J(Q(M,u),O,x),r.apply(this,D),c);Qt(S),s>0?We(this).transition().duration(s).call(Z,b,O,S):We(this).call(P.transform,b,O,S)}}function he(S,...D){if(t.apply(this,arguments)){var M=S.touches,O=M.length,x=Y(this,D,S.changedTouches.length===O).event(S),u,b,E,V;for(xn(S),b=0;b<O;++b)E=M[b],V=Ye(E,this),V=[V,this.__zoom.invert(V),E.identifier],x.touch0?!x.touch1&&x.touch0[2]!==V[2]&&(x.touch1=V,x.taps=0):(x.touch0=V,u=!0,x.taps=1+!!h);h&&(h=clearTimeout(h)),u&&(x.taps<2&&(v=V[0],h=setTimeout(function(){h=null},A)),St(this),x.start())}}function De(S,...D){if(this.__zooming){var M=Y(this,D).event(S),O=S.changedTouches,x=O.length,u,b,E,V;for(Qt(S),u=0;u<x;++u)b=O[u],E=Ye(b,this),M.touch0&&M.touch0[2]===b.identifier?M.touch0[0]=E:M.touch1&&M.touch1[2]===b.identifier&&(M.touch1[0]=E);if(b=M.that.__zoom,M.touch1){var q=M.touch0[0],L=M.touch0[1],N=M.touch1[0],B=M.touch1[1],z=(z=N[0]-q[0])*z+(z=N[1]-q[1])*z,C=(C=B[0]-L[0])*C+(C=B[1]-L[1])*C;b=Q(b,Math.sqrt(z/C)),E=[(q[0]+N[0])/2,(q[1]+N[1])/2],V=[(L[0]+B[0])/2,(L[1]+B[1])/2]}else if(M.touch0)E=M.touch0[0],V=M.touch0[1];else return;M.zoom("touch",e(J(b,E,V),M.extent,c))}}function F(S,...D){if(this.__zooming){var M=Y(this,D).event(S),O=S.changedTouches,x=O.length,u,b;for(xn(S),y&&clearTimeout(y),y=setTimeout(function(){y=null},A),u=0;u<x;++u)b=O[u],M.touch0&&M.touch0[2]===b.identifier?delete M.touch0:M.touch1&&M.touch1[2]===b.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(b=Ye(b,this),Math.hypot(v[0]-b[0],v[1]-b[1])<R)){var E=We(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return P.wheelDelta=function(S){return arguments.length?(n=typeof S=="function"?S:Ar(+S),P):n},P.filter=function(S){return arguments.length?(t=typeof S=="function"?S:Ar(!!S),P):t},P.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Ar(!!S),P):o},P.extent=function(S){return arguments.length?(r=typeof S=="function"?S:Ar([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),P):r},P.scaleExtent=function(S){return arguments.length?(a[0]=+S[0],a[1]=+S[1],P):[a[0],a[1]]},P.translateExtent=function(S){return arguments.length?(c[0][0]=+S[0][0],c[1][0]=+S[1][0],c[0][1]=+S[0][1],c[1][1]=+S[1][1],P):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},P.constrain=function(S){return arguments.length?(e=S,P):e},P.duration=function(S){return arguments.length?(s=+S,P):s},P.interpolate=function(S){return arguments.length?(d=S,P):d},P.on=function(){var S=f.on.apply(f,arguments);return S===f?P:S},P.clickDistance=function(S){return arguments.length?($=(S=+S)*S,P):Math.sqrt($)},P.tapDistance=function(S){return arguments.length?(R=+S,P):R},P}function Sn(t,r){let e;if(r===void 0)for(let n of t)n!=null&&(e<n||e===void 0&&n>=n)&&(e=n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(e<o||e===void 0&&o>=o)&&(e=o)}return e}function Zt(t,r){let e;if(r===void 0)for(let n of t)n!=null&&(e>n||e===void 0&&n>=n)&&(e=n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(e>o||e===void 0&&o>=o)&&(e=o)}return e}function Jt(t,r){let e=0;if(r===void 0)for(let n of t)(n=+n)&&(e+=n);else{let n=-1;for(let o of t)(o=+r(o,++n,t))&&(e+=o)}return e}var{abs:ab,max:lb,min:ub}=Math;function Ys(t){return[+t[0],+t[1]]}function e_(t){return[Ys(t[0]),Ys(t[1])]}var cb={name:"x",handles:["w","e"].map(li),input:function(t,r){return t==null?null:[[+t[0],r[0][1]],[+t[1],r[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},fb={name:"y",handles:["n","s"].map(li),input:function(t,r){return t==null?null:[[r[0][0],+t[0]],[r[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},pb={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(li),input:function(t){return t==null?null:e_(t)},output:function(t){return t}};function li(t){return{type:t}}var ui=Math.PI,ci=2*ui,jt=1e-6,t_=ci-jt;function Ks(t){this._+=t[0];for(let r=1,e=t.length;r<e;++r)this._+=arguments[r]+t[r]}function r_(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return Ks;let e=10**r;return function(n){this._+=n[0];for(let o=1,a=n.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+n[o]}}var Vt=class{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Ks:r_(r)}moveTo(r,e){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,e){this._append`L${this._x1=+r},${this._y1=+e}`}quadraticCurveTo(r,e,n,o){this._append`Q${+r},${+e},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(r,e,n,o,a,c){this._append`C${+r},${+e},${+n},${+o},${this._x1=+a},${this._y1=+c}`}arcTo(r,e,n,o,a){if(r=+r,e=+e,n=+n,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let c=this._x1,s=this._y1,d=n-r,f=o-e,h=c-r,v=s-e,y=h*h+v*v;if(this._x1===null)this._append`M${this._x1=r},${this._y1=e}`;else if(y>jt)if(!(Math.abs(v*d-f*h)>jt)||!a)this._append`L${this._x1=r},${this._y1=e}`;else{let A=n-c,T=o-s,$=d*d+f*f,R=A*A+T*T,P=Math.sqrt($),Q=Math.sqrt(y),J=a*Math.tan((ui-Math.acos(($+y-R)/(2*P*Q)))/2),j=J/Q,Z=J/P;Math.abs(j-1)>jt&&this._append`L${r+j*h},${e+j*v}`,this._append`A${a},${a},0,0,${+(v*A>h*T)},${this._x1=r+Z*d},${this._y1=e+Z*f}`}}arc(r,e,n,o,a,c){if(r=+r,e=+e,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(o),d=n*Math.sin(o),f=r+s,h=e+d,v=1^c,y=c?o-a:a-o;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>jt||Math.abs(this._y1-h)>jt)&&this._append`L${f},${h}`,n&&(y<0&&(y=y%ci+ci),y>t_?this._append`A${n},${n},0,1,${v},${r-s},${e-d}A${n},${n},0,1,${v},${this._x1=f},${this._y1=h}`:y>jt&&this._append`A${n},${n},0,${+(y>=ui)},${v},${this._x1=r+n*Math.cos(a)},${this._y1=e+n*Math.sin(a)}`)}rect(r,e,n,o){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+e}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function Qs(){return new Vt}Qs.prototype=Vt.prototype;function fi(t){return function(){return t}}function Zs(t){let r=3;return t.digits=function(e){if(!arguments.length)return r;if(e==null)r=null;else{let n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);r=n}return t},()=>new Vt(r)}var Js=Array.prototype.slice;function ea(t){return t[0]}function ta(t){return t[1]}var pi=class{constructor(r,e){this._context=r,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,e){switch(r=+r,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,e,r,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,r,this._y0,r,e);break}}this._x0=r,this._y0=e}};function ra(t){return new pi(t,!0)}function n_(t){return t.source}function i_(t){return t.target}function na(t){let r=n_,e=i_,n=ea,o=ta,a=null,c=null,s=Zs(d);function d(){let f,h=Js.call(arguments),v=r.apply(this,h),y=e.apply(this,h);if(a==null&&(c=t(f=s())),c.lineStart(),h[0]=v,c.point(+n.apply(this,h),+o.apply(this,h)),h[0]=y,c.point(+n.apply(this,h),+o.apply(this,h)),c.lineEnd(),f)return c=null,f+""||null}return d.source=function(f){return arguments.length?(r=f,d):r},d.target=function(f){return arguments.length?(e=f,d):e},d.x=function(f){return arguments.length?(n=typeof f=="function"?f:fi(+f),d):n},d.y=function(f){return arguments.length?(o=typeof f=="function"?f:fi(+f),d):o},d.context=function(f){return arguments.length?(f==null?a=c=null:c=t(a=f),d):a},d}function o_(){return na(ra)}function s_(t){return t.target.depth}function ww(t){return pe(t.depth,0)}function xw(t,r){return r-1-pe(t.height,0)}function ia(t,r){return t.sourceLinks?.length?pe(t.depth,0):r-1}function Sw(t){return t.targetLinks?.length?pe(t.depth,0):t.sourceLinks?.length?pe(Zt(t.sourceLinks,s_),0)-1:0}function di(t){return()=>t}function oa(t){let r=new Set,e=new Map,n=new Map;for(let f of t.nodes){r.add(f);let h=0,v=0;for(let y of pe(f.targetLinks,[]))y.source!==f&&h++;for(let y of pe(f.sourceLinks,[]))y.target!==f&&v++;e.set(f,h),n.set(f,v)}function o(f){r.delete(f);for(let h of pe(f.targetLinks,[])){let v=h.source;if(r.has(v)){let y=pe(n.get(v),0);n.set(v,y-1)}}for(let h of pe(f.sourceLinks,[])){let v=h.target;if(r.has(v)){let y=pe(e.get(v),0);e.set(v,y-1)}}}let a=[],c=[];for(;r.size>0;){for(;;){let v=!1;for(let y of r)n.get(y)===0&&(v=!0,c.push(y),o(y));if(!v)break}for(;;){let v=!1;for(let y of r)e.get(y)===0&&(v=!0,a.push(y),o(y));if(!v)break}if(r.size===0)break;let f=null,h=null;for(let v of r){let y=pe(n.get(v),0)-pe(e.get(v),0);(f===null||y>f)&&(f=y,h=v)}h!=null&&(a.push(h),o(h))}c.reverse();let s=a.concat(c),d=new Map;for(let[f,h]of s.entries())d.set(h,f);for(let f of t.links){let h=pe(d.get(f.source),0),v=pe(d.get(f.target),0);h===v?f.direction="self":h<v?f.direction="forward":f.direction="backward"}}function sa(t,r){return En(t.source,r.source)||t.index-r.index}function aa(t,r){return En(t.target,r.target)||t.index-r.index}function En(t,r){return t.y0-r.y0}function mi(t){return t.value}function a_(t){return t.index}function l_(t){return t.nodes}function u_(t){return t.links}function la(t,r){let e=t.get(r);if(!e)throw new Error("missing: "+r.toString());return e}function ua({nodes:t}){for(let r of t){let e=r.y0,n=e;for(let o of r.sourceLinks)o.y0=e+o.width/2,e+=o.width;for(let o of r.targetLinks)o.y1=n+o.width/2,n+=o.width}}function Rr(t){return pe(t,0)}function ca(){let t=0,r=0,e=1,n=1,o=24,a=8,c=a_,s=ia,d,f,h=l_,v=u_,y=6;function A(z){let C={nodes:[...z.nodes],links:[...z.links]};return ve(C),he(C),De(C),F(C),S(C),O(C),ua(C),C}let T=A;T.update=function(z){return ua(z),z};function $(z){return z==null?c:(c=z,T)}T.nodeId=$;function R(z){return z==null?s:(s=z,T)}T.nodeAlign=R;function P(z){return z==null?d:(d=z,T)}T.nodeSort=P;function Q(z){return z==null?o:(o=z,T)}T.nodeWidth=Q;function J(z){return z==null?a:(a=z,T)}T.nodePadding=J;function j(z){return z==null?h:(h=typeof z=="function"?z:di(z),T)}T.nodes=j;function Z(z){return z==null?v:(v=typeof z=="function"?z:di(z),T)}T.links=Z;function Y(z){return z==null?f:(f=z,T)}T.linkSort=Y;function ne(z){return z==null?[e-t,n-r]:(t=r=0,[e,n]=z,T)}T.size=ne;function me(z){return z==null?[[t,r],[e,n]]:([[t,r],[e,n]]=z,T)}T.extent=me;function _e(z){return z==null?y:(y=z,T)}T.iterations=_e;function ve({nodes:z,links:C}){for(let[G,W]of z.entries())W.index=G,W.sourceLinks=[],W.targetLinks=[];let X=new Map(z.map(G=>[c(G),G]));for(let[G,W]of C.entries()){W.index=G;let{source:ie,target:ze}=W;typeof ie!="object"&&(ie=W.source=la(X,ie)),typeof ze!="object"&&(ze=W.target=la(X,ze)),ie.sourceLinks.push(W),ze.targetLinks.push(W)}}function he({nodes:z}){for(let C of z)C.value=Math.max(Jt(C.sourceLinks,mi),Jt(C.targetLinks,mi))}function De(z){oa(z)}function F({nodes:z}){let C=z.length,X=new Set(z),G=new Set,W=0;for(;X.size;){for(let ie of X){ie.depth=W;for(let{target:ze,direction:xe}of ie.sourceLinks)xe==="forward"&&G.add(ze)}if(++W>C)throw new Error("circular link");X=G,G=new Set}}function S({nodes:z}){let C=z.length,X=new Set(z),G=new Set,W=0;for(;X.size;){for(let ie of X){ie.height=W;for(let{source:ze,direction:xe}of ie.targetLinks)xe==="forward"&&G.add(ze)}if(++W>C)throw new Error("circular link");X=G,G=new Set}}function D({nodes:z}){let C=Rr(Sn(z,W=>W.depth))+1,X=(e-t-o)/(C-1),G=new Array(C);for(let W of z){let ie=Math.max(0,Math.min(C-1,Math.floor(s.call(null,W,C))));W.layer=ie,W.x0=t+ie*X,W.x1=W.x0+o,G[ie]?G[ie].push(W):G[ie]=[W]}if(d)for(let W of G)W.sort(d);return G}function M(z){let C=Zt(z,X=>(n-r-(X.length-1)*a)/Jt(X,mi));C=pe(C,0);for(let X of z){let G=r;for(let W of X){W.y0=G,W.y1=G+W.value*C,G=W.y1+a;for(let ie of W.sourceLinks)ie.width=ie.value*C}G=(n-G+a)/(X.length+1);for(let W=0;W<X.length;++W){let ie=X[W];ie.y0+=G*(W+1),ie.y1+=G*(W+1)}L(X)}return n}function O(z){let C=D(z),X=M(C);for(let G=0;G<y;++G){let W=Math.pow(.99,G),ie=Math.max(1-W,(G+1)/y);u(C,W,ie,X),x(C,W,ie,X)}}function x(z,C,X,G){for(let W=1,ie=z.length;W<ie;++W){let ze=z[W];for(let xe of ze){let Et=0,ct=0;for(let{source:kt,value:tr}of xe.targetLinks){let zt=tr*(Rr(xe.layer)-Rr(kt.layer));Et+=N(kt,xe)*zt,ct+=zt}if(!(ct>0))continue;let It=(Et/ct-xe.y0)*C;xe.y0+=It,xe.y1+=It,q(xe)}d===void 0&&ze.sort(En),b(ze,X,G)}}function u(z,C,X,G){for(let W=z.length,ie=W-2;ie>=0;--ie){let ze=z[ie];for(let xe of ze){let Et=0,ct=0;for(let{target:kt,value:tr}of xe.sourceLinks){let zt=tr*(Rr(kt.layer)-Rr(xe.layer));Et+=B(xe,kt)*zt,ct+=zt}if(!(ct>0))continue;let It=(Et/ct-xe.y0)*C;xe.y0+=It,xe.y1+=It,q(xe)}d===void 0&&ze.sort(En),b(ze,X,G)}}function b(z,C,X){let G=z.length>>1,W=z[G];V(z,W.y0-a,G-1,C),E(z,W.y1+a,G+1,C),V(z,X,z.length-1,C),E(z,r,0,C)}function E(z,C,X,G){for(;X<z.length;++X){let W=z[X],ie=(C-W.y0)*G;ie>1e-6&&(W.y0+=ie,W.y1+=ie),C=W.y1+a}}function V(z,C,X,G){for(;X>=0;--X){let W=z[X],ie=(W.y1-C)*G;ie>1e-6&&(W.y0-=ie,W.y1-=ie),C=W.y0-a}}function q({sourceLinks:z,targetLinks:C}){if(f===void 0){for(let X of C)X.source.sourceLinks.sort(aa);for(let X of z)X.target.targetLinks.sort(sa)}}function L(z){if(f===void 0)for(let{sourceLinks:C,targetLinks:X}of z)C.sort(aa),X.sort(sa)}function N(z,C){let X=z.y0-(z.sourceLinks.length-1)*a/2;for(let{target:G,width:W}of z.sourceLinks){if(G===C)break;X+=W+a}for(let{source:G,width:W}of C.targetLinks){if(G===z)break;X-=W}return X}function B(z,C){let X=C.y0-(C.targetLinks.length-1)*a/2;for(let{source:G,width:W}of C.targetLinks){if(G===z)break;X+=W+a}for(let{target:G,width:W}of z.sourceLinks){if(G===C)break;X-=W}return X}return T}var ge=function(t){return t.Version0="0",t.Version1="1",t.Version2="2",t.Version3="3",t.Version4="4",t.Version5="5",t.Version6="6",t.Version7="7",t.Version8="8",t.Version9="9",t.Version10="10",t.Version11="11",t}(ge||{});var ut=function(t){return t[t.Auto=0]="Auto",t[t.kW=1]="kW",t[t.MW=2]="MW",t[t.GW=3]="GW",t}(ut||{}),Dw=[{label:"options.powerUnit.auto",value:ut.Auto},{label:"options.powerUnit.kW",value:ut.kW},{label:"options.powerUnit.MW",value:ut.MW},{label:"options.powerUnit.GW",value:ut.GW}];var nt=function(t){return t.None="none",t.Item="item",t.Recipe="recipe",t.Machine="machine",t.Recipes="recipes",t}(nt||{}),Pw={[nt.None]:"",[nt.Item]:"fa-solid fa-box",[nt.Recipe]:"fa-solid fa-flask",[nt.Machine]:"fa-solid fa-industry",[nt.Recipes]:"fa-solid fa-flask-vial"};var _i="",Lt=class{static objectiveNormalizedRate(r,e,n,o,a){if(r.unit===st.Machines||r.type===be.Maximize)return r.value;let c=r.value,s=re.one;switch(r.unit){case st.Items:{s=o.value.reciprocal();break}case st.Belts:{let f=e[r.targetId].beltId;f&&(s=n[f]);break}case st.Wagons:{let f=e[r.targetId].wagonId;if(f){let h=a.itemEntities[r.targetId],v=a.itemEntities[f];h.stack&&v.cargoWagon?s=h.stack.mul(v.cargoWagon.size).div(o.value):v.fluidWagon&&(s=v.fluidWagon.capacity.div(o.value))}break}}let d=a.adjustedRecipe[a.itemRecipeIds[r.targetId][0]];return d?.isTechnology&&(s=s.mul(d.productivity)),c.mul(s)}static addEntityValue(r,e,n,o){let a=r[e];a?a[n]?a[n]=a[n].add(o):a[n]=o:r[e]={[n]:o}}static adjustPowerPollution(r,e,n){if(r.machines?.nonzero()&&!e.part){if(e.drain?.nonzero()||e.consumption?.nonzero()){if(r.power=re.zero,e.drain?.nonzero()){let o=r.machines.ceil();n===qt.DysonSphereProgram&&(o=o.sub(r.machines)),r.power=r.power.add(o.mul(e.drain))}e.consumption?.nonzero()&&(r.power=r.power.add(r.machines.mul(e.consumption)))}e.pollution?.nonzero()&&(r.pollution=r.machines.mul(e.pollution))}}static normalizeSteps(r,e,n,o,a,c,s,d){let f=this.copy(r);for(let v of f)this.calculateParentsOutputs(v,f);let h=Wr(e);for(let v of f)this.calculateSettings(v,h,o),this.calculateBelts(v,n,a,d),this.calculateBeacons(v,s.beaconReceivers,d),this.calculateDisplayRate(v,c),this.calculateChecked(v,s);return this.sortBySankey(f),this.calculateHierarchy(f)}static calculateParentsOutputs(r,e){if(r.recipe&&r.machines?.nonzero()){let n=r.recipe,o=r.machines.div(n.time);for(let a of Object.keys(n.in))if(n.in[a].nonzero()){let c=n.in[a].mul(o),s=e.find(d=>d.itemId===a);s!=null&&this.addEntityValue(s,"parents",r.id,c)}for(let a of Object.keys(n.out))if(n.out[a].nonzero()){let c=n.out[a].mul(o),s=e.find(d=>d.itemId===a);s?.items?.nonzero()&&this.addEntityValue(r,"outputs",a,c.div(s.items))}}}static calculateSettings(r,e,n){r.recipeId&&(r.recipeObjectiveId?r.recipeSettings=e[r.recipeObjectiveId]:r.recipeSettings=n[r.recipeId])}static calculateBelts(r,e,n,o){let a=!1;if(r.recipeId!=null&&r.recipeSettings!=null){let c=r.recipeSettings.machineId;if(c!=null){let s=o.machineEntities[c],d=o.recipeEntities[r.recipeId];a=!!(d.isTechnology||s.silo&&!d.part)}}if(a)delete r.belts,delete r.wagons;else if(r.itemId!=null){let c=e[r.itemId].beltId;r.items!=null&&c!=null&&(r.belts=r.items.div(n[c]));let s=e[r.itemId].wagonId;if(r.items!=null&&s!=null){let d=o.itemEntities[r.itemId];d.stack?r.wagons=r.items.div(o.cargoWagonEntities[s].size.mul(d.stack)):r.wagons=r.items.div(o.fluidWagonEntities[s].capacity)}}}static calculateBeacons(r,e,n){if(!e?.nonzero()||r.recipeId==null||!r.machines?.nonzero()||n.recipeEntities[r.recipeId].part||r.recipeSettings==null)return;let o=r.machines,a=r.recipeSettings;a.beacons!=null&&(r.recipeSettings=et(Ie({},r.recipeSettings),{beacons:a.beacons.map(c=>{let s=c.total;if(c.id!=null){c.count!=null&&s==null&&(s=o.ceil().mul(c.count).div(e),s.lt(c.count)&&(s=c.count));let d=n.beaconEntities[c.id];d.type===Ji.Electric&&d.usage!=null&&s!=null&&(r.power=(r.power??re.zero).add(s.mul(d.usage)))}return et(Ie({},c),{total:s})})}))}static calculateDisplayRate(r,e){if(r.items){if(r.parents)for(let n of Object.keys(r.parents))r.parents[n]=r.parents[n].div(r.items);r.items=r.items.mul(e.value)}r.surplus&&(r.surplus=r.surplus.mul(e.value)),r.wagons&&(r.wagons=r.wagons.mul(e.value)),r.pollution&&(r.pollution=r.pollution.mul(e.value)),r.output&&(r.output=r.output.mul(e.value))}static calculateChecked(r,e){r.itemId!=null?r.checked=e.checkedItemIds.has(r.itemId):r.recipeObjectiveId!=null?r.checked=e.checkedObjectiveIds.has(r.recipeObjectiveId):r.recipeId!=null&&(r.checked=e.checkedRecipeIds.has(r.recipeId))}static sortBySankey(r){let e=r.reduce((s,d)=>(s[d.id]=d,s),{}),n=[],o=[];for(let s of r){if(s.itemId){let d=`i|${s.itemId}`;if(n.push({id:d,stepId:s.id}),s.parents)for(let f of Object.keys(s.parents)){if(f==="")continue;let h=e[f].recipeId;h!=null&&o.push({source:d,target:`r|${h}`,value:1})}}if(s.recipeId){let d=`r|${s.recipeId}`;if(n.push({id:d,stepId:s.id}),s.outputs)for(let f of Object.keys(s.outputs))o.push({source:d,target:`i|${f}`,value:1})}}if(!n.length||!o.length)return;let a=ca().nodeId(s=>s.id)({nodes:n,links:o});for(let s of r)s.depth=a.nodes.find(d=>d.stepId===s.id)?.depth;function c(s){return s.output?1e5:pe(s.depth,0)}r.sort((s,d)=>c(d)-c(s))}static calculateHierarchy(r){let e={};for(let a of r)if(a.parents==null||a.parents[""]||Object.keys(a.parents).length>1)e[a.id]=_i;else{let c=Object.keys(a.parents)[0],s=r.find(d=>d.id===c);s&&(a.id===s.id?e[a.id]=_i:e[a.id]=s.id)}let n={};for(let a of r){let c=e[a.id];n[c]||(n[c]=[]),n[c].push(a)}let o=this.sortRecursive(n,_i,[]);return o.push(...r.filter(a=>!o.includes(a))),o}static sortRecursive(r,e,n){if(!r[e])return[];let o=r[e];for(let a of o)n.push(a),this.sortRecursive(r,a.id,n);return n}static copy(r){return r.map(e=>e.parents?et(Ie({},e),{parents:Ie({},e.parents)}):Ie({},e))}};var va=Bp(ha());var Ct=function(t){return t.Failed="failed",t.Paused="paused",t.Skipped="skipped",t.Solved="solved",t}(Ct||{});var ga=re(1n,10n);var c_=Cr.debug?{}:{msgLevel:"off"},zn=class{static addItemValue(r,e,n=re.zero,o="out"){if(r[e]){let a=r[e][o];a?r[e][o]=a.add(n):r[e][o]=n}else r[e]={out:re.zero,[o]:n}}static solve(r,e,n,o){if(o)return{steps:[],resultType:Ct.Paused};if(r.length===0)return{steps:[],resultType:Ct.Skipped};let a=this.getState(r,e,n),c=this.getSolution(a);return c.resultType===Ct.Solved&&this.updateSteps(c,a),{steps:a.steps,resultType:c.resultType,returnCode:c.returnCode,simplexStatus:c.simplexStatus,unboundedRecipeId:c.unboundedRecipeId,time:c.time,cost:c.cost}}static getState(r,e,n){let o={objectives:r,recipeObjectives:r.filter(a=>vt(a)&&[be.Output,be.Maximize].includes(a.type)),steps:[],recipes:{},itemValues:{},recipeLimits:{},unproduceableIds:new Set,excludedIds:e.excludedItemIds,recipeIds:n.recipeIds.filter(a=>{let c=n.recipeEntities[a];return!e.excludedRecipeIds.has(a)&&(c.unlockedBy==null||e.researchedTechnologyIds.has(c.unlockedBy))}),itemIds:n.itemIds.filter(a=>!e.excludedItemIds.has(a)),maximizeType:e.maximizeType,surplusMachinesOutput:e.surplusMachinesOutput,costs:e.costs,data:n};for(let a of r)if(vt(a))switch(a.type){case be.Output:case be.Maximize:{for(let c of Object.keys(a.recipe.out))this.addItemValue(o.itemValues,c),this.parseItemRecursively(c,o);this.parseRecipeRecursively(a.recipe,o);break}case be.Input:{for(let c of Object.keys(a.recipe.out).filter(s=>a.recipe.produces.has(s))){let s=a.value.mul(a.recipe.output[c]);this.addItemValue(o.itemValues,c,s,"in")}break}case be.Limit:{let c=o.recipeLimits[a.targetId];(c==null||c.gt(a.value))&&(o.recipeLimits[a.targetId]=a.value);break}}else switch(a.type){case be.Output:{this.addItemValue(o.itemValues,a.targetId,a.value),this.parseItemRecursively(a.targetId,o);break}case be.Input:{this.addItemValue(o.itemValues,a.targetId,a.value,"in");break}case be.Maximize:{this.addItemValue(o.itemValues,a.targetId,a.value,"max"),this.addItemValue(o.itemValues,a.targetId),this.parseItemRecursively(a.targetId,o);break}case be.Limit:{this.addItemValue(o.itemValues,a.targetId),this.parseItemRecursively(a.targetId,o);let c=o.itemValues[a.targetId].lim;(c==null||c.gt(a.value))&&(o.itemValues[a.targetId].lim=a.value);break}}return this.addSurplusVariables(o),this.parseUnproduceable(o),o}static recipeMatches(r,e){let n=e.data.itemIncludedRecipeIds[r].filter(o=>!e.recipes[o]).map(o=>e.data.adjustedRecipe[o]);return n.forEach(o=>e.recipes[o.id]=o),n}static itemMatches(r,e){let n=Object.keys(r.in).filter(o=>e.itemValues[o]?.out==null);for(let o of n)this.addItemValue(e.itemValues,o);return n}static parseRecipeRecursively(r,e){if(r.in){let n=this.itemMatches(r,e);for(let o of n.filter(a=>e.itemIds.includes(a)))this.parseItemRecursively(o,e)}}static parseItemRecursively(r,e){let n=this.recipeMatches(r,e);for(let o of n)this.parseRecipeRecursively(o,e)}static addSurplusVariables(r){let e=Object.keys(r.recipes).map(n=>r.recipes[n]);for(let n of e)for(let o of Object.keys(n.out).filter(a=>r.itemValues[a]?.out==null))this.addItemValue(r.itemValues,o)}static parseUnproduceable(r){let e=Object.keys(r.itemValues),n=new Set(Object.keys(r.recipes));r.unproduceableIds=new Set(e.filter(o=>r.data.itemIncludedRecipeIds[o].every(a=>!n.has(a))))}static getSolution(r){let e=this.glpk(r);if(e.error)return{resultType:Ct.Failed,returnCode:e.returnCode,simplexStatus:e.status,unboundedRecipeId:e.unboundedRecipeId,surplus:{},unproduceable:{},excluded:{},recipes:{},time:0,cost:re.zero,itemIds:[],recipeIds:[],unproduceableIds:new Set,excludedIds:new Set};let n=Object.keys(r.itemValues),o=Object.keys(r.recipes),{unproduceableIds:a,excludedIds:c}=r,{surplus:s,unproduceable:d,excluded:f,recipes:h}=e;return{resultType:Ct.Solved,surplus:s,recipes:h,unproduceable:d,excluded:f,time:e.time,itemIds:n,recipeIds:o,unproduceableIds:a,excludedIds:c,cost:e.cost}}static itemCost(r,e,n){let o=n.data.itemEntities[r].stack==null&&n.data.game===qt.Factorio?ga:re.one,a=n.costs[e];return o.mul(a).toNumber()}static glpk(r){let e=Object.keys(r.itemValues),n=Object.keys(r.recipes),o=new va.Model({sense:"min"}),a={},c={},s={},d={},f={},h={},v={},y={},A={},T={},$={},R={obj:r.costs.maximize.toNumber(),lb:0,name:"maximize"},P=o.addVar(R),Q=re.zero;for(let F of n){let S={obj:(r.recipes[F].cost??re.zero).toNumber(),lb:0,name:F};r.recipeLimits[F]&&(S.ub=r.recipeLimits[F].toNumber()),a[F]=o.addVar(S)}for(let F of r.recipeObjectives){let S={lb:0,name:F.id};if(F.type===be.Output&&(S.ub=F.value.toNumber(),S.lb=F.value.toNumber()),c[F.id]=o.addVar(S),F.type===be.Maximize)switch(r.maximizeType){case Tt.Weight:{let D={obj:F.value.mul(r.costs.maximize).toNumber(),lb:0,name:F.id};y[F.id]=o.addVar(D);let O={coeffs:[[c[F.id],1],[y[F.id],-1]],lb:0,name:F.id};$[F.id]=o.addConstr(O);break}case Tt.Ratio:{Q=Q.add(F.value);let M={coeffs:[[c[F.id],1],[P,F.value.inverse().toNumber()]],lb:0,name:F.id};$[F.id]=o.addConstr(M);break}}}for(let F of r.unproduceableIds){let D={obj:this.itemCost(F,"unproduceable",r),lb:0,name:F};d[F]=o.addVar(D)}for(let F of r.excludedIds){let D={obj:this.itemCost(F,"excluded",r),lb:0,name:F};f[F]=o.addVar(D)}for(let F of e){let D={obj:this.itemCost(F,"surplus",r),lb:0,name:F};h[F]=o.addVar(D);let M=r.itemValues[F];if(M.in){let O={lb:0,ub:M.in.toNumber(),name:F};s[F]=o.addVar(O)}}let J={};for(let F of e){let S=r.itemValues[F],D=[],M=[];r.data.itemIncludedIoRecipeIds[F].forEach(x=>{let u=r.recipes[x];if(u==null)return;let b=u.output[F];b?.nonzero()&&D.push([a[x],b.toNumber()]),u.in[F]&&M.push([a[x],u.in[F].div(u.time).toNumber()])});for(let x of r.recipeObjectives){let u=x.recipe,b=u.output[F];b?.nonzero()&&(b.gt(re.zero)&&!r.surplusMachinesOutput?(J[F]==null&&(J[F]={}),J[F][x.id]=b):D.push([c[x.id],b.toNumber()])),u.in[F]&&M.push([c[x.id],u.in[F].div(u.time).toNumber()])}if(r.unproduceableIds.has(F)&&D.push([d[F],1]),r.excludedIds.has(F)&&D.push([f[F],1]),S.in&&D.push([s[F],1]),D.push([h[F],-1]),S.max!=null)switch(r.maximizeType){case Tt.Weight:{let x={obj:S.max.mul(r.costs.maximize).toNumber(),lb:0,name:F};v[F]=o.addVar(x),D.push([v[F],-1]);break}case Tt.Ratio:{Q=Q.add(S.max),D.push([P,S.max.inverse().toNumber()]);break}}let O={coeffs:D,lb:S.out.toNumber(),ub:S.out.toNumber(),name:F};if(A[F]=o.addConstr(O),S.lim){let x={coeffs:M,ub:S.lim.toNumber(),name:F};T[F]=o.addConstr(x)}}P.obj=P.obj*Q.toNumber();let j=Date.now(),[Z,Y]=this.glpkSimplex(o),ne=Date.now()-j,me={},_e={},ve={},he={},De=re(o.value);if(Z!=="ok"||Y!=="optimal"){let F;try{F=o.ray}catch{}let S;return F&&Hi(a,F)&&(S=F.name),{returnCode:Z,status:Y,unboundedRecipeId:S,time:ne,surplus:me,unproduceable:_e,excluded:ve,recipes:he,cost:De,error:!0}}for(let F of e){let S=r.itemValues[F],D=re(h[F].value);if(D.nonzero()&&(me[F]=D),J[F])for(let M of Object.keys(J[F])){let O=J[F][M],x=c[M].value,b=re(x).mul(O);S.out=S.out.add(b)}if(S.max!=null)switch(r.maximizeType){case Tt.Ratio:{let M=P.value,x=re(M).mul(S.max);S.out=S.out.add(x);break}case Tt.Weight:{let M=v[F].value,O=re(M);S.out=S.out.add(O);break}}}for(let F of n){let S=re(a[F].value);S.nonzero()&&(he[F]=S)}for(let F of r.unproduceableIds){let S=re(d[F].value);S.nonzero()&&(_e[F]=S)}for(let F of r.excludedIds){let S=re(f[F].value);S.nonzero()&&(ve[F]=S)}return r.recipeObjectives=r.recipeObjectives.map(F=>et(Ie({},F),{value:re(c[F.id].value)})),{returnCode:Z,status:Y,time:ne,surplus:me,unproduceable:_e,excluded:ve,recipes:he,cost:De,error:!1}}static glpkSimplex(r){return[r.simplex(c_),r.status]}static updateSteps(r,e){for(let n of Object.keys(e.itemValues))this.addItemStep(n,r,e);this.assignRecipes(r,e);for(let n of Object.keys(r.recipes).map(o=>e.recipes[o]))this.addRecipeStep(n,r,e);for(let n of e.recipeObjectives)this.addRecipeStep(n.recipe,r,e,n);e.steps.sort((n,o)=>(n.output!=null?0:1)-(o.output!=null?0:1))}static addItemStep(r,e,n){let o=n.itemValues[r],a=n.steps,c=re.zero;n.data.itemIncludedIoRecipeIds[r].forEach(d=>{if(e.recipes[d]==null)return;let h=n.recipes[d];if(h?.out[r]==null)return;let v=h.out[r].mul(e.recipes[h.id]).div(h.time);c=c.add(v)});let s=n.itemValues[r].in;s&&(c=c.add(s));for(let d of n.recipeObjectives){let f=d.recipe;f.out[r]&&(c=c.add(f.out[r].mul(d.value).div(f.time)))}if(e.unproduceable[r]&&(c=c.add(e.unproduceable[r])),e.excluded[r]&&(c=c.add(e.excluded[r])),c.nonzero()){let d={id:a.length.toString(),itemId:r,items:c};if(o.out.gt(re.zero)&&(d.output=o.out,d.parents={"":d.output}),a.push(d),e.surplus[r]?.nonzero()){let f=re(c.sub(e.surplus[r]).toNumber());d.surplus=f.isZero()?d.items:e.surplus[r]}}}static assignRecipes(r,e){let n=e.steps,o=Object.keys(r.recipes).map(s=>e.recipes[s]);o.push(...e.recipeObjectives.map(s=>s.recipe));for(let s of n.filter(d=>d.recipeId==null)){let d=o.findIndex(f=>f.id===s.itemId&&f.produces.has(s.itemId));d!==-1&&(s.recipeId=o[d].id,o.splice(d,1))}let a={};for(let s of n.filter(d=>d.recipeId==null))s.itemId&&(a[s.itemId]=o.filter(d=>s.itemId&&d.produces.has(s.itemId)).sort((d,f)=>Object.keys(d.out).length-Object.keys(f.out).length).map(d=>d.id));let c=Object.keys(a).sort((s,d)=>a[s].length-a[d].length);for(let s of c)for(let d of a[s])if(!n.some(f=>f.recipeId===d)){let f=n.find(h=>h.itemId===s);if(f){f.recipeId=d;break}}}static addRecipeStep(r,e,n,o){let a=n.steps,c=a.filter(d=>d.machines==null),s=c.find(d=>d.recipeId===r.id);if(s||(s=c.find(d=>d.recipeId==null&&d.itemId!=null&&r.produces.has(d.itemId))),!s){let d=a.findIndex(f=>f.itemId&&r.produces.has(f.itemId));s={id:a.length.toString()},d!==-1&&d<a.length-1?a.splice(d+1,0,s):a.push(s)}s.recipeId=r.id,s.recipe=r,o?(s.machines=o.value,s.recipeObjectiveId=o.id):s.machines=e.recipes[r.id].add(s.machines??re.zero),Lt.adjustPowerPollution(s,r,n.data.game)}};var vi=t=>t.objectivesState,f_=Oe(vi,t=>t.ids),p_=Oe(vi,t=>t.entities),yi=Oe(f_,p_,Ln,(t,r,e)=>t.map(n=>r[n]).filter(n=>vt(n)?e.recipeEntities[n.targetId]!=null:e.itemEntities[n.targetId]!=null)),ba=Oe(yi,cr,$n,oo,ur,Rt,(t,r,e,n,o,a)=>t.map(c=>eo.adjustObjective(c,r,e,n,o,a))),d_=Oe(ba,cr,Cn,Vn,Rt,(t,r,e,n,o)=>t.map(a=>et(Ie({},a),{value:Lt.objectiveNormalizedRate(a,r,e,n,o)}))),m_=Oe(d_,ur,Rt,Zi,(t,r,e,n)=>zn.solve(t,r,e,n)),Ut=Oe(m_,ba,cr,$n,Cn,Vn,ur,Rt,(t,r,e,n,o,a,c,s)=>Lt.normalizeSteps(t.steps,r,e,n,o,a,c,s)),wa=Oe(vi,Un,qr,io,to,Ln,no,(t,r,e,n,o,a,c)=>({objectives:t,itemsState:r,recipesState:e,machinesState:n,settings:o,data:a,hash:c})),Ox=Oe(Ut,yi,Un,qr,(t,r,e,n)=>({objectives:r.reduce((o,a)=>(o[a.id]=a.machineId!=null||a.modules!=null||a.beacons!=null||a.overclock!=null,o),{}),items:t.reduce((o,a)=>(a.itemId&&(o[a.itemId]=e[a.itemId]!=null),o),{}),recipes:t.reduce((o,a)=>(a.recipeId&&(o[a.recipeId]=n[a.recipeId]!=null),o),{})})),Nx=Oe(Ut,cr,Rt,(t,r,e)=>{let n={},o={},a={},c={},s={},d={},f=re.zero,h=re.zero;for(let v of t){if(v.itemId!=null){if(v.belts?.nonzero()){let y=r[v.itemId].beltId;y!=null&&(n[y]||(n[y]=re.zero),n[y]=n[y].add(v.belts.ceil()))}if(v.wagons?.nonzero()){let y=r[v.itemId].wagonId;y!=null&&(o[y]||(o[y]=re.zero),o[y]=o[y].add(v.wagons.ceil()))}}if(v.recipeId!=null&&v.recipe!=null&&v.recipeSettings!=null){if(v.machines?.nonzero()&&!v.recipe.part){let T=v.recipeSettings,$=T.machineId;if(e.game===qt.DysonSphereProgram&&$===Ur.MiningMachine&&($=v.recipeId),$!=null){a[$]||(a[$]=re.zero);let R=v.machines.ceil();a[$]=a[$].add(R),T.modules!=null&&T.modules.forEach(P=>{P.id==null||P.count==null||P.id===Ur.Module||ya(c,[P.id],R.mul(P.count))})}}let y=v.recipeSettings?.beacons;if(y!=null)for(let A of y){let T=A.id,$=A.total;if(T==null||!$?.nonzero())continue;s[T]||(s[T]=re.zero);let R=$.ceil();s[T]=s[T].add(R),A.modules!=null&&A.modules.forEach(P=>{P.id==null||P.count==null||P.id===Ur.Module||ya(d,[P.id],R.mul(P.count))})}}v.power!=null&&(f=f.add(v.power)),v.pollution!=null&&(h=h.add(v.pollution))}return{belts:n,wagons:o,machines:a,modules:c,beacons:s,beaconModules:d,power:f,pollution:h}});function ya(t,r,e){r.forEach(n=>{t[n]||(t[n]=re.zero),t[n]=t[n].add(e)})}var Fx=Oe(Ut,ur,Rt,(t,r,e)=>t.reduce((n,o)=>{let a=[],c=[],s=[];if(o.itemId!=null&&o.items!=null){let d=o.itemId;a.push(nt.Item),c.push(...t.filter(qi("outputs","recipeId","machines")).filter(h=>h.outputs[d]!=null).map(h=>({step:h,value:h.outputs[d]})));let f=c.reduce((h,v)=>h.sub(v.value),re.one);f.nonzero()&&c.push({inputs:!0,value:f}),c.sort((h,v)=>v.value.sub(h.value).toNumber())}return o.recipeId!=null&&a.push(nt.Recipe),o.machines?.nonzero()&&a.push(nt.Machine),o.itemId!=null&&(s=e.itemRecipeIds[o.itemId],s.length&&a.push(nt.Recipes)),n[o.id]={tabs:a.map(d=>{let f=`step_${o.id}_${d}_tab`;return{id:f,label:d,command:()=>{history.replaceState({},"",`${window.location.href.replace(/#(.*)$/,"")}#${f}`)}}}),outputs:c,recipeIds:s,allRecipesIncluded:s.every(d=>!r.excludedRecipeIds.has(d))},n},{})),Dx=Oe(Ut,t=>t.reduce((r,e)=>(r[e.id]=e,r),{})),Bx=Oe(Ut,t=>t.reduce((r,e)=>(e.itemId!=null&&(r[e.itemId]=e),r),{})),Px=Oe(Ut,t=>{let r={},e={};for(let n of t){let o=[];if(n.parents){let a=Object.keys(n.parents);a.length===1&&e[a[0]]!=null&&(o=new Array(e[a[0]]+1).fill(!1))}e[n.id]=o.length,r[n.id]=o}for(let n=0;n<t.length;n++){let o=t[n];if(r[o.id].length)for(let a=n+1;a<t.length;a++){let c=t[a];if(r[c.id]){if(r[c.id].length===r[o.id].length){for(let s=n;s<a;s++){let d=t[s];r[d.id]&&(r[d.id][r[o.id].length-1]=!0)}break}else if(r[c.id].length<r[o.id].length)break}}}return r}),jx=Oe(Ut,Qi,(t,r)=>{if(r===ut.Auto){let e;for(let n of t)n.power!=null&&(e==null||n.power.lt(e))&&(e=n.power);return e=e??re.zero,e.lt(re(1000n))?ut.kW:e.lt(re(1000000n))?ut.MW:ut.GW}else return r}),Vx=Oe(qr,yi,(t,r)=>({machines:Object.keys(t).some(e=>t[e].fuelId!=null||t[e].machineId!=null||t[e].modules!=null||t[e].overclock!=null)||r.some(e=>e.fuelId!=null||e.machineId!=null||e.modules!=null||e.overclock!=null),beacons:Object.keys(t).some(e=>t[e].beacons!=null)||r.some(e=>e.beacons!=null),cost:Object.keys(t).some(e=>t[e].cost)}));var er=(()=>{class t{base64codes=new Uint8Array(256).fill(255);constructor(){for(let e=0;e<He.length;e++)this.base64codes[He.charCodeAt(e)]=e;this.base64codes[95]=0}nToId=Pn(e=>e/ar>=1?this.nToId(Math.floor(e/ar))+this.nToId(e%ar):He[e]);idToN=Pn(e=>{let n=Gi[e[0]];return e.length>1?(e=e.substring(1),n*Math.pow(ar,e.length)+this.idToN(e)):n});deflate(e){return $e(this,null,function*(){let n=yield this.compress(e,"deflate");return this.bytesToBase64(n)})}inflate(e){return $e(this,null,function*(){try{return yield this.inflateStr(e)}catch{console.warn("Router failed to parse url, checking for missing trailing characters...")}try{return yield this.inflateMend(e,"-")}catch{}try{return yield this.inflateMend(e,".")}catch{}return yield this.inflateMend(e,"_")})}inflateMend(e,n){return $e(this,null,function*(){let o=yield this.inflateStr(e+n);if(!o)throw new Error("Failed to parse, generated empty string");return console.warn(`Router mended url by appending '${n}'`),o})}inflateStr(e){return this.decompress(this.base64ToBytes(e))}bytesToBase64(e){let n="",o,a=e.length;for(o=2;o<a;o+=3)n+=He[e[o-2]>>2],n+=He[(e[o-2]&3)<<4|e[o-1]>>4],n+=He[(e[o-1]&15)<<2|e[o]>>6],n+=He[e[o]&63];return o===a+1&&(n+=He[e[o-2]>>2],n+=He[(e[o-2]&3)<<4],n+="__"),o===a&&(n+=He[e[o-2]>>2],n+=He[(e[o-2]&3)<<4|e[o-1]>>4],n+=He[(e[o-1]&15)<<2],n+="_"),n}getBase64Code(e){if(e>=this.base64codes.length)throw new Error("Unable to parse base64 string.");let n=this.base64codes[e];if(n===255)throw new Error("Unable to parse base64 string.");return n}base64ToBytes(e){if(e.length%4!==0)throw new Error("Unable to parse base64 string.");let n=e.indexOf("_");if(n!==-1&&n<e.length-2)throw new Error("Unable to parse base64 string.");let o=e.endsWith("__")?2:e.endsWith("_")?1:0,a=e.length,c=new Uint8Array(3*(a/4)),s;for(let d=0,f=0;d<a;d+=4,f+=3)s=this.getBase64Code(e.charCodeAt(d))<<18|this.getBase64Code(e.charCodeAt(d+1))<<12|this.getBase64Code(e.charCodeAt(d+2))<<6|this.getBase64Code(e.charCodeAt(d+3)),c[f]=s>>16,c[f+1]=s>>8&255,c[f+2]=s&255;return c.subarray(0,c.length-o)}compress(e,n="deflate"){return $e(this,null,function*(){let o=new TextEncoder().encode(e),a=new CompressionStream(n),c=a.writable.getWriter();c.write(o),c.close();let s=new Response(a.readable).arrayBuffer();return new Uint8Array(yield s)})}decompress(e,n="deflate"){return $e(this,null,function*(){let o=new DecompressionStream(n),a=o.writable.getWriter();a.write(e).catch(()=>{}),a.close().catch(()=>{});let c=new Response(o.readable).arrayBuffer();return new TextDecoder().decode(yield c)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var __="[Datasets]",xa=Ui(`${__} Load Mod`,$i());var Sa=(()=>{class t{http=ke(Li);store=ke(Wt);translateSvc=ke($r);cacheData={};cacheHash={};cacheI18n={};initialize(){sr([this.store.select(ro),this.translateSvc.lang$]).subscribe(([e])=>{this.requestData(e).subscribe()})}requestData(e){let n,o,a;this.cacheData[e]||(this.cacheData[e]=this.http.get(`data/${e}/data.json`).pipe(At(y=>n=y),Lr()));let c=this.cacheData[e];this.cacheHash[e]||(this.cacheHash[e]=this.http.get(`data/${e}/hash.json`).pipe(At(y=>o=y),Lr()));let s=this.cacheHash[e],d=this.translateSvc.currentLang,f=`${e}-${d}`,h=d==="en",v;return h?v=Bn(null):(this.cacheI18n[f]||(this.cacheI18n[f]=this.http.get(`data/${e}/i18n/${d}.json`).pipe(Bi(()=>(console.warn(`No localization file found for ${f}`),Bn(null))),At(y=>a=y??void 0),Lr())),v=this.cacheI18n[f]),sr([c,s,v]).pipe(At(()=>{(n||o||a)&&this.store.dispatch(xa({id:e,i18nId:f,data:n,hash:o,i18n:a}))}))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ea=(()=>{class t{event(e,n){Cr.production&&gtag("event",e,{event_category:n})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mn=(()=>{class t{compressionSvc=ke(er);zipFields(e){return e.join(ae).replace(/\**$/,"")}zipString(e){return e??""}zipRational(e){return e==null?"":e.toString()}zipNumber(e){return e==null?"":e.toString()}zipArray(e){return e==null?"":e.length?e.join(Me):Ne}zipNString(e,n){return e==null?"":this.compressionSvc.nToId(n.indexOf(e))}zipDiffSubset(e,n,o,a=o){if(e==null||n!=null&&Array.from(e).every(h=>n.has(h)))return"";if(e.size===0)return Ne;let c=new Set(o),s=[],d,f;return a.forEach((h,v)=>{if(c.has(h))if(e.has(h)){let y=this.compressionSvc.nToId(v);d==null?d=y:f=y}else d!=null&&(f==null?s.push(d):s.push(d+Me+f),d=void 0,f=void 0)}),d!=null&&(f==null?s.push(d):s.push(d+Me+f)),s.join(ae)}zipDiffString(e,n,o){return e===n||e==null?"":[e,this.compressionSvc.nToId(o.indexOf(e))]}zipDiffNumber(e,n){return e===n||e==null?"":e.toString()}zipDiffRational(e,n){return e==null||n!=null&&e.eq(n)?"":e.toString()}zipDiffBool(e,n){return e===n?"":e?Ge:Xi}zipDiffIndices(e,n){let o=e!=null?e.length>0?e.join(Me):Ne:"",a=n!=null?n.length>0?n.join(Me):Ne:"";return o===a?"":o}zipDiffArray(e,n,o){let a=e!=null?e.length>0?e.join(Me):Ne:"",c=n!=null?n.length>0?n.join(Me):Ne:"";return a===c?"":e==null||e.length===0?a:[a,e.map(s=>this.compressionSvc.nToId(o.indexOf(s))).join(Me)]}parseString(e,n){if(n!=null)return this.parseNString(e,n);if(e?.length)return e}parseBool(e){if(e?.length)return e===Ge}parseNumber(e){if(e?.length)return Number(e)}parseRational(e){if(e?.length)return re(e)}parseArray(e,n){if(n)return this.parseNArray(e,n);if(e?.length)return e===Ne?[]:e.split(Me)}parseIndices(e,n){if(e?.length)return e===Ne?[]:e.split(Me).map(o=>Number(o)).map(o=>n[o]??{})}parseNString(e,n){let o=this.parseString(e);return o==null?o:n[this.compressionSvc.idToN(o)]}parseNArray(e,n){let o=this.parseArray(e);return o==null?o:o.map(a=>n[this.compressionSvc.idToN(a)])}parseSubset(e,n){if(!e?.length)return;if(e===Ne)return new Set;let o=e.split(ae),a=new Set;for(let c of o){let[s,d]=c.split(Me).map(v=>this.compressionSvc.idToN(v)),f=d!=null?d+1:s+1;n.slice(s,f).forEach(v=>a.add(v))}return a}set(e,n,o){return a=>(c,s,...d)=>{let f=s(n),h=s(o),v=a(f,h,...d),y,A;Array.isArray(v)?[y,A]=[...v]:y=A=v,y&&(e.bare[c]=y,e.hash[c]=A)}}get(e){return n=>(n=n.bind(this),(o,...a)=>n(e[o],...a))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ue="_",An="?",U=function(t){return t.Version="v",t.Mod="b",t.Objectives="p",t.RecipeObjectives="q",t.Items="i",t.Recipes="r",t.Machines="f",t.Modules="m",t.Beacons="e",t.Settings="s",t.Zip="z",t}(U||{}),Tn=function(t){return t.ExpensiveDeprecation="The expensive setting has been removed. Please use or request an expensive data set instead.",t.LimitStepDeprecation="Limit steps have been replaced by limit objectives. Results may differ if using multiple objectives as limits apply to all objectives.",t}(Tn||{}),Ia=(()=>{class t{store=ke(Wt);analyticsSvc=ke(Ea);compressionSvc=ke(er);contentSvc=ke(Yi);translateSvc=ke($r);zipSvc=ke(Mn);migrate(e,n){if(Object.keys(n).length===0)return{modId:e??lr.modId,params:{},isBare:!0};n=Ie({},n);let o=pe(n.v,ge.Version0);this.analyticsSvc.event("unzip_version",o);let a=n.z==null;(a||o===ge.Version0)&&Object.keys(n).forEach(d=>{Array.isArray(n[d])?n[d]=n[d].map(f=>decodeURIComponent(f)):n[d]&&(n[d]=decodeURIComponent(n[d]))});let c=this.migrateAny(e,n,a,o);return this.displayWarnings(c.warnings),["o","i","r","m","e","b"].forEach(d=>{let f=c.params[d];typeof f=="string"&&(c.params[d]=[f])}),{modId:c.modId,params:c.params,isBare:c.isBare}}migrateAny(e,n,o,a){let s={modId:e,params:n,warnings:[],isBare:o};switch(a){case ge.Version0:return this.migrateV0(s);case ge.Version1:return this.migrateV1(s);case ge.Version2:return this.migrateV2(s);case ge.Version3:return this.migrateV3(s);case ge.Version4:return this.migrateV4(s);case ge.Version5:return this.migrateV5(s);case ge.Version6:return this.migrateV6(s);case ge.Version7:return this.migrateV7(s);case ge.Version8:return this.migrateV8(s);case ge.Version9:return this.migrateV9(s);case ge.Version10:return this.migrateV10(s);default:return s}}migrateV0(e){let{params:n}=e;if(n[U.Settings]){let a=ye(n[U.Settings]).split(ae),c=this.zipSvc.parseString(a[0]);c=c&&Hr.modHash[Hr.modHashV0.indexOf(c)],c=c??"";let s=this.zipSvc.parseNumber(a[6])??60,d=s===1?"0":s===3600?"2":"1";n[U.Settings]=this.zipSvc.zipFields([c,d,ye(n[U.Mod]),a[1],a[3],a[4],a[5],a[7],a[8],a[10],a[9],a[2],a[11],a[12]])}else n[U.Mod]&&(n[U.Settings]=this.zipSvc.zipFields([An,An,ye(n[U.Mod])]));return delete n[U.Mod],n[U.Version]=ge.Version1,this.migrateV1(e)}migrateV1(e){let{params:n,warnings:o}=e;if(n[U.Settings]){let c=ye(n[U.Settings]).split(ae),s=11;if(c.length>s){let d=c.splice(s,1);this.zipSvc.parseBool(d[0])&&o.push(Tn.ExpensiveDeprecation)}n[U.Settings]=this.zipSvc.zipFields(c)}return n[U.Version]=ge.Version4,this.migrateV4(e)}migrateV2(e){let{params:n}=e;if(n[U.Recipes]){let a=ye(n[U.Recipes]).split(ue),c=[],s=3;for(let d of a){let f=d.split(ae);if(f.length>s){let h=this.parseNNumber(f[s])?.toString();f[s]=this.zipSvc.zipString(h)}c.push(this.zipSvc.zipFields(f))}n[U.Recipes]=c.join(ue)}if(n[U.Machines]){let a=ye(n[U.Machines]).split(ue),c=[],s=2;for(let d of a){let f=d.split(ae);if(f.length>s){let h=this.parseNNumber(f[s])?.toString();f[s]=this.zipSvc.zipString(h)}c.push(this.zipSvc.zipFields(f))}n[U.Machines]=c.join(ue)}return n[U.Version]=ge.Version3,this.migrateV3(e)}migrateV3(e){let{params:n,warnings:o}=e;if(n[U.Settings]){let c=ye(n[U.Settings]).split(ae),s=10;if(c.length>s){let d=c.splice(s,1);this.zipSvc.parseBool(d[0])&&o.push(Tn.ExpensiveDeprecation)}n[U.Settings]=this.zipSvc.zipFields(c)}return n[U.Version]=ge.Version5,this.migrateV5(e)}migrateInlineBeaconsSection(e,n,o,a){if(e[n]){let s=ye(e[n]).split(ue),d=[];for(let f of s.map(h=>h.split(ae))){let h=o+1,v=h+1,y=v+3;if(f.length>o){let A,T,$;f.length>y&&($=f.splice(y,1)[0]),f.length>v&&(A=f.splice(v,1)[0]),f.length>h&&(T=f.splice(h,1)[0]);let R=f[o];f[o]=this.zipSvc.zipArray([a.length]),a.push(this.zipSvc.zipFields([R,this.zipSvc.zipString(T),this.zipSvc.zipString(A),this.zipSvc.zipString($)]))}d.push(this.zipSvc.zipFields(f))}e[n]=d.join(ue)}}migrateInlineBeacons(e){let n=[];return this.migrateInlineBeaconsSection(e.params,U.RecipeObjectives,4,n),this.migrateInlineBeaconsSection(e.params,U.Recipes,3,n),n.length&&(e.params[U.Beacons]=n.join(ue)),e}migrateV4(e){return e=this.migrateInlineBeacons(e),e.params[U.Version]=ge.Version6,this.migrateV6(e)}migrateV5(e){return e=this.migrateInlineBeacons(e),e.params[U.Version]=ge.Version7,this.migrateV7(e)}migrateInsertField(e,n,o){if(e[n]){let a=ye(e[n]).split(ue);for(let c=0;c<a.length;c++){let s=a[c].split(ae);s.length>o&&(s.splice(o,0,""),a[c]=this.zipSvc.zipFields(s))}e[n]=a.join(ue)}}migrateDeleteField(e,n,o){if(e[n]){let a=ye(e[n]).split(ue);for(let c=0;c<a.length;c++){let s=a[c].split(ae);s.length>o&&(s.splice(o,1),a[c]=this.zipSvc.zipFields(s))}e[n]=a.join(ue)}}migrateMoveUpField(e,n,o){if(e[n]!=null){let a=e[n];for(e.splice(n,1),e.length>o&&e.splice(o,0,"");e.length<=o;)e.push("");e[o]=a}}migrateToV8(e){let{params:n,isBare:o}=e,a=!1;if(this.migrateInsertField(n,U.RecipeObjectives,2),n[U.Objectives]){let c=ye(n[U.Objectives]).split(ue),s=[...c];for(let d=0;d<c.length;d++){let h=c[d].split(ae);if(h[2]==="3")if(o){let v=n[U.RecipeObjectives]?ye(n[U.RecipeObjectives]).split(ue):[];if(h.length>3){let y=[h[3],h[1],be.Limit.toString()],A=[h[0],"1",be.Maximize.toString()];v.push(this.zipSvc.zipFields(A)),v.push(this.zipSvc.zipFields(y)),a=!0}else v.push(this.zipSvc.zipFields([h[0],h[1]]));s.splice(d,1),n[U.RecipeObjectives]=v.join(ue)}else h[2]="0",s[d]=this.zipSvc.zipFields(h);else if(h.length>3){let v=[h[3],h[1],h[2],be.Limit.toString()],y=[h[0],"1","",be.Maximize.toString()];s[d]=this.zipSvc.zipFields(y),s.push(this.zipSvc.zipFields(v)),a=!0}}a&&e.warnings.push(Tn.LimitStepDeprecation),n[U.Objectives]=s.join(ue)}if(this.migrateDeleteField(n,U.Items,4),this.migrateInsertField(n,U.Recipes,1),n[U.Settings]){let c=ye(n[U.Settings]).split(ae),s=o?1:0;if(c.length>2+s){let d=this.zipSvc.parseArray(c[2+s]);if(d){let f=ye(n[U.Recipes]),h=f?f.split(ue):[];for(let v of d){let y=!1;for(let A=0;A<h.length;A++){let T=h[A].split(ae);T[0]===v&&(y=!0,T[1]=Ge,h[A]=this.zipSvc.zipFields(T))}y||h.push(this.zipSvc.zipFields([v,Ge]))}n[U.Recipes]=h.join(ue)}c.splice(2+s,1)}c.splice(s,0,""),this.migrateMoveUpField(c,16+s,20+s),this.migrateMoveUpField(c,15+s,19+s),this.migrateMoveUpField(c,14+s,18+s),this.migrateMoveUpField(c,13+s,17+s),n[U.Settings]=this.zipSvc.zipFields(c)}return n[U.Version]=ge.Version8,e}migrateV6(e){return e.isBare=!0,this.migrateV8(this.migrateToV8(e))}migrateV7(e){return e.isBare=!1,this.migrateV8(this.migrateToV8(e))}migrateV8(e){let{params:n}=e;if(n[U.RecipeObjectives]){let o=[];n[U.Objectives]&&(o=ye(n[U.Objectives]).split(ue));let a=ye(n[U.RecipeObjectives]).split(ue);for(let c of a){let s=c.split(ae),d=this.zipSvc.zipFields([s[0],s[1],"3",s[2],s[3],s[4],s[5],s[6],s[7]]);o.push(d)}n[U.RecipeObjectives]="",n[U.Objectives]=o.join(ue)}return this.migrateV9(e)}migrateInlineModulesSection(e,n,o,a){if(e[n]){let s=ye(e[n]).split(ue),d=[];for(let f of s.map(h=>h.split(ae))){if(f.length>o){let h=f[o],v=this.zipSvc.parseArray(h);if(v==null)continue;let y=new Map;for(let T of v){let $=y.get(T)??0;y.set(T,$+1)}let A=Array.from(y.keys()).map((T,$)=>a.length+$);f[o]=this.zipSvc.zipArray(A);for(let T of y.keys())a.push(this.zipSvc.zipFields([pe(y.get(T)?.toString(),""),T]))}d.push(this.zipSvc.zipFields(f))}e[n]=d.join(ue)}}migrateV9(e){let{params:n}=e,o=[];if(this.migrateInlineModulesSection(e.params,U.Beacons,1,o),this.migrateInlineModulesSection(e.params,U.Recipes,3,o),this.migrateInlineModulesSection(e.params,U.Objectives,5,o),e.params[U.Machines]){let c=ye(n[U.Machines]).split(ue),s=[],d=e.params[U.Beacons]?ye(e.params[U.Beacons]).split(ue):[],f=2,h=f+1,v=h+1;c.map(y=>y.split(ae)).forEach((y,A)=>{if(A===0&&y[0]===Ge&&(y[0]=Ne),this.migrateMoveUpField(y,5,6),y[0]!==Ne&&y[0]!==""&&y.length>1){let T=y[1];if(T){let $=T.split(Me)[0];y[1]=this.zipSvc.zipArray([o.length]),o.push(this.zipSvc.zipFields(["",$]))}}if(y.length>2){let T,$;if(y.length>v&&(T=y.splice(v,1)[0]),y.length>h){let P=y.splice(h,1)[0];if(P){let Q=P.split(Me)[0];$=[o.length],o.push(this.zipSvc.zipFields(["",Q]))}}let R=y[f];y[f]=this.zipSvc.zipArray([d.length]),d.push(this.zipSvc.zipFields([R,this.zipSvc.zipArray($),this.zipSvc.zipString(T)]))}s.push(this.zipSvc.zipFields(y))}),d.length&&(e.params[U.Beacons]=d.join(ue)),e.params[U.Machines]=s.join(ue)}if(o.length&&(e.params[U.Modules]=o.join(ue)),n[U.Settings]){let a=ye(n[U.Settings]).split(ae),c=e.isBare?5:4;if(a.length>c){let s=a.splice(c,1)[0];if(n[U.Machines]){let d=ye(n[U.Machines]).split(ue).map(h=>h.split(ae)),f=d.find(h=>h[0]===Ne||h[0]==="");if(f){for(;f.length<4;)f.push("");f[3]=s}else d.unshift(["","","",s]);n[U.Machines]=d.map(h=>this.zipSvc.zipFields(h)).join(ue)}else n[U.Machines]=["","","",s].join(ae);n[U.Settings]=a.join(ae)}}return n[U.Version]=ge.Version10,this.migrateV10(e)}migrateV10(e){let{params:n}=e;delete n[U.RecipeObjectives];let o=new Set,a=new Set,c=new Set,s=new Set,d=new Set;function f(M,O){O.size!==0&&(n[M]=Array.from(O).join(Me))}let h=n[U.Modules];delete n[U.Modules];let v=h?.split(ue),y=n[U.Beacons];delete n[U.Beacons];let A=y?.split(ue),T=n[U.Objectives];delete n[U.Objectives];let $=[],R=T?.split(ue).map((M,O)=>{let x=M.split(ae),u=O.toString();return $.push(u),x[8]===Ge&&o.add(u),x.splice(8,1),x.join(ae)}).filter(M=>M);R?.length&&(n.o=R),o.size&&(n.och=this.zipSvc.zipDiffSubset(o,void 0,$));let P=n[U.Items];delete n[U.Items];let Q=P?.split(ue).map(M=>{let O=M.split(ae),x=O[0];return O[1]===Ge&&a.add(x),O[4]===Ge&&c.add(x),O.splice(4,1),O.splice(1,1),O.join(ae)}).filter(M=>M);Q?.length&&(n.i=Q),f("v10iex",a),f("v10ich",c);let J=n[U.Recipes];delete n[U.Recipes];let j=J?.split(ue).map(M=>{let O=M.split(ae),x=O[0];return O[1]===Ge&&s.add(x),O[7]===Ge&&d.add(x),O.splice(7,1),O.splice(1,1),O.join(ae)}).filter(M=>M);j?.length&&(n.r=j),f("v10rex",s),f("v10rch",d);let Z=n[U.Machines];delete n[U.Machines];let Y,ne,me,_e,ve,he=[];Z?.split(ue).forEach((M,O)=>{let x=M.split(ae),u=x[0];O===0?(u===Ne&&(Y=[]),me=x[1],_e=x[2],ne=x[3],ve=x[4]):(Y?.push(u),x.length>1&&he.push(M))}),he.length&&(n.m=he),n.mmr=Y?.join(Me),n.mfr=ne,n.mer=me,n.mbe=_e,n.moc=ve;let De=n[U.Settings];if(delete n[U.Settings],De){let M=De.split(ae),O=e.isBare?M.splice(0,1)[0]:void 0;O&&(e.modId=O);let x=M[0];x&&x!==An&&f("v10tre",new Set(x.split(Me))),["odr","mpr","ibe","ifr","bmi","bre","bic","mit","icw","ifw","ipi","mbr","mps","rnp","omt","cfa","cma","cun","cex","csu","cmx","osm","cfp"].forEach((b,E)=>{n[b]=M[E+1]||void 0}),e.isBare||["ifr","bmi","bre","omt"].filter(E=>n[E]!=null).forEach(E=>{n[E]=this.parseNNumber(ye(n[E]))?.toString()})}let F=n[U.Mod];delete n[U.Mod];let S=F;S&&!e.isBare&&(S=Hr.modHash[this.compressionSvc.idToN(S)]),S&&(e.modId=S),n.e=v,n.b=A,n.v=ge.Version11,Xe(n);function D(M){return M.replaceAll(An,"").replaceAll(Ne,Ne)}return Object.keys(n).forEach(M=>{let O=n[M];Array.isArray(O)?n[M]=O.map(x=>D(x)):O&&(n[M]=D(O))}),e}restoreV10ResearchedTechnologies(e,n){let o=n.items.filter(f=>f.technology),a=o.map(f=>f.id);if(e==null||!a.length)return;let c=new Set(e),s=Wr(o),d;do{d=new Set;for(let f of c)s[f].technology?.prerequisites?.filter(v=>!c.has(v)).forEach(v=>d.add(v));d.forEach(f=>c.add(f))}while(d.size);if(c.size!==a.length)return c}parseNNumber(e){if(e?.length)return this.compressionSvc.idToN(e)}parseSet(e,n){if(e==null)return;let o=e.split(Me);return n==null?new Set(o):new Set(o.map(a=>n[this.compressionSvc.idToN(a)]))}displayWarnings(e){this.translateSvc.multi(["app.migrationWarning","OK"]).pipe(Vr()).subscribe(([n,o])=>{for(let a of e)this.contentSvc.confirm({message:a,header:n,acceptLabel:o,rejectVisible:!1})})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Y1=(()=>{class t{router=ke(Ci);store=ke(Wt);dataSvc=ke(Sa);compressionSvc=ke(er);zipSvc=ke(Mn);migrationSvc=ke(Ia);zipConfig=Vi(this.empty);version=ge.Version11;zipTail={v:this.version};route$=new Ri;ready$=new Ni(1);navigating$=new Oi(!1);get empty(){return{bare:{},hash:{}}}get emptyRecipeSettingsInfo(){return{idMap:{},list:[]}}get emptyMachineSettings(){return{moduleMap:{},beaconMap:{}}}constructor(){this.route$.pipe(Ht(e=>sr({params:e.params,queryParams:e.queryParams})),ji(this.navigating$),Di(([e,n])=>!n),jr(([e])=>e),Ht(o=>$e(this,[o],function*({params:e,queryParams:n}){return n=yield this.unzipQueryParams(n),{params:e,queryParams:n}})),jr(({params:e,queryParams:n})=>this.migrationSvc.migrate(e.id,n)),Ht(({modId:e,params:n,isBare:o})=>this.updateState(e,n,o))).subscribe(),this.ready$.pipe(Vr(),At(()=>{this.dataSvc.initialize()}),Ht(()=>this.store.select(wa)),Pi(0),Wi("hash"),jr(e=>this.zipState(e.objectives,e.itemsState,e.recipesState,e.machinesState,e.settings,e.data,e.hash)),Ht(e=>this.updateUrl(e))).subscribe()}updateUrl(e){return $e(this,null,function*(){let n=yield this.getHash(e);this.navigating$.next(!0),yield this.router.navigate([],{queryParams:n}),this.navigating$.next(!1);let o=this.router.url,a=o.split("?")[0];(a.endsWith("list")||a.endsWith("flow"))&&(Xr.routerState=o)})}zipState(e,n,o,a,c,s,d){let f=this.zipModulesBeacons(e,o,a,c,d),h=Object.keys(e.entities).map(v=>e.entities[v]);return this.zipObjectives(f,h,d),this.zipItems(f,n,d),this.zipRecipes(f,o,d),this.zipMachines(f,a,d),this.zipSettings(f,c,e.ids,s,d),this.zipConfig.set(f.config),f}stepHref(e,n,o){return $e(this,null,function*(){if(o==null)return null;let a;if(e.itemId!=null&&e.items!=null?a=[{id:"0",targetId:e.itemId,value:e.items,unit:st.Items,type:be.Output}]:e.recipeId!=null&&e.machines!=null&&(a=[{id:"0",targetId:e.recipeId,value:e.machines,unit:st.Machines,type:be.Output}]),a==null)return null;let c={objectives:this.empty,config:n,objectiveSettings:this.emptyMachineSettings,recipeSettings:this.emptyMachineSettings,machineSettings:this.emptyMachineSettings};return this.zipObjectives(c,a,o),yield this.getHash(c)})}getHash(e){return $e(this,null,function*(){let n=jn(e.objectives.bare,e.config.bare,this.zipTail),o=jn(e.objectives.hash,e.config.hash,this.zipTail),a=this.toString(o),s={z:yield this.compressionSvc.deflate(a),v:this.version},f=this.toString(n).length,v=this.toString(s).length;return f<Math.max(v,200)?n:s})}toParams(e){let n=e.split("&");return n.some(o=>!o.includes("="))?n.reduce((o,a)=>(o[a[0]]=a.substring(1),o),{}):n.reduce((o,a)=>{let[c,s]=a.split("=");return o[c]=s,o},{})}toString(e){return Object.keys(e).flatMap(n=>{let o=e[n];return Array.isArray(o)?o.map(a=>`${n}=${a}`):o?`${n}=${o}`:[]},"").join("&")}unzipQueryParams(e){return $e(this,null,function*(){let n=e.z;if(n!=null)try{let o=ye(n).replace(/\+/g,"-").replace(/\//g,".").replace(/=/g,"_"),a=yield this.compressionSvc.inflate(o);e=this.toParams(a),e.z=n}catch(o){throw console.error(o),new Error("RouterService failed to parse url")}return e})}updateState(e,n,o){return $e(this,null,function*(){if(e==null&&Object.keys(n).length===0){this.ready$.next();return}let[a,c]=yield Fi(this.dataSvc.requestData(e??lr.modId)),s={},d=o?void 0:c,f=this.unzipModules(n,d),h=this.unzipBeacons(n,f,d);s.objectivesState=this.unzipObjectives(n,f,h,d),s.itemsState=this.unzipItems(n,d),s.recipesState=this.unzipRecipes(n,f,h,d),s.machinesState=this.unzipMachines(n,f,h,d),s.settingsState=this.unzipSettings(e,n,h,pe(s.objectivesState?.ids,[]),a,c,d),Xe(s),this.dispatch(s),this.ready$.next()})}dispatch(e){this.store.dispatch(Ki({partial:e})),this.ready$.next()}zipModulesBeacons(e,n,o,a,c){let s=this.emptyRecipeSettingsInfo,d=this.emptyRecipeSettingsInfo,f=P=>this.zipMachineSettings(P,s,d,c),h=f(e.entities),v=f(n),y=f(o),A;if(a.beacons){let P=this.beaconModuleMap(a.beacons,s,c);A=this.zipBeaconArray(a.beacons,P,d,c)}let T=this.empty,$=["bare","hash"];return[["e",s.list],["b",d.list]].forEach(([P,Q])=>{Q.forEach(J=>{$.forEach(j=>{T[j][P]==null?T[j][P]=[J[j]]:T[j][P].push(J[j])})})}),{objectives:this.empty,config:T,objectiveSettings:h,recipeSettings:v,machineSettings:y,beacons:A}}zipMachineSettings(e,n,o,a){let c=this.emptyMachineSettings;for(let s of Object.keys(e)){let d=e[s];if(d.modules!=null&&(c.moduleMap[s]=this.zipModuleArray(d.modules,n,a)),d.beacons!=null){let f=this.beaconModuleMap(d.beacons,n,a);c.beaconMap[s]=this.zipBeaconArray(d.beacons,f,o,a)}}return c}beaconModuleMap(e,n,o){return e.map(a=>{if(a.modules!=null)return this.zipModuleArray(a.modules,n,o)})}zipModuleArray(e,n,o){return e.map(a=>{let c=this.zipSvc.zipRational(a.count),s={bare:this.zipSvc.zipFields([c,this.zipSvc.zipString(a.id)]),hash:this.zipSvc.zipFields([c,this.zipSvc.zipNString(a.id,o.modules)])};return n.idMap[s.bare]==null&&(n.idMap[s.bare]=n.list.length,n.list.push(s)),n.idMap[s.bare]})}unzipModules(e,n){return e.e==null?[]:e.e.map(o=>{let a=o.split(ae),c=0,s={count:this.zipSvc.parseRational(a[c++]),id:this.zipSvc.parseString(a[c++],n?.modules)};return Xe(s),s})}zipBeaconArray(e,n,o,a){return e.map((c,s)=>{let d=this.zipSvc.zipRational(c.count),f=this.zipSvc.zipArray(n[s]),h=this.zipSvc.zipRational(c.total),v={bare:this.zipSvc.zipFields([d,f,this.zipSvc.zipString(c.id),h]),hash:this.zipSvc.zipFields([d,f,this.zipSvc.zipNString(c.id,a.beacons),h])};return o.idMap[v.bare]==null&&(o.idMap[v.bare]=o.list.length,o.list.push(v)),o.idMap[v.bare]})}unzipBeacons(e,n,o){return e.b==null?[]:e.b.map(a=>{let c=a.split(ae),s=0,d={count:this.zipSvc.parseRational(c[s++]),modules:this.zipSvc.parseIndices(c[s++],n),id:this.zipSvc.parseString(c[s++],o?.beacons),total:this.zipSvc.parseRational(c[s++])};return Xe(d),d})}zipObjectives(e,n,o){if(n.length){e.objectives.bare.o=[],e.objectives.hash.o=[];for(let a of n){let c=this.zipSvc.zipDiffRational(a.value,re.one),s=this.zipSvc.zipDiffNumber(a.unit,st.Items),d=this.zipSvc.zipDiffNumber(a.type,be.Output),f=this.zipSvc.zipArray(e.objectiveSettings.moduleMap[a.id]),h=this.zipSvc.zipArray(e.objectiveSettings.beaconMap[a.id]),v=this.zipSvc.zipNumber(a.overclock);e.objectives.bare.o.push(this.zipSvc.zipFields([a.targetId,c,s,d,this.zipSvc.zipString(a.machineId),f,h,v,this.zipSvc.zipString(a.fuelId)])),e.objectives.hash.o.push(this.zipSvc.zipFields([this.zipSvc.zipNString(a.targetId,vt(a)?o.recipes:o.items),c,s,d,this.zipSvc.zipNString(a.machineId,o.machines),f,h,v,this.zipSvc.zipNString(a.fuelId,o.fuels)]))}}}unzipObjectives(e,n,o,a){if(e.o==null)return;let c=[],s={},d=1;for(let f of e.o){let h=f.split(ae),v=0,y=d.toString(),A={id:d.toString(),targetId:h[v++],value:pe(this.zipSvc.parseRational(h[v++]),re.one),unit:this.zipSvc.parseNumber(h[v++])??st.Items,type:this.zipSvc.parseNumber(h[v++])??be.Output,machineId:this.zipSvc.parseString(h[v++],a?.machines),modules:this.zipSvc.parseIndices(h[v++],n),beacons:this.zipSvc.parseIndices(h[v++],o),overclock:this.zipSvc.parseRational(h[v++]),fuelId:this.zipSvc.parseString(h[v++],a?.fuels)};a&&(A.targetId=pe(this.zipSvc.parseNString(A.targetId,vt(A)?a.recipes:a.items),"")),Xe(A),c.push(y),s[y]=A,d++}return{ids:c,index:d,entities:s}}zipItems(e,n,o){let a=Object.keys(n);if(a.length){e.config.bare.i=[],e.config.hash.i=[];for(let c of a){let s=n[c];e.config.bare.i.push(this.zipSvc.zipFields([c,this.zipSvc.zipString(s.beltId),this.zipSvc.zipString(s.wagonId)])),e.config.hash.i.push(this.zipSvc.zipFields([this.zipSvc.zipNString(c,o.items),this.zipSvc.zipNString(s.beltId,o.belts),this.zipSvc.zipNString(s.wagonId,o.wagons)]))}}}unzipItems(e,n){if(e.i==null)return;let o={};for(let a of e.i){let c=a.split(ae),s=0,d=pe(this.zipSvc.parseString(c[s++],n?.items),""),f={beltId:this.zipSvc.parseString(c[s++],n?.belts),wagonId:this.zipSvc.parseString(c[s++],n?.wagons)};Xe(f),Object.keys(f).length&&(o[d]=f)}return o}zipRecipes(e,n,o){let a=Object.keys(n);if(a.length){e.config.bare.r=[],e.config.hash.r=[];for(let c of a){let s=n[c],d=this.zipSvc.zipArray(e.recipeSettings.moduleMap[c]),f=this.zipSvc.zipArray(e.recipeSettings.beaconMap[c]),h=this.zipSvc.zipNumber(s.overclock),v=this.zipSvc.zipNumber(s.cost);e.config.bare.r.push(this.zipSvc.zipFields([c,this.zipSvc.zipString(s.machineId),d,f,h,v,this.zipSvc.zipString(s.fuelId)])),e.config.hash.r.push(this.zipSvc.zipFields([this.zipSvc.zipNString(c,o.recipes),this.zipSvc.zipNString(s.machineId,o.machines),d,f,h,v,this.zipSvc.zipNString(s.fuelId,o.fuels)]))}}}unzipRecipes(e,n,o,a){if(e.r==null)return;let c={};for(let s of e.r){let d=s.split(ae),f=0,h=pe(this.zipSvc.parseString(d[f++],a?.recipes),""),v={machineId:this.zipSvc.parseString(d[f++],a?.machines),modules:this.zipSvc.parseArray(d[f++])?.map(y=>n[Number(y)]??{}),beacons:this.zipSvc.parseArray(d[f++])?.map(y=>o[Number(y)]??{}),overclock:this.zipSvc.parseRational(d[f++]),cost:this.zipSvc.parseRational(d[f++]),fuelId:this.zipSvc.parseString(d[f++],a?.fuels)};Xe(v),Object.keys(v).length&&(c[h]=v)}return c}zipMachines(e,n,o){let a=Object.keys(n);if(a.length){e.config.bare.m=[],e.config.hash.m=[];for(let c of a){let s=n[c],d=this.zipSvc.zipArray(e.machineSettings.moduleMap[c]),f=this.zipSvc.zipArray(e.machineSettings.beaconMap[c]),h=this.zipSvc.zipNumber(s.overclock);e.config.bare.m.push(this.zipSvc.zipFields([c,d,f,this.zipSvc.zipString(s.fuelId),h])),e.config.hash.m.push(this.zipSvc.zipFields([this.zipSvc.zipNString(c,o.machines),d,f,this.zipSvc.zipNString(s.fuelId,o.fuels),h]))}}}unzipMachines(e,n,o,a){if(e.m==null)return;let c={};for(let s of e.m){let d=s.split(ae),f=0,h=pe(this.zipSvc.parseString(d[f++],a?.machines),""),v={modules:this.zipSvc.parseArray(d[f++])?.map(y=>n[Number(y)]??{}),beacons:this.zipSvc.parseArray(d[f++])?.map(y=>o[Number(y)]??{}),fuelId:this.zipSvc.parseString(d[f++],a?.fuels),overclock:this.zipSvc.parseRational(d[f++])};Xe(v),Object.keys(v).length&&(c[h]=v)}return c}zipSettings(e,n,o,a,c){let s=lr,d=this.zipSvc.set(e.config,n,s),f=d(this.zipSvc.zipDiffSubset.bind(this.zipSvc)),h=d(this.zipSvc.zipDiffNumber.bind(this.zipSvc)),v=d(this.zipSvc.zipDiffBool.bind(this.zipSvc)),y=d(this.zipSvc.zipDiffString.bind(this.zipSvc)),A=d(this.zipSvc.zipDiffRational.bind(this.zipSvc)),T=d(this.zipSvc.zipDiffArray.bind(this.zipSvc)),$=d(this.zipSvc.zipDiffIndices.bind(this.zipSvc));f("och",R=>R.checkedObjectiveIds,o),h("omt",R=>R.maximizeType),v("osm",R=>R.surplusMachinesOutput),h("odr",R=>R.displayRate),f("iex",R=>R.excludedItemIds,a.itemIds,c.items),f("ich",R=>R.checkedItemIds,a.itemIds,c.items),y("ibe",R=>R.beltId,c.belts),y("ipi",R=>R.pipeId,c.belts),y("icw",R=>R.cargoWagonId,c.wagons),y("ifw",R=>R.fluidWagonId,c.wagons),A("ifr",R=>R.flowRate),f("rex",R=>R.excludedRecipeIds,a.recipeIds,c.recipes),f("rch",R=>R.checkedRecipeIds,a.recipeIds,c.recipes),v("rnp",R=>R.netProductionOnly),h("mpr",R=>R.preset),T("mmr",R=>R.machineRankIds,c.machines),T("mfr",R=>R.fuelRankIds,c.fuels),T("mer",R=>R.moduleRankIds,c.modules),$("mbe",R=>R===s?void 0:e.beacons),A("moc",R=>R.overclock),A("mbr",R=>R.beaconReceivers),y("mps",R=>R.proliferatorSprayId,c.modules),h("mit",R=>R.inserterTarget),A("bmi",R=>R.miningBonus),A("bre",R=>R.researchBonus),h("bic",R=>R.inserterCapacity),f("tre",R=>R.researchedTechnologyIds,a.technologyIds,c.technologies),A("cfa",R=>R.costs.factor),A("cma",R=>R.costs.machine),A("cfp",R=>R.costs.footprint),A("cun",R=>R.costs.unproduceable),A("cex",R=>R.costs.excluded),A("csu",R=>R.costs.surplus),A("cmx",R=>R.costs.maximize)}unzipSettings(e,n,o,a,c,s,d){let f=this.zipSvc.get(n),h=f(this.zipSvc.parseSubset.bind(this.zipSvc)),v=f(this.zipSvc.parseNumber.bind(this.zipSvc)),y=f(this.zipSvc.parseBool.bind(this.zipSvc)),A=f(this.zipSvc.parseString.bind(this.zipSvc)),T=f(this.zipSvc.parseRational.bind(this.zipSvc)),$=f(this.zipSvc.parseArray.bind(this.zipSvc)),R=f(this.zipSvc.parseIndices.bind(this.zipSvc)),P={modId:e,checkedObjectiveIds:h("och",a),maximizeType:v("omt"),surplusMachinesOutput:y("osm"),displayRate:v("odr"),excludedItemIds:h("iex",s.items),checkedItemIds:h("ich",s.items),beltId:A("ibe",d?.belts),pipeId:A("ipi",d?.belts),cargoWagonId:A("icw",d?.wagons),fluidWagonId:A("ifw",d?.wagons),flowRate:T("ifr"),excludedRecipeIds:h("rex",s.recipes),checkedRecipeIds:h("rch",s.recipes),netProductionOnly:y("rnp"),preset:v("mpr"),machineRankIds:$("mmr",d?.machines),fuelRankIds:$("mfr",d?.fuels),moduleRankIds:$("mer",d?.modules),beacons:R("mbe",o),overclock:T("moc"),beaconReceivers:T("mbr"),proliferatorSprayId:A("mps",d?.modules),inserterTarget:v("mit"),miningBonus:T("bmi"),researchBonus:T("bre"),inserterCapacity:v("bic"),researchedTechnologyIds:h("tre",s.technologies)},Q={factor:T("cfa"),machine:T("cma"),footprint:T("cfp"),unproduceable:T("cun"),excluded:T("cex"),surplus:T("csu"),maximize:T("cmx")},J=this.migrationSvc.parseSet.bind(this.migrationSvc);if(n.v10iex&&(P.excludedItemIds=J(n.v10iex,d?.items)),n.v10ich&&(P.checkedItemIds=J(n.v10ich,d?.items)),n.v10rex&&(P.excludedRecipeIds=J(n.v10rex,d?.recipes)),n.v10rch&&(P.checkedRecipeIds=J(n.v10rch,d?.recipes)),n.v10tre&&(P.researchedTechnologyIds=J(n.v10tre,d?.technologies),P.researchedTechnologyIds=this.migrationSvc.restoreV10ResearchedTechnologies(P.researchedTechnologyIds,c)),Xe(Q),Object.keys(Q).length&&(P.costs=Q),Xe(P),!!Object.keys(P).length)return P}static \u0275fac=function(n){return new(n||t)};static \u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{Ea as a,ut as b,Dw as c,Xr as d,ha as e,Ia as f,nt as g,Pw as h,We as i,Ld as j,na as k,o_ as l,Jm as m,ww as n,xw as o,ia as p,Sw as q,ca as r,Lt as s,Ct as t,yi as u,ba as v,m_ as w,Ut as x,Ox as y,Nx as z,Fx as A,Dx as B,Bx as C,Px as D,jx as E,Vx as F,xa as G,Sa as H,Y1 as I};

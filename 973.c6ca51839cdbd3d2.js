"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[973],{1973:(st,g,a)=>{a.r(g),a.d(g,{MatrixModule:()=>rt});var c=a(6895),x=a(453),d=a(1905),m=a(6259),f=a(9841),Z=a(4004),h=a(2946),l=a(2526),t=a(4650),T=a(2997),A=a(5593),I=a(805),C=a(3608),u=a(403),v=a(5357),M=a(6188),w=a(1969);const b=function(e){return{value:e}};function J(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.runtime")),t.xp6(3),t.hij(" ",t.xi3(6,4,"matrix.runtimeValue",t.VKq(7,b,n.result.time))," ")}}function q(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.pivots")),t.xp6(3),t.Oqu(n.result.pivots)}}const Q=function(e,o){return{rows:e,cols:o}};function U(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,2,"matrix.size")),t.xp6(3),t.hij(" ",t.xi3(6,4,"matrix.sizeValue",t.WLB(7,Q,n.result.A.length,n.result.O.length))," ")}}function O(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"table",1)(1,"tr")(2,"th",2)(3,"div",4)(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.resetCost())}),t.ALo(8,"translate"),t.qZA()()()(),t.TgZ(9,"tr",6),t.ALo(10,"translate"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td")(15,"lab-input-number",7),t.NdJ("setValue",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.setCostFactor(r))}),t.qZA()()(),t.TgZ(16,"tr",6),t.ALo(17,"translate"),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"td")(22,"lab-input-number",7),t.NdJ("setValue",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.setCostFactory(r))}),t.qZA()()(),t.TgZ(23,"tr",6),t.ALo(24,"translate"),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"td")(29,"lab-input-number",7),t.NdJ("setValue",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.setCostInput(r))}),t.qZA()()(),t.TgZ(30,"tr",6),t.ALo(31,"translate"),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td")(36,"lab-input-number",7),t.NdJ("setValue",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.setCostIgnored(r))}),t.qZA()()()()}if(2&e){const n=t.oxw().ngIf;t.xp6(5),t.Oqu(t.lcZ(6,16,"matrix.costModifiers")),t.xp6(2),t.ekj("invisible",!n.settingsModified.cost),t.Q6J("pTooltip",t.lcZ(8,18,"matrix.costUndoTooltip")),t.xp6(2),t.Q6J("pTooltip",t.lcZ(10,20,"matrix.recipeCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(13,22,"matrix.recipe")),t.xp6(3),t.Q6J("value",n.settings.costFactor),t.xp6(1),t.Q6J("pTooltip",t.lcZ(17,24,"matrix.factoryCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(20,26,"matrix.factory")),t.xp6(3),t.Q6J("value",n.settings.costFactory),t.xp6(1),t.Q6J("pTooltip",t.lcZ(24,28,"matrix.inputCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(27,30,"matrix.input")),t.xp6(3),t.Q6J("value",n.settings.costInput),t.xp6(1),t.Q6J("pTooltip",t.lcZ(31,32,"matrix.ignoredCostTooltip")),t.xp6(3),t.Oqu(t.lcZ(34,34,"matrix.ignored")),t.xp6(3),t.Q6J("value",n.settings.costIgnored)}}function L(e,o){if(1&e&&(t.TgZ(0,"th",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw(3).ngIf;t.Udp("width",4*n.result.inputIds.length,"rem"),t.Q6J("colSpan",n.result.inputIds.length),t.xp6(1),t.hij(" ",t.lcZ(2,4,"matrix.inputs")," ")}}function N(e,o){if(1&e&&(t.TgZ(0,"th",15)(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function y(e,o){if(1&e&&(t.TgZ(0,"th",15)(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function F(e,o){if(1&e&&(t.TgZ(0,"th",15)(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function Y(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"th",12),t._uU(2),t.ALo(3,"translate"),t.qZA()(),t.TgZ(4,"tr"),t._UZ(5,"th",13),t.TgZ(6,"th",12),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",12),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,L,3,6,"th",14),t._UZ(13,"th",13),t.qZA(),t.TgZ(14,"tr"),t._UZ(15,"th",15),t.TgZ(16,"th",15),t._uU(17,"I"),t.qZA(),t.YNc(18,N,3,5,"th",16),t.YNc(19,y,3,6,"th",16),t.YNc(20,F,3,5,"th",16),t.TgZ(21,"th",13)(22,"div",4)(23,"span"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"button",5),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(3);return t.KtG(r.resetRecipeCost())}),t.ALo(27,"translate"),t.qZA()()()()}if(2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.Udp("width",4*(n.result.O.length+2),"rem"),t.Q6J("colSpan",n.result.O.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,20,"matrix.simplexCanonicalTableau")," "),t.xp6(4),t.Udp("width",4*n.result.itemIds.length,"rem"),t.Q6J("colSpan",n.result.itemIds.length),t.xp6(1),t.hij(" ",t.lcZ(8,22,"matrix.items")," "),t.xp6(2),t.Udp("width",4*n.result.recipeIds.length,"rem"),t.Q6J("colSpan",n.result.recipeIds.length),t.xp6(1),t.hij(" ",t.lcZ(11,24,"matrix.recipes")," "),t.xp6(2),t.Q6J("ngIf",n.result.inputIds.length),t.xp6(6),t.Q6J("ngForOf",n.result.itemIds),t.xp6(1),t.Q6J("ngForOf",n.result.recipeIds),t.xp6(1),t.Q6J("ngForOf",n.result.inputIds),t.xp6(4),t.Oqu(t.lcZ(25,26,"matrix.cost")),t.xp6(2),t.ekj("invisible",!n.recipesModified.cost),t.Q6J("pTooltip",t.lcZ(27,28,"matrix.costUndoTooltip"))}}function j(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"i",6),t.ALo(2,"iconClass"),t.qZA(),t.BQk()),2&e){const n=o.ngIf,i=t.oxw(4).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function S(e,o){if(1&e&&(t.TgZ(0,"i",6),t.ALo(1,"iconClass"),t.qZA()),2&e){const n=o.ngIf,i=t.oxw(5).ngIf;t.Tol(t.lcZ(1,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function E(e,o){if(1&e&&t.YNc(0,S,2,5,"i",23),2&e){const n=t.oxw(2).rowIndex,i=t.oxw(2).ngIf;t.Q6J("ngIf",i.result.inputIds[n-1-i.result.recipeIds.length])}}function R(e,o){if(1&e&&(t.TgZ(0,"td",20),t.YNc(1,j,3,6,"ng-container",21),t.YNc(2,E,1,1,"ng-template",null,22,t.W1O),t.qZA()),2&e){const n=t.MAs(3),i=t.oxw().rowIndex,r=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",r.result.recipeIds[i-1])("ngIfElse",n)}}function V(e,o){1&e&&(t.TgZ(0,"td",24)(1,"div",25),t._UZ(2,"i",26),t.qZA()())}function B(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",4)(1,"lab-input-number",29),t.NdJ("setValue",function(r){const _=t.CHM(n).ngIf,p=t.oxw(5);return t.KtG(p.setRecipeCost(_,r))}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",30),t.NdJ("click",function(){const s=t.CHM(n).ngIf,_=t.oxw(5);return t.KtG(_.setRecipeCost(s))}),t.ALo(4,"translate"),t.qZA()()}if(2&e){const n=o.ngIf,i=t.oxw().$implicit,r=t.oxw(3).ngIf;t.xp6(1),t.Q6J("pTooltip",t.lcZ(2,6,"matrix.recipeCost"))("hideButtons",!0)("value",i.toString()),t.xp6(2),t.ekj("invisible",!(null!=r.recipeRaw[n]&&r.recipeRaw[n].cost)),t.Q6J("pTooltip",t.lcZ(4,8,"matrix.recipeCostUndoTooltip"))}}function P(e,o){if(1&e&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(3).ngIf;t.Q6J("pTooltip",n.toString(i.precision)),t.xp6(1),t.hij(" ",n.toString(i.precision)," ")}}function $(e,o){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,B,5,10,"div",27),t.YNc(2,P,2,2,"ng-template",null,28,t.W1O),t.qZA()),2&e){const n=o.last,i=t.MAs(3),r=t.oxw().rowIndex,s=t.oxw(2).ngIf;t.Udp("width",n?8:4,"rem"),t.xp6(1),t.Q6J("ngIf",n&&s.result.recipeIds[r-1])("ngIfElse",i)}}function K(e,o){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,R,4,2,"td",17),t.YNc(2,V,3,0,"ng-template",null,18,t.W1O),t.YNc(4,$,4,4,"td",19),t.qZA()),2&e){const n=o.$implicit,i=o.rowIndex,r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",0!==i)("ngIfElse",r),t.xp6(3),t.Q6J("ngForOf",n)}}function H(e,o){if(1&e&&(t.TgZ(0,"th",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw(3).ngIf;t.Udp("width",4*n.result.inputIds.length,"rem"),t.Q6J("colSpan",n.result.inputIds.length),t.xp6(1),t.hij(" ",t.lcZ(2,4,"matrix.inputs")," ")}}function z(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function G(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.xi3(2,3,n,"recipe")),t.Q6J("pTooltip",i.data.recipeEntities[n].name)}}function D(e,o){if(1&e&&(t.TgZ(0,"th")(1,"i",6),t.ALo(2,"iconClass"),t.qZA()()),2&e){const n=o.$implicit,i=t.oxw(3).ngIf;t.xp6(1),t.Tol(t.lcZ(2,3,n)),t.Q6J("pTooltip",i.data.itemEntities[n].name)}}function W(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th",12),t._uU(2),t.ALo(3,"translate"),t.qZA()(),t.TgZ(4,"tr"),t._UZ(5,"th",13),t.TgZ(6,"th",12),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",12),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,H,3,6,"th",14),t._UZ(13,"th",13),t.qZA(),t.TgZ(14,"tr"),t._UZ(15,"th",15),t.TgZ(16,"th",15)(17,"div",32)(18,"span"),t._uU(19,"I"),t.qZA()()(),t.YNc(20,z,3,5,"th",33),t.YNc(21,G,3,6,"th",33),t.YNc(22,D,3,5,"th",33),t.TgZ(23,"th",13)(24,"div",32)(25,"span"),t._uU(26),t.ALo(27,"translate"),t.qZA()()()()),2&e){const n=t.oxw(2).ngIf;t.xp6(1),t.Udp("width",4*(n.result.O.length+2),"rem"),t.Q6J("colSpan",n.result.O.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,17,"matrix.solution")," "),t.xp6(4),t.Udp("width",4*n.result.itemIds.length,"rem"),t.Q6J("colSpan",n.result.itemIds.length),t.xp6(1),t.hij(" ",t.lcZ(8,19,"matrix.surplus")," "),t.xp6(2),t.Udp("width",4*n.result.recipeIds.length,"rem"),t.Q6J("colSpan",n.result.recipeIds.length),t.xp6(1),t.hij(" ",t.lcZ(11,21,"matrix.recipes")," "),t.xp6(2),t.Q6J("ngIf",n.result.inputIds.length),t.xp6(8),t.Q6J("ngForOf",n.result.itemIds),t.xp6(1),t.Q6J("ngForOf",n.result.recipeIds),t.xp6(1),t.Q6J("ngForOf",n.result.inputIds),t.xp6(4),t.Oqu(t.lcZ(27,23,"matrix.cost"))}}function X(e,o){if(1&e&&(t.TgZ(0,"td")(1,"div",31),t._uU(2),t.qZA()()),2&e){const n=o.$implicit,i=o.last,r=t.oxw(3).ngIf;t.Udp("width",i?8:4,"rem"),t.xp6(1),t.Q6J("pTooltip",n.toString(r.precision)),t.xp6(1),t.hij(" ",n.toString(r.precision)," ")}}function k(e,o){if(1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td",15),t.YNc(2,X,3,4,"td",19),t.qZA()),2&e){const n=t.oxw(2).ngIf;t.xp6(2),t.Q6J("ngForOf",n.result.O)}}const tt=function(e){return[e]};function nt(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div")(2,"small"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"p-table",8),t.YNc(6,Y,28,30,"ng-template",9),t.YNc(7,K,5,3,"ng-template",10),t.qZA(),t.TgZ(8,"p-table",11),t.YNc(9,W,28,25,"ng-template",9),t.YNc(10,k,3,1,"ng-template",10),t.qZA(),t.BQk()),2&e){const n=t.oxw().ngIf;t.xp6(3),t.Oqu(t.lcZ(4,5,"matrix.tableauPrecisionNote")),t.xp6(2),t.Q6J("scrollable",!0)("value",n.result.A),t.xp6(3),t.Q6J("scrollable",!0)("value",t.VKq(7,tt,n.result.O))}}function et(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"table",1)(2,"tr")(3,"th",2),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"tr")(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA()(),t.YNc(12,J,7,9,"tr",0),t.YNc(13,q,6,4,"tr",0),t.YNc(14,U,7,10,"tr",0),t.qZA(),t.YNc(15,O,37,36,"table",3),t.YNc(16,nt,11,9,"ng-container",0),t.BQk()),2&e){const n=o.ngIf;t.xp6(4),t.Oqu(t.lcZ(5,8,"matrix.statistics")),t.xp6(4),t.Oqu(t.lcZ(9,10,"matrix.simplexResult")),t.xp6(3),t.Oqu(n.result.resultType),t.xp6(1),t.Q6J("ngIf",null!=n.result.time),t.xp6(1),t.Q6J("ngIf",null!=n.result.pivots),t.xp6(1),t.Q6J("ngIf",n.result.A&&n.result.O),t.xp6(1),t.Q6J("ngIf",n.result.A),t.xp6(1),t.Q6J("ngIf",n.result.A&&n.result.O&&n.result.itemIds&&n.result.recipeIds&&n.result.inputIds)}}const ot=[{path:"",component:(()=>{class e{constructor(n){this.store=n,this.vm$=(0,f.a)([this.store.select(l.QI.p5),this.store.select(l.lx.Ue),this.store.select(l.lx.O8),this.store.select(l.lx.IB),this.store.select(l.Zr.x1),this.store.select(l.Zr.Ko),this.store.select(l.uP.Pu)]).pipe((0,Z.U)(([i,r,s,_,p,at,lt])=>({result:i,recipesModified:r,data:s,recipeRaw:_,settingsModified:p,settings:at,precision:lt[h.sg.Items].precision})))}setCostFactor(n){this.store.dispatch(new l.Zr.BD(n))}setCostFactory(n){this.store.dispatch(new l.Zr.Bt(n))}setCostInput(n){this.store.dispatch(new l.Zr.R2(n))}setCostIgnored(n){this.store.dispatch(new l.Zr.bJ(n))}setRecipeCost(n,i){this.store.dispatch(new l.lx.aq({id:n,value:i}))}resetCost(){this.store.dispatch(new l.Zr.Z8)}resetRecipeCost(){this.store.dispatch(new l.lx.Z8)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["lab-matrix"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"result-info","my-3"],["colspan","2"],["class","result-info my-3",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","icon","fa-solid fa-rotate-left",1,"ms-3","p-button-outlined","p-button-rounded",3,"pTooltip","click"],[3,"pTooltip"],["width","8rem",3,"value","setValue"],["scrollDirection","both","scrollHeight","80vh","styleClass","p-datatable-sm",3,"scrollable","value"],["pTemplate","header"],["pTemplate","body"],["scrollDirection","both","styleClass","p-datatable-sm",3,"scrollable","value"],[3,"colSpan"],[2,"width","8rem"],[3,"colSpan","width",4,"ngIf"],[2,"width","4rem"],["style","width: 4rem",4,"ngFor","ngForOf"],["pFrozenColumn","","style","width: 4rem",4,"ngIf","ngIfElse"],["objectiveRow",""],[3,"width",4,"ngFor","ngForOf"],["pFrozenColumn","",2,"width","4rem"],[4,"ngIf","ngIfElse"],["notRecipe",""],[3,"class","pTooltip",4,"ngIf"],["pFrozenColumn","",1,"fw-bold","text-center",2,"width","4rem"],[1,"d-flex","justify-content-center","w-100"],[1,"fa-solid","fa-bullseye"],["class","d-flex align-items-center justify-content-between",4,"ngIf","ngIfElse"],["valueCell",""],["tooltipPosition","left","width","6rem",3,"pTooltip","hideButtons","value","setValue"],["pButton","","pRipple","","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"ms-3","p-button-outlined","p-button-rounded",3,"pTooltip","click"],[1,"overflow-hidden","text-truncate",3,"pTooltip"],[1,"d-flex","align-items-center","h-100"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.YNc(0,et,17,12,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[c.sg,c.O5,A.Hq,I.jx,C.u,u.iA,u.on,v.l,c.Ov,M.X$,w.Y],styles:["table.result-info[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.result-info[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead th{position:sticky;top:5rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tfoot th{border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]     .p-datatable .p-datatable-tfoot th, [_nghost-%COMP%]     .p-datatable .p-datatable-tfoot td{padding:.5rem}"],changeDetection:0}),e})()}];let it=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(ot),m.Bz]}),e})(),rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,x.o,d.S,it]}),e})()}}]);
"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[50],{5050:(Q,d,o)=>{o.r(d),o.d(d,{CollectionComponent:()=>r});var m=o(6895),g=o(4004),P=o(9841),f=o(2518),E=o(3087),t=o(4650),C=o(4258),u=o(6188),M=o(2997),T=o(4489),h=o(4006),y=o(805),A=o(8676),D=o(5593),v=o(5722),x=o(1795),s=o(403),Z=o(1969);function L(n,a){1&n&&(t.TgZ(0,"th",10)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p-sortIcon",11),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"data.category")))}function I(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-multiSelect",14),t.NdJ("onChange",function(i){const c=t.CHM(e).filterCallback;return t.KtG(c(i.value))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}if(2&n){const e=a.$implicit,l=t.oxw(3).ngIf;t.Q6J("ngModel",e)("options",l.options.categories)("maxSelectedLabels",1)("selectedItemsLabel",t.lcZ(1,5,"data.selectedLabel"))("placeholder",t.lcZ(2,7,"data.any"))}}function U(n,a){1&n&&(t.TgZ(0,"th")(1,"p-columnFilter",12),t.YNc(2,I,3,9,"ng-template",13),t.qZA()())}function b(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"th",6)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"p-sortIcon",7),t.qZA(),t.YNc(6,L,5,3,"th",8),t.qZA(),t.TgZ(7,"tr")(8,"th"),t._UZ(9,"p-columnFilter",9),t.qZA(),t.YNc(10,U,3,0,"th",0),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(3),t.Oqu(t.lcZ(4,3,"data.name")),t.xp6(3),t.Q6J("ngIf","category"!==e.collection.type),t.xp6(4),t.Q6J("ngIf","category"!==e.collection.type)}}function R(n,a){if(1&n&&(t.TgZ(0,"td")(1,"a",15),t._UZ(2,"button",16),t.ALo(3,"iconClass"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/data/categories/"+e.category.id),t.xp6(1),t.Q6J("label",e.category.name)("icon",t.xi3(3,3,e.category.id,"category"))}}function B(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"a",15),t._UZ(3,"button",16),t.ALo(4,"iconClass"),t.qZA()(),t.YNc(5,R,4,6,"td",0),t.qZA()),2&n){const e=a.$implicit,l=t.oxw().ngIf;t.xp6(2),t.Q6J("routerLink",e.id),t.xp6(1),t.Q6J("label",e.name)("icon",t.xi3(4,4,e.id,l.collection.type)),t.xp6(2),t.Q6J("ngIf","category"!==l.collection.type)}}const K=function(){return["category.id"]};function W(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"p-breadcrumb",1),t.TgZ(2,"p-table",2,3),t.YNc(4,b,11,5,"ng-template",4),t.YNc(5,B,6,7,"ng-template",5),t.qZA(),t.BQk()),2&n){const e=a.ngIf,l=t.oxw();t.xp6(1),t.Q6J("home",e.home)("model",e.breadcrumb),t.xp6(1),t.Q6J("value",e.value)("paginator",!0)("rows",25)("rowsPerPageOptions",l.rowsPerPageOptions)("globalFilterFields",t.DdM(7,K))}}class r{constructor(a,e,l,i){this.route=a,this.translateSvc=e,this.store=l,this.dataRouteSvc=i,this.collection$=this.route.data.pipe((0,g.U)(_=>_)),this.breadcrumb$=this.collection$.pipe((0,g.U)(_=>[{label:this.translateSvc.instant(_.label)}])),this.vm$=(0,P.a)([this.collection$,this.breadcrumb$,this.dataRouteSvc.home$,this.store.select(E.Zr.FW),this.store.select(E.Zr.pY)]).pipe((0,g.U)(([_,c,p,J,O])=>({collection:_,breadcrumb:c,value:this.getValue(_,O),home:p,options:J,data:O}))),this.rowsPerPageOptions=[10,25,50,100,500,1e3]}getValue(a,e){const l=e[a.ids];let i;switch(a.type){case"category":i=e.categoryEntities;break;case"item":i=e.itemEntities;break;case"recipe":i=e.recipeEntities}return l.map(_=>{const c=i[_],p={id:c.id,name:c.name};return"category"!==a.type&&(p.category=e.categoryEntities[c.category]),p})}}r.\u0275fac=function(a){return new(a||r)(t.Y36(C.gz),t.Y36(u.sK),t.Y36(M.yh),t.Y36(T.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[3,"home","model"],["styleClass","p-datatable-sm",3,"value","paginator","rows","rowsPerPageOptions","globalFilterFields"],["collectionTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],["field","name"],["pSortableColumn","category.name",4,"ngIf"],["type","text","field","name"],["pSortableColumn","category.name"],["field","category.name"],["field","category.id","matchMode","in"],["pTemplate","filter"],["appendTo","body",3,"ngModel","options","maxSelectedLabels","selectedItemsLabel","placeholder","onChange"],["queryParamsHandling","preserve",3,"routerLink"],["pButton","","pRipple","","type","button",1,"p-button-link",3,"label","icon"]],template:function(a,e){1&a&&(t.YNc(0,W,6,8,"ng-container",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,e.vm$))},dependencies:[m.ez,m.O5,m.Ov,f.o,h.JJ,h.On,y.jx,A.a,C.rH,D.Hq,v.NU,x.H,s.iA,s.lQ,s.fz,s.xl,u.X$,Z.Y],styles:["th[_ngcontent-%COMP%]{width:50%}"],changeDetection:0})}}]);